
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="EvoTorch is an open source evolutionary computation library developed at NNAISENSE, built on top of PyTorch.">
      
      
      
      
        <link rel="prev" href="../../examples/notebooks/reacher_mpc/">
      
      
        <link rel="next" href="core/">
      
      
      <link rel="icon" href="../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Index - EvoTorch</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="orange" data-md-color-accent="orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#evotorch" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest version.
  <a href="../../..">
    <strong>Click here to go to latest.</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://evotorch.ai" title="EvoTorch" class="md-header__button md-logo" aria-label="EvoTorch" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EvoTorch
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Index
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="orange" data-md-color-accent="orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-orange" data-md-color-accent="deep-orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/nnaisense/evotorch" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    evotorch
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../quickstart/" class="md-tabs__link">
        
  
  
    
  
  Quickstart

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../user_guide/general_usage/" class="md-tabs__link">
          
  
  
    
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../advanced_usage/solution_batch/" class="md-tabs__link">
          
  
  
    
  
  Advanced Usage

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../examples/" class="md-tabs__link">
          
  
  
    
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
    
  
  API Reference

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://evotorch.ai" title="EvoTorch" class="md-nav__button md-logo" aria-label="EvoTorch" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    EvoTorch
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/nnaisense/evotorch" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    evotorch
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quickstart
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/general_usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    General Usage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/algorithm_usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Algorithm Usage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/algorithms_tour/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Algorithms Tour
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/problems/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Defining Problems
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/problem_parallelization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Problem Parallelization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/neuroevolution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Neuroevolution
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/gym/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Neuroevolution for Gym
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/supervised_ne/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Supervised Neuroevolution
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Advanced Usage
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Advanced Usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced_usage/solution_batch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Manipulating Solutions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced_usage/hooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using Hooks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced_usage/dist_based/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Distributed Evolution Strategies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced_usage/custom_ea/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom Searchers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced_usage/custom_logger/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom Loggers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced_usage/ray_cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using Ray Clusters
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../examples/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Notebooks
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Notebooks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/notebooks/Brax_Experiments_Visualization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Visualization of the brax Experiment Results
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/notebooks/Brax_Experiments_with_PGPE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Solving a Brax environment using EvoTorch
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/notebooks/Evolving_Objects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evolving Objects
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/notebooks/Feature_Space_Illumination_with_MAPElites/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Feature Space Illumination with MAPElites
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/notebooks/Genetic_Programming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Genetic Programming using EvoTorch
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/notebooks/Gym_Experiments_with_PGPE_and_CoSyNE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gym Experiments with PGPE and CoSyNE
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/notebooks/Minimizing_Lennard-Jones_Atom_Cluster_Potentials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Minimising Lennard-Jones Atom Cluster Potentials with Evolution
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/notebooks/Training_MNIST30K/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Training MNIST30K
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/notebooks/Variational_Quantum_Eigensolvers_with_SNES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Variational Quantum Eigensolvers with SNES
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/notebooks/batched_searches/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Maintaining a batch of populations using the functional EvoTorch API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/notebooks/constrained/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Solving constrained optimization problems
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/notebooks/func_rl_ga/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evolving objects using the functional operators API of EvoTorch
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/notebooks/functional_ops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Genetic algorithm with the help of functional operators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/notebooks/multiobj_batched_ops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multiobjective optimization via functional operators API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/notebooks/problem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Solving reinforcement learning tasks using functional evolutionary algorithms
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/notebooks/reacher_mpc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Model Predictive Control (MPC) with EvoTorch
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="./" class="md-nav__link md-nav__link--active">
              
  
  
  <span class="md-ellipsis">
    Evotorch
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link md-nav__link--active" for="__nav_6_1" id="__nav_6_1_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            Evotorch
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Core
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="decorators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Decorators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="distributions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Distributions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="optimizers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Optimizers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Testing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="algorithms/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Algorithms
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_8" id="__nav_6_1_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_8">
            <span class="md-nav__icon md-icon"></span>
            Algorithms
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="algorithms/cmaes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cmaes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="algorithms/ga/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ga
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="algorithms/mapelites/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mapelites
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="algorithms/pycmaes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pycmaes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="algorithms/searchalgorithm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Searchalgorithm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_8_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="algorithms/distributed/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Distributed
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_8_7" id="__nav_6_1_8_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_8_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_8_7">
            <span class="md-nav__icon md-icon"></span>
            Distributed
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="algorithms/distributed/gaussian/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gaussian
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_8_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="algorithms/functional/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Functional
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_8_8" id="__nav_6_1_8_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_8_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_8_8">
            <span class="md-nav__icon md-icon"></span>
            Functional
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="algorithms/functional/funcadam/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Funcadam
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="algorithms/functional/funccem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Funccem
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="algorithms/functional/funcclipup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Funcclipup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="algorithms/functional/funcpgpe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Funcpgpe
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="algorithms/functional/funcsgd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Funcsgd
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="algorithms/functional/misc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Misc
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_8_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="algorithms/restarter/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Restarter
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_8_9" id="__nav_6_1_8_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_8_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_8_9">
            <span class="md-nav__icon md-icon"></span>
            Restarter
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="algorithms/restarter/modify_restart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modify restart
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="algorithms/restarter/restart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Restart
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="neuroevolution/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Neuroevolution
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_9" id="__nav_6_1_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_9">
            <span class="md-nav__icon md-icon"></span>
            Neuroevolution
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="neuroevolution/baseneproblem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Baseneproblem
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="neuroevolution/gymne/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gymne
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="neuroevolution/neproblem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Neproblem
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="neuroevolution/supervisedne/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Supervisedne
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="neuroevolution/vecgymne/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vecgymne
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_9_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="neuroevolution/net/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Net
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_9_7" id="__nav_6_1_9_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_9_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_9_7">
            <span class="md-nav__icon md-icon"></span>
            Net
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="neuroevolution/net/functional/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Functional
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="neuroevolution/net/layers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Layers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="neuroevolution/net/misc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Misc
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="neuroevolution/net/multilayered/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multilayered
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="neuroevolution/net/parser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parser
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="neuroevolution/net/rl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rl
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="neuroevolution/net/runningnorm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Runningnorm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="neuroevolution/net/runningstat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Runningstat
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="neuroevolution/net/statefulmodule/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Statefulmodule
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="neuroevolution/net/vecrl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vecrl
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_10" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="operators/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Operators
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_10" id="__nav_6_1_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_10">
            <span class="md-nav__icon md-icon"></span>
            Operators
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="operators/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="operators/functional/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Functional
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="operators/real/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Real
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="operators/sequence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sequence
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_11" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="tools/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Tools
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_11" id="__nav_6_1_11_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_11">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tools/cloning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cloning
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tools/constraints/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Constraints
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tools/hook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hook
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tools/immutable/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Immutable
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tools/misc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Misc
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tools/objectarray/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Objectarray
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tools/ranking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ranking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tools/readonlytensor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Readonlytensor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tools/recursiveprintable/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Recursiveprintable
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tools/structures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Structures
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tools/tensorframe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tensorframe
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tools/tensormaker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tensormaker
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#evotorch" class="md-nav__link">
    <span class="md-ellipsis">
      evotorch
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evotorch.Problem" class="md-nav__link">
    <span class="md-ellipsis">
      Problem
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Problem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.actor_index" class="md-nav__link">
    <span class="md-ellipsis">
      actor_index
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.actors" class="md-nav__link">
    <span class="md-ellipsis">
      actors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.after_eval_hook" class="md-nav__link">
    <span class="md-ellipsis">
      after_eval_hook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.after_grad_hook" class="md-nav__link">
    <span class="md-ellipsis">
      after_grad_hook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.aux_device" class="md-nav__link">
    <span class="md-ellipsis">
      aux_device
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.before_eval_hook" class="md-nav__link">
    <span class="md-ellipsis">
      before_eval_hook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.before_grad_hook" class="md-nav__link">
    <span class="md-ellipsis">
      before_grad_hook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.device" class="md-nav__link">
    <span class="md-ellipsis">
      device
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.dtype" class="md-nav__link">
    <span class="md-ellipsis">
      dtype
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.eval_data_length" class="md-nav__link">
    <span class="md-ellipsis">
      eval_data_length
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.eval_dtype" class="md-nav__link">
    <span class="md-ellipsis">
      eval_dtype
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.generator" class="md-nav__link">
    <span class="md-ellipsis">
      generator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.has_own_generator" class="md-nav__link">
    <span class="md-ellipsis">
      has_own_generator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.initial_lower_bounds" class="md-nav__link">
    <span class="md-ellipsis">
      initial_lower_bounds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.initial_upper_bounds" class="md-nav__link">
    <span class="md-ellipsis">
      initial_upper_bounds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.is_main" class="md-nav__link">
    <span class="md-ellipsis">
      is_main
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.is_multi_objective" class="md-nav__link">
    <span class="md-ellipsis">
      is_multi_objective
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.is_remote" class="md-nav__link">
    <span class="md-ellipsis">
      is_remote
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.is_single_objective" class="md-nav__link">
    <span class="md-ellipsis">
      is_single_objective
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.lower_bounds" class="md-nav__link">
    <span class="md-ellipsis">
      lower_bounds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.num_actors" class="md-nav__link">
    <span class="md-ellipsis">
      num_actors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.objective_sense" class="md-nav__link">
    <span class="md-ellipsis">
      objective_sense
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.remote_hook" class="md-nav__link">
    <span class="md-ellipsis">
      remote_hook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.senses" class="md-nav__link">
    <span class="md-ellipsis">
      senses
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.solution_length" class="md-nav__link">
    <span class="md-ellipsis">
      solution_length
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.status" class="md-nav__link">
    <span class="md-ellipsis">
      status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.stores_solution_stats" class="md-nav__link">
    <span class="md-ellipsis">
      stores_solution_stats
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.upper_bounds" class="md-nav__link">
    <span class="md-ellipsis">
      upper_bounds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.all_remote_envs" class="md-nav__link">
    <span class="md-ellipsis">
      all_remote_envs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.all_remote_problems" class="md-nav__link">
    <span class="md-ellipsis">
      all_remote_problems
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.compare_solutions" class="md-nav__link">
    <span class="md-ellipsis">
      compare_solutions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.ensure_numeric" class="md-nav__link">
    <span class="md-ellipsis">
      ensure_numeric
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.ensure_single_objective" class="md-nav__link">
    <span class="md-ellipsis">
      ensure_single_objective
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.ensure_unbounded" class="md-nav__link">
    <span class="md-ellipsis">
      ensure_unbounded
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.evaluate" class="md-nav__link">
    <span class="md-ellipsis">
      evaluate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.generate_batch" class="md-nav__link">
    <span class="md-ellipsis">
      generate_batch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.generate_values" class="md-nav__link">
    <span class="md-ellipsis">
      generate_values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.get_obj_order_descending" class="md-nav__link">
    <span class="md-ellipsis">
      get_obj_order_descending
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.is_better" class="md-nav__link">
    <span class="md-ellipsis">
      is_better
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.is_on_cpu" class="md-nav__link">
    <span class="md-ellipsis">
      is_on_cpu
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.is_worse" class="md-nav__link">
    <span class="md-ellipsis">
      is_worse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.kill_actors" class="md-nav__link">
    <span class="md-ellipsis">
      kill_actors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.make_callable_evaluator" class="md-nav__link">
    <span class="md-ellipsis">
      make_callable_evaluator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.manual_seed" class="md-nav__link">
    <span class="md-ellipsis">
      manual_seed
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.normalize_obj_index" class="md-nav__link">
    <span class="md-ellipsis">
      normalize_obj_index
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Problem.sample_and_compute_gradients" class="md-nav__link">
    <span class="md-ellipsis">
      sample_and_compute_gradients
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evotorch.ProblemBoundEvaluator" class="md-nav__link">
    <span class="md-ellipsis">
      ProblemBoundEvaluator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ProblemBoundEvaluator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#evotorch.ProblemBoundEvaluator.__call__" class="md-nav__link">
    <span class="md-ellipsis">
      __call__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.ProblemBoundEvaluator.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evotorch.Solution" class="md-nav__link">
    <span class="md-ellipsis">
      Solution
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Solution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#evotorch.Solution.device" class="md-nav__link">
    <span class="md-ellipsis">
      device
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Solution.dtype" class="md-nav__link">
    <span class="md-ellipsis">
      dtype
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Solution.eval_dtype" class="md-nav__link">
    <span class="md-ellipsis">
      eval_dtype
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Solution.eval_shape" class="md-nav__link">
    <span class="md-ellipsis">
      eval_shape
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Solution.evals" class="md-nav__link">
    <span class="md-ellipsis">
      evals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Solution.evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      evaluation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Solution.is_evaluated" class="md-nav__link">
    <span class="md-ellipsis">
      is_evaluated
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Solution.ndim" class="md-nav__link">
    <span class="md-ellipsis">
      ndim
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Solution.senses" class="md-nav__link">
    <span class="md-ellipsis">
      senses
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Solution.shape" class="md-nav__link">
    <span class="md-ellipsis">
      shape
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Solution.values" class="md-nav__link">
    <span class="md-ellipsis">
      values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Solution.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Solution.access_evals" class="md-nav__link">
    <span class="md-ellipsis">
      access_evals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Solution.access_values" class="md-nav__link">
    <span class="md-ellipsis">
      access_values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Solution.dim" class="md-nav__link">
    <span class="md-ellipsis">
      dim
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Solution.objective_sense" class="md-nav__link">
    <span class="md-ellipsis">
      objective_sense
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Solution.set_evals" class="md-nav__link">
    <span class="md-ellipsis">
      set_evals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Solution.set_evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      set_evaluation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Solution.set_values" class="md-nav__link">
    <span class="md-ellipsis">
      set_values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Solution.size" class="md-nav__link">
    <span class="md-ellipsis">
      size
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Solution.to" class="md-nav__link">
    <span class="md-ellipsis">
      to
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.Solution.to_batch" class="md-nav__link">
    <span class="md-ellipsis">
      to_batch
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch" class="md-nav__link">
    <span class="md-ellipsis">
      SolutionBatch
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SolutionBatch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.device" class="md-nav__link">
    <span class="md-ellipsis">
      device
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.dtype" class="md-nav__link">
    <span class="md-ellipsis">
      dtype
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.eval_dtype" class="md-nav__link">
    <span class="md-ellipsis">
      eval_dtype
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.eval_shape" class="md-nav__link">
    <span class="md-ellipsis">
      eval_shape
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.evals" class="md-nav__link">
    <span class="md-ellipsis">
      evals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.objective_sense" class="md-nav__link">
    <span class="md-ellipsis">
      objective_sense
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.senses" class="md-nav__link">
    <span class="md-ellipsis">
      senses
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.solution_length" class="md-nav__link">
    <span class="md-ellipsis">
      solution_length
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.values" class="md-nav__link">
    <span class="md-ellipsis">
      values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.values_dtype" class="md-nav__link">
    <span class="md-ellipsis">
      values_dtype
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.values_shape" class="md-nav__link">
    <span class="md-ellipsis">
      values_shape
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.access_evals" class="md-nav__link">
    <span class="md-ellipsis">
      access_evals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.access_values" class="md-nav__link">
    <span class="md-ellipsis">
      access_values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.arg_pareto_sort" class="md-nav__link">
    <span class="md-ellipsis">
      arg_pareto_sort
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.argbest" class="md-nav__link">
    <span class="md-ellipsis">
      argbest
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.argsort" class="md-nav__link">
    <span class="md-ellipsis">
      argsort
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.argworst" class="md-nav__link">
    <span class="md-ellipsis">
      argworst
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.cat" class="md-nav__link">
    <span class="md-ellipsis">
      cat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.compute_pareto_ranks" class="md-nav__link">
    <span class="md-ellipsis">
      compute_pareto_ranks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.concat" class="md-nav__link">
    <span class="md-ellipsis">
      concat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.forget_evals" class="md-nav__link">
    <span class="md-ellipsis">
      forget_evals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.set_evals" class="md-nav__link">
    <span class="md-ellipsis">
      set_evals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.set_values" class="md-nav__link">
    <span class="md-ellipsis">
      set_values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.split" class="md-nav__link">
    <span class="md-ellipsis">
      split
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.take" class="md-nav__link">
    <span class="md-ellipsis">
      take
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.take_best" class="md-nav__link">
    <span class="md-ellipsis">
      take_best
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.to" class="md-nav__link">
    <span class="md-ellipsis">
      to
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.utility" class="md-nav__link">
    <span class="md-ellipsis">
      utility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evotorch.SolutionBatch.utils" class="md-nav__link">
    <span class="md-ellipsis">
      utils
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Index</h1>

<div class="doc doc-object doc-module">



<a id="evotorch"></a>
    <div class="doc doc-contents first">

        <p>Top-level package for evotorch.</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="evotorch.Problem" class="doc doc-heading">
            <code>Problem</code>


<a href="#evotorch.Problem" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="TensorMakerMixin (evotorch.tools.tensormaker.TensorMakerMixin)" href="tools/tensormaker/#evotorch.tools.tensormaker.TensorMakerMixin">TensorMakerMixin</a></code>, <code><a class="autorefs autorefs-internal" title="Serializable (evotorch.tools.cloning.Serializable)" href="tools/cloning/#evotorch.tools.cloning.Serializable">Serializable</a></code></p>


        <p>Representation of a problem to be optimized.</p>
<p>The simplest way to use this class is to instantiate it with an
external fitness function.</p>
<p>Let us imagine that we have the following fitness function:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">torch</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="k">def</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="n">solution</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="k">return</span> <span class="n">torch</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">solution</span><span class="p">)</span>
</code></pre></div>
<p>A problem definition can be made around this fitness function as follows:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">evotorch</span><span class="w"> </span><span class="kn">import</span> <span class="n">Problem</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="n">problem</span> <span class="o">=</span> <span class="n">Problem</span><span class="p">(</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>    <span class="s2">&quot;min&quot;</span><span class="p">,</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>    <span class="n">f</span><span class="p">,</span>  <span class="c1"># Goal is to minimize f (would be &quot;max&quot; for maximization)</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>    <span class="n">solution_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>  <span class="c1"># Length of a solution is 10</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>    <span class="n">initial_bounds</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">),</span>  <span class="c1"># Bounds for sampling a new solution</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>    <span class="n">dtype</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span>  <span class="c1"># dtype of a solution</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="p">)</span>
</code></pre></div>
<p><strong>Vectorized problem definitions.</strong>
To boost the runtime performance, one might want to define a vectorized
fitness function where the fitnesses of multiple solutions are computed
in a batched manner using the vectorization capabilities of PyTorch.
A vectorized problem definition can be made as follows:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">evotorch.decorators</span><span class="w"> </span><span class="kn">import</span> <span class="n">vectorized</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="nd">@vectorized</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="k">def</span><span class="w"> </span><span class="nf">vf</span><span class="p">(</span><span class="n">solutions</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>    <span class="k">return</span> <span class="n">torch</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">solutions</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">dim</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="n">problem</span> <span class="o">=</span> <span class="n">Problem</span><span class="p">(</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>    <span class="s2">&quot;min&quot;</span><span class="p">,</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>    <span class="n">vf</span><span class="p">,</span>  <span class="c1"># Goal is to minimize vf (would be &quot;max&quot; for maximization)</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>    <span class="n">solution_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>  <span class="c1"># Length of a solution is 10</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>    <span class="n">initial_bounds</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">),</span>  <span class="c1"># Bounds for sampling a new solution</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>    <span class="n">dtype</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span>  <span class="c1"># dtype of a solution</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="p">)</span>
</code></pre></div>
<p><strong>Parallelization across multiple CPUs.</strong>
An optimization problem can be configured to parallelize its evaluation
operations across multiple CPUs as follows:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">problem</span> <span class="o">=</span> <span class="n">Problem</span><span class="p">(</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">num_actors</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># will use 4 actors</span>
</code></pre></div>
<p><strong>Exploiting hardware accelerators.</strong>
As an alternative to CPU-based parallelization, one might prefer to use
the parallelized computation capabilities of a hardware accelerator such
as CUDA. To load the problem onto a cuda device (for example, onto
"cuda:0"), one can do:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">evotorch.decorators</span><span class="w"> </span><span class="kn">import</span> <span class="n">vectorized</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="nd">@vectorized</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="k">def</span><span class="w"> </span><span class="nf">vf</span><span class="p">(</span><span class="n">solutions</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>    <span class="k">return</span> <span class="o">...</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="n">problem</span> <span class="o">=</span> <span class="n">Problem</span><span class="p">(</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="n">vf</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="s2">&quot;cuda:0&quot;</span><span class="p">)</span>
</code></pre></div>
<p><strong>Exploiting multiple GPUs in parallel.</strong>
One can also keep the entire population on the CPU, and split and distribute
it to multiple GPUs for GPU-accelerated and parallelized fitness evaluation.
For this, the main device of the problem is set as CPU, but the fitness
function is decorated with <code>evotorch.decorators.on_cuda</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">evotorch.decorators</span><span class="w"> </span><span class="kn">import</span> <span class="n">on_cuda</span><span class="p">,</span> <span class="n">vectorized</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="nd">@on_cuda</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="nd">@vectorized</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="k">def</span><span class="w"> </span><span class="nf">vf</span><span class="p">(</span><span class="n">solutions</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>    <span class="k">return</span> <span class="o">...</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="n">problem</span> <span class="o">=</span> <span class="n">Problem</span><span class="p">(</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>    <span class="s2">&quot;min&quot;</span><span class="p">,</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>    <span class="n">vf</span><span class="p">,</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>    <span class="o">...</span><span class="p">,</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>    <span class="n">num_actors</span><span class="o">=</span><span class="n">N</span><span class="p">,</span>  <span class="c1"># where N&gt;1 and equal to the number of GPUs</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>    <span class="c1"># Note: if you are on a computer or on a ray cluster with multiple</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>    <span class="c1"># GPUs, you might prefer to use the string &quot;num_gpus&quot; instead of an</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>    <span class="c1"># integer N, which will cause the number of available GPUs to be</span>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>    <span class="c1"># counted, and the number of actors to be configured as that count.</span>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a>    <span class="c1">#</span>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>    <span class="n">num_gpus_per_actor</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>  <span class="c1"># each GPU is assigned to an actor</span>
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a>    <span class="n">device</span><span class="o">=</span><span class="s2">&quot;cpu&quot;</span><span class="p">,</span>
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="p">)</span>
</code></pre></div>
<p><strong>Defining problems via inheritance.</strong>
A problem can also be defined via inheritance.
Using inheritance, one can define problems which carry their own additional
data, and/or update their states as more solutions are evaluated,
and/or have custom procedures for sampling new solutions, etc.</p>
<p>As a first example, let us define a parameterized problem. In this example
problem, the goal is to minimize <code>x^(2q)</code>, <code>q</code> being a parameter of the
problem. The definition of such a problem can be as follows:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">evotorch</span><span class="w"> </span><span class="kn">import</span> <span class="n">Problem</span><span class="p">,</span> <span class="n">Solution</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="k">class</span><span class="w"> </span><span class="nc">MyProblem</span><span class="p">(</span><span class="n">Problem</span><span class="p">):</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">q</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">q</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>            <span class="n">objective_sense</span><span class="o">=</span><span class="s2">&quot;min&quot;</span><span class="p">,</span>  <span class="c1"># the goal is to minimize</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>            <span class="n">solution_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>  <span class="c1"># a solution has the length 10</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>            <span class="n">initial_bounds</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">),</span>  <span class="c1"># sample new solutions from within [-5, 5]</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>            <span class="n">dtype</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span>  <span class="c1"># the dtype of a solution is float32</span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>            <span class="c1"># num_actors=...,  # if parallelization via multiple actors is desired</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>        <span class="p">)</span>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solution</span><span class="p">:</span> <span class="n">Solution</span><span class="p">):</span>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>        <span class="c1"># This is where we declare the procedure of evaluating a solution</span>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>        <span class="c1"># Get the decision values of the solution as a PyTorch tensor</span>
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a>        <span class="n">x</span> <span class="o">=</span> <span class="n">solution</span><span class="o">.</span><span class="n">values</span>
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a>
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>        <span class="c1"># Compute the fitness</span>
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a>        <span class="n">fitness</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">x</span> <span class="o">**</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">q</span><span class="p">))</span>
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a>
<a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a>        <span class="c1"># Register the fitness into the Solution object</span>
<a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a>        <span class="n">solution</span><span class="o">.</span><span class="n">set_evaluation</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>
</code></pre></div>
<p>This parameterized problem can be instantiated as follows (let's say with q=3):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">problem</span> <span class="o">=</span> <span class="n">MyProblem</span><span class="p">(</span><span class="n">q</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</code></pre></div>
<p><strong>Defining vectorized problems via inheritance.</strong>
Vectorization can be used with inheritance-based problem definitions as well.
Please see the following example where the method <code>_evaluate_batch</code>
is used instead of <code>_evaluate</code> for vectorization:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">evotorch</span><span class="w"> </span><span class="kn">import</span> <span class="n">Problem</span><span class="p">,</span> <span class="n">SolutionBatch</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="k">class</span><span class="w"> </span><span class="nc">MyVectorizedProblem</span><span class="p">(</span><span class="n">Problem</span><span class="p">):</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">q</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">q</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>            <span class="n">objective_sense</span><span class="o">=</span><span class="s2">&quot;min&quot;</span><span class="p">,</span>  <span class="c1"># the goal is to minimize</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>            <span class="n">solution_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>  <span class="c1"># a solution has the length 10</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>            <span class="n">initial_bounds</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">),</span>  <span class="c1"># sample new solutions from within [-5, 5]</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>            <span class="n">dtype</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span>  <span class="c1"># the dtype of a solution is float32</span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>            <span class="c1"># num_actors=...,  # if parallelization via multiple actors is desired</span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>            <span class="c1"># device=&quot;cuda:0&quot;,  # if hardware acceleration is desired</span>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>        <span class="p">)</span>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a>
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_evaluate_batch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solutions</span><span class="p">:</span> <span class="n">SolutionBatch</span><span class="p">):</span>
<a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a>        <span class="c1"># Get the decision values of all the solutions in a 2D PyTorch tensor:</span>
<a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a>        <span class="n">xs</span> <span class="o">=</span> <span class="n">solutions</span><span class="o">.</span><span class="n">values</span>
<a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a>
<a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a>        <span class="c1"># Compute the fitnesses</span>
<a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a>        <span class="n">fitnesses</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">x</span> <span class="o">**</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">q</span><span class="p">),</span> <span class="n">dim</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a>
<a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a>        <span class="c1"># Register the fitness into the Solution object</span>
<a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a>        <span class="n">solutions</span><span class="o">.</span><span class="n">set_evals</span><span class="p">(</span><span class="n">fitnesses</span><span class="p">)</span>
</code></pre></div>
<p><strong>Using multiple GPUs from a problem defined via inheritance.</strong>
The previous example demonstrating the use of multiple GPUs showed how
an independent fitness function can be decorated via
<code>evotorch.decorators.on_cuda</code>. Instead of using an independent fitness
function, if one wishes to define a problem by subclassing <code>Problem</code>,
the overriden method <code>_evaluate_batch(...)</code> has to be decorated by
<code>evotorch.decorators.on_cuda</code>. Like in the previous multi-GPU example,
let us assume that we want to parallelize the fitness evaluation
across N GPUs (where N&gt;1). The inheritance-based code to achieve this
can look like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">evotorch</span><span class="w"> </span><span class="kn">import</span> <span class="n">Problem</span><span class="p">,</span> <span class="n">SolutionBatch</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">evotorch.decorators</span><span class="w"> </span><span class="kn">import</span> <span class="n">on_cuda</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="k">class</span><span class="w"> </span><span class="nc">MyMultiGPUProblem</span><span class="p">(</span><span class="n">Problem</span><span class="p">):</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>        <span class="o">...</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>            <span class="n">objective_sense</span><span class="o">=</span><span class="s2">&quot;min&quot;</span><span class="p">,</span>  <span class="c1"># the goal is to minimize</span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>            <span class="n">solution_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>  <span class="c1"># a solution has the length 10</span>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>            <span class="n">initial_bounds</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">),</span>  <span class="c1"># sample new solutions from within [-5, 5]</span>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>            <span class="n">dtype</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span>  <span class="c1"># the dtype of a solution is float32</span>
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a>            <span class="n">num_actors</span><span class="o">=</span><span class="n">N</span><span class="p">,</span>  <span class="c1"># allocate N actors</span>
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>            <span class="c1"># Note: if you are on a computer or on a ray cluster with multiple</span>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a>            <span class="c1"># GPUs, you might prefer to use the string &quot;num_gpus&quot; instead of an</span>
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a>            <span class="c1"># integer N, which will cause the number of available GPUs to be</span>
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a>            <span class="c1"># counted, and the number of actors to be configured as that count.</span>
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a>            <span class="c1">#</span>
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a>            <span class="n">num_gpus_per_actor</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>  <span class="c1"># for each actor, assign a cuda device</span>
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a>            <span class="n">device</span><span class="o">=</span><span class="s2">&quot;cpu&quot;</span><span class="p">,</span>  <span class="c1"># keep the main population on the CPU</span>
<a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a>        <span class="p">)</span>
<a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a>
<a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a>    <span class="nd">@on_cuda</span>
<a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_evaluate_batch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solutions</span><span class="p">:</span> <span class="n">SolutionBatch</span><span class="p">):</span>
<a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a>        <span class="c1"># Get the decision values of all the solutions in a 2D PyTorch tensor:</span>
<a id="__codelineno-9-26" name="__codelineno-9-26" href="#__codelineno-9-26"></a>        <span class="n">xs</span> <span class="o">=</span> <span class="n">solutions</span><span class="o">.</span><span class="n">values</span>
<a id="__codelineno-9-27" name="__codelineno-9-27" href="#__codelineno-9-27"></a>
<a id="__codelineno-9-28" name="__codelineno-9-28" href="#__codelineno-9-28"></a>        <span class="c1"># Compute the fitnesses</span>
<a id="__codelineno-9-29" name="__codelineno-9-29" href="#__codelineno-9-29"></a>        <span class="n">fitnesses</span> <span class="o">=</span> <span class="o">...</span>
<a id="__codelineno-9-30" name="__codelineno-9-30" href="#__codelineno-9-30"></a>
<a id="__codelineno-9-31" name="__codelineno-9-31" href="#__codelineno-9-31"></a>        <span class="c1"># Register the fitness into the Solution object</span>
<a id="__codelineno-9-32" name="__codelineno-9-32" href="#__codelineno-9-32"></a>        <span class="n">solutions</span><span class="o">.</span><span class="n">set_evals</span><span class="p">(</span><span class="n">fitnesses</span><span class="p">)</span>
</code></pre></div>
<p><strong>Customizing how initial solutions are sampled.</strong>
Instead of sampling solutions from within an interval, one might wish to
define a special procedure for generating new solutions. This can be
achieved by overriding the <code>_fill(...)</code> method of the Problem class.
Please see the example below.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">MyProblemWithCustomizedFilling</span><span class="p">(</span><span class="n">Problem</span><span class="p">):</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>            <span class="n">objective_sense</span><span class="o">=</span><span class="s2">&quot;min&quot;</span><span class="p">,</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>            <span class="n">solution_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>            <span class="n">dtype</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>            <span class="c1"># we do not set initial_bounds because we have a manual procedure</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>            <span class="c1"># for initializing solutions</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>        <span class="p">)</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_evaluate_batch</span><span class="p">(</span>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">solutions</span><span class="p">:</span> <span class="n">SolutionBatch</span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>    <span class="p">):</span> <span class="o">...</span>  <span class="c1"># code to compute and fill the fitnesses goes here</span>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_fill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">):</span>
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>        <span class="c1"># `values` is an empty tensor of shape (n, m) where n is the number</span>
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a>        <span class="c1"># of solutions and m is the solution length.</span>
<a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a>        <span class="c1"># The responsibility of this method is to fill this tensor.</span>
<a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a>        <span class="c1"># In the case of this example, let us say that we wish the new</span>
<a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a>        <span class="c1"># solutions to have values sampled from a standard normal distribution.</span>
<a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a>        <span class="n">values</span><span class="o">.</span><span class="n">normal_</span><span class="p">()</span>
</code></pre></div>
<p><strong>Defining manually-structured optimization problems.</strong>
The <code>dtype</code> of an optimization problem can be set as <code>object</code>.
When the <code>dtype</code> is set as an <code>object</code>, it means that a solution's
value can be a PyTorch tensor, or a numpy array, or a Python list,
or a Python dictionary, or a string, or a scalar, or <code>None</code>.
This gives the user enough flexibility to express non-numeric
optimization problems and/or problems where each solution has its
own length, or even its own structure.</p>
<p>In the example below, we define an optimization problem where a
solution is represented by a Python list and where each solution can
have its own length. For simplicity, we define the fitness function
as the sum of the values of a solution.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">evotorch</span><span class="w"> </span><span class="kn">import</span> <span class="n">Problem</span><span class="p">,</span> <span class="n">SolutionBatch</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">evotorch.tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">ObjectArray</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">torch</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="k">class</span><span class="w"> </span><span class="nc">MyCustomStructuredProblem</span><span class="p">(</span><span class="n">Problem</span><span class="p">):</span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>            <span class="n">objective_sense</span><span class="o">=</span><span class="s2">&quot;min&quot;</span><span class="p">,</span>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>            <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">,</span>
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>        <span class="p">)</span>
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_evaluate_batch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solutions</span><span class="p">:</span> <span class="n">SolutionBatch</span><span class="p">):</span>
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a>        <span class="c1"># Get the number of solutions</span>
<a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a>        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">solutions</span><span class="p">)</span>
<a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a>
<a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a>        <span class="c1"># Allocate a PyTorch tensor that will store the fitnesses</span>
<a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a>        <span class="n">fitnesses</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a>
<a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a>        <span class="c1"># Fitness is computed as the sum of numeric values stored</span>
<a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a>        <span class="c1"># by a solution.</span>
<a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<a id="__codelineno-11-24" name="__codelineno-11-24" href="#__codelineno-11-24"></a>            <span class="c1"># Get the values stored by a solution (which, in the case of</span>
<a id="__codelineno-11-25" name="__codelineno-11-25" href="#__codelineno-11-25"></a>            <span class="c1"># this example, is a Python list, because we initialize them</span>
<a id="__codelineno-11-26" name="__codelineno-11-26" href="#__codelineno-11-26"></a>            <span class="c1"># so in the _fill method).</span>
<a id="__codelineno-11-27" name="__codelineno-11-27" href="#__codelineno-11-27"></a>            <span class="n">sln_values</span> <span class="o">=</span> <span class="n">solutions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<a id="__codelineno-11-28" name="__codelineno-11-28" href="#__codelineno-11-28"></a>            <span class="n">fitnesses</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">sln_values</span><span class="p">)</span>
<a id="__codelineno-11-29" name="__codelineno-11-29" href="#__codelineno-11-29"></a>
<a id="__codelineno-11-30" name="__codelineno-11-30" href="#__codelineno-11-30"></a>        <span class="c1"># Set the fitnesses</span>
<a id="__codelineno-11-31" name="__codelineno-11-31" href="#__codelineno-11-31"></a>        <span class="n">solutions</span><span class="o">.</span><span class="n">set_evals</span><span class="p">(</span><span class="n">fitnesses</span><span class="p">)</span>
<a id="__codelineno-11-32" name="__codelineno-11-32" href="#__codelineno-11-32"></a>
<a id="__codelineno-11-33" name="__codelineno-11-33" href="#__codelineno-11-33"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_fill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="n">ObjectArray</span><span class="p">):</span>
<a id="__codelineno-11-34" name="__codelineno-11-34" href="#__codelineno-11-34"></a>        <span class="c1"># At this point, we have an ObjectArray of length `n`.</span>
<a id="__codelineno-11-35" name="__codelineno-11-35" href="#__codelineno-11-35"></a>        <span class="c1"># This means, we need to fill the values of `n` solutions.</span>
<a id="__codelineno-11-36" name="__codelineno-11-36" href="#__codelineno-11-36"></a>        <span class="c1"># `values[i]` represents the values of the i-th solution.</span>
<a id="__codelineno-11-37" name="__codelineno-11-37" href="#__codelineno-11-37"></a>        <span class="c1"># Initially, `values[i]` is None.</span>
<a id="__codelineno-11-38" name="__codelineno-11-38" href="#__codelineno-11-38"></a>        <span class="c1"># It is up to us how `values[i]` will be filled.</span>
<a id="__codelineno-11-39" name="__codelineno-11-39" href="#__codelineno-11-39"></a>        <span class="c1"># Let us make each solution be initialized as a list of</span>
<a id="__codelineno-11-40" name="__codelineno-11-40" href="#__codelineno-11-40"></a>        <span class="c1"># random length, containing random real numbers.</span>
<a id="__codelineno-11-41" name="__codelineno-11-41" href="#__codelineno-11-41"></a>
<a id="__codelineno-11-42" name="__codelineno-11-42" href="#__codelineno-11-42"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)):</span>
<a id="__codelineno-11-43" name="__codelineno-11-43" href="#__codelineno-11-43"></a>            <span class="n">ith_solution_length</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<a id="__codelineno-11-44" name="__codelineno-11-44" href="#__codelineno-11-44"></a>            <span class="n">ith_solution_values</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ith_solution_length</span><span class="p">)]</span>
<a id="__codelineno-11-45" name="__codelineno-11-45" href="#__codelineno-11-45"></a>            <span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ith_solution_values</span>
</code></pre></div>
<p><strong>Multi-objective optimization.</strong>
A multi-objective optimization problem can be expressed by using multiple
objective senses. As an example, let us consider an optimization problem
where the first objective sense is minimization and the second objective
sense is maximization. When working with an external fitness function,
the code to express such an optimization problem would look like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">evotorch</span><span class="w"> </span><span class="kn">import</span> <span class="n">Problem</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">evotorch.decorators</span><span class="w"> </span><span class="kn">import</span> <span class="n">vectorized</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">torch</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="nd">@vectorized</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="k">def</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>    <span class="c1"># (Note that if dtype is object, x will be of type ObjectArray,</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>    <span class="c1"># and not a PyTorch tensor)</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>    <span class="c1"># Code to compute the fitnesses goes here.</span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>    <span class="c1"># Our resulting tensor `fitnesses` is expected to have a shape (n, m)</span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>    <span class="c1"># where n is the number of solutions and m is the number of objectives</span>
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>    <span class="c1"># (which is 2 in the case of this example).</span>
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>    <span class="c1"># `fitnesses[i, k]` is expected to store the fitness value belonging</span>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>    <span class="c1"># to the i-th solution according to the k-th objective.</span>
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>    <span class="n">fitnesses</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span> <span class="o">=</span> <span class="o">...</span>
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a>    <span class="k">return</span> <span class="n">fitnesses</span>
<a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a>
<a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a>
<a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a><span class="n">problem</span> <span class="o">=</span> <span class="n">Problem</span><span class="p">([</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">],</span> <span class="n">f</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</code></pre></div>
<p>A multi-objective problem defined via class inheritance would look like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">evotorch</span><span class="w"> </span><span class="kn">import</span> <span class="n">Problem</span><span class="p">,</span> <span class="n">SolutionBatch</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="k">class</span><span class="w"> </span><span class="nc">MyMultiObjectiveProblem</span><span class="p">(</span><span class="n">Problem</span><span class="p">):</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">objective_sense</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">],</span> <span class="o">...</span><span class="p">)</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_evaluate_batch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solutions</span><span class="p">:</span> <span class="n">SolutionBatch</span><span class="p">):</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>        <span class="c1"># Code to compute the fitnesses goes here.</span>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>        <span class="c1"># `fitnesses[i, k]` is expected to store the fitness value belonging</span>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>        <span class="c1"># to the i-th solution according to the k-th objective.</span>
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>        <span class="n">fitnesses</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span> <span class="o">=</span> <span class="o">...</span>
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>        <span class="c1"># Set the fitnesses</span>
<a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a>        <span class="n">solutions</span><span class="o">.</span><span class="n">set_evals</span><span class="p">(</span><span class="n">fitnesses</span><span class="p">)</span>
</code></pre></div>
<p><strong>How to solve a problem.</strong>
If the optimization problem is single-objective and its dtype is a float
(e.g. torch.float32, torch.float64, etc.), then it can be solved using
any search algorithm implemented in EvoTorch. Let us assume that we have
such an optimization problem stored by the variable <code>prob</code>. We could use
the <a class="autorefs autorefs-internal" title="CEM" href="algorithms/distributed/gaussian/#evotorch.algorithms.distributed.gaussian.CEM">cross entropy method</a>)
to solve it:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">evotorch</span><span class="w"> </span><span class="kn">import</span> <span class="n">Problem</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">evotorch.algorithms</span><span class="w"> </span><span class="kn">import</span> <span class="n">CEM</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">evotorch.logging</span><span class="w"> </span><span class="kn">import</span> <span class="n">StdOutLogger</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="k">def</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span> <span class="o">...</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="n">prob</span> <span class="o">=</span> <span class="n">Problem</span><span class="p">(</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">solution_length</span><span class="o">=...</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="n">searcher</span> <span class="o">=</span> <span class="n">CEM</span><span class="p">(</span>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>    <span class="n">problem</span><span class="p">,</span>
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a>    <span class="c1"># The keyword arguments below refer to hyperparameters specific to the</span>
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a>    <span class="c1"># cross entropy method algorithm. It is recommended to tune these</span>
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a>    <span class="c1"># hyperparameters according to the problem at hand.</span>
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a>    <span class="n">popsize</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>  <span class="c1"># population size</span>
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a>    <span class="n">parenthood_ratio</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>  <span class="c1"># 0.5 means better half of solutions become parents</span>
<a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a>    <span class="n">stdev_init</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>  <span class="c1"># initial standard deviation of the search distribution</span>
<a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a><span class="p">)</span>
<a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a>
<a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a><span class="n">_</span> <span class="o">=</span> <span class="n">StdOutLogger</span><span class="p">(</span><span class="n">searcher</span><span class="p">)</span>  <span class="c1"># to report the progress onto the screen</span>
<a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a><span class="n">searcher</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>  <span class="c1"># run for 50 generations</span>
<a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a>
<a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Center of the search distribution:&quot;</span><span class="p">,</span> <span class="n">searcher</span><span class="o">.</span><span class="n">status</span><span class="p">[</span><span class="s2">&quot;center&quot;</span><span class="p">])</span>
<a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Solution with best fitness ever:&quot;</span><span class="p">,</span> <span class="n">searcher</span><span class="o">.</span><span class="n">status</span><span class="p">[</span><span class="s2">&quot;best&quot;</span><span class="p">])</span>
</code></pre></div>
<p>See the namespace <a class="autorefs autorefs-internal" href="algorithms/#evotorch.algorithms">evotorch.algorithms</a> to see the
algorithms implemented within EvoTorch.</p>
<p>If the optimization problem at hand has an integer dtype (e.g. torch.int64),
or has the <code>object</code> dtype, or has multiple objectives, then distribution-based
search algorithms such as CEM cannot be used (since those algorithms were
implemented with continuous decision variables and with single-objective
problems in mind). In such cases, one can use the algorithm named
<a class="autorefs autorefs-internal" title="SteadyStateGA" href="algorithms/ga/#evotorch.algorithms.ga.SteadyStateGA">SteadyState</a>.
Please also note that, while using
<a class="autorefs autorefs-internal" href="algorithms/ga/#evotorch.algorithms.ga.SteadyStateGA">SteadyStateGA</a> on a problem with an
integer dtype or with the <code>object</code> dtype, one will have to define manual
cross-over and mutation operators specialized to the solution structure
of the problem at hand. Please see the documentation of
<a class="autorefs autorefs-internal" href="algorithms/ga/#evotorch.algorithms.ga.SteadyStateGA">SteadyStateGA</a> for details.</p>







              <details class="quote">
                <summary>Source code in <code>evotorch/core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-365"> 365</a></span>
<span class="normal"><a href="#__codelineno-0-366"> 366</a></span>
<span class="normal"><a href="#__codelineno-0-367"> 367</a></span>
<span class="normal"><a href="#__codelineno-0-368"> 368</a></span>
<span class="normal"><a href="#__codelineno-0-369"> 369</a></span>
<span class="normal"><a href="#__codelineno-0-370"> 370</a></span>
<span class="normal"><a href="#__codelineno-0-371"> 371</a></span>
<span class="normal"><a href="#__codelineno-0-372"> 372</a></span>
<span class="normal"><a href="#__codelineno-0-373"> 373</a></span>
<span class="normal"><a href="#__codelineno-0-374"> 374</a></span>
<span class="normal"><a href="#__codelineno-0-375"> 375</a></span>
<span class="normal"><a href="#__codelineno-0-376"> 376</a></span>
<span class="normal"><a href="#__codelineno-0-377"> 377</a></span>
<span class="normal"><a href="#__codelineno-0-378"> 378</a></span>
<span class="normal"><a href="#__codelineno-0-379"> 379</a></span>
<span class="normal"><a href="#__codelineno-0-380"> 380</a></span>
<span class="normal"><a href="#__codelineno-0-381"> 381</a></span>
<span class="normal"><a href="#__codelineno-0-382"> 382</a></span>
<span class="normal"><a href="#__codelineno-0-383"> 383</a></span>
<span class="normal"><a href="#__codelineno-0-384"> 384</a></span>
<span class="normal"><a href="#__codelineno-0-385"> 385</a></span>
<span class="normal"><a href="#__codelineno-0-386"> 386</a></span>
<span class="normal"><a href="#__codelineno-0-387"> 387</a></span>
<span class="normal"><a href="#__codelineno-0-388"> 388</a></span>
<span class="normal"><a href="#__codelineno-0-389"> 389</a></span>
<span class="normal"><a href="#__codelineno-0-390"> 390</a></span>
<span class="normal"><a href="#__codelineno-0-391"> 391</a></span>
<span class="normal"><a href="#__codelineno-0-392"> 392</a></span>
<span class="normal"><a href="#__codelineno-0-393"> 393</a></span>
<span class="normal"><a href="#__codelineno-0-394"> 394</a></span>
<span class="normal"><a href="#__codelineno-0-395"> 395</a></span>
<span class="normal"><a href="#__codelineno-0-396"> 396</a></span>
<span class="normal"><a href="#__codelineno-0-397"> 397</a></span>
<span class="normal"><a href="#__codelineno-0-398"> 398</a></span>
<span class="normal"><a href="#__codelineno-0-399"> 399</a></span>
<span class="normal"><a href="#__codelineno-0-400"> 400</a></span>
<span class="normal"><a href="#__codelineno-0-401"> 401</a></span>
<span class="normal"><a href="#__codelineno-0-402"> 402</a></span>
<span class="normal"><a href="#__codelineno-0-403"> 403</a></span>
<span class="normal"><a href="#__codelineno-0-404"> 404</a></span>
<span class="normal"><a href="#__codelineno-0-405"> 405</a></span>
<span class="normal"><a href="#__codelineno-0-406"> 406</a></span>
<span class="normal"><a href="#__codelineno-0-407"> 407</a></span>
<span class="normal"><a href="#__codelineno-0-408"> 408</a></span>
<span class="normal"><a href="#__codelineno-0-409"> 409</a></span>
<span class="normal"><a href="#__codelineno-0-410"> 410</a></span>
<span class="normal"><a href="#__codelineno-0-411"> 411</a></span>
<span class="normal"><a href="#__codelineno-0-412"> 412</a></span>
<span class="normal"><a href="#__codelineno-0-413"> 413</a></span>
<span class="normal"><a href="#__codelineno-0-414"> 414</a></span>
<span class="normal"><a href="#__codelineno-0-415"> 415</a></span>
<span class="normal"><a href="#__codelineno-0-416"> 416</a></span>
<span class="normal"><a href="#__codelineno-0-417"> 417</a></span>
<span class="normal"><a href="#__codelineno-0-418"> 418</a></span>
<span class="normal"><a href="#__codelineno-0-419"> 419</a></span>
<span class="normal"><a href="#__codelineno-0-420"> 420</a></span>
<span class="normal"><a href="#__codelineno-0-421"> 421</a></span>
<span class="normal"><a href="#__codelineno-0-422"> 422</a></span>
<span class="normal"><a href="#__codelineno-0-423"> 423</a></span>
<span class="normal"><a href="#__codelineno-0-424"> 424</a></span>
<span class="normal"><a href="#__codelineno-0-425"> 425</a></span>
<span class="normal"><a href="#__codelineno-0-426"> 426</a></span>
<span class="normal"><a href="#__codelineno-0-427"> 427</a></span>
<span class="normal"><a href="#__codelineno-0-428"> 428</a></span>
<span class="normal"><a href="#__codelineno-0-429"> 429</a></span>
<span class="normal"><a href="#__codelineno-0-430"> 430</a></span>
<span class="normal"><a href="#__codelineno-0-431"> 431</a></span>
<span class="normal"><a href="#__codelineno-0-432"> 432</a></span>
<span class="normal"><a href="#__codelineno-0-433"> 433</a></span>
<span class="normal"><a href="#__codelineno-0-434"> 434</a></span>
<span class="normal"><a href="#__codelineno-0-435"> 435</a></span>
<span class="normal"><a href="#__codelineno-0-436"> 436</a></span>
<span class="normal"><a href="#__codelineno-0-437"> 437</a></span>
<span class="normal"><a href="#__codelineno-0-438"> 438</a></span>
<span class="normal"><a href="#__codelineno-0-439"> 439</a></span>
<span class="normal"><a href="#__codelineno-0-440"> 440</a></span>
<span class="normal"><a href="#__codelineno-0-441"> 441</a></span>
<span class="normal"><a href="#__codelineno-0-442"> 442</a></span>
<span class="normal"><a href="#__codelineno-0-443"> 443</a></span>
<span class="normal"><a href="#__codelineno-0-444"> 444</a></span>
<span class="normal"><a href="#__codelineno-0-445"> 445</a></span>
<span class="normal"><a href="#__codelineno-0-446"> 446</a></span>
<span class="normal"><a href="#__codelineno-0-447"> 447</a></span>
<span class="normal"><a href="#__codelineno-0-448"> 448</a></span>
<span class="normal"><a href="#__codelineno-0-449"> 449</a></span>
<span class="normal"><a href="#__codelineno-0-450"> 450</a></span>
<span class="normal"><a href="#__codelineno-0-451"> 451</a></span>
<span class="normal"><a href="#__codelineno-0-452"> 452</a></span>
<span class="normal"><a href="#__codelineno-0-453"> 453</a></span>
<span class="normal"><a href="#__codelineno-0-454"> 454</a></span>
<span class="normal"><a href="#__codelineno-0-455"> 455</a></span>
<span class="normal"><a href="#__codelineno-0-456"> 456</a></span>
<span class="normal"><a href="#__codelineno-0-457"> 457</a></span>
<span class="normal"><a href="#__codelineno-0-458"> 458</a></span>
<span class="normal"><a href="#__codelineno-0-459"> 459</a></span>
<span class="normal"><a href="#__codelineno-0-460"> 460</a></span>
<span class="normal"><a href="#__codelineno-0-461"> 461</a></span>
<span class="normal"><a href="#__codelineno-0-462"> 462</a></span>
<span class="normal"><a href="#__codelineno-0-463"> 463</a></span>
<span class="normal"><a href="#__codelineno-0-464"> 464</a></span>
<span class="normal"><a href="#__codelineno-0-465"> 465</a></span>
<span class="normal"><a href="#__codelineno-0-466"> 466</a></span>
<span class="normal"><a href="#__codelineno-0-467"> 467</a></span>
<span class="normal"><a href="#__codelineno-0-468"> 468</a></span>
<span class="normal"><a href="#__codelineno-0-469"> 469</a></span>
<span class="normal"><a href="#__codelineno-0-470"> 470</a></span>
<span class="normal"><a href="#__codelineno-0-471"> 471</a></span>
<span class="normal"><a href="#__codelineno-0-472"> 472</a></span>
<span class="normal"><a href="#__codelineno-0-473"> 473</a></span>
<span class="normal"><a href="#__codelineno-0-474"> 474</a></span>
<span class="normal"><a href="#__codelineno-0-475"> 475</a></span>
<span class="normal"><a href="#__codelineno-0-476"> 476</a></span>
<span class="normal"><a href="#__codelineno-0-477"> 477</a></span>
<span class="normal"><a href="#__codelineno-0-478"> 478</a></span>
<span class="normal"><a href="#__codelineno-0-479"> 479</a></span>
<span class="normal"><a href="#__codelineno-0-480"> 480</a></span>
<span class="normal"><a href="#__codelineno-0-481"> 481</a></span>
<span class="normal"><a href="#__codelineno-0-482"> 482</a></span>
<span class="normal"><a href="#__codelineno-0-483"> 483</a></span>
<span class="normal"><a href="#__codelineno-0-484"> 484</a></span>
<span class="normal"><a href="#__codelineno-0-485"> 485</a></span>
<span class="normal"><a href="#__codelineno-0-486"> 486</a></span>
<span class="normal"><a href="#__codelineno-0-487"> 487</a></span>
<span class="normal"><a href="#__codelineno-0-488"> 488</a></span>
<span class="normal"><a href="#__codelineno-0-489"> 489</a></span>
<span class="normal"><a href="#__codelineno-0-490"> 490</a></span>
<span class="normal"><a href="#__codelineno-0-491"> 491</a></span>
<span class="normal"><a href="#__codelineno-0-492"> 492</a></span>
<span class="normal"><a href="#__codelineno-0-493"> 493</a></span>
<span class="normal"><a href="#__codelineno-0-494"> 494</a></span>
<span class="normal"><a href="#__codelineno-0-495"> 495</a></span>
<span class="normal"><a href="#__codelineno-0-496"> 496</a></span>
<span class="normal"><a href="#__codelineno-0-497"> 497</a></span>
<span class="normal"><a href="#__codelineno-0-498"> 498</a></span>
<span class="normal"><a href="#__codelineno-0-499"> 499</a></span>
<span class="normal"><a href="#__codelineno-0-500"> 500</a></span>
<span class="normal"><a href="#__codelineno-0-501"> 501</a></span>
<span class="normal"><a href="#__codelineno-0-502"> 502</a></span>
<span class="normal"><a href="#__codelineno-0-503"> 503</a></span>
<span class="normal"><a href="#__codelineno-0-504"> 504</a></span>
<span class="normal"><a href="#__codelineno-0-505"> 505</a></span>
<span class="normal"><a href="#__codelineno-0-506"> 506</a></span>
<span class="normal"><a href="#__codelineno-0-507"> 507</a></span>
<span class="normal"><a href="#__codelineno-0-508"> 508</a></span>
<span class="normal"><a href="#__codelineno-0-509"> 509</a></span>
<span class="normal"><a href="#__codelineno-0-510"> 510</a></span>
<span class="normal"><a href="#__codelineno-0-511"> 511</a></span>
<span class="normal"><a href="#__codelineno-0-512"> 512</a></span>
<span class="normal"><a href="#__codelineno-0-513"> 513</a></span>
<span class="normal"><a href="#__codelineno-0-514"> 514</a></span>
<span class="normal"><a href="#__codelineno-0-515"> 515</a></span>
<span class="normal"><a href="#__codelineno-0-516"> 516</a></span>
<span class="normal"><a href="#__codelineno-0-517"> 517</a></span>
<span class="normal"><a href="#__codelineno-0-518"> 518</a></span>
<span class="normal"><a href="#__codelineno-0-519"> 519</a></span>
<span class="normal"><a href="#__codelineno-0-520"> 520</a></span>
<span class="normal"><a href="#__codelineno-0-521"> 521</a></span>
<span class="normal"><a href="#__codelineno-0-522"> 522</a></span>
<span class="normal"><a href="#__codelineno-0-523"> 523</a></span>
<span class="normal"><a href="#__codelineno-0-524"> 524</a></span>
<span class="normal"><a href="#__codelineno-0-525"> 525</a></span>
<span class="normal"><a href="#__codelineno-0-526"> 526</a></span>
<span class="normal"><a href="#__codelineno-0-527"> 527</a></span>
<span class="normal"><a href="#__codelineno-0-528"> 528</a></span>
<span class="normal"><a href="#__codelineno-0-529"> 529</a></span>
<span class="normal"><a href="#__codelineno-0-530"> 530</a></span>
<span class="normal"><a href="#__codelineno-0-531"> 531</a></span>
<span class="normal"><a href="#__codelineno-0-532"> 532</a></span>
<span class="normal"><a href="#__codelineno-0-533"> 533</a></span>
<span class="normal"><a href="#__codelineno-0-534"> 534</a></span>
<span class="normal"><a href="#__codelineno-0-535"> 535</a></span>
<span class="normal"><a href="#__codelineno-0-536"> 536</a></span>
<span class="normal"><a href="#__codelineno-0-537"> 537</a></span>
<span class="normal"><a href="#__codelineno-0-538"> 538</a></span>
<span class="normal"><a href="#__codelineno-0-539"> 539</a></span>
<span class="normal"><a href="#__codelineno-0-540"> 540</a></span>
<span class="normal"><a href="#__codelineno-0-541"> 541</a></span>
<span class="normal"><a href="#__codelineno-0-542"> 542</a></span>
<span class="normal"><a href="#__codelineno-0-543"> 543</a></span>
<span class="normal"><a href="#__codelineno-0-544"> 544</a></span>
<span class="normal"><a href="#__codelineno-0-545"> 545</a></span>
<span class="normal"><a href="#__codelineno-0-546"> 546</a></span>
<span class="normal"><a href="#__codelineno-0-547"> 547</a></span>
<span class="normal"><a href="#__codelineno-0-548"> 548</a></span>
<span class="normal"><a href="#__codelineno-0-549"> 549</a></span>
<span class="normal"><a href="#__codelineno-0-550"> 550</a></span>
<span class="normal"><a href="#__codelineno-0-551"> 551</a></span>
<span class="normal"><a href="#__codelineno-0-552"> 552</a></span>
<span class="normal"><a href="#__codelineno-0-553"> 553</a></span>
<span class="normal"><a href="#__codelineno-0-554"> 554</a></span>
<span class="normal"><a href="#__codelineno-0-555"> 555</a></span>
<span class="normal"><a href="#__codelineno-0-556"> 556</a></span>
<span class="normal"><a href="#__codelineno-0-557"> 557</a></span>
<span class="normal"><a href="#__codelineno-0-558"> 558</a></span>
<span class="normal"><a href="#__codelineno-0-559"> 559</a></span>
<span class="normal"><a href="#__codelineno-0-560"> 560</a></span>
<span class="normal"><a href="#__codelineno-0-561"> 561</a></span>
<span class="normal"><a href="#__codelineno-0-562"> 562</a></span>
<span class="normal"><a href="#__codelineno-0-563"> 563</a></span>
<span class="normal"><a href="#__codelineno-0-564"> 564</a></span>
<span class="normal"><a href="#__codelineno-0-565"> 565</a></span>
<span class="normal"><a href="#__codelineno-0-566"> 566</a></span>
<span class="normal"><a href="#__codelineno-0-567"> 567</a></span>
<span class="normal"><a href="#__codelineno-0-568"> 568</a></span>
<span class="normal"><a href="#__codelineno-0-569"> 569</a></span>
<span class="normal"><a href="#__codelineno-0-570"> 570</a></span>
<span class="normal"><a href="#__codelineno-0-571"> 571</a></span>
<span class="normal"><a href="#__codelineno-0-572"> 572</a></span>
<span class="normal"><a href="#__codelineno-0-573"> 573</a></span>
<span class="normal"><a href="#__codelineno-0-574"> 574</a></span>
<span class="normal"><a href="#__codelineno-0-575"> 575</a></span>
<span class="normal"><a href="#__codelineno-0-576"> 576</a></span>
<span class="normal"><a href="#__codelineno-0-577"> 577</a></span>
<span class="normal"><a href="#__codelineno-0-578"> 578</a></span>
<span class="normal"><a href="#__codelineno-0-579"> 579</a></span>
<span class="normal"><a href="#__codelineno-0-580"> 580</a></span>
<span class="normal"><a href="#__codelineno-0-581"> 581</a></span>
<span class="normal"><a href="#__codelineno-0-582"> 582</a></span>
<span class="normal"><a href="#__codelineno-0-583"> 583</a></span>
<span class="normal"><a href="#__codelineno-0-584"> 584</a></span>
<span class="normal"><a href="#__codelineno-0-585"> 585</a></span>
<span class="normal"><a href="#__codelineno-0-586"> 586</a></span>
<span class="normal"><a href="#__codelineno-0-587"> 587</a></span>
<span class="normal"><a href="#__codelineno-0-588"> 588</a></span>
<span class="normal"><a href="#__codelineno-0-589"> 589</a></span>
<span class="normal"><a href="#__codelineno-0-590"> 590</a></span>
<span class="normal"><a href="#__codelineno-0-591"> 591</a></span>
<span class="normal"><a href="#__codelineno-0-592"> 592</a></span>
<span class="normal"><a href="#__codelineno-0-593"> 593</a></span>
<span class="normal"><a href="#__codelineno-0-594"> 594</a></span>
<span class="normal"><a href="#__codelineno-0-595"> 595</a></span>
<span class="normal"><a href="#__codelineno-0-596"> 596</a></span>
<span class="normal"><a href="#__codelineno-0-597"> 597</a></span>
<span class="normal"><a href="#__codelineno-0-598"> 598</a></span>
<span class="normal"><a href="#__codelineno-0-599"> 599</a></span>
<span class="normal"><a href="#__codelineno-0-600"> 600</a></span>
<span class="normal"><a href="#__codelineno-0-601"> 601</a></span>
<span class="normal"><a href="#__codelineno-0-602"> 602</a></span>
<span class="normal"><a href="#__codelineno-0-603"> 603</a></span>
<span class="normal"><a href="#__codelineno-0-604"> 604</a></span>
<span class="normal"><a href="#__codelineno-0-605"> 605</a></span>
<span class="normal"><a href="#__codelineno-0-606"> 606</a></span>
<span class="normal"><a href="#__codelineno-0-607"> 607</a></span>
<span class="normal"><a href="#__codelineno-0-608"> 608</a></span>
<span class="normal"><a href="#__codelineno-0-609"> 609</a></span>
<span class="normal"><a href="#__codelineno-0-610"> 610</a></span>
<span class="normal"><a href="#__codelineno-0-611"> 611</a></span>
<span class="normal"><a href="#__codelineno-0-612"> 612</a></span>
<span class="normal"><a href="#__codelineno-0-613"> 613</a></span>
<span class="normal"><a href="#__codelineno-0-614"> 614</a></span>
<span class="normal"><a href="#__codelineno-0-615"> 615</a></span>
<span class="normal"><a href="#__codelineno-0-616"> 616</a></span>
<span class="normal"><a href="#__codelineno-0-617"> 617</a></span>
<span class="normal"><a href="#__codelineno-0-618"> 618</a></span>
<span class="normal"><a href="#__codelineno-0-619"> 619</a></span>
<span class="normal"><a href="#__codelineno-0-620"> 620</a></span>
<span class="normal"><a href="#__codelineno-0-621"> 621</a></span>
<span class="normal"><a href="#__codelineno-0-622"> 622</a></span>
<span class="normal"><a href="#__codelineno-0-623"> 623</a></span>
<span class="normal"><a href="#__codelineno-0-624"> 624</a></span>
<span class="normal"><a href="#__codelineno-0-625"> 625</a></span>
<span class="normal"><a href="#__codelineno-0-626"> 626</a></span>
<span class="normal"><a href="#__codelineno-0-627"> 627</a></span>
<span class="normal"><a href="#__codelineno-0-628"> 628</a></span>
<span class="normal"><a href="#__codelineno-0-629"> 629</a></span>
<span class="normal"><a href="#__codelineno-0-630"> 630</a></span>
<span class="normal"><a href="#__codelineno-0-631"> 631</a></span>
<span class="normal"><a href="#__codelineno-0-632"> 632</a></span>
<span class="normal"><a href="#__codelineno-0-633"> 633</a></span>
<span class="normal"><a href="#__codelineno-0-634"> 634</a></span>
<span class="normal"><a href="#__codelineno-0-635"> 635</a></span>
<span class="normal"><a href="#__codelineno-0-636"> 636</a></span>
<span class="normal"><a href="#__codelineno-0-637"> 637</a></span>
<span class="normal"><a href="#__codelineno-0-638"> 638</a></span>
<span class="normal"><a href="#__codelineno-0-639"> 639</a></span>
<span class="normal"><a href="#__codelineno-0-640"> 640</a></span>
<span class="normal"><a href="#__codelineno-0-641"> 641</a></span>
<span class="normal"><a href="#__codelineno-0-642"> 642</a></span>
<span class="normal"><a href="#__codelineno-0-643"> 643</a></span>
<span class="normal"><a href="#__codelineno-0-644"> 644</a></span>
<span class="normal"><a href="#__codelineno-0-645"> 645</a></span>
<span class="normal"><a href="#__codelineno-0-646"> 646</a></span>
<span class="normal"><a href="#__codelineno-0-647"> 647</a></span>
<span class="normal"><a href="#__codelineno-0-648"> 648</a></span>
<span class="normal"><a href="#__codelineno-0-649"> 649</a></span>
<span class="normal"><a href="#__codelineno-0-650"> 650</a></span>
<span class="normal"><a href="#__codelineno-0-651"> 651</a></span>
<span class="normal"><a href="#__codelineno-0-652"> 652</a></span>
<span class="normal"><a href="#__codelineno-0-653"> 653</a></span>
<span class="normal"><a href="#__codelineno-0-654"> 654</a></span>
<span class="normal"><a href="#__codelineno-0-655"> 655</a></span>
<span class="normal"><a href="#__codelineno-0-656"> 656</a></span>
<span class="normal"><a href="#__codelineno-0-657"> 657</a></span>
<span class="normal"><a href="#__codelineno-0-658"> 658</a></span>
<span class="normal"><a href="#__codelineno-0-659"> 659</a></span>
<span class="normal"><a href="#__codelineno-0-660"> 660</a></span>
<span class="normal"><a href="#__codelineno-0-661"> 661</a></span>
<span class="normal"><a href="#__codelineno-0-662"> 662</a></span>
<span class="normal"><a href="#__codelineno-0-663"> 663</a></span>
<span class="normal"><a href="#__codelineno-0-664"> 664</a></span>
<span class="normal"><a href="#__codelineno-0-665"> 665</a></span>
<span class="normal"><a href="#__codelineno-0-666"> 666</a></span>
<span class="normal"><a href="#__codelineno-0-667"> 667</a></span>
<span class="normal"><a href="#__codelineno-0-668"> 668</a></span>
<span class="normal"><a href="#__codelineno-0-669"> 669</a></span>
<span class="normal"><a href="#__codelineno-0-670"> 670</a></span>
<span class="normal"><a href="#__codelineno-0-671"> 671</a></span>
<span class="normal"><a href="#__codelineno-0-672"> 672</a></span>
<span class="normal"><a href="#__codelineno-0-673"> 673</a></span>
<span class="normal"><a href="#__codelineno-0-674"> 674</a></span>
<span class="normal"><a href="#__codelineno-0-675"> 675</a></span>
<span class="normal"><a href="#__codelineno-0-676"> 676</a></span>
<span class="normal"><a href="#__codelineno-0-677"> 677</a></span>
<span class="normal"><a href="#__codelineno-0-678"> 678</a></span>
<span class="normal"><a href="#__codelineno-0-679"> 679</a></span>
<span class="normal"><a href="#__codelineno-0-680"> 680</a></span>
<span class="normal"><a href="#__codelineno-0-681"> 681</a></span>
<span class="normal"><a href="#__codelineno-0-682"> 682</a></span>
<span class="normal"><a href="#__codelineno-0-683"> 683</a></span>
<span class="normal"><a href="#__codelineno-0-684"> 684</a></span>
<span class="normal"><a href="#__codelineno-0-685"> 685</a></span>
<span class="normal"><a href="#__codelineno-0-686"> 686</a></span>
<span class="normal"><a href="#__codelineno-0-687"> 687</a></span>
<span class="normal"><a href="#__codelineno-0-688"> 688</a></span>
<span class="normal"><a href="#__codelineno-0-689"> 689</a></span>
<span class="normal"><a href="#__codelineno-0-690"> 690</a></span>
<span class="normal"><a href="#__codelineno-0-691"> 691</a></span>
<span class="normal"><a href="#__codelineno-0-692"> 692</a></span>
<span class="normal"><a href="#__codelineno-0-693"> 693</a></span>
<span class="normal"><a href="#__codelineno-0-694"> 694</a></span>
<span class="normal"><a href="#__codelineno-0-695"> 695</a></span>
<span class="normal"><a href="#__codelineno-0-696"> 696</a></span>
<span class="normal"><a href="#__codelineno-0-697"> 697</a></span>
<span class="normal"><a href="#__codelineno-0-698"> 698</a></span>
<span class="normal"><a href="#__codelineno-0-699"> 699</a></span>
<span class="normal"><a href="#__codelineno-0-700"> 700</a></span>
<span class="normal"><a href="#__codelineno-0-701"> 701</a></span>
<span class="normal"><a href="#__codelineno-0-702"> 702</a></span>
<span class="normal"><a href="#__codelineno-0-703"> 703</a></span>
<span class="normal"><a href="#__codelineno-0-704"> 704</a></span>
<span class="normal"><a href="#__codelineno-0-705"> 705</a></span>
<span class="normal"><a href="#__codelineno-0-706"> 706</a></span>
<span class="normal"><a href="#__codelineno-0-707"> 707</a></span>
<span class="normal"><a href="#__codelineno-0-708"> 708</a></span>
<span class="normal"><a href="#__codelineno-0-709"> 709</a></span>
<span class="normal"><a href="#__codelineno-0-710"> 710</a></span>
<span class="normal"><a href="#__codelineno-0-711"> 711</a></span>
<span class="normal"><a href="#__codelineno-0-712"> 712</a></span>
<span class="normal"><a href="#__codelineno-0-713"> 713</a></span>
<span class="normal"><a href="#__codelineno-0-714"> 714</a></span>
<span class="normal"><a href="#__codelineno-0-715"> 715</a></span>
<span class="normal"><a href="#__codelineno-0-716"> 716</a></span>
<span class="normal"><a href="#__codelineno-0-717"> 717</a></span>
<span class="normal"><a href="#__codelineno-0-718"> 718</a></span>
<span class="normal"><a href="#__codelineno-0-719"> 719</a></span>
<span class="normal"><a href="#__codelineno-0-720"> 720</a></span>
<span class="normal"><a href="#__codelineno-0-721"> 721</a></span>
<span class="normal"><a href="#__codelineno-0-722"> 722</a></span>
<span class="normal"><a href="#__codelineno-0-723"> 723</a></span>
<span class="normal"><a href="#__codelineno-0-724"> 724</a></span>
<span class="normal"><a href="#__codelineno-0-725"> 725</a></span>
<span class="normal"><a href="#__codelineno-0-726"> 726</a></span>
<span class="normal"><a href="#__codelineno-0-727"> 727</a></span>
<span class="normal"><a href="#__codelineno-0-728"> 728</a></span>
<span class="normal"><a href="#__codelineno-0-729"> 729</a></span>
<span class="normal"><a href="#__codelineno-0-730"> 730</a></span>
<span class="normal"><a href="#__codelineno-0-731"> 731</a></span>
<span class="normal"><a href="#__codelineno-0-732"> 732</a></span>
<span class="normal"><a href="#__codelineno-0-733"> 733</a></span>
<span class="normal"><a href="#__codelineno-0-734"> 734</a></span>
<span class="normal"><a href="#__codelineno-0-735"> 735</a></span>
<span class="normal"><a href="#__codelineno-0-736"> 736</a></span>
<span class="normal"><a href="#__codelineno-0-737"> 737</a></span>
<span class="normal"><a href="#__codelineno-0-738"> 738</a></span>
<span class="normal"><a href="#__codelineno-0-739"> 739</a></span>
<span class="normal"><a href="#__codelineno-0-740"> 740</a></span>
<span class="normal"><a href="#__codelineno-0-741"> 741</a></span>
<span class="normal"><a href="#__codelineno-0-742"> 742</a></span>
<span class="normal"><a href="#__codelineno-0-743"> 743</a></span>
<span class="normal"><a href="#__codelineno-0-744"> 744</a></span>
<span class="normal"><a href="#__codelineno-0-745"> 745</a></span>
<span class="normal"><a href="#__codelineno-0-746"> 746</a></span>
<span class="normal"><a href="#__codelineno-0-747"> 747</a></span>
<span class="normal"><a href="#__codelineno-0-748"> 748</a></span>
<span class="normal"><a href="#__codelineno-0-749"> 749</a></span>
<span class="normal"><a href="#__codelineno-0-750"> 750</a></span>
<span class="normal"><a href="#__codelineno-0-751"> 751</a></span>
<span class="normal"><a href="#__codelineno-0-752"> 752</a></span>
<span class="normal"><a href="#__codelineno-0-753"> 753</a></span>
<span class="normal"><a href="#__codelineno-0-754"> 754</a></span>
<span class="normal"><a href="#__codelineno-0-755"> 755</a></span>
<span class="normal"><a href="#__codelineno-0-756"> 756</a></span>
<span class="normal"><a href="#__codelineno-0-757"> 757</a></span>
<span class="normal"><a href="#__codelineno-0-758"> 758</a></span>
<span class="normal"><a href="#__codelineno-0-759"> 759</a></span>
<span class="normal"><a href="#__codelineno-0-760"> 760</a></span>
<span class="normal"><a href="#__codelineno-0-761"> 761</a></span>
<span class="normal"><a href="#__codelineno-0-762"> 762</a></span>
<span class="normal"><a href="#__codelineno-0-763"> 763</a></span>
<span class="normal"><a href="#__codelineno-0-764"> 764</a></span>
<span class="normal"><a href="#__codelineno-0-765"> 765</a></span>
<span class="normal"><a href="#__codelineno-0-766"> 766</a></span>
<span class="normal"><a href="#__codelineno-0-767"> 767</a></span>
<span class="normal"><a href="#__codelineno-0-768"> 768</a></span>
<span class="normal"><a href="#__codelineno-0-769"> 769</a></span>
<span class="normal"><a href="#__codelineno-0-770"> 770</a></span>
<span class="normal"><a href="#__codelineno-0-771"> 771</a></span>
<span class="normal"><a href="#__codelineno-0-772"> 772</a></span>
<span class="normal"><a href="#__codelineno-0-773"> 773</a></span>
<span class="normal"><a href="#__codelineno-0-774"> 774</a></span>
<span class="normal"><a href="#__codelineno-0-775"> 775</a></span>
<span class="normal"><a href="#__codelineno-0-776"> 776</a></span>
<span class="normal"><a href="#__codelineno-0-777"> 777</a></span>
<span class="normal"><a href="#__codelineno-0-778"> 778</a></span>
<span class="normal"><a href="#__codelineno-0-779"> 779</a></span>
<span class="normal"><a href="#__codelineno-0-780"> 780</a></span>
<span class="normal"><a href="#__codelineno-0-781"> 781</a></span>
<span class="normal"><a href="#__codelineno-0-782"> 782</a></span>
<span class="normal"><a href="#__codelineno-0-783"> 783</a></span>
<span class="normal"><a href="#__codelineno-0-784"> 784</a></span>
<span class="normal"><a href="#__codelineno-0-785"> 785</a></span>
<span class="normal"><a href="#__codelineno-0-786"> 786</a></span>
<span class="normal"><a href="#__codelineno-0-787"> 787</a></span>
<span class="normal"><a href="#__codelineno-0-788"> 788</a></span>
<span class="normal"><a href="#__codelineno-0-789"> 789</a></span>
<span class="normal"><a href="#__codelineno-0-790"> 790</a></span>
<span class="normal"><a href="#__codelineno-0-791"> 791</a></span>
<span class="normal"><a href="#__codelineno-0-792"> 792</a></span>
<span class="normal"><a href="#__codelineno-0-793"> 793</a></span>
<span class="normal"><a href="#__codelineno-0-794"> 794</a></span>
<span class="normal"><a href="#__codelineno-0-795"> 795</a></span>
<span class="normal"><a href="#__codelineno-0-796"> 796</a></span>
<span class="normal"><a href="#__codelineno-0-797"> 797</a></span>
<span class="normal"><a href="#__codelineno-0-798"> 798</a></span>
<span class="normal"><a href="#__codelineno-0-799"> 799</a></span>
<span class="normal"><a href="#__codelineno-0-800"> 800</a></span>
<span class="normal"><a href="#__codelineno-0-801"> 801</a></span>
<span class="normal"><a href="#__codelineno-0-802"> 802</a></span>
<span class="normal"><a href="#__codelineno-0-803"> 803</a></span>
<span class="normal"><a href="#__codelineno-0-804"> 804</a></span>
<span class="normal"><a href="#__codelineno-0-805"> 805</a></span>
<span class="normal"><a href="#__codelineno-0-806"> 806</a></span>
<span class="normal"><a href="#__codelineno-0-807"> 807</a></span>
<span class="normal"><a href="#__codelineno-0-808"> 808</a></span>
<span class="normal"><a href="#__codelineno-0-809"> 809</a></span>
<span class="normal"><a href="#__codelineno-0-810"> 810</a></span>
<span class="normal"><a href="#__codelineno-0-811"> 811</a></span>
<span class="normal"><a href="#__codelineno-0-812"> 812</a></span>
<span class="normal"><a href="#__codelineno-0-813"> 813</a></span>
<span class="normal"><a href="#__codelineno-0-814"> 814</a></span>
<span class="normal"><a href="#__codelineno-0-815"> 815</a></span>
<span class="normal"><a href="#__codelineno-0-816"> 816</a></span>
<span class="normal"><a href="#__codelineno-0-817"> 817</a></span>
<span class="normal"><a href="#__codelineno-0-818"> 818</a></span>
<span class="normal"><a href="#__codelineno-0-819"> 819</a></span>
<span class="normal"><a href="#__codelineno-0-820"> 820</a></span>
<span class="normal"><a href="#__codelineno-0-821"> 821</a></span>
<span class="normal"><a href="#__codelineno-0-822"> 822</a></span>
<span class="normal"><a href="#__codelineno-0-823"> 823</a></span>
<span class="normal"><a href="#__codelineno-0-824"> 824</a></span>
<span class="normal"><a href="#__codelineno-0-825"> 825</a></span>
<span class="normal"><a href="#__codelineno-0-826"> 826</a></span>
<span class="normal"><a href="#__codelineno-0-827"> 827</a></span>
<span class="normal"><a href="#__codelineno-0-828"> 828</a></span>
<span class="normal"><a href="#__codelineno-0-829"> 829</a></span>
<span class="normal"><a href="#__codelineno-0-830"> 830</a></span>
<span class="normal"><a href="#__codelineno-0-831"> 831</a></span>
<span class="normal"><a href="#__codelineno-0-832"> 832</a></span>
<span class="normal"><a href="#__codelineno-0-833"> 833</a></span>
<span class="normal"><a href="#__codelineno-0-834"> 834</a></span>
<span class="normal"><a href="#__codelineno-0-835"> 835</a></span>
<span class="normal"><a href="#__codelineno-0-836"> 836</a></span>
<span class="normal"><a href="#__codelineno-0-837"> 837</a></span>
<span class="normal"><a href="#__codelineno-0-838"> 838</a></span>
<span class="normal"><a href="#__codelineno-0-839"> 839</a></span>
<span class="normal"><a href="#__codelineno-0-840"> 840</a></span>
<span class="normal"><a href="#__codelineno-0-841"> 841</a></span>
<span class="normal"><a href="#__codelineno-0-842"> 842</a></span>
<span class="normal"><a href="#__codelineno-0-843"> 843</a></span>
<span class="normal"><a href="#__codelineno-0-844"> 844</a></span>
<span class="normal"><a href="#__codelineno-0-845"> 845</a></span>
<span class="normal"><a href="#__codelineno-0-846"> 846</a></span>
<span class="normal"><a href="#__codelineno-0-847"> 847</a></span>
<span class="normal"><a href="#__codelineno-0-848"> 848</a></span>
<span class="normal"><a href="#__codelineno-0-849"> 849</a></span>
<span class="normal"><a href="#__codelineno-0-850"> 850</a></span>
<span class="normal"><a href="#__codelineno-0-851"> 851</a></span>
<span class="normal"><a href="#__codelineno-0-852"> 852</a></span>
<span class="normal"><a href="#__codelineno-0-853"> 853</a></span>
<span class="normal"><a href="#__codelineno-0-854"> 854</a></span>
<span class="normal"><a href="#__codelineno-0-855"> 855</a></span>
<span class="normal"><a href="#__codelineno-0-856"> 856</a></span>
<span class="normal"><a href="#__codelineno-0-857"> 857</a></span>
<span class="normal"><a href="#__codelineno-0-858"> 858</a></span>
<span class="normal"><a href="#__codelineno-0-859"> 859</a></span>
<span class="normal"><a href="#__codelineno-0-860"> 860</a></span>
<span class="normal"><a href="#__codelineno-0-861"> 861</a></span>
<span class="normal"><a href="#__codelineno-0-862"> 862</a></span>
<span class="normal"><a href="#__codelineno-0-863"> 863</a></span>
<span class="normal"><a href="#__codelineno-0-864"> 864</a></span>
<span class="normal"><a href="#__codelineno-0-865"> 865</a></span>
<span class="normal"><a href="#__codelineno-0-866"> 866</a></span>
<span class="normal"><a href="#__codelineno-0-867"> 867</a></span>
<span class="normal"><a href="#__codelineno-0-868"> 868</a></span>
<span class="normal"><a href="#__codelineno-0-869"> 869</a></span>
<span class="normal"><a href="#__codelineno-0-870"> 870</a></span>
<span class="normal"><a href="#__codelineno-0-871"> 871</a></span>
<span class="normal"><a href="#__codelineno-0-872"> 872</a></span>
<span class="normal"><a href="#__codelineno-0-873"> 873</a></span>
<span class="normal"><a href="#__codelineno-0-874"> 874</a></span>
<span class="normal"><a href="#__codelineno-0-875"> 875</a></span>
<span class="normal"><a href="#__codelineno-0-876"> 876</a></span>
<span class="normal"><a href="#__codelineno-0-877"> 877</a></span>
<span class="normal"><a href="#__codelineno-0-878"> 878</a></span>
<span class="normal"><a href="#__codelineno-0-879"> 879</a></span>
<span class="normal"><a href="#__codelineno-0-880"> 880</a></span>
<span class="normal"><a href="#__codelineno-0-881"> 881</a></span>
<span class="normal"><a href="#__codelineno-0-882"> 882</a></span>
<span class="normal"><a href="#__codelineno-0-883"> 883</a></span>
<span class="normal"><a href="#__codelineno-0-884"> 884</a></span>
<span class="normal"><a href="#__codelineno-0-885"> 885</a></span>
<span class="normal"><a href="#__codelineno-0-886"> 886</a></span>
<span class="normal"><a href="#__codelineno-0-887"> 887</a></span>
<span class="normal"><a href="#__codelineno-0-888"> 888</a></span>
<span class="normal"><a href="#__codelineno-0-889"> 889</a></span>
<span class="normal"><a href="#__codelineno-0-890"> 890</a></span>
<span class="normal"><a href="#__codelineno-0-891"> 891</a></span>
<span class="normal"><a href="#__codelineno-0-892"> 892</a></span>
<span class="normal"><a href="#__codelineno-0-893"> 893</a></span>
<span class="normal"><a href="#__codelineno-0-894"> 894</a></span>
<span class="normal"><a href="#__codelineno-0-895"> 895</a></span>
<span class="normal"><a href="#__codelineno-0-896"> 896</a></span>
<span class="normal"><a href="#__codelineno-0-897"> 897</a></span>
<span class="normal"><a href="#__codelineno-0-898"> 898</a></span>
<span class="normal"><a href="#__codelineno-0-899"> 899</a></span>
<span class="normal"><a href="#__codelineno-0-900"> 900</a></span>
<span class="normal"><a href="#__codelineno-0-901"> 901</a></span>
<span class="normal"><a href="#__codelineno-0-902"> 902</a></span>
<span class="normal"><a href="#__codelineno-0-903"> 903</a></span>
<span class="normal"><a href="#__codelineno-0-904"> 904</a></span>
<span class="normal"><a href="#__codelineno-0-905"> 905</a></span>
<span class="normal"><a href="#__codelineno-0-906"> 906</a></span>
<span class="normal"><a href="#__codelineno-0-907"> 907</a></span>
<span class="normal"><a href="#__codelineno-0-908"> 908</a></span>
<span class="normal"><a href="#__codelineno-0-909"> 909</a></span>
<span class="normal"><a href="#__codelineno-0-910"> 910</a></span>
<span class="normal"><a href="#__codelineno-0-911"> 911</a></span>
<span class="normal"><a href="#__codelineno-0-912"> 912</a></span>
<span class="normal"><a href="#__codelineno-0-913"> 913</a></span>
<span class="normal"><a href="#__codelineno-0-914"> 914</a></span>
<span class="normal"><a href="#__codelineno-0-915"> 915</a></span>
<span class="normal"><a href="#__codelineno-0-916"> 916</a></span>
<span class="normal"><a href="#__codelineno-0-917"> 917</a></span>
<span class="normal"><a href="#__codelineno-0-918"> 918</a></span>
<span class="normal"><a href="#__codelineno-0-919"> 919</a></span>
<span class="normal"><a href="#__codelineno-0-920"> 920</a></span>
<span class="normal"><a href="#__codelineno-0-921"> 921</a></span>
<span class="normal"><a href="#__codelineno-0-922"> 922</a></span>
<span class="normal"><a href="#__codelineno-0-923"> 923</a></span>
<span class="normal"><a href="#__codelineno-0-924"> 924</a></span>
<span class="normal"><a href="#__codelineno-0-925"> 925</a></span>
<span class="normal"><a href="#__codelineno-0-926"> 926</a></span>
<span class="normal"><a href="#__codelineno-0-927"> 927</a></span>
<span class="normal"><a href="#__codelineno-0-928"> 928</a></span>
<span class="normal"><a href="#__codelineno-0-929"> 929</a></span>
<span class="normal"><a href="#__codelineno-0-930"> 930</a></span>
<span class="normal"><a href="#__codelineno-0-931"> 931</a></span>
<span class="normal"><a href="#__codelineno-0-932"> 932</a></span>
<span class="normal"><a href="#__codelineno-0-933"> 933</a></span>
<span class="normal"><a href="#__codelineno-0-934"> 934</a></span>
<span class="normal"><a href="#__codelineno-0-935"> 935</a></span>
<span class="normal"><a href="#__codelineno-0-936"> 936</a></span>
<span class="normal"><a href="#__codelineno-0-937"> 937</a></span>
<span class="normal"><a href="#__codelineno-0-938"> 938</a></span>
<span class="normal"><a href="#__codelineno-0-939"> 939</a></span>
<span class="normal"><a href="#__codelineno-0-940"> 940</a></span>
<span class="normal"><a href="#__codelineno-0-941"> 941</a></span>
<span class="normal"><a href="#__codelineno-0-942"> 942</a></span>
<span class="normal"><a href="#__codelineno-0-943"> 943</a></span>
<span class="normal"><a href="#__codelineno-0-944"> 944</a></span>
<span class="normal"><a href="#__codelineno-0-945"> 945</a></span>
<span class="normal"><a href="#__codelineno-0-946"> 946</a></span>
<span class="normal"><a href="#__codelineno-0-947"> 947</a></span>
<span class="normal"><a href="#__codelineno-0-948"> 948</a></span>
<span class="normal"><a href="#__codelineno-0-949"> 949</a></span>
<span class="normal"><a href="#__codelineno-0-950"> 950</a></span>
<span class="normal"><a href="#__codelineno-0-951"> 951</a></span>
<span class="normal"><a href="#__codelineno-0-952"> 952</a></span>
<span class="normal"><a href="#__codelineno-0-953"> 953</a></span>
<span class="normal"><a href="#__codelineno-0-954"> 954</a></span>
<span class="normal"><a href="#__codelineno-0-955"> 955</a></span>
<span class="normal"><a href="#__codelineno-0-956"> 956</a></span>
<span class="normal"><a href="#__codelineno-0-957"> 957</a></span>
<span class="normal"><a href="#__codelineno-0-958"> 958</a></span>
<span class="normal"><a href="#__codelineno-0-959"> 959</a></span>
<span class="normal"><a href="#__codelineno-0-960"> 960</a></span>
<span class="normal"><a href="#__codelineno-0-961"> 961</a></span>
<span class="normal"><a href="#__codelineno-0-962"> 962</a></span>
<span class="normal"><a href="#__codelineno-0-963"> 963</a></span>
<span class="normal"><a href="#__codelineno-0-964"> 964</a></span>
<span class="normal"><a href="#__codelineno-0-965"> 965</a></span>
<span class="normal"><a href="#__codelineno-0-966"> 966</a></span>
<span class="normal"><a href="#__codelineno-0-967"> 967</a></span>
<span class="normal"><a href="#__codelineno-0-968"> 968</a></span>
<span class="normal"><a href="#__codelineno-0-969"> 969</a></span>
<span class="normal"><a href="#__codelineno-0-970"> 970</a></span>
<span class="normal"><a href="#__codelineno-0-971"> 971</a></span>
<span class="normal"><a href="#__codelineno-0-972"> 972</a></span>
<span class="normal"><a href="#__codelineno-0-973"> 973</a></span>
<span class="normal"><a href="#__codelineno-0-974"> 974</a></span>
<span class="normal"><a href="#__codelineno-0-975"> 975</a></span>
<span class="normal"><a href="#__codelineno-0-976"> 976</a></span>
<span class="normal"><a href="#__codelineno-0-977"> 977</a></span>
<span class="normal"><a href="#__codelineno-0-978"> 978</a></span>
<span class="normal"><a href="#__codelineno-0-979"> 979</a></span>
<span class="normal"><a href="#__codelineno-0-980"> 980</a></span>
<span class="normal"><a href="#__codelineno-0-981"> 981</a></span>
<span class="normal"><a href="#__codelineno-0-982"> 982</a></span>
<span class="normal"><a href="#__codelineno-0-983"> 983</a></span>
<span class="normal"><a href="#__codelineno-0-984"> 984</a></span>
<span class="normal"><a href="#__codelineno-0-985"> 985</a></span>
<span class="normal"><a href="#__codelineno-0-986"> 986</a></span>
<span class="normal"><a href="#__codelineno-0-987"> 987</a></span>
<span class="normal"><a href="#__codelineno-0-988"> 988</a></span>
<span class="normal"><a href="#__codelineno-0-989"> 989</a></span>
<span class="normal"><a href="#__codelineno-0-990"> 990</a></span>
<span class="normal"><a href="#__codelineno-0-991"> 991</a></span>
<span class="normal"><a href="#__codelineno-0-992"> 992</a></span>
<span class="normal"><a href="#__codelineno-0-993"> 993</a></span>
<span class="normal"><a href="#__codelineno-0-994"> 994</a></span>
<span class="normal"><a href="#__codelineno-0-995"> 995</a></span>
<span class="normal"><a href="#__codelineno-0-996"> 996</a></span>
<span class="normal"><a href="#__codelineno-0-997"> 997</a></span>
<span class="normal"><a href="#__codelineno-0-998"> 998</a></span>
<span class="normal"><a href="#__codelineno-0-999"> 999</a></span>
<span class="normal"><a href="#__codelineno-0-1000">1000</a></span>
<span class="normal"><a href="#__codelineno-0-1001">1001</a></span>
<span class="normal"><a href="#__codelineno-0-1002">1002</a></span>
<span class="normal"><a href="#__codelineno-0-1003">1003</a></span>
<span class="normal"><a href="#__codelineno-0-1004">1004</a></span>
<span class="normal"><a href="#__codelineno-0-1005">1005</a></span>
<span class="normal"><a href="#__codelineno-0-1006">1006</a></span>
<span class="normal"><a href="#__codelineno-0-1007">1007</a></span>
<span class="normal"><a href="#__codelineno-0-1008">1008</a></span>
<span class="normal"><a href="#__codelineno-0-1009">1009</a></span>
<span class="normal"><a href="#__codelineno-0-1010">1010</a></span>
<span class="normal"><a href="#__codelineno-0-1011">1011</a></span>
<span class="normal"><a href="#__codelineno-0-1012">1012</a></span>
<span class="normal"><a href="#__codelineno-0-1013">1013</a></span>
<span class="normal"><a href="#__codelineno-0-1014">1014</a></span>
<span class="normal"><a href="#__codelineno-0-1015">1015</a></span>
<span class="normal"><a href="#__codelineno-0-1016">1016</a></span>
<span class="normal"><a href="#__codelineno-0-1017">1017</a></span>
<span class="normal"><a href="#__codelineno-0-1018">1018</a></span>
<span class="normal"><a href="#__codelineno-0-1019">1019</a></span>
<span class="normal"><a href="#__codelineno-0-1020">1020</a></span>
<span class="normal"><a href="#__codelineno-0-1021">1021</a></span>
<span class="normal"><a href="#__codelineno-0-1022">1022</a></span>
<span class="normal"><a href="#__codelineno-0-1023">1023</a></span>
<span class="normal"><a href="#__codelineno-0-1024">1024</a></span>
<span class="normal"><a href="#__codelineno-0-1025">1025</a></span>
<span class="normal"><a href="#__codelineno-0-1026">1026</a></span>
<span class="normal"><a href="#__codelineno-0-1027">1027</a></span>
<span class="normal"><a href="#__codelineno-0-1028">1028</a></span>
<span class="normal"><a href="#__codelineno-0-1029">1029</a></span>
<span class="normal"><a href="#__codelineno-0-1030">1030</a></span>
<span class="normal"><a href="#__codelineno-0-1031">1031</a></span>
<span class="normal"><a href="#__codelineno-0-1032">1032</a></span>
<span class="normal"><a href="#__codelineno-0-1033">1033</a></span>
<span class="normal"><a href="#__codelineno-0-1034">1034</a></span>
<span class="normal"><a href="#__codelineno-0-1035">1035</a></span>
<span class="normal"><a href="#__codelineno-0-1036">1036</a></span>
<span class="normal"><a href="#__codelineno-0-1037">1037</a></span>
<span class="normal"><a href="#__codelineno-0-1038">1038</a></span>
<span class="normal"><a href="#__codelineno-0-1039">1039</a></span>
<span class="normal"><a href="#__codelineno-0-1040">1040</a></span>
<span class="normal"><a href="#__codelineno-0-1041">1041</a></span>
<span class="normal"><a href="#__codelineno-0-1042">1042</a></span>
<span class="normal"><a href="#__codelineno-0-1043">1043</a></span>
<span class="normal"><a href="#__codelineno-0-1044">1044</a></span>
<span class="normal"><a href="#__codelineno-0-1045">1045</a></span>
<span class="normal"><a href="#__codelineno-0-1046">1046</a></span>
<span class="normal"><a href="#__codelineno-0-1047">1047</a></span>
<span class="normal"><a href="#__codelineno-0-1048">1048</a></span>
<span class="normal"><a href="#__codelineno-0-1049">1049</a></span>
<span class="normal"><a href="#__codelineno-0-1050">1050</a></span>
<span class="normal"><a href="#__codelineno-0-1051">1051</a></span>
<span class="normal"><a href="#__codelineno-0-1052">1052</a></span>
<span class="normal"><a href="#__codelineno-0-1053">1053</a></span>
<span class="normal"><a href="#__codelineno-0-1054">1054</a></span>
<span class="normal"><a href="#__codelineno-0-1055">1055</a></span>
<span class="normal"><a href="#__codelineno-0-1056">1056</a></span>
<span class="normal"><a href="#__codelineno-0-1057">1057</a></span>
<span class="normal"><a href="#__codelineno-0-1058">1058</a></span>
<span class="normal"><a href="#__codelineno-0-1059">1059</a></span>
<span class="normal"><a href="#__codelineno-0-1060">1060</a></span>
<span class="normal"><a href="#__codelineno-0-1061">1061</a></span>
<span class="normal"><a href="#__codelineno-0-1062">1062</a></span>
<span class="normal"><a href="#__codelineno-0-1063">1063</a></span>
<span class="normal"><a href="#__codelineno-0-1064">1064</a></span>
<span class="normal"><a href="#__codelineno-0-1065">1065</a></span>
<span class="normal"><a href="#__codelineno-0-1066">1066</a></span>
<span class="normal"><a href="#__codelineno-0-1067">1067</a></span>
<span class="normal"><a href="#__codelineno-0-1068">1068</a></span>
<span class="normal"><a href="#__codelineno-0-1069">1069</a></span>
<span class="normal"><a href="#__codelineno-0-1070">1070</a></span>
<span class="normal"><a href="#__codelineno-0-1071">1071</a></span>
<span class="normal"><a href="#__codelineno-0-1072">1072</a></span>
<span class="normal"><a href="#__codelineno-0-1073">1073</a></span>
<span class="normal"><a href="#__codelineno-0-1074">1074</a></span>
<span class="normal"><a href="#__codelineno-0-1075">1075</a></span>
<span class="normal"><a href="#__codelineno-0-1076">1076</a></span>
<span class="normal"><a href="#__codelineno-0-1077">1077</a></span>
<span class="normal"><a href="#__codelineno-0-1078">1078</a></span>
<span class="normal"><a href="#__codelineno-0-1079">1079</a></span>
<span class="normal"><a href="#__codelineno-0-1080">1080</a></span>
<span class="normal"><a href="#__codelineno-0-1081">1081</a></span>
<span class="normal"><a href="#__codelineno-0-1082">1082</a></span>
<span class="normal"><a href="#__codelineno-0-1083">1083</a></span>
<span class="normal"><a href="#__codelineno-0-1084">1084</a></span>
<span class="normal"><a href="#__codelineno-0-1085">1085</a></span>
<span class="normal"><a href="#__codelineno-0-1086">1086</a></span>
<span class="normal"><a href="#__codelineno-0-1087">1087</a></span>
<span class="normal"><a href="#__codelineno-0-1088">1088</a></span>
<span class="normal"><a href="#__codelineno-0-1089">1089</a></span>
<span class="normal"><a href="#__codelineno-0-1090">1090</a></span>
<span class="normal"><a href="#__codelineno-0-1091">1091</a></span>
<span class="normal"><a href="#__codelineno-0-1092">1092</a></span>
<span class="normal"><a href="#__codelineno-0-1093">1093</a></span>
<span class="normal"><a href="#__codelineno-0-1094">1094</a></span>
<span class="normal"><a href="#__codelineno-0-1095">1095</a></span>
<span class="normal"><a href="#__codelineno-0-1096">1096</a></span>
<span class="normal"><a href="#__codelineno-0-1097">1097</a></span>
<span class="normal"><a href="#__codelineno-0-1098">1098</a></span>
<span class="normal"><a href="#__codelineno-0-1099">1099</a></span>
<span class="normal"><a href="#__codelineno-0-1100">1100</a></span>
<span class="normal"><a href="#__codelineno-0-1101">1101</a></span>
<span class="normal"><a href="#__codelineno-0-1102">1102</a></span>
<span class="normal"><a href="#__codelineno-0-1103">1103</a></span>
<span class="normal"><a href="#__codelineno-0-1104">1104</a></span>
<span class="normal"><a href="#__codelineno-0-1105">1105</a></span>
<span class="normal"><a href="#__codelineno-0-1106">1106</a></span>
<span class="normal"><a href="#__codelineno-0-1107">1107</a></span>
<span class="normal"><a href="#__codelineno-0-1108">1108</a></span>
<span class="normal"><a href="#__codelineno-0-1109">1109</a></span>
<span class="normal"><a href="#__codelineno-0-1110">1110</a></span>
<span class="normal"><a href="#__codelineno-0-1111">1111</a></span>
<span class="normal"><a href="#__codelineno-0-1112">1112</a></span>
<span class="normal"><a href="#__codelineno-0-1113">1113</a></span>
<span class="normal"><a href="#__codelineno-0-1114">1114</a></span>
<span class="normal"><a href="#__codelineno-0-1115">1115</a></span>
<span class="normal"><a href="#__codelineno-0-1116">1116</a></span>
<span class="normal"><a href="#__codelineno-0-1117">1117</a></span>
<span class="normal"><a href="#__codelineno-0-1118">1118</a></span>
<span class="normal"><a href="#__codelineno-0-1119">1119</a></span>
<span class="normal"><a href="#__codelineno-0-1120">1120</a></span>
<span class="normal"><a href="#__codelineno-0-1121">1121</a></span>
<span class="normal"><a href="#__codelineno-0-1122">1122</a></span>
<span class="normal"><a href="#__codelineno-0-1123">1123</a></span>
<span class="normal"><a href="#__codelineno-0-1124">1124</a></span>
<span class="normal"><a href="#__codelineno-0-1125">1125</a></span>
<span class="normal"><a href="#__codelineno-0-1126">1126</a></span>
<span class="normal"><a href="#__codelineno-0-1127">1127</a></span>
<span class="normal"><a href="#__codelineno-0-1128">1128</a></span>
<span class="normal"><a href="#__codelineno-0-1129">1129</a></span>
<span class="normal"><a href="#__codelineno-0-1130">1130</a></span>
<span class="normal"><a href="#__codelineno-0-1131">1131</a></span>
<span class="normal"><a href="#__codelineno-0-1132">1132</a></span>
<span class="normal"><a href="#__codelineno-0-1133">1133</a></span>
<span class="normal"><a href="#__codelineno-0-1134">1134</a></span>
<span class="normal"><a href="#__codelineno-0-1135">1135</a></span>
<span class="normal"><a href="#__codelineno-0-1136">1136</a></span>
<span class="normal"><a href="#__codelineno-0-1137">1137</a></span>
<span class="normal"><a href="#__codelineno-0-1138">1138</a></span>
<span class="normal"><a href="#__codelineno-0-1139">1139</a></span>
<span class="normal"><a href="#__codelineno-0-1140">1140</a></span>
<span class="normal"><a href="#__codelineno-0-1141">1141</a></span>
<span class="normal"><a href="#__codelineno-0-1142">1142</a></span>
<span class="normal"><a href="#__codelineno-0-1143">1143</a></span>
<span class="normal"><a href="#__codelineno-0-1144">1144</a></span>
<span class="normal"><a href="#__codelineno-0-1145">1145</a></span>
<span class="normal"><a href="#__codelineno-0-1146">1146</a></span>
<span class="normal"><a href="#__codelineno-0-1147">1147</a></span>
<span class="normal"><a href="#__codelineno-0-1148">1148</a></span>
<span class="normal"><a href="#__codelineno-0-1149">1149</a></span>
<span class="normal"><a href="#__codelineno-0-1150">1150</a></span>
<span class="normal"><a href="#__codelineno-0-1151">1151</a></span>
<span class="normal"><a href="#__codelineno-0-1152">1152</a></span>
<span class="normal"><a href="#__codelineno-0-1153">1153</a></span>
<span class="normal"><a href="#__codelineno-0-1154">1154</a></span>
<span class="normal"><a href="#__codelineno-0-1155">1155</a></span>
<span class="normal"><a href="#__codelineno-0-1156">1156</a></span>
<span class="normal"><a href="#__codelineno-0-1157">1157</a></span>
<span class="normal"><a href="#__codelineno-0-1158">1158</a></span>
<span class="normal"><a href="#__codelineno-0-1159">1159</a></span>
<span class="normal"><a href="#__codelineno-0-1160">1160</a></span>
<span class="normal"><a href="#__codelineno-0-1161">1161</a></span>
<span class="normal"><a href="#__codelineno-0-1162">1162</a></span>
<span class="normal"><a href="#__codelineno-0-1163">1163</a></span>
<span class="normal"><a href="#__codelineno-0-1164">1164</a></span>
<span class="normal"><a href="#__codelineno-0-1165">1165</a></span>
<span class="normal"><a href="#__codelineno-0-1166">1166</a></span>
<span class="normal"><a href="#__codelineno-0-1167">1167</a></span>
<span class="normal"><a href="#__codelineno-0-1168">1168</a></span>
<span class="normal"><a href="#__codelineno-0-1169">1169</a></span>
<span class="normal"><a href="#__codelineno-0-1170">1170</a></span>
<span class="normal"><a href="#__codelineno-0-1171">1171</a></span>
<span class="normal"><a href="#__codelineno-0-1172">1172</a></span>
<span class="normal"><a href="#__codelineno-0-1173">1173</a></span>
<span class="normal"><a href="#__codelineno-0-1174">1174</a></span>
<span class="normal"><a href="#__codelineno-0-1175">1175</a></span>
<span class="normal"><a href="#__codelineno-0-1176">1176</a></span>
<span class="normal"><a href="#__codelineno-0-1177">1177</a></span>
<span class="normal"><a href="#__codelineno-0-1178">1178</a></span>
<span class="normal"><a href="#__codelineno-0-1179">1179</a></span>
<span class="normal"><a href="#__codelineno-0-1180">1180</a></span>
<span class="normal"><a href="#__codelineno-0-1181">1181</a></span>
<span class="normal"><a href="#__codelineno-0-1182">1182</a></span>
<span class="normal"><a href="#__codelineno-0-1183">1183</a></span>
<span class="normal"><a href="#__codelineno-0-1184">1184</a></span>
<span class="normal"><a href="#__codelineno-0-1185">1185</a></span>
<span class="normal"><a href="#__codelineno-0-1186">1186</a></span>
<span class="normal"><a href="#__codelineno-0-1187">1187</a></span>
<span class="normal"><a href="#__codelineno-0-1188">1188</a></span>
<span class="normal"><a href="#__codelineno-0-1189">1189</a></span>
<span class="normal"><a href="#__codelineno-0-1190">1190</a></span>
<span class="normal"><a href="#__codelineno-0-1191">1191</a></span>
<span class="normal"><a href="#__codelineno-0-1192">1192</a></span>
<span class="normal"><a href="#__codelineno-0-1193">1193</a></span>
<span class="normal"><a href="#__codelineno-0-1194">1194</a></span>
<span class="normal"><a href="#__codelineno-0-1195">1195</a></span>
<span class="normal"><a href="#__codelineno-0-1196">1196</a></span>
<span class="normal"><a href="#__codelineno-0-1197">1197</a></span>
<span class="normal"><a href="#__codelineno-0-1198">1198</a></span>
<span class="normal"><a href="#__codelineno-0-1199">1199</a></span>
<span class="normal"><a href="#__codelineno-0-1200">1200</a></span>
<span class="normal"><a href="#__codelineno-0-1201">1201</a></span>
<span class="normal"><a href="#__codelineno-0-1202">1202</a></span>
<span class="normal"><a href="#__codelineno-0-1203">1203</a></span>
<span class="normal"><a href="#__codelineno-0-1204">1204</a></span>
<span class="normal"><a href="#__codelineno-0-1205">1205</a></span>
<span class="normal"><a href="#__codelineno-0-1206">1206</a></span>
<span class="normal"><a href="#__codelineno-0-1207">1207</a></span>
<span class="normal"><a href="#__codelineno-0-1208">1208</a></span>
<span class="normal"><a href="#__codelineno-0-1209">1209</a></span>
<span class="normal"><a href="#__codelineno-0-1210">1210</a></span>
<span class="normal"><a href="#__codelineno-0-1211">1211</a></span>
<span class="normal"><a href="#__codelineno-0-1212">1212</a></span>
<span class="normal"><a href="#__codelineno-0-1213">1213</a></span>
<span class="normal"><a href="#__codelineno-0-1214">1214</a></span>
<span class="normal"><a href="#__codelineno-0-1215">1215</a></span>
<span class="normal"><a href="#__codelineno-0-1216">1216</a></span>
<span class="normal"><a href="#__codelineno-0-1217">1217</a></span>
<span class="normal"><a href="#__codelineno-0-1218">1218</a></span>
<span class="normal"><a href="#__codelineno-0-1219">1219</a></span>
<span class="normal"><a href="#__codelineno-0-1220">1220</a></span>
<span class="normal"><a href="#__codelineno-0-1221">1221</a></span>
<span class="normal"><a href="#__codelineno-0-1222">1222</a></span>
<span class="normal"><a href="#__codelineno-0-1223">1223</a></span>
<span class="normal"><a href="#__codelineno-0-1224">1224</a></span>
<span class="normal"><a href="#__codelineno-0-1225">1225</a></span>
<span class="normal"><a href="#__codelineno-0-1226">1226</a></span>
<span class="normal"><a href="#__codelineno-0-1227">1227</a></span>
<span class="normal"><a href="#__codelineno-0-1228">1228</a></span>
<span class="normal"><a href="#__codelineno-0-1229">1229</a></span>
<span class="normal"><a href="#__codelineno-0-1230">1230</a></span>
<span class="normal"><a href="#__codelineno-0-1231">1231</a></span>
<span class="normal"><a href="#__codelineno-0-1232">1232</a></span>
<span class="normal"><a href="#__codelineno-0-1233">1233</a></span>
<span class="normal"><a href="#__codelineno-0-1234">1234</a></span>
<span class="normal"><a href="#__codelineno-0-1235">1235</a></span>
<span class="normal"><a href="#__codelineno-0-1236">1236</a></span>
<span class="normal"><a href="#__codelineno-0-1237">1237</a></span>
<span class="normal"><a href="#__codelineno-0-1238">1238</a></span>
<span class="normal"><a href="#__codelineno-0-1239">1239</a></span>
<span class="normal"><a href="#__codelineno-0-1240">1240</a></span>
<span class="normal"><a href="#__codelineno-0-1241">1241</a></span>
<span class="normal"><a href="#__codelineno-0-1242">1242</a></span>
<span class="normal"><a href="#__codelineno-0-1243">1243</a></span>
<span class="normal"><a href="#__codelineno-0-1244">1244</a></span>
<span class="normal"><a href="#__codelineno-0-1245">1245</a></span>
<span class="normal"><a href="#__codelineno-0-1246">1246</a></span>
<span class="normal"><a href="#__codelineno-0-1247">1247</a></span>
<span class="normal"><a href="#__codelineno-0-1248">1248</a></span>
<span class="normal"><a href="#__codelineno-0-1249">1249</a></span>
<span class="normal"><a href="#__codelineno-0-1250">1250</a></span>
<span class="normal"><a href="#__codelineno-0-1251">1251</a></span>
<span class="normal"><a href="#__codelineno-0-1252">1252</a></span>
<span class="normal"><a href="#__codelineno-0-1253">1253</a></span>
<span class="normal"><a href="#__codelineno-0-1254">1254</a></span>
<span class="normal"><a href="#__codelineno-0-1255">1255</a></span>
<span class="normal"><a href="#__codelineno-0-1256">1256</a></span>
<span class="normal"><a href="#__codelineno-0-1257">1257</a></span>
<span class="normal"><a href="#__codelineno-0-1258">1258</a></span>
<span class="normal"><a href="#__codelineno-0-1259">1259</a></span>
<span class="normal"><a href="#__codelineno-0-1260">1260</a></span>
<span class="normal"><a href="#__codelineno-0-1261">1261</a></span>
<span class="normal"><a href="#__codelineno-0-1262">1262</a></span>
<span class="normal"><a href="#__codelineno-0-1263">1263</a></span>
<span class="normal"><a href="#__codelineno-0-1264">1264</a></span>
<span class="normal"><a href="#__codelineno-0-1265">1265</a></span>
<span class="normal"><a href="#__codelineno-0-1266">1266</a></span>
<span class="normal"><a href="#__codelineno-0-1267">1267</a></span>
<span class="normal"><a href="#__codelineno-0-1268">1268</a></span>
<span class="normal"><a href="#__codelineno-0-1269">1269</a></span>
<span class="normal"><a href="#__codelineno-0-1270">1270</a></span>
<span class="normal"><a href="#__codelineno-0-1271">1271</a></span>
<span class="normal"><a href="#__codelineno-0-1272">1272</a></span>
<span class="normal"><a href="#__codelineno-0-1273">1273</a></span>
<span class="normal"><a href="#__codelineno-0-1274">1274</a></span>
<span class="normal"><a href="#__codelineno-0-1275">1275</a></span>
<span class="normal"><a href="#__codelineno-0-1276">1276</a></span>
<span class="normal"><a href="#__codelineno-0-1277">1277</a></span>
<span class="normal"><a href="#__codelineno-0-1278">1278</a></span>
<span class="normal"><a href="#__codelineno-0-1279">1279</a></span>
<span class="normal"><a href="#__codelineno-0-1280">1280</a></span>
<span class="normal"><a href="#__codelineno-0-1281">1281</a></span>
<span class="normal"><a href="#__codelineno-0-1282">1282</a></span>
<span class="normal"><a href="#__codelineno-0-1283">1283</a></span>
<span class="normal"><a href="#__codelineno-0-1284">1284</a></span>
<span class="normal"><a href="#__codelineno-0-1285">1285</a></span>
<span class="normal"><a href="#__codelineno-0-1286">1286</a></span>
<span class="normal"><a href="#__codelineno-0-1287">1287</a></span>
<span class="normal"><a href="#__codelineno-0-1288">1288</a></span>
<span class="normal"><a href="#__codelineno-0-1289">1289</a></span>
<span class="normal"><a href="#__codelineno-0-1290">1290</a></span>
<span class="normal"><a href="#__codelineno-0-1291">1291</a></span>
<span class="normal"><a href="#__codelineno-0-1292">1292</a></span>
<span class="normal"><a href="#__codelineno-0-1293">1293</a></span>
<span class="normal"><a href="#__codelineno-0-1294">1294</a></span>
<span class="normal"><a href="#__codelineno-0-1295">1295</a></span>
<span class="normal"><a href="#__codelineno-0-1296">1296</a></span>
<span class="normal"><a href="#__codelineno-0-1297">1297</a></span>
<span class="normal"><a href="#__codelineno-0-1298">1298</a></span>
<span class="normal"><a href="#__codelineno-0-1299">1299</a></span>
<span class="normal"><a href="#__codelineno-0-1300">1300</a></span>
<span class="normal"><a href="#__codelineno-0-1301">1301</a></span>
<span class="normal"><a href="#__codelineno-0-1302">1302</a></span>
<span class="normal"><a href="#__codelineno-0-1303">1303</a></span>
<span class="normal"><a href="#__codelineno-0-1304">1304</a></span>
<span class="normal"><a href="#__codelineno-0-1305">1305</a></span>
<span class="normal"><a href="#__codelineno-0-1306">1306</a></span>
<span class="normal"><a href="#__codelineno-0-1307">1307</a></span>
<span class="normal"><a href="#__codelineno-0-1308">1308</a></span>
<span class="normal"><a href="#__codelineno-0-1309">1309</a></span>
<span class="normal"><a href="#__codelineno-0-1310">1310</a></span>
<span class="normal"><a href="#__codelineno-0-1311">1311</a></span>
<span class="normal"><a href="#__codelineno-0-1312">1312</a></span>
<span class="normal"><a href="#__codelineno-0-1313">1313</a></span>
<span class="normal"><a href="#__codelineno-0-1314">1314</a></span>
<span class="normal"><a href="#__codelineno-0-1315">1315</a></span>
<span class="normal"><a href="#__codelineno-0-1316">1316</a></span>
<span class="normal"><a href="#__codelineno-0-1317">1317</a></span>
<span class="normal"><a href="#__codelineno-0-1318">1318</a></span>
<span class="normal"><a href="#__codelineno-0-1319">1319</a></span>
<span class="normal"><a href="#__codelineno-0-1320">1320</a></span>
<span class="normal"><a href="#__codelineno-0-1321">1321</a></span>
<span class="normal"><a href="#__codelineno-0-1322">1322</a></span>
<span class="normal"><a href="#__codelineno-0-1323">1323</a></span>
<span class="normal"><a href="#__codelineno-0-1324">1324</a></span>
<span class="normal"><a href="#__codelineno-0-1325">1325</a></span>
<span class="normal"><a href="#__codelineno-0-1326">1326</a></span>
<span class="normal"><a href="#__codelineno-0-1327">1327</a></span>
<span class="normal"><a href="#__codelineno-0-1328">1328</a></span>
<span class="normal"><a href="#__codelineno-0-1329">1329</a></span>
<span class="normal"><a href="#__codelineno-0-1330">1330</a></span>
<span class="normal"><a href="#__codelineno-0-1331">1331</a></span>
<span class="normal"><a href="#__codelineno-0-1332">1332</a></span>
<span class="normal"><a href="#__codelineno-0-1333">1333</a></span>
<span class="normal"><a href="#__codelineno-0-1334">1334</a></span>
<span class="normal"><a href="#__codelineno-0-1335">1335</a></span>
<span class="normal"><a href="#__codelineno-0-1336">1336</a></span>
<span class="normal"><a href="#__codelineno-0-1337">1337</a></span>
<span class="normal"><a href="#__codelineno-0-1338">1338</a></span>
<span class="normal"><a href="#__codelineno-0-1339">1339</a></span>
<span class="normal"><a href="#__codelineno-0-1340">1340</a></span>
<span class="normal"><a href="#__codelineno-0-1341">1341</a></span>
<span class="normal"><a href="#__codelineno-0-1342">1342</a></span>
<span class="normal"><a href="#__codelineno-0-1343">1343</a></span>
<span class="normal"><a href="#__codelineno-0-1344">1344</a></span>
<span class="normal"><a href="#__codelineno-0-1345">1345</a></span>
<span class="normal"><a href="#__codelineno-0-1346">1346</a></span>
<span class="normal"><a href="#__codelineno-0-1347">1347</a></span>
<span class="normal"><a href="#__codelineno-0-1348">1348</a></span>
<span class="normal"><a href="#__codelineno-0-1349">1349</a></span>
<span class="normal"><a href="#__codelineno-0-1350">1350</a></span>
<span class="normal"><a href="#__codelineno-0-1351">1351</a></span>
<span class="normal"><a href="#__codelineno-0-1352">1352</a></span>
<span class="normal"><a href="#__codelineno-0-1353">1353</a></span>
<span class="normal"><a href="#__codelineno-0-1354">1354</a></span>
<span class="normal"><a href="#__codelineno-0-1355">1355</a></span>
<span class="normal"><a href="#__codelineno-0-1356">1356</a></span>
<span class="normal"><a href="#__codelineno-0-1357">1357</a></span>
<span class="normal"><a href="#__codelineno-0-1358">1358</a></span>
<span class="normal"><a href="#__codelineno-0-1359">1359</a></span>
<span class="normal"><a href="#__codelineno-0-1360">1360</a></span>
<span class="normal"><a href="#__codelineno-0-1361">1361</a></span>
<span class="normal"><a href="#__codelineno-0-1362">1362</a></span>
<span class="normal"><a href="#__codelineno-0-1363">1363</a></span>
<span class="normal"><a href="#__codelineno-0-1364">1364</a></span>
<span class="normal"><a href="#__codelineno-0-1365">1365</a></span>
<span class="normal"><a href="#__codelineno-0-1366">1366</a></span>
<span class="normal"><a href="#__codelineno-0-1367">1367</a></span>
<span class="normal"><a href="#__codelineno-0-1368">1368</a></span>
<span class="normal"><a href="#__codelineno-0-1369">1369</a></span>
<span class="normal"><a href="#__codelineno-0-1370">1370</a></span>
<span class="normal"><a href="#__codelineno-0-1371">1371</a></span>
<span class="normal"><a href="#__codelineno-0-1372">1372</a></span>
<span class="normal"><a href="#__codelineno-0-1373">1373</a></span>
<span class="normal"><a href="#__codelineno-0-1374">1374</a></span>
<span class="normal"><a href="#__codelineno-0-1375">1375</a></span>
<span class="normal"><a href="#__codelineno-0-1376">1376</a></span>
<span class="normal"><a href="#__codelineno-0-1377">1377</a></span>
<span class="normal"><a href="#__codelineno-0-1378">1378</a></span>
<span class="normal"><a href="#__codelineno-0-1379">1379</a></span>
<span class="normal"><a href="#__codelineno-0-1380">1380</a></span>
<span class="normal"><a href="#__codelineno-0-1381">1381</a></span>
<span class="normal"><a href="#__codelineno-0-1382">1382</a></span>
<span class="normal"><a href="#__codelineno-0-1383">1383</a></span>
<span class="normal"><a href="#__codelineno-0-1384">1384</a></span>
<span class="normal"><a href="#__codelineno-0-1385">1385</a></span>
<span class="normal"><a href="#__codelineno-0-1386">1386</a></span>
<span class="normal"><a href="#__codelineno-0-1387">1387</a></span>
<span class="normal"><a href="#__codelineno-0-1388">1388</a></span>
<span class="normal"><a href="#__codelineno-0-1389">1389</a></span>
<span class="normal"><a href="#__codelineno-0-1390">1390</a></span>
<span class="normal"><a href="#__codelineno-0-1391">1391</a></span>
<span class="normal"><a href="#__codelineno-0-1392">1392</a></span>
<span class="normal"><a href="#__codelineno-0-1393">1393</a></span>
<span class="normal"><a href="#__codelineno-0-1394">1394</a></span>
<span class="normal"><a href="#__codelineno-0-1395">1395</a></span>
<span class="normal"><a href="#__codelineno-0-1396">1396</a></span>
<span class="normal"><a href="#__codelineno-0-1397">1397</a></span>
<span class="normal"><a href="#__codelineno-0-1398">1398</a></span>
<span class="normal"><a href="#__codelineno-0-1399">1399</a></span>
<span class="normal"><a href="#__codelineno-0-1400">1400</a></span>
<span class="normal"><a href="#__codelineno-0-1401">1401</a></span>
<span class="normal"><a href="#__codelineno-0-1402">1402</a></span>
<span class="normal"><a href="#__codelineno-0-1403">1403</a></span>
<span class="normal"><a href="#__codelineno-0-1404">1404</a></span>
<span class="normal"><a href="#__codelineno-0-1405">1405</a></span>
<span class="normal"><a href="#__codelineno-0-1406">1406</a></span>
<span class="normal"><a href="#__codelineno-0-1407">1407</a></span>
<span class="normal"><a href="#__codelineno-0-1408">1408</a></span>
<span class="normal"><a href="#__codelineno-0-1409">1409</a></span>
<span class="normal"><a href="#__codelineno-0-1410">1410</a></span>
<span class="normal"><a href="#__codelineno-0-1411">1411</a></span>
<span class="normal"><a href="#__codelineno-0-1412">1412</a></span>
<span class="normal"><a href="#__codelineno-0-1413">1413</a></span>
<span class="normal"><a href="#__codelineno-0-1414">1414</a></span>
<span class="normal"><a href="#__codelineno-0-1415">1415</a></span>
<span class="normal"><a href="#__codelineno-0-1416">1416</a></span>
<span class="normal"><a href="#__codelineno-0-1417">1417</a></span>
<span class="normal"><a href="#__codelineno-0-1418">1418</a></span>
<span class="normal"><a href="#__codelineno-0-1419">1419</a></span>
<span class="normal"><a href="#__codelineno-0-1420">1420</a></span>
<span class="normal"><a href="#__codelineno-0-1421">1421</a></span>
<span class="normal"><a href="#__codelineno-0-1422">1422</a></span>
<span class="normal"><a href="#__codelineno-0-1423">1423</a></span>
<span class="normal"><a href="#__codelineno-0-1424">1424</a></span>
<span class="normal"><a href="#__codelineno-0-1425">1425</a></span>
<span class="normal"><a href="#__codelineno-0-1426">1426</a></span>
<span class="normal"><a href="#__codelineno-0-1427">1427</a></span>
<span class="normal"><a href="#__codelineno-0-1428">1428</a></span>
<span class="normal"><a href="#__codelineno-0-1429">1429</a></span>
<span class="normal"><a href="#__codelineno-0-1430">1430</a></span>
<span class="normal"><a href="#__codelineno-0-1431">1431</a></span>
<span class="normal"><a href="#__codelineno-0-1432">1432</a></span>
<span class="normal"><a href="#__codelineno-0-1433">1433</a></span>
<span class="normal"><a href="#__codelineno-0-1434">1434</a></span>
<span class="normal"><a href="#__codelineno-0-1435">1435</a></span>
<span class="normal"><a href="#__codelineno-0-1436">1436</a></span>
<span class="normal"><a href="#__codelineno-0-1437">1437</a></span>
<span class="normal"><a href="#__codelineno-0-1438">1438</a></span>
<span class="normal"><a href="#__codelineno-0-1439">1439</a></span>
<span class="normal"><a href="#__codelineno-0-1440">1440</a></span>
<span class="normal"><a href="#__codelineno-0-1441">1441</a></span>
<span class="normal"><a href="#__codelineno-0-1442">1442</a></span>
<span class="normal"><a href="#__codelineno-0-1443">1443</a></span>
<span class="normal"><a href="#__codelineno-0-1444">1444</a></span>
<span class="normal"><a href="#__codelineno-0-1445">1445</a></span>
<span class="normal"><a href="#__codelineno-0-1446">1446</a></span>
<span class="normal"><a href="#__codelineno-0-1447">1447</a></span>
<span class="normal"><a href="#__codelineno-0-1448">1448</a></span>
<span class="normal"><a href="#__codelineno-0-1449">1449</a></span>
<span class="normal"><a href="#__codelineno-0-1450">1450</a></span>
<span class="normal"><a href="#__codelineno-0-1451">1451</a></span>
<span class="normal"><a href="#__codelineno-0-1452">1452</a></span>
<span class="normal"><a href="#__codelineno-0-1453">1453</a></span>
<span class="normal"><a href="#__codelineno-0-1454">1454</a></span>
<span class="normal"><a href="#__codelineno-0-1455">1455</a></span>
<span class="normal"><a href="#__codelineno-0-1456">1456</a></span>
<span class="normal"><a href="#__codelineno-0-1457">1457</a></span>
<span class="normal"><a href="#__codelineno-0-1458">1458</a></span>
<span class="normal"><a href="#__codelineno-0-1459">1459</a></span>
<span class="normal"><a href="#__codelineno-0-1460">1460</a></span>
<span class="normal"><a href="#__codelineno-0-1461">1461</a></span>
<span class="normal"><a href="#__codelineno-0-1462">1462</a></span>
<span class="normal"><a href="#__codelineno-0-1463">1463</a></span>
<span class="normal"><a href="#__codelineno-0-1464">1464</a></span>
<span class="normal"><a href="#__codelineno-0-1465">1465</a></span>
<span class="normal"><a href="#__codelineno-0-1466">1466</a></span>
<span class="normal"><a href="#__codelineno-0-1467">1467</a></span>
<span class="normal"><a href="#__codelineno-0-1468">1468</a></span>
<span class="normal"><a href="#__codelineno-0-1469">1469</a></span>
<span class="normal"><a href="#__codelineno-0-1470">1470</a></span>
<span class="normal"><a href="#__codelineno-0-1471">1471</a></span>
<span class="normal"><a href="#__codelineno-0-1472">1472</a></span>
<span class="normal"><a href="#__codelineno-0-1473">1473</a></span>
<span class="normal"><a href="#__codelineno-0-1474">1474</a></span>
<span class="normal"><a href="#__codelineno-0-1475">1475</a></span>
<span class="normal"><a href="#__codelineno-0-1476">1476</a></span>
<span class="normal"><a href="#__codelineno-0-1477">1477</a></span>
<span class="normal"><a href="#__codelineno-0-1478">1478</a></span>
<span class="normal"><a href="#__codelineno-0-1479">1479</a></span>
<span class="normal"><a href="#__codelineno-0-1480">1480</a></span>
<span class="normal"><a href="#__codelineno-0-1481">1481</a></span>
<span class="normal"><a href="#__codelineno-0-1482">1482</a></span>
<span class="normal"><a href="#__codelineno-0-1483">1483</a></span>
<span class="normal"><a href="#__codelineno-0-1484">1484</a></span>
<span class="normal"><a href="#__codelineno-0-1485">1485</a></span>
<span class="normal"><a href="#__codelineno-0-1486">1486</a></span>
<span class="normal"><a href="#__codelineno-0-1487">1487</a></span>
<span class="normal"><a href="#__codelineno-0-1488">1488</a></span>
<span class="normal"><a href="#__codelineno-0-1489">1489</a></span>
<span class="normal"><a href="#__codelineno-0-1490">1490</a></span>
<span class="normal"><a href="#__codelineno-0-1491">1491</a></span>
<span class="normal"><a href="#__codelineno-0-1492">1492</a></span>
<span class="normal"><a href="#__codelineno-0-1493">1493</a></span>
<span class="normal"><a href="#__codelineno-0-1494">1494</a></span>
<span class="normal"><a href="#__codelineno-0-1495">1495</a></span>
<span class="normal"><a href="#__codelineno-0-1496">1496</a></span>
<span class="normal"><a href="#__codelineno-0-1497">1497</a></span>
<span class="normal"><a href="#__codelineno-0-1498">1498</a></span>
<span class="normal"><a href="#__codelineno-0-1499">1499</a></span>
<span class="normal"><a href="#__codelineno-0-1500">1500</a></span>
<span class="normal"><a href="#__codelineno-0-1501">1501</a></span>
<span class="normal"><a href="#__codelineno-0-1502">1502</a></span>
<span class="normal"><a href="#__codelineno-0-1503">1503</a></span>
<span class="normal"><a href="#__codelineno-0-1504">1504</a></span>
<span class="normal"><a href="#__codelineno-0-1505">1505</a></span>
<span class="normal"><a href="#__codelineno-0-1506">1506</a></span>
<span class="normal"><a href="#__codelineno-0-1507">1507</a></span>
<span class="normal"><a href="#__codelineno-0-1508">1508</a></span>
<span class="normal"><a href="#__codelineno-0-1509">1509</a></span>
<span class="normal"><a href="#__codelineno-0-1510">1510</a></span>
<span class="normal"><a href="#__codelineno-0-1511">1511</a></span>
<span class="normal"><a href="#__codelineno-0-1512">1512</a></span>
<span class="normal"><a href="#__codelineno-0-1513">1513</a></span>
<span class="normal"><a href="#__codelineno-0-1514">1514</a></span>
<span class="normal"><a href="#__codelineno-0-1515">1515</a></span>
<span class="normal"><a href="#__codelineno-0-1516">1516</a></span>
<span class="normal"><a href="#__codelineno-0-1517">1517</a></span>
<span class="normal"><a href="#__codelineno-0-1518">1518</a></span>
<span class="normal"><a href="#__codelineno-0-1519">1519</a></span>
<span class="normal"><a href="#__codelineno-0-1520">1520</a></span>
<span class="normal"><a href="#__codelineno-0-1521">1521</a></span>
<span class="normal"><a href="#__codelineno-0-1522">1522</a></span>
<span class="normal"><a href="#__codelineno-0-1523">1523</a></span>
<span class="normal"><a href="#__codelineno-0-1524">1524</a></span>
<span class="normal"><a href="#__codelineno-0-1525">1525</a></span>
<span class="normal"><a href="#__codelineno-0-1526">1526</a></span>
<span class="normal"><a href="#__codelineno-0-1527">1527</a></span>
<span class="normal"><a href="#__codelineno-0-1528">1528</a></span>
<span class="normal"><a href="#__codelineno-0-1529">1529</a></span>
<span class="normal"><a href="#__codelineno-0-1530">1530</a></span>
<span class="normal"><a href="#__codelineno-0-1531">1531</a></span>
<span class="normal"><a href="#__codelineno-0-1532">1532</a></span>
<span class="normal"><a href="#__codelineno-0-1533">1533</a></span>
<span class="normal"><a href="#__codelineno-0-1534">1534</a></span>
<span class="normal"><a href="#__codelineno-0-1535">1535</a></span>
<span class="normal"><a href="#__codelineno-0-1536">1536</a></span>
<span class="normal"><a href="#__codelineno-0-1537">1537</a></span>
<span class="normal"><a href="#__codelineno-0-1538">1538</a></span>
<span class="normal"><a href="#__codelineno-0-1539">1539</a></span>
<span class="normal"><a href="#__codelineno-0-1540">1540</a></span>
<span class="normal"><a href="#__codelineno-0-1541">1541</a></span>
<span class="normal"><a href="#__codelineno-0-1542">1542</a></span>
<span class="normal"><a href="#__codelineno-0-1543">1543</a></span>
<span class="normal"><a href="#__codelineno-0-1544">1544</a></span>
<span class="normal"><a href="#__codelineno-0-1545">1545</a></span>
<span class="normal"><a href="#__codelineno-0-1546">1546</a></span>
<span class="normal"><a href="#__codelineno-0-1547">1547</a></span>
<span class="normal"><a href="#__codelineno-0-1548">1548</a></span>
<span class="normal"><a href="#__codelineno-0-1549">1549</a></span>
<span class="normal"><a href="#__codelineno-0-1550">1550</a></span>
<span class="normal"><a href="#__codelineno-0-1551">1551</a></span>
<span class="normal"><a href="#__codelineno-0-1552">1552</a></span>
<span class="normal"><a href="#__codelineno-0-1553">1553</a></span>
<span class="normal"><a href="#__codelineno-0-1554">1554</a></span>
<span class="normal"><a href="#__codelineno-0-1555">1555</a></span>
<span class="normal"><a href="#__codelineno-0-1556">1556</a></span>
<span class="normal"><a href="#__codelineno-0-1557">1557</a></span>
<span class="normal"><a href="#__codelineno-0-1558">1558</a></span>
<span class="normal"><a href="#__codelineno-0-1559">1559</a></span>
<span class="normal"><a href="#__codelineno-0-1560">1560</a></span>
<span class="normal"><a href="#__codelineno-0-1561">1561</a></span>
<span class="normal"><a href="#__codelineno-0-1562">1562</a></span>
<span class="normal"><a href="#__codelineno-0-1563">1563</a></span>
<span class="normal"><a href="#__codelineno-0-1564">1564</a></span>
<span class="normal"><a href="#__codelineno-0-1565">1565</a></span>
<span class="normal"><a href="#__codelineno-0-1566">1566</a></span>
<span class="normal"><a href="#__codelineno-0-1567">1567</a></span>
<span class="normal"><a href="#__codelineno-0-1568">1568</a></span>
<span class="normal"><a href="#__codelineno-0-1569">1569</a></span>
<span class="normal"><a href="#__codelineno-0-1570">1570</a></span>
<span class="normal"><a href="#__codelineno-0-1571">1571</a></span>
<span class="normal"><a href="#__codelineno-0-1572">1572</a></span>
<span class="normal"><a href="#__codelineno-0-1573">1573</a></span>
<span class="normal"><a href="#__codelineno-0-1574">1574</a></span>
<span class="normal"><a href="#__codelineno-0-1575">1575</a></span>
<span class="normal"><a href="#__codelineno-0-1576">1576</a></span>
<span class="normal"><a href="#__codelineno-0-1577">1577</a></span>
<span class="normal"><a href="#__codelineno-0-1578">1578</a></span>
<span class="normal"><a href="#__codelineno-0-1579">1579</a></span>
<span class="normal"><a href="#__codelineno-0-1580">1580</a></span>
<span class="normal"><a href="#__codelineno-0-1581">1581</a></span>
<span class="normal"><a href="#__codelineno-0-1582">1582</a></span>
<span class="normal"><a href="#__codelineno-0-1583">1583</a></span>
<span class="normal"><a href="#__codelineno-0-1584">1584</a></span>
<span class="normal"><a href="#__codelineno-0-1585">1585</a></span>
<span class="normal"><a href="#__codelineno-0-1586">1586</a></span>
<span class="normal"><a href="#__codelineno-0-1587">1587</a></span>
<span class="normal"><a href="#__codelineno-0-1588">1588</a></span>
<span class="normal"><a href="#__codelineno-0-1589">1589</a></span>
<span class="normal"><a href="#__codelineno-0-1590">1590</a></span>
<span class="normal"><a href="#__codelineno-0-1591">1591</a></span>
<span class="normal"><a href="#__codelineno-0-1592">1592</a></span>
<span class="normal"><a href="#__codelineno-0-1593">1593</a></span>
<span class="normal"><a href="#__codelineno-0-1594">1594</a></span>
<span class="normal"><a href="#__codelineno-0-1595">1595</a></span>
<span class="normal"><a href="#__codelineno-0-1596">1596</a></span>
<span class="normal"><a href="#__codelineno-0-1597">1597</a></span>
<span class="normal"><a href="#__codelineno-0-1598">1598</a></span>
<span class="normal"><a href="#__codelineno-0-1599">1599</a></span>
<span class="normal"><a href="#__codelineno-0-1600">1600</a></span>
<span class="normal"><a href="#__codelineno-0-1601">1601</a></span>
<span class="normal"><a href="#__codelineno-0-1602">1602</a></span>
<span class="normal"><a href="#__codelineno-0-1603">1603</a></span>
<span class="normal"><a href="#__codelineno-0-1604">1604</a></span>
<span class="normal"><a href="#__codelineno-0-1605">1605</a></span>
<span class="normal"><a href="#__codelineno-0-1606">1606</a></span>
<span class="normal"><a href="#__codelineno-0-1607">1607</a></span>
<span class="normal"><a href="#__codelineno-0-1608">1608</a></span>
<span class="normal"><a href="#__codelineno-0-1609">1609</a></span>
<span class="normal"><a href="#__codelineno-0-1610">1610</a></span>
<span class="normal"><a href="#__codelineno-0-1611">1611</a></span>
<span class="normal"><a href="#__codelineno-0-1612">1612</a></span>
<span class="normal"><a href="#__codelineno-0-1613">1613</a></span>
<span class="normal"><a href="#__codelineno-0-1614">1614</a></span>
<span class="normal"><a href="#__codelineno-0-1615">1615</a></span>
<span class="normal"><a href="#__codelineno-0-1616">1616</a></span>
<span class="normal"><a href="#__codelineno-0-1617">1617</a></span>
<span class="normal"><a href="#__codelineno-0-1618">1618</a></span>
<span class="normal"><a href="#__codelineno-0-1619">1619</a></span>
<span class="normal"><a href="#__codelineno-0-1620">1620</a></span>
<span class="normal"><a href="#__codelineno-0-1621">1621</a></span>
<span class="normal"><a href="#__codelineno-0-1622">1622</a></span>
<span class="normal"><a href="#__codelineno-0-1623">1623</a></span>
<span class="normal"><a href="#__codelineno-0-1624">1624</a></span>
<span class="normal"><a href="#__codelineno-0-1625">1625</a></span>
<span class="normal"><a href="#__codelineno-0-1626">1626</a></span>
<span class="normal"><a href="#__codelineno-0-1627">1627</a></span>
<span class="normal"><a href="#__codelineno-0-1628">1628</a></span>
<span class="normal"><a href="#__codelineno-0-1629">1629</a></span>
<span class="normal"><a href="#__codelineno-0-1630">1630</a></span>
<span class="normal"><a href="#__codelineno-0-1631">1631</a></span>
<span class="normal"><a href="#__codelineno-0-1632">1632</a></span>
<span class="normal"><a href="#__codelineno-0-1633">1633</a></span>
<span class="normal"><a href="#__codelineno-0-1634">1634</a></span>
<span class="normal"><a href="#__codelineno-0-1635">1635</a></span>
<span class="normal"><a href="#__codelineno-0-1636">1636</a></span>
<span class="normal"><a href="#__codelineno-0-1637">1637</a></span>
<span class="normal"><a href="#__codelineno-0-1638">1638</a></span>
<span class="normal"><a href="#__codelineno-0-1639">1639</a></span>
<span class="normal"><a href="#__codelineno-0-1640">1640</a></span>
<span class="normal"><a href="#__codelineno-0-1641">1641</a></span>
<span class="normal"><a href="#__codelineno-0-1642">1642</a></span>
<span class="normal"><a href="#__codelineno-0-1643">1643</a></span>
<span class="normal"><a href="#__codelineno-0-1644">1644</a></span>
<span class="normal"><a href="#__codelineno-0-1645">1645</a></span>
<span class="normal"><a href="#__codelineno-0-1646">1646</a></span>
<span class="normal"><a href="#__codelineno-0-1647">1647</a></span>
<span class="normal"><a href="#__codelineno-0-1648">1648</a></span>
<span class="normal"><a href="#__codelineno-0-1649">1649</a></span>
<span class="normal"><a href="#__codelineno-0-1650">1650</a></span>
<span class="normal"><a href="#__codelineno-0-1651">1651</a></span>
<span class="normal"><a href="#__codelineno-0-1652">1652</a></span>
<span class="normal"><a href="#__codelineno-0-1653">1653</a></span>
<span class="normal"><a href="#__codelineno-0-1654">1654</a></span>
<span class="normal"><a href="#__codelineno-0-1655">1655</a></span>
<span class="normal"><a href="#__codelineno-0-1656">1656</a></span>
<span class="normal"><a href="#__codelineno-0-1657">1657</a></span>
<span class="normal"><a href="#__codelineno-0-1658">1658</a></span>
<span class="normal"><a href="#__codelineno-0-1659">1659</a></span>
<span class="normal"><a href="#__codelineno-0-1660">1660</a></span>
<span class="normal"><a href="#__codelineno-0-1661">1661</a></span>
<span class="normal"><a href="#__codelineno-0-1662">1662</a></span>
<span class="normal"><a href="#__codelineno-0-1663">1663</a></span>
<span class="normal"><a href="#__codelineno-0-1664">1664</a></span>
<span class="normal"><a href="#__codelineno-0-1665">1665</a></span>
<span class="normal"><a href="#__codelineno-0-1666">1666</a></span>
<span class="normal"><a href="#__codelineno-0-1667">1667</a></span>
<span class="normal"><a href="#__codelineno-0-1668">1668</a></span>
<span class="normal"><a href="#__codelineno-0-1669">1669</a></span>
<span class="normal"><a href="#__codelineno-0-1670">1670</a></span>
<span class="normal"><a href="#__codelineno-0-1671">1671</a></span>
<span class="normal"><a href="#__codelineno-0-1672">1672</a></span>
<span class="normal"><a href="#__codelineno-0-1673">1673</a></span>
<span class="normal"><a href="#__codelineno-0-1674">1674</a></span>
<span class="normal"><a href="#__codelineno-0-1675">1675</a></span>
<span class="normal"><a href="#__codelineno-0-1676">1676</a></span>
<span class="normal"><a href="#__codelineno-0-1677">1677</a></span>
<span class="normal"><a href="#__codelineno-0-1678">1678</a></span>
<span class="normal"><a href="#__codelineno-0-1679">1679</a></span>
<span class="normal"><a href="#__codelineno-0-1680">1680</a></span>
<span class="normal"><a href="#__codelineno-0-1681">1681</a></span>
<span class="normal"><a href="#__codelineno-0-1682">1682</a></span>
<span class="normal"><a href="#__codelineno-0-1683">1683</a></span>
<span class="normal"><a href="#__codelineno-0-1684">1684</a></span>
<span class="normal"><a href="#__codelineno-0-1685">1685</a></span>
<span class="normal"><a href="#__codelineno-0-1686">1686</a></span>
<span class="normal"><a href="#__codelineno-0-1687">1687</a></span>
<span class="normal"><a href="#__codelineno-0-1688">1688</a></span>
<span class="normal"><a href="#__codelineno-0-1689">1689</a></span>
<span class="normal"><a href="#__codelineno-0-1690">1690</a></span>
<span class="normal"><a href="#__codelineno-0-1691">1691</a></span>
<span class="normal"><a href="#__codelineno-0-1692">1692</a></span>
<span class="normal"><a href="#__codelineno-0-1693">1693</a></span>
<span class="normal"><a href="#__codelineno-0-1694">1694</a></span>
<span class="normal"><a href="#__codelineno-0-1695">1695</a></span>
<span class="normal"><a href="#__codelineno-0-1696">1696</a></span>
<span class="normal"><a href="#__codelineno-0-1697">1697</a></span>
<span class="normal"><a href="#__codelineno-0-1698">1698</a></span>
<span class="normal"><a href="#__codelineno-0-1699">1699</a></span>
<span class="normal"><a href="#__codelineno-0-1700">1700</a></span>
<span class="normal"><a href="#__codelineno-0-1701">1701</a></span>
<span class="normal"><a href="#__codelineno-0-1702">1702</a></span>
<span class="normal"><a href="#__codelineno-0-1703">1703</a></span>
<span class="normal"><a href="#__codelineno-0-1704">1704</a></span>
<span class="normal"><a href="#__codelineno-0-1705">1705</a></span>
<span class="normal"><a href="#__codelineno-0-1706">1706</a></span>
<span class="normal"><a href="#__codelineno-0-1707">1707</a></span>
<span class="normal"><a href="#__codelineno-0-1708">1708</a></span>
<span class="normal"><a href="#__codelineno-0-1709">1709</a></span>
<span class="normal"><a href="#__codelineno-0-1710">1710</a></span>
<span class="normal"><a href="#__codelineno-0-1711">1711</a></span>
<span class="normal"><a href="#__codelineno-0-1712">1712</a></span>
<span class="normal"><a href="#__codelineno-0-1713">1713</a></span>
<span class="normal"><a href="#__codelineno-0-1714">1714</a></span>
<span class="normal"><a href="#__codelineno-0-1715">1715</a></span>
<span class="normal"><a href="#__codelineno-0-1716">1716</a></span>
<span class="normal"><a href="#__codelineno-0-1717">1717</a></span>
<span class="normal"><a href="#__codelineno-0-1718">1718</a></span>
<span class="normal"><a href="#__codelineno-0-1719">1719</a></span>
<span class="normal"><a href="#__codelineno-0-1720">1720</a></span>
<span class="normal"><a href="#__codelineno-0-1721">1721</a></span>
<span class="normal"><a href="#__codelineno-0-1722">1722</a></span>
<span class="normal"><a href="#__codelineno-0-1723">1723</a></span>
<span class="normal"><a href="#__codelineno-0-1724">1724</a></span>
<span class="normal"><a href="#__codelineno-0-1725">1725</a></span>
<span class="normal"><a href="#__codelineno-0-1726">1726</a></span>
<span class="normal"><a href="#__codelineno-0-1727">1727</a></span>
<span class="normal"><a href="#__codelineno-0-1728">1728</a></span>
<span class="normal"><a href="#__codelineno-0-1729">1729</a></span>
<span class="normal"><a href="#__codelineno-0-1730">1730</a></span>
<span class="normal"><a href="#__codelineno-0-1731">1731</a></span>
<span class="normal"><a href="#__codelineno-0-1732">1732</a></span>
<span class="normal"><a href="#__codelineno-0-1733">1733</a></span>
<span class="normal"><a href="#__codelineno-0-1734">1734</a></span>
<span class="normal"><a href="#__codelineno-0-1735">1735</a></span>
<span class="normal"><a href="#__codelineno-0-1736">1736</a></span>
<span class="normal"><a href="#__codelineno-0-1737">1737</a></span>
<span class="normal"><a href="#__codelineno-0-1738">1738</a></span>
<span class="normal"><a href="#__codelineno-0-1739">1739</a></span>
<span class="normal"><a href="#__codelineno-0-1740">1740</a></span>
<span class="normal"><a href="#__codelineno-0-1741">1741</a></span>
<span class="normal"><a href="#__codelineno-0-1742">1742</a></span>
<span class="normal"><a href="#__codelineno-0-1743">1743</a></span>
<span class="normal"><a href="#__codelineno-0-1744">1744</a></span>
<span class="normal"><a href="#__codelineno-0-1745">1745</a></span>
<span class="normal"><a href="#__codelineno-0-1746">1746</a></span>
<span class="normal"><a href="#__codelineno-0-1747">1747</a></span>
<span class="normal"><a href="#__codelineno-0-1748">1748</a></span>
<span class="normal"><a href="#__codelineno-0-1749">1749</a></span>
<span class="normal"><a href="#__codelineno-0-1750">1750</a></span>
<span class="normal"><a href="#__codelineno-0-1751">1751</a></span>
<span class="normal"><a href="#__codelineno-0-1752">1752</a></span>
<span class="normal"><a href="#__codelineno-0-1753">1753</a></span>
<span class="normal"><a href="#__codelineno-0-1754">1754</a></span>
<span class="normal"><a href="#__codelineno-0-1755">1755</a></span>
<span class="normal"><a href="#__codelineno-0-1756">1756</a></span>
<span class="normal"><a href="#__codelineno-0-1757">1757</a></span>
<span class="normal"><a href="#__codelineno-0-1758">1758</a></span>
<span class="normal"><a href="#__codelineno-0-1759">1759</a></span>
<span class="normal"><a href="#__codelineno-0-1760">1760</a></span>
<span class="normal"><a href="#__codelineno-0-1761">1761</a></span>
<span class="normal"><a href="#__codelineno-0-1762">1762</a></span>
<span class="normal"><a href="#__codelineno-0-1763">1763</a></span>
<span class="normal"><a href="#__codelineno-0-1764">1764</a></span>
<span class="normal"><a href="#__codelineno-0-1765">1765</a></span>
<span class="normal"><a href="#__codelineno-0-1766">1766</a></span>
<span class="normal"><a href="#__codelineno-0-1767">1767</a></span>
<span class="normal"><a href="#__codelineno-0-1768">1768</a></span>
<span class="normal"><a href="#__codelineno-0-1769">1769</a></span>
<span class="normal"><a href="#__codelineno-0-1770">1770</a></span>
<span class="normal"><a href="#__codelineno-0-1771">1771</a></span>
<span class="normal"><a href="#__codelineno-0-1772">1772</a></span>
<span class="normal"><a href="#__codelineno-0-1773">1773</a></span>
<span class="normal"><a href="#__codelineno-0-1774">1774</a></span>
<span class="normal"><a href="#__codelineno-0-1775">1775</a></span>
<span class="normal"><a href="#__codelineno-0-1776">1776</a></span>
<span class="normal"><a href="#__codelineno-0-1777">1777</a></span>
<span class="normal"><a href="#__codelineno-0-1778">1778</a></span>
<span class="normal"><a href="#__codelineno-0-1779">1779</a></span>
<span class="normal"><a href="#__codelineno-0-1780">1780</a></span>
<span class="normal"><a href="#__codelineno-0-1781">1781</a></span>
<span class="normal"><a href="#__codelineno-0-1782">1782</a></span>
<span class="normal"><a href="#__codelineno-0-1783">1783</a></span>
<span class="normal"><a href="#__codelineno-0-1784">1784</a></span>
<span class="normal"><a href="#__codelineno-0-1785">1785</a></span>
<span class="normal"><a href="#__codelineno-0-1786">1786</a></span>
<span class="normal"><a href="#__codelineno-0-1787">1787</a></span>
<span class="normal"><a href="#__codelineno-0-1788">1788</a></span>
<span class="normal"><a href="#__codelineno-0-1789">1789</a></span>
<span class="normal"><a href="#__codelineno-0-1790">1790</a></span>
<span class="normal"><a href="#__codelineno-0-1791">1791</a></span>
<span class="normal"><a href="#__codelineno-0-1792">1792</a></span>
<span class="normal"><a href="#__codelineno-0-1793">1793</a></span>
<span class="normal"><a href="#__codelineno-0-1794">1794</a></span>
<span class="normal"><a href="#__codelineno-0-1795">1795</a></span>
<span class="normal"><a href="#__codelineno-0-1796">1796</a></span>
<span class="normal"><a href="#__codelineno-0-1797">1797</a></span>
<span class="normal"><a href="#__codelineno-0-1798">1798</a></span>
<span class="normal"><a href="#__codelineno-0-1799">1799</a></span>
<span class="normal"><a href="#__codelineno-0-1800">1800</a></span>
<span class="normal"><a href="#__codelineno-0-1801">1801</a></span>
<span class="normal"><a href="#__codelineno-0-1802">1802</a></span>
<span class="normal"><a href="#__codelineno-0-1803">1803</a></span>
<span class="normal"><a href="#__codelineno-0-1804">1804</a></span>
<span class="normal"><a href="#__codelineno-0-1805">1805</a></span>
<span class="normal"><a href="#__codelineno-0-1806">1806</a></span>
<span class="normal"><a href="#__codelineno-0-1807">1807</a></span>
<span class="normal"><a href="#__codelineno-0-1808">1808</a></span>
<span class="normal"><a href="#__codelineno-0-1809">1809</a></span>
<span class="normal"><a href="#__codelineno-0-1810">1810</a></span>
<span class="normal"><a href="#__codelineno-0-1811">1811</a></span>
<span class="normal"><a href="#__codelineno-0-1812">1812</a></span>
<span class="normal"><a href="#__codelineno-0-1813">1813</a></span>
<span class="normal"><a href="#__codelineno-0-1814">1814</a></span>
<span class="normal"><a href="#__codelineno-0-1815">1815</a></span>
<span class="normal"><a href="#__codelineno-0-1816">1816</a></span>
<span class="normal"><a href="#__codelineno-0-1817">1817</a></span>
<span class="normal"><a href="#__codelineno-0-1818">1818</a></span>
<span class="normal"><a href="#__codelineno-0-1819">1819</a></span>
<span class="normal"><a href="#__codelineno-0-1820">1820</a></span>
<span class="normal"><a href="#__codelineno-0-1821">1821</a></span>
<span class="normal"><a href="#__codelineno-0-1822">1822</a></span>
<span class="normal"><a href="#__codelineno-0-1823">1823</a></span>
<span class="normal"><a href="#__codelineno-0-1824">1824</a></span>
<span class="normal"><a href="#__codelineno-0-1825">1825</a></span>
<span class="normal"><a href="#__codelineno-0-1826">1826</a></span>
<span class="normal"><a href="#__codelineno-0-1827">1827</a></span>
<span class="normal"><a href="#__codelineno-0-1828">1828</a></span>
<span class="normal"><a href="#__codelineno-0-1829">1829</a></span>
<span class="normal"><a href="#__codelineno-0-1830">1830</a></span>
<span class="normal"><a href="#__codelineno-0-1831">1831</a></span>
<span class="normal"><a href="#__codelineno-0-1832">1832</a></span>
<span class="normal"><a href="#__codelineno-0-1833">1833</a></span>
<span class="normal"><a href="#__codelineno-0-1834">1834</a></span>
<span class="normal"><a href="#__codelineno-0-1835">1835</a></span>
<span class="normal"><a href="#__codelineno-0-1836">1836</a></span>
<span class="normal"><a href="#__codelineno-0-1837">1837</a></span>
<span class="normal"><a href="#__codelineno-0-1838">1838</a></span>
<span class="normal"><a href="#__codelineno-0-1839">1839</a></span>
<span class="normal"><a href="#__codelineno-0-1840">1840</a></span>
<span class="normal"><a href="#__codelineno-0-1841">1841</a></span>
<span class="normal"><a href="#__codelineno-0-1842">1842</a></span>
<span class="normal"><a href="#__codelineno-0-1843">1843</a></span>
<span class="normal"><a href="#__codelineno-0-1844">1844</a></span>
<span class="normal"><a href="#__codelineno-0-1845">1845</a></span>
<span class="normal"><a href="#__codelineno-0-1846">1846</a></span>
<span class="normal"><a href="#__codelineno-0-1847">1847</a></span>
<span class="normal"><a href="#__codelineno-0-1848">1848</a></span>
<span class="normal"><a href="#__codelineno-0-1849">1849</a></span>
<span class="normal"><a href="#__codelineno-0-1850">1850</a></span>
<span class="normal"><a href="#__codelineno-0-1851">1851</a></span>
<span class="normal"><a href="#__codelineno-0-1852">1852</a></span>
<span class="normal"><a href="#__codelineno-0-1853">1853</a></span>
<span class="normal"><a href="#__codelineno-0-1854">1854</a></span>
<span class="normal"><a href="#__codelineno-0-1855">1855</a></span>
<span class="normal"><a href="#__codelineno-0-1856">1856</a></span>
<span class="normal"><a href="#__codelineno-0-1857">1857</a></span>
<span class="normal"><a href="#__codelineno-0-1858">1858</a></span>
<span class="normal"><a href="#__codelineno-0-1859">1859</a></span>
<span class="normal"><a href="#__codelineno-0-1860">1860</a></span>
<span class="normal"><a href="#__codelineno-0-1861">1861</a></span>
<span class="normal"><a href="#__codelineno-0-1862">1862</a></span>
<span class="normal"><a href="#__codelineno-0-1863">1863</a></span>
<span class="normal"><a href="#__codelineno-0-1864">1864</a></span>
<span class="normal"><a href="#__codelineno-0-1865">1865</a></span>
<span class="normal"><a href="#__codelineno-0-1866">1866</a></span>
<span class="normal"><a href="#__codelineno-0-1867">1867</a></span>
<span class="normal"><a href="#__codelineno-0-1868">1868</a></span>
<span class="normal"><a href="#__codelineno-0-1869">1869</a></span>
<span class="normal"><a href="#__codelineno-0-1870">1870</a></span>
<span class="normal"><a href="#__codelineno-0-1871">1871</a></span>
<span class="normal"><a href="#__codelineno-0-1872">1872</a></span>
<span class="normal"><a href="#__codelineno-0-1873">1873</a></span>
<span class="normal"><a href="#__codelineno-0-1874">1874</a></span>
<span class="normal"><a href="#__codelineno-0-1875">1875</a></span>
<span class="normal"><a href="#__codelineno-0-1876">1876</a></span>
<span class="normal"><a href="#__codelineno-0-1877">1877</a></span>
<span class="normal"><a href="#__codelineno-0-1878">1878</a></span>
<span class="normal"><a href="#__codelineno-0-1879">1879</a></span>
<span class="normal"><a href="#__codelineno-0-1880">1880</a></span>
<span class="normal"><a href="#__codelineno-0-1881">1881</a></span>
<span class="normal"><a href="#__codelineno-0-1882">1882</a></span>
<span class="normal"><a href="#__codelineno-0-1883">1883</a></span>
<span class="normal"><a href="#__codelineno-0-1884">1884</a></span>
<span class="normal"><a href="#__codelineno-0-1885">1885</a></span>
<span class="normal"><a href="#__codelineno-0-1886">1886</a></span>
<span class="normal"><a href="#__codelineno-0-1887">1887</a></span>
<span class="normal"><a href="#__codelineno-0-1888">1888</a></span>
<span class="normal"><a href="#__codelineno-0-1889">1889</a></span>
<span class="normal"><a href="#__codelineno-0-1890">1890</a></span>
<span class="normal"><a href="#__codelineno-0-1891">1891</a></span>
<span class="normal"><a href="#__codelineno-0-1892">1892</a></span>
<span class="normal"><a href="#__codelineno-0-1893">1893</a></span>
<span class="normal"><a href="#__codelineno-0-1894">1894</a></span>
<span class="normal"><a href="#__codelineno-0-1895">1895</a></span>
<span class="normal"><a href="#__codelineno-0-1896">1896</a></span>
<span class="normal"><a href="#__codelineno-0-1897">1897</a></span>
<span class="normal"><a href="#__codelineno-0-1898">1898</a></span>
<span class="normal"><a href="#__codelineno-0-1899">1899</a></span>
<span class="normal"><a href="#__codelineno-0-1900">1900</a></span>
<span class="normal"><a href="#__codelineno-0-1901">1901</a></span>
<span class="normal"><a href="#__codelineno-0-1902">1902</a></span>
<span class="normal"><a href="#__codelineno-0-1903">1903</a></span>
<span class="normal"><a href="#__codelineno-0-1904">1904</a></span>
<span class="normal"><a href="#__codelineno-0-1905">1905</a></span>
<span class="normal"><a href="#__codelineno-0-1906">1906</a></span>
<span class="normal"><a href="#__codelineno-0-1907">1907</a></span>
<span class="normal"><a href="#__codelineno-0-1908">1908</a></span>
<span class="normal"><a href="#__codelineno-0-1909">1909</a></span>
<span class="normal"><a href="#__codelineno-0-1910">1910</a></span>
<span class="normal"><a href="#__codelineno-0-1911">1911</a></span>
<span class="normal"><a href="#__codelineno-0-1912">1912</a></span>
<span class="normal"><a href="#__codelineno-0-1913">1913</a></span>
<span class="normal"><a href="#__codelineno-0-1914">1914</a></span>
<span class="normal"><a href="#__codelineno-0-1915">1915</a></span>
<span class="normal"><a href="#__codelineno-0-1916">1916</a></span>
<span class="normal"><a href="#__codelineno-0-1917">1917</a></span>
<span class="normal"><a href="#__codelineno-0-1918">1918</a></span>
<span class="normal"><a href="#__codelineno-0-1919">1919</a></span>
<span class="normal"><a href="#__codelineno-0-1920">1920</a></span>
<span class="normal"><a href="#__codelineno-0-1921">1921</a></span>
<span class="normal"><a href="#__codelineno-0-1922">1922</a></span>
<span class="normal"><a href="#__codelineno-0-1923">1923</a></span>
<span class="normal"><a href="#__codelineno-0-1924">1924</a></span>
<span class="normal"><a href="#__codelineno-0-1925">1925</a></span>
<span class="normal"><a href="#__codelineno-0-1926">1926</a></span>
<span class="normal"><a href="#__codelineno-0-1927">1927</a></span>
<span class="normal"><a href="#__codelineno-0-1928">1928</a></span>
<span class="normal"><a href="#__codelineno-0-1929">1929</a></span>
<span class="normal"><a href="#__codelineno-0-1930">1930</a></span>
<span class="normal"><a href="#__codelineno-0-1931">1931</a></span>
<span class="normal"><a href="#__codelineno-0-1932">1932</a></span>
<span class="normal"><a href="#__codelineno-0-1933">1933</a></span>
<span class="normal"><a href="#__codelineno-0-1934">1934</a></span>
<span class="normal"><a href="#__codelineno-0-1935">1935</a></span>
<span class="normal"><a href="#__codelineno-0-1936">1936</a></span>
<span class="normal"><a href="#__codelineno-0-1937">1937</a></span>
<span class="normal"><a href="#__codelineno-0-1938">1938</a></span>
<span class="normal"><a href="#__codelineno-0-1939">1939</a></span>
<span class="normal"><a href="#__codelineno-0-1940">1940</a></span>
<span class="normal"><a href="#__codelineno-0-1941">1941</a></span>
<span class="normal"><a href="#__codelineno-0-1942">1942</a></span>
<span class="normal"><a href="#__codelineno-0-1943">1943</a></span>
<span class="normal"><a href="#__codelineno-0-1944">1944</a></span>
<span class="normal"><a href="#__codelineno-0-1945">1945</a></span>
<span class="normal"><a href="#__codelineno-0-1946">1946</a></span>
<span class="normal"><a href="#__codelineno-0-1947">1947</a></span>
<span class="normal"><a href="#__codelineno-0-1948">1948</a></span>
<span class="normal"><a href="#__codelineno-0-1949">1949</a></span>
<span class="normal"><a href="#__codelineno-0-1950">1950</a></span>
<span class="normal"><a href="#__codelineno-0-1951">1951</a></span>
<span class="normal"><a href="#__codelineno-0-1952">1952</a></span>
<span class="normal"><a href="#__codelineno-0-1953">1953</a></span>
<span class="normal"><a href="#__codelineno-0-1954">1954</a></span>
<span class="normal"><a href="#__codelineno-0-1955">1955</a></span>
<span class="normal"><a href="#__codelineno-0-1956">1956</a></span>
<span class="normal"><a href="#__codelineno-0-1957">1957</a></span>
<span class="normal"><a href="#__codelineno-0-1958">1958</a></span>
<span class="normal"><a href="#__codelineno-0-1959">1959</a></span>
<span class="normal"><a href="#__codelineno-0-1960">1960</a></span>
<span class="normal"><a href="#__codelineno-0-1961">1961</a></span>
<span class="normal"><a href="#__codelineno-0-1962">1962</a></span>
<span class="normal"><a href="#__codelineno-0-1963">1963</a></span>
<span class="normal"><a href="#__codelineno-0-1964">1964</a></span>
<span class="normal"><a href="#__codelineno-0-1965">1965</a></span>
<span class="normal"><a href="#__codelineno-0-1966">1966</a></span>
<span class="normal"><a href="#__codelineno-0-1967">1967</a></span>
<span class="normal"><a href="#__codelineno-0-1968">1968</a></span>
<span class="normal"><a href="#__codelineno-0-1969">1969</a></span>
<span class="normal"><a href="#__codelineno-0-1970">1970</a></span>
<span class="normal"><a href="#__codelineno-0-1971">1971</a></span>
<span class="normal"><a href="#__codelineno-0-1972">1972</a></span>
<span class="normal"><a href="#__codelineno-0-1973">1973</a></span>
<span class="normal"><a href="#__codelineno-0-1974">1974</a></span>
<span class="normal"><a href="#__codelineno-0-1975">1975</a></span>
<span class="normal"><a href="#__codelineno-0-1976">1976</a></span>
<span class="normal"><a href="#__codelineno-0-1977">1977</a></span>
<span class="normal"><a href="#__codelineno-0-1978">1978</a></span>
<span class="normal"><a href="#__codelineno-0-1979">1979</a></span>
<span class="normal"><a href="#__codelineno-0-1980">1980</a></span>
<span class="normal"><a href="#__codelineno-0-1981">1981</a></span>
<span class="normal"><a href="#__codelineno-0-1982">1982</a></span>
<span class="normal"><a href="#__codelineno-0-1983">1983</a></span>
<span class="normal"><a href="#__codelineno-0-1984">1984</a></span>
<span class="normal"><a href="#__codelineno-0-1985">1985</a></span>
<span class="normal"><a href="#__codelineno-0-1986">1986</a></span>
<span class="normal"><a href="#__codelineno-0-1987">1987</a></span>
<span class="normal"><a href="#__codelineno-0-1988">1988</a></span>
<span class="normal"><a href="#__codelineno-0-1989">1989</a></span>
<span class="normal"><a href="#__codelineno-0-1990">1990</a></span>
<span class="normal"><a href="#__codelineno-0-1991">1991</a></span>
<span class="normal"><a href="#__codelineno-0-1992">1992</a></span>
<span class="normal"><a href="#__codelineno-0-1993">1993</a></span>
<span class="normal"><a href="#__codelineno-0-1994">1994</a></span>
<span class="normal"><a href="#__codelineno-0-1995">1995</a></span>
<span class="normal"><a href="#__codelineno-0-1996">1996</a></span>
<span class="normal"><a href="#__codelineno-0-1997">1997</a></span>
<span class="normal"><a href="#__codelineno-0-1998">1998</a></span>
<span class="normal"><a href="#__codelineno-0-1999">1999</a></span>
<span class="normal"><a href="#__codelineno-0-2000">2000</a></span>
<span class="normal"><a href="#__codelineno-0-2001">2001</a></span>
<span class="normal"><a href="#__codelineno-0-2002">2002</a></span>
<span class="normal"><a href="#__codelineno-0-2003">2003</a></span>
<span class="normal"><a href="#__codelineno-0-2004">2004</a></span>
<span class="normal"><a href="#__codelineno-0-2005">2005</a></span>
<span class="normal"><a href="#__codelineno-0-2006">2006</a></span>
<span class="normal"><a href="#__codelineno-0-2007">2007</a></span>
<span class="normal"><a href="#__codelineno-0-2008">2008</a></span>
<span class="normal"><a href="#__codelineno-0-2009">2009</a></span>
<span class="normal"><a href="#__codelineno-0-2010">2010</a></span>
<span class="normal"><a href="#__codelineno-0-2011">2011</a></span>
<span class="normal"><a href="#__codelineno-0-2012">2012</a></span>
<span class="normal"><a href="#__codelineno-0-2013">2013</a></span>
<span class="normal"><a href="#__codelineno-0-2014">2014</a></span>
<span class="normal"><a href="#__codelineno-0-2015">2015</a></span>
<span class="normal"><a href="#__codelineno-0-2016">2016</a></span>
<span class="normal"><a href="#__codelineno-0-2017">2017</a></span>
<span class="normal"><a href="#__codelineno-0-2018">2018</a></span>
<span class="normal"><a href="#__codelineno-0-2019">2019</a></span>
<span class="normal"><a href="#__codelineno-0-2020">2020</a></span>
<span class="normal"><a href="#__codelineno-0-2021">2021</a></span>
<span class="normal"><a href="#__codelineno-0-2022">2022</a></span>
<span class="normal"><a href="#__codelineno-0-2023">2023</a></span>
<span class="normal"><a href="#__codelineno-0-2024">2024</a></span>
<span class="normal"><a href="#__codelineno-0-2025">2025</a></span>
<span class="normal"><a href="#__codelineno-0-2026">2026</a></span>
<span class="normal"><a href="#__codelineno-0-2027">2027</a></span>
<span class="normal"><a href="#__codelineno-0-2028">2028</a></span>
<span class="normal"><a href="#__codelineno-0-2029">2029</a></span>
<span class="normal"><a href="#__codelineno-0-2030">2030</a></span>
<span class="normal"><a href="#__codelineno-0-2031">2031</a></span>
<span class="normal"><a href="#__codelineno-0-2032">2032</a></span>
<span class="normal"><a href="#__codelineno-0-2033">2033</a></span>
<span class="normal"><a href="#__codelineno-0-2034">2034</a></span>
<span class="normal"><a href="#__codelineno-0-2035">2035</a></span>
<span class="normal"><a href="#__codelineno-0-2036">2036</a></span>
<span class="normal"><a href="#__codelineno-0-2037">2037</a></span>
<span class="normal"><a href="#__codelineno-0-2038">2038</a></span>
<span class="normal"><a href="#__codelineno-0-2039">2039</a></span>
<span class="normal"><a href="#__codelineno-0-2040">2040</a></span>
<span class="normal"><a href="#__codelineno-0-2041">2041</a></span>
<span class="normal"><a href="#__codelineno-0-2042">2042</a></span>
<span class="normal"><a href="#__codelineno-0-2043">2043</a></span>
<span class="normal"><a href="#__codelineno-0-2044">2044</a></span>
<span class="normal"><a href="#__codelineno-0-2045">2045</a></span>
<span class="normal"><a href="#__codelineno-0-2046">2046</a></span>
<span class="normal"><a href="#__codelineno-0-2047">2047</a></span>
<span class="normal"><a href="#__codelineno-0-2048">2048</a></span>
<span class="normal"><a href="#__codelineno-0-2049">2049</a></span>
<span class="normal"><a href="#__codelineno-0-2050">2050</a></span>
<span class="normal"><a href="#__codelineno-0-2051">2051</a></span>
<span class="normal"><a href="#__codelineno-0-2052">2052</a></span>
<span class="normal"><a href="#__codelineno-0-2053">2053</a></span>
<span class="normal"><a href="#__codelineno-0-2054">2054</a></span>
<span class="normal"><a href="#__codelineno-0-2055">2055</a></span>
<span class="normal"><a href="#__codelineno-0-2056">2056</a></span>
<span class="normal"><a href="#__codelineno-0-2057">2057</a></span>
<span class="normal"><a href="#__codelineno-0-2058">2058</a></span>
<span class="normal"><a href="#__codelineno-0-2059">2059</a></span>
<span class="normal"><a href="#__codelineno-0-2060">2060</a></span>
<span class="normal"><a href="#__codelineno-0-2061">2061</a></span>
<span class="normal"><a href="#__codelineno-0-2062">2062</a></span>
<span class="normal"><a href="#__codelineno-0-2063">2063</a></span>
<span class="normal"><a href="#__codelineno-0-2064">2064</a></span>
<span class="normal"><a href="#__codelineno-0-2065">2065</a></span>
<span class="normal"><a href="#__codelineno-0-2066">2066</a></span>
<span class="normal"><a href="#__codelineno-0-2067">2067</a></span>
<span class="normal"><a href="#__codelineno-0-2068">2068</a></span>
<span class="normal"><a href="#__codelineno-0-2069">2069</a></span>
<span class="normal"><a href="#__codelineno-0-2070">2070</a></span>
<span class="normal"><a href="#__codelineno-0-2071">2071</a></span>
<span class="normal"><a href="#__codelineno-0-2072">2072</a></span>
<span class="normal"><a href="#__codelineno-0-2073">2073</a></span>
<span class="normal"><a href="#__codelineno-0-2074">2074</a></span>
<span class="normal"><a href="#__codelineno-0-2075">2075</a></span>
<span class="normal"><a href="#__codelineno-0-2076">2076</a></span>
<span class="normal"><a href="#__codelineno-0-2077">2077</a></span>
<span class="normal"><a href="#__codelineno-0-2078">2078</a></span>
<span class="normal"><a href="#__codelineno-0-2079">2079</a></span>
<span class="normal"><a href="#__codelineno-0-2080">2080</a></span>
<span class="normal"><a href="#__codelineno-0-2081">2081</a></span>
<span class="normal"><a href="#__codelineno-0-2082">2082</a></span>
<span class="normal"><a href="#__codelineno-0-2083">2083</a></span>
<span class="normal"><a href="#__codelineno-0-2084">2084</a></span>
<span class="normal"><a href="#__codelineno-0-2085">2085</a></span>
<span class="normal"><a href="#__codelineno-0-2086">2086</a></span>
<span class="normal"><a href="#__codelineno-0-2087">2087</a></span>
<span class="normal"><a href="#__codelineno-0-2088">2088</a></span>
<span class="normal"><a href="#__codelineno-0-2089">2089</a></span>
<span class="normal"><a href="#__codelineno-0-2090">2090</a></span>
<span class="normal"><a href="#__codelineno-0-2091">2091</a></span>
<span class="normal"><a href="#__codelineno-0-2092">2092</a></span>
<span class="normal"><a href="#__codelineno-0-2093">2093</a></span>
<span class="normal"><a href="#__codelineno-0-2094">2094</a></span>
<span class="normal"><a href="#__codelineno-0-2095">2095</a></span>
<span class="normal"><a href="#__codelineno-0-2096">2096</a></span>
<span class="normal"><a href="#__codelineno-0-2097">2097</a></span>
<span class="normal"><a href="#__codelineno-0-2098">2098</a></span>
<span class="normal"><a href="#__codelineno-0-2099">2099</a></span>
<span class="normal"><a href="#__codelineno-0-2100">2100</a></span>
<span class="normal"><a href="#__codelineno-0-2101">2101</a></span>
<span class="normal"><a href="#__codelineno-0-2102">2102</a></span>
<span class="normal"><a href="#__codelineno-0-2103">2103</a></span>
<span class="normal"><a href="#__codelineno-0-2104">2104</a></span>
<span class="normal"><a href="#__codelineno-0-2105">2105</a></span>
<span class="normal"><a href="#__codelineno-0-2106">2106</a></span>
<span class="normal"><a href="#__codelineno-0-2107">2107</a></span>
<span class="normal"><a href="#__codelineno-0-2108">2108</a></span>
<span class="normal"><a href="#__codelineno-0-2109">2109</a></span>
<span class="normal"><a href="#__codelineno-0-2110">2110</a></span>
<span class="normal"><a href="#__codelineno-0-2111">2111</a></span>
<span class="normal"><a href="#__codelineno-0-2112">2112</a></span>
<span class="normal"><a href="#__codelineno-0-2113">2113</a></span>
<span class="normal"><a href="#__codelineno-0-2114">2114</a></span>
<span class="normal"><a href="#__codelineno-0-2115">2115</a></span>
<span class="normal"><a href="#__codelineno-0-2116">2116</a></span>
<span class="normal"><a href="#__codelineno-0-2117">2117</a></span>
<span class="normal"><a href="#__codelineno-0-2118">2118</a></span>
<span class="normal"><a href="#__codelineno-0-2119">2119</a></span>
<span class="normal"><a href="#__codelineno-0-2120">2120</a></span>
<span class="normal"><a href="#__codelineno-0-2121">2121</a></span>
<span class="normal"><a href="#__codelineno-0-2122">2122</a></span>
<span class="normal"><a href="#__codelineno-0-2123">2123</a></span>
<span class="normal"><a href="#__codelineno-0-2124">2124</a></span>
<span class="normal"><a href="#__codelineno-0-2125">2125</a></span>
<span class="normal"><a href="#__codelineno-0-2126">2126</a></span>
<span class="normal"><a href="#__codelineno-0-2127">2127</a></span>
<span class="normal"><a href="#__codelineno-0-2128">2128</a></span>
<span class="normal"><a href="#__codelineno-0-2129">2129</a></span>
<span class="normal"><a href="#__codelineno-0-2130">2130</a></span>
<span class="normal"><a href="#__codelineno-0-2131">2131</a></span>
<span class="normal"><a href="#__codelineno-0-2132">2132</a></span>
<span class="normal"><a href="#__codelineno-0-2133">2133</a></span>
<span class="normal"><a href="#__codelineno-0-2134">2134</a></span>
<span class="normal"><a href="#__codelineno-0-2135">2135</a></span>
<span class="normal"><a href="#__codelineno-0-2136">2136</a></span>
<span class="normal"><a href="#__codelineno-0-2137">2137</a></span>
<span class="normal"><a href="#__codelineno-0-2138">2138</a></span>
<span class="normal"><a href="#__codelineno-0-2139">2139</a></span>
<span class="normal"><a href="#__codelineno-0-2140">2140</a></span>
<span class="normal"><a href="#__codelineno-0-2141">2141</a></span>
<span class="normal"><a href="#__codelineno-0-2142">2142</a></span>
<span class="normal"><a href="#__codelineno-0-2143">2143</a></span>
<span class="normal"><a href="#__codelineno-0-2144">2144</a></span>
<span class="normal"><a href="#__codelineno-0-2145">2145</a></span>
<span class="normal"><a href="#__codelineno-0-2146">2146</a></span>
<span class="normal"><a href="#__codelineno-0-2147">2147</a></span>
<span class="normal"><a href="#__codelineno-0-2148">2148</a></span>
<span class="normal"><a href="#__codelineno-0-2149">2149</a></span>
<span class="normal"><a href="#__codelineno-0-2150">2150</a></span>
<span class="normal"><a href="#__codelineno-0-2151">2151</a></span>
<span class="normal"><a href="#__codelineno-0-2152">2152</a></span>
<span class="normal"><a href="#__codelineno-0-2153">2153</a></span>
<span class="normal"><a href="#__codelineno-0-2154">2154</a></span>
<span class="normal"><a href="#__codelineno-0-2155">2155</a></span>
<span class="normal"><a href="#__codelineno-0-2156">2156</a></span>
<span class="normal"><a href="#__codelineno-0-2157">2157</a></span>
<span class="normal"><a href="#__codelineno-0-2158">2158</a></span>
<span class="normal"><a href="#__codelineno-0-2159">2159</a></span>
<span class="normal"><a href="#__codelineno-0-2160">2160</a></span>
<span class="normal"><a href="#__codelineno-0-2161">2161</a></span>
<span class="normal"><a href="#__codelineno-0-2162">2162</a></span>
<span class="normal"><a href="#__codelineno-0-2163">2163</a></span>
<span class="normal"><a href="#__codelineno-0-2164">2164</a></span>
<span class="normal"><a href="#__codelineno-0-2165">2165</a></span>
<span class="normal"><a href="#__codelineno-0-2166">2166</a></span>
<span class="normal"><a href="#__codelineno-0-2167">2167</a></span>
<span class="normal"><a href="#__codelineno-0-2168">2168</a></span>
<span class="normal"><a href="#__codelineno-0-2169">2169</a></span>
<span class="normal"><a href="#__codelineno-0-2170">2170</a></span>
<span class="normal"><a href="#__codelineno-0-2171">2171</a></span>
<span class="normal"><a href="#__codelineno-0-2172">2172</a></span>
<span class="normal"><a href="#__codelineno-0-2173">2173</a></span>
<span class="normal"><a href="#__codelineno-0-2174">2174</a></span>
<span class="normal"><a href="#__codelineno-0-2175">2175</a></span>
<span class="normal"><a href="#__codelineno-0-2176">2176</a></span>
<span class="normal"><a href="#__codelineno-0-2177">2177</a></span>
<span class="normal"><a href="#__codelineno-0-2178">2178</a></span>
<span class="normal"><a href="#__codelineno-0-2179">2179</a></span>
<span class="normal"><a href="#__codelineno-0-2180">2180</a></span>
<span class="normal"><a href="#__codelineno-0-2181">2181</a></span>
<span class="normal"><a href="#__codelineno-0-2182">2182</a></span>
<span class="normal"><a href="#__codelineno-0-2183">2183</a></span>
<span class="normal"><a href="#__codelineno-0-2184">2184</a></span>
<span class="normal"><a href="#__codelineno-0-2185">2185</a></span>
<span class="normal"><a href="#__codelineno-0-2186">2186</a></span>
<span class="normal"><a href="#__codelineno-0-2187">2187</a></span>
<span class="normal"><a href="#__codelineno-0-2188">2188</a></span>
<span class="normal"><a href="#__codelineno-0-2189">2189</a></span>
<span class="normal"><a href="#__codelineno-0-2190">2190</a></span>
<span class="normal"><a href="#__codelineno-0-2191">2191</a></span>
<span class="normal"><a href="#__codelineno-0-2192">2192</a></span>
<span class="normal"><a href="#__codelineno-0-2193">2193</a></span>
<span class="normal"><a href="#__codelineno-0-2194">2194</a></span>
<span class="normal"><a href="#__codelineno-0-2195">2195</a></span>
<span class="normal"><a href="#__codelineno-0-2196">2196</a></span>
<span class="normal"><a href="#__codelineno-0-2197">2197</a></span>
<span class="normal"><a href="#__codelineno-0-2198">2198</a></span>
<span class="normal"><a href="#__codelineno-0-2199">2199</a></span>
<span class="normal"><a href="#__codelineno-0-2200">2200</a></span>
<span class="normal"><a href="#__codelineno-0-2201">2201</a></span>
<span class="normal"><a href="#__codelineno-0-2202">2202</a></span>
<span class="normal"><a href="#__codelineno-0-2203">2203</a></span>
<span class="normal"><a href="#__codelineno-0-2204">2204</a></span>
<span class="normal"><a href="#__codelineno-0-2205">2205</a></span>
<span class="normal"><a href="#__codelineno-0-2206">2206</a></span>
<span class="normal"><a href="#__codelineno-0-2207">2207</a></span>
<span class="normal"><a href="#__codelineno-0-2208">2208</a></span>
<span class="normal"><a href="#__codelineno-0-2209">2209</a></span>
<span class="normal"><a href="#__codelineno-0-2210">2210</a></span>
<span class="normal"><a href="#__codelineno-0-2211">2211</a></span>
<span class="normal"><a href="#__codelineno-0-2212">2212</a></span>
<span class="normal"><a href="#__codelineno-0-2213">2213</a></span>
<span class="normal"><a href="#__codelineno-0-2214">2214</a></span>
<span class="normal"><a href="#__codelineno-0-2215">2215</a></span>
<span class="normal"><a href="#__codelineno-0-2216">2216</a></span>
<span class="normal"><a href="#__codelineno-0-2217">2217</a></span>
<span class="normal"><a href="#__codelineno-0-2218">2218</a></span>
<span class="normal"><a href="#__codelineno-0-2219">2219</a></span>
<span class="normal"><a href="#__codelineno-0-2220">2220</a></span>
<span class="normal"><a href="#__codelineno-0-2221">2221</a></span>
<span class="normal"><a href="#__codelineno-0-2222">2222</a></span>
<span class="normal"><a href="#__codelineno-0-2223">2223</a></span>
<span class="normal"><a href="#__codelineno-0-2224">2224</a></span>
<span class="normal"><a href="#__codelineno-0-2225">2225</a></span>
<span class="normal"><a href="#__codelineno-0-2226">2226</a></span>
<span class="normal"><a href="#__codelineno-0-2227">2227</a></span>
<span class="normal"><a href="#__codelineno-0-2228">2228</a></span>
<span class="normal"><a href="#__codelineno-0-2229">2229</a></span>
<span class="normal"><a href="#__codelineno-0-2230">2230</a></span>
<span class="normal"><a href="#__codelineno-0-2231">2231</a></span>
<span class="normal"><a href="#__codelineno-0-2232">2232</a></span>
<span class="normal"><a href="#__codelineno-0-2233">2233</a></span>
<span class="normal"><a href="#__codelineno-0-2234">2234</a></span>
<span class="normal"><a href="#__codelineno-0-2235">2235</a></span>
<span class="normal"><a href="#__codelineno-0-2236">2236</a></span>
<span class="normal"><a href="#__codelineno-0-2237">2237</a></span>
<span class="normal"><a href="#__codelineno-0-2238">2238</a></span>
<span class="normal"><a href="#__codelineno-0-2239">2239</a></span>
<span class="normal"><a href="#__codelineno-0-2240">2240</a></span>
<span class="normal"><a href="#__codelineno-0-2241">2241</a></span>
<span class="normal"><a href="#__codelineno-0-2242">2242</a></span>
<span class="normal"><a href="#__codelineno-0-2243">2243</a></span>
<span class="normal"><a href="#__codelineno-0-2244">2244</a></span>
<span class="normal"><a href="#__codelineno-0-2245">2245</a></span>
<span class="normal"><a href="#__codelineno-0-2246">2246</a></span>
<span class="normal"><a href="#__codelineno-0-2247">2247</a></span>
<span class="normal"><a href="#__codelineno-0-2248">2248</a></span>
<span class="normal"><a href="#__codelineno-0-2249">2249</a></span>
<span class="normal"><a href="#__codelineno-0-2250">2250</a></span>
<span class="normal"><a href="#__codelineno-0-2251">2251</a></span>
<span class="normal"><a href="#__codelineno-0-2252">2252</a></span>
<span class="normal"><a href="#__codelineno-0-2253">2253</a></span>
<span class="normal"><a href="#__codelineno-0-2254">2254</a></span>
<span class="normal"><a href="#__codelineno-0-2255">2255</a></span>
<span class="normal"><a href="#__codelineno-0-2256">2256</a></span>
<span class="normal"><a href="#__codelineno-0-2257">2257</a></span>
<span class="normal"><a href="#__codelineno-0-2258">2258</a></span>
<span class="normal"><a href="#__codelineno-0-2259">2259</a></span>
<span class="normal"><a href="#__codelineno-0-2260">2260</a></span>
<span class="normal"><a href="#__codelineno-0-2261">2261</a></span>
<span class="normal"><a href="#__codelineno-0-2262">2262</a></span>
<span class="normal"><a href="#__codelineno-0-2263">2263</a></span>
<span class="normal"><a href="#__codelineno-0-2264">2264</a></span>
<span class="normal"><a href="#__codelineno-0-2265">2265</a></span>
<span class="normal"><a href="#__codelineno-0-2266">2266</a></span>
<span class="normal"><a href="#__codelineno-0-2267">2267</a></span>
<span class="normal"><a href="#__codelineno-0-2268">2268</a></span>
<span class="normal"><a href="#__codelineno-0-2269">2269</a></span>
<span class="normal"><a href="#__codelineno-0-2270">2270</a></span>
<span class="normal"><a href="#__codelineno-0-2271">2271</a></span>
<span class="normal"><a href="#__codelineno-0-2272">2272</a></span>
<span class="normal"><a href="#__codelineno-0-2273">2273</a></span>
<span class="normal"><a href="#__codelineno-0-2274">2274</a></span>
<span class="normal"><a href="#__codelineno-0-2275">2275</a></span>
<span class="normal"><a href="#__codelineno-0-2276">2276</a></span>
<span class="normal"><a href="#__codelineno-0-2277">2277</a></span>
<span class="normal"><a href="#__codelineno-0-2278">2278</a></span>
<span class="normal"><a href="#__codelineno-0-2279">2279</a></span>
<span class="normal"><a href="#__codelineno-0-2280">2280</a></span>
<span class="normal"><a href="#__codelineno-0-2281">2281</a></span>
<span class="normal"><a href="#__codelineno-0-2282">2282</a></span>
<span class="normal"><a href="#__codelineno-0-2283">2283</a></span>
<span class="normal"><a href="#__codelineno-0-2284">2284</a></span>
<span class="normal"><a href="#__codelineno-0-2285">2285</a></span>
<span class="normal"><a href="#__codelineno-0-2286">2286</a></span>
<span class="normal"><a href="#__codelineno-0-2287">2287</a></span>
<span class="normal"><a href="#__codelineno-0-2288">2288</a></span>
<span class="normal"><a href="#__codelineno-0-2289">2289</a></span>
<span class="normal"><a href="#__codelineno-0-2290">2290</a></span>
<span class="normal"><a href="#__codelineno-0-2291">2291</a></span>
<span class="normal"><a href="#__codelineno-0-2292">2292</a></span>
<span class="normal"><a href="#__codelineno-0-2293">2293</a></span>
<span class="normal"><a href="#__codelineno-0-2294">2294</a></span>
<span class="normal"><a href="#__codelineno-0-2295">2295</a></span>
<span class="normal"><a href="#__codelineno-0-2296">2296</a></span>
<span class="normal"><a href="#__codelineno-0-2297">2297</a></span>
<span class="normal"><a href="#__codelineno-0-2298">2298</a></span>
<span class="normal"><a href="#__codelineno-0-2299">2299</a></span>
<span class="normal"><a href="#__codelineno-0-2300">2300</a></span>
<span class="normal"><a href="#__codelineno-0-2301">2301</a></span>
<span class="normal"><a href="#__codelineno-0-2302">2302</a></span>
<span class="normal"><a href="#__codelineno-0-2303">2303</a></span>
<span class="normal"><a href="#__codelineno-0-2304">2304</a></span>
<span class="normal"><a href="#__codelineno-0-2305">2305</a></span>
<span class="normal"><a href="#__codelineno-0-2306">2306</a></span>
<span class="normal"><a href="#__codelineno-0-2307">2307</a></span>
<span class="normal"><a href="#__codelineno-0-2308">2308</a></span>
<span class="normal"><a href="#__codelineno-0-2309">2309</a></span>
<span class="normal"><a href="#__codelineno-0-2310">2310</a></span>
<span class="normal"><a href="#__codelineno-0-2311">2311</a></span>
<span class="normal"><a href="#__codelineno-0-2312">2312</a></span>
<span class="normal"><a href="#__codelineno-0-2313">2313</a></span>
<span class="normal"><a href="#__codelineno-0-2314">2314</a></span>
<span class="normal"><a href="#__codelineno-0-2315">2315</a></span>
<span class="normal"><a href="#__codelineno-0-2316">2316</a></span>
<span class="normal"><a href="#__codelineno-0-2317">2317</a></span>
<span class="normal"><a href="#__codelineno-0-2318">2318</a></span>
<span class="normal"><a href="#__codelineno-0-2319">2319</a></span>
<span class="normal"><a href="#__codelineno-0-2320">2320</a></span>
<span class="normal"><a href="#__codelineno-0-2321">2321</a></span>
<span class="normal"><a href="#__codelineno-0-2322">2322</a></span>
<span class="normal"><a href="#__codelineno-0-2323">2323</a></span>
<span class="normal"><a href="#__codelineno-0-2324">2324</a></span>
<span class="normal"><a href="#__codelineno-0-2325">2325</a></span>
<span class="normal"><a href="#__codelineno-0-2326">2326</a></span>
<span class="normal"><a href="#__codelineno-0-2327">2327</a></span>
<span class="normal"><a href="#__codelineno-0-2328">2328</a></span>
<span class="normal"><a href="#__codelineno-0-2329">2329</a></span>
<span class="normal"><a href="#__codelineno-0-2330">2330</a></span>
<span class="normal"><a href="#__codelineno-0-2331">2331</a></span>
<span class="normal"><a href="#__codelineno-0-2332">2332</a></span>
<span class="normal"><a href="#__codelineno-0-2333">2333</a></span>
<span class="normal"><a href="#__codelineno-0-2334">2334</a></span>
<span class="normal"><a href="#__codelineno-0-2335">2335</a></span>
<span class="normal"><a href="#__codelineno-0-2336">2336</a></span>
<span class="normal"><a href="#__codelineno-0-2337">2337</a></span>
<span class="normal"><a href="#__codelineno-0-2338">2338</a></span>
<span class="normal"><a href="#__codelineno-0-2339">2339</a></span>
<span class="normal"><a href="#__codelineno-0-2340">2340</a></span>
<span class="normal"><a href="#__codelineno-0-2341">2341</a></span>
<span class="normal"><a href="#__codelineno-0-2342">2342</a></span>
<span class="normal"><a href="#__codelineno-0-2343">2343</a></span>
<span class="normal"><a href="#__codelineno-0-2344">2344</a></span>
<span class="normal"><a href="#__codelineno-0-2345">2345</a></span>
<span class="normal"><a href="#__codelineno-0-2346">2346</a></span>
<span class="normal"><a href="#__codelineno-0-2347">2347</a></span>
<span class="normal"><a href="#__codelineno-0-2348">2348</a></span>
<span class="normal"><a href="#__codelineno-0-2349">2349</a></span>
<span class="normal"><a href="#__codelineno-0-2350">2350</a></span>
<span class="normal"><a href="#__codelineno-0-2351">2351</a></span>
<span class="normal"><a href="#__codelineno-0-2352">2352</a></span>
<span class="normal"><a href="#__codelineno-0-2353">2353</a></span>
<span class="normal"><a href="#__codelineno-0-2354">2354</a></span>
<span class="normal"><a href="#__codelineno-0-2355">2355</a></span>
<span class="normal"><a href="#__codelineno-0-2356">2356</a></span>
<span class="normal"><a href="#__codelineno-0-2357">2357</a></span>
<span class="normal"><a href="#__codelineno-0-2358">2358</a></span>
<span class="normal"><a href="#__codelineno-0-2359">2359</a></span>
<span class="normal"><a href="#__codelineno-0-2360">2360</a></span>
<span class="normal"><a href="#__codelineno-0-2361">2361</a></span>
<span class="normal"><a href="#__codelineno-0-2362">2362</a></span>
<span class="normal"><a href="#__codelineno-0-2363">2363</a></span>
<span class="normal"><a href="#__codelineno-0-2364">2364</a></span>
<span class="normal"><a href="#__codelineno-0-2365">2365</a></span>
<span class="normal"><a href="#__codelineno-0-2366">2366</a></span>
<span class="normal"><a href="#__codelineno-0-2367">2367</a></span>
<span class="normal"><a href="#__codelineno-0-2368">2368</a></span>
<span class="normal"><a href="#__codelineno-0-2369">2369</a></span>
<span class="normal"><a href="#__codelineno-0-2370">2370</a></span>
<span class="normal"><a href="#__codelineno-0-2371">2371</a></span>
<span class="normal"><a href="#__codelineno-0-2372">2372</a></span>
<span class="normal"><a href="#__codelineno-0-2373">2373</a></span>
<span class="normal"><a href="#__codelineno-0-2374">2374</a></span>
<span class="normal"><a href="#__codelineno-0-2375">2375</a></span>
<span class="normal"><a href="#__codelineno-0-2376">2376</a></span>
<span class="normal"><a href="#__codelineno-0-2377">2377</a></span>
<span class="normal"><a href="#__codelineno-0-2378">2378</a></span>
<span class="normal"><a href="#__codelineno-0-2379">2379</a></span>
<span class="normal"><a href="#__codelineno-0-2380">2380</a></span>
<span class="normal"><a href="#__codelineno-0-2381">2381</a></span>
<span class="normal"><a href="#__codelineno-0-2382">2382</a></span>
<span class="normal"><a href="#__codelineno-0-2383">2383</a></span>
<span class="normal"><a href="#__codelineno-0-2384">2384</a></span>
<span class="normal"><a href="#__codelineno-0-2385">2385</a></span>
<span class="normal"><a href="#__codelineno-0-2386">2386</a></span>
<span class="normal"><a href="#__codelineno-0-2387">2387</a></span>
<span class="normal"><a href="#__codelineno-0-2388">2388</a></span>
<span class="normal"><a href="#__codelineno-0-2389">2389</a></span>
<span class="normal"><a href="#__codelineno-0-2390">2390</a></span>
<span class="normal"><a href="#__codelineno-0-2391">2391</a></span>
<span class="normal"><a href="#__codelineno-0-2392">2392</a></span>
<span class="normal"><a href="#__codelineno-0-2393">2393</a></span>
<span class="normal"><a href="#__codelineno-0-2394">2394</a></span>
<span class="normal"><a href="#__codelineno-0-2395">2395</a></span>
<span class="normal"><a href="#__codelineno-0-2396">2396</a></span>
<span class="normal"><a href="#__codelineno-0-2397">2397</a></span>
<span class="normal"><a href="#__codelineno-0-2398">2398</a></span>
<span class="normal"><a href="#__codelineno-0-2399">2399</a></span>
<span class="normal"><a href="#__codelineno-0-2400">2400</a></span>
<span class="normal"><a href="#__codelineno-0-2401">2401</a></span>
<span class="normal"><a href="#__codelineno-0-2402">2402</a></span>
<span class="normal"><a href="#__codelineno-0-2403">2403</a></span>
<span class="normal"><a href="#__codelineno-0-2404">2404</a></span>
<span class="normal"><a href="#__codelineno-0-2405">2405</a></span>
<span class="normal"><a href="#__codelineno-0-2406">2406</a></span>
<span class="normal"><a href="#__codelineno-0-2407">2407</a></span>
<span class="normal"><a href="#__codelineno-0-2408">2408</a></span>
<span class="normal"><a href="#__codelineno-0-2409">2409</a></span>
<span class="normal"><a href="#__codelineno-0-2410">2410</a></span>
<span class="normal"><a href="#__codelineno-0-2411">2411</a></span>
<span class="normal"><a href="#__codelineno-0-2412">2412</a></span>
<span class="normal"><a href="#__codelineno-0-2413">2413</a></span>
<span class="normal"><a href="#__codelineno-0-2414">2414</a></span>
<span class="normal"><a href="#__codelineno-0-2415">2415</a></span>
<span class="normal"><a href="#__codelineno-0-2416">2416</a></span>
<span class="normal"><a href="#__codelineno-0-2417">2417</a></span>
<span class="normal"><a href="#__codelineno-0-2418">2418</a></span>
<span class="normal"><a href="#__codelineno-0-2419">2419</a></span>
<span class="normal"><a href="#__codelineno-0-2420">2420</a></span>
<span class="normal"><a href="#__codelineno-0-2421">2421</a></span>
<span class="normal"><a href="#__codelineno-0-2422">2422</a></span>
<span class="normal"><a href="#__codelineno-0-2423">2423</a></span>
<span class="normal"><a href="#__codelineno-0-2424">2424</a></span>
<span class="normal"><a href="#__codelineno-0-2425">2425</a></span>
<span class="normal"><a href="#__codelineno-0-2426">2426</a></span>
<span class="normal"><a href="#__codelineno-0-2427">2427</a></span>
<span class="normal"><a href="#__codelineno-0-2428">2428</a></span>
<span class="normal"><a href="#__codelineno-0-2429">2429</a></span>
<span class="normal"><a href="#__codelineno-0-2430">2430</a></span>
<span class="normal"><a href="#__codelineno-0-2431">2431</a></span>
<span class="normal"><a href="#__codelineno-0-2432">2432</a></span>
<span class="normal"><a href="#__codelineno-0-2433">2433</a></span>
<span class="normal"><a href="#__codelineno-0-2434">2434</a></span>
<span class="normal"><a href="#__codelineno-0-2435">2435</a></span>
<span class="normal"><a href="#__codelineno-0-2436">2436</a></span>
<span class="normal"><a href="#__codelineno-0-2437">2437</a></span>
<span class="normal"><a href="#__codelineno-0-2438">2438</a></span>
<span class="normal"><a href="#__codelineno-0-2439">2439</a></span>
<span class="normal"><a href="#__codelineno-0-2440">2440</a></span>
<span class="normal"><a href="#__codelineno-0-2441">2441</a></span>
<span class="normal"><a href="#__codelineno-0-2442">2442</a></span>
<span class="normal"><a href="#__codelineno-0-2443">2443</a></span>
<span class="normal"><a href="#__codelineno-0-2444">2444</a></span>
<span class="normal"><a href="#__codelineno-0-2445">2445</a></span>
<span class="normal"><a href="#__codelineno-0-2446">2446</a></span>
<span class="normal"><a href="#__codelineno-0-2447">2447</a></span>
<span class="normal"><a href="#__codelineno-0-2448">2448</a></span>
<span class="normal"><a href="#__codelineno-0-2449">2449</a></span>
<span class="normal"><a href="#__codelineno-0-2450">2450</a></span>
<span class="normal"><a href="#__codelineno-0-2451">2451</a></span>
<span class="normal"><a href="#__codelineno-0-2452">2452</a></span>
<span class="normal"><a href="#__codelineno-0-2453">2453</a></span>
<span class="normal"><a href="#__codelineno-0-2454">2454</a></span>
<span class="normal"><a href="#__codelineno-0-2455">2455</a></span>
<span class="normal"><a href="#__codelineno-0-2456">2456</a></span>
<span class="normal"><a href="#__codelineno-0-2457">2457</a></span>
<span class="normal"><a href="#__codelineno-0-2458">2458</a></span>
<span class="normal"><a href="#__codelineno-0-2459">2459</a></span>
<span class="normal"><a href="#__codelineno-0-2460">2460</a></span>
<span class="normal"><a href="#__codelineno-0-2461">2461</a></span>
<span class="normal"><a href="#__codelineno-0-2462">2462</a></span>
<span class="normal"><a href="#__codelineno-0-2463">2463</a></span>
<span class="normal"><a href="#__codelineno-0-2464">2464</a></span>
<span class="normal"><a href="#__codelineno-0-2465">2465</a></span>
<span class="normal"><a href="#__codelineno-0-2466">2466</a></span>
<span class="normal"><a href="#__codelineno-0-2467">2467</a></span>
<span class="normal"><a href="#__codelineno-0-2468">2468</a></span>
<span class="normal"><a href="#__codelineno-0-2469">2469</a></span>
<span class="normal"><a href="#__codelineno-0-2470">2470</a></span>
<span class="normal"><a href="#__codelineno-0-2471">2471</a></span>
<span class="normal"><a href="#__codelineno-0-2472">2472</a></span>
<span class="normal"><a href="#__codelineno-0-2473">2473</a></span>
<span class="normal"><a href="#__codelineno-0-2474">2474</a></span>
<span class="normal"><a href="#__codelineno-0-2475">2475</a></span>
<span class="normal"><a href="#__codelineno-0-2476">2476</a></span>
<span class="normal"><a href="#__codelineno-0-2477">2477</a></span>
<span class="normal"><a href="#__codelineno-0-2478">2478</a></span>
<span class="normal"><a href="#__codelineno-0-2479">2479</a></span>
<span class="normal"><a href="#__codelineno-0-2480">2480</a></span>
<span class="normal"><a href="#__codelineno-0-2481">2481</a></span>
<span class="normal"><a href="#__codelineno-0-2482">2482</a></span>
<span class="normal"><a href="#__codelineno-0-2483">2483</a></span>
<span class="normal"><a href="#__codelineno-0-2484">2484</a></span>
<span class="normal"><a href="#__codelineno-0-2485">2485</a></span>
<span class="normal"><a href="#__codelineno-0-2486">2486</a></span>
<span class="normal"><a href="#__codelineno-0-2487">2487</a></span>
<span class="normal"><a href="#__codelineno-0-2488">2488</a></span>
<span class="normal"><a href="#__codelineno-0-2489">2489</a></span>
<span class="normal"><a href="#__codelineno-0-2490">2490</a></span>
<span class="normal"><a href="#__codelineno-0-2491">2491</a></span>
<span class="normal"><a href="#__codelineno-0-2492">2492</a></span>
<span class="normal"><a href="#__codelineno-0-2493">2493</a></span>
<span class="normal"><a href="#__codelineno-0-2494">2494</a></span>
<span class="normal"><a href="#__codelineno-0-2495">2495</a></span>
<span class="normal"><a href="#__codelineno-0-2496">2496</a></span>
<span class="normal"><a href="#__codelineno-0-2497">2497</a></span>
<span class="normal"><a href="#__codelineno-0-2498">2498</a></span>
<span class="normal"><a href="#__codelineno-0-2499">2499</a></span>
<span class="normal"><a href="#__codelineno-0-2500">2500</a></span>
<span class="normal"><a href="#__codelineno-0-2501">2501</a></span>
<span class="normal"><a href="#__codelineno-0-2502">2502</a></span>
<span class="normal"><a href="#__codelineno-0-2503">2503</a></span>
<span class="normal"><a href="#__codelineno-0-2504">2504</a></span>
<span class="normal"><a href="#__codelineno-0-2505">2505</a></span>
<span class="normal"><a href="#__codelineno-0-2506">2506</a></span>
<span class="normal"><a href="#__codelineno-0-2507">2507</a></span>
<span class="normal"><a href="#__codelineno-0-2508">2508</a></span>
<span class="normal"><a href="#__codelineno-0-2509">2509</a></span>
<span class="normal"><a href="#__codelineno-0-2510">2510</a></span>
<span class="normal"><a href="#__codelineno-0-2511">2511</a></span>
<span class="normal"><a href="#__codelineno-0-2512">2512</a></span>
<span class="normal"><a href="#__codelineno-0-2513">2513</a></span>
<span class="normal"><a href="#__codelineno-0-2514">2514</a></span>
<span class="normal"><a href="#__codelineno-0-2515">2515</a></span>
<span class="normal"><a href="#__codelineno-0-2516">2516</a></span>
<span class="normal"><a href="#__codelineno-0-2517">2517</a></span>
<span class="normal"><a href="#__codelineno-0-2518">2518</a></span>
<span class="normal"><a href="#__codelineno-0-2519">2519</a></span>
<span class="normal"><a href="#__codelineno-0-2520">2520</a></span>
<span class="normal"><a href="#__codelineno-0-2521">2521</a></span>
<span class="normal"><a href="#__codelineno-0-2522">2522</a></span>
<span class="normal"><a href="#__codelineno-0-2523">2523</a></span>
<span class="normal"><a href="#__codelineno-0-2524">2524</a></span>
<span class="normal"><a href="#__codelineno-0-2525">2525</a></span>
<span class="normal"><a href="#__codelineno-0-2526">2526</a></span>
<span class="normal"><a href="#__codelineno-0-2527">2527</a></span>
<span class="normal"><a href="#__codelineno-0-2528">2528</a></span>
<span class="normal"><a href="#__codelineno-0-2529">2529</a></span>
<span class="normal"><a href="#__codelineno-0-2530">2530</a></span>
<span class="normal"><a href="#__codelineno-0-2531">2531</a></span>
<span class="normal"><a href="#__codelineno-0-2532">2532</a></span>
<span class="normal"><a href="#__codelineno-0-2533">2533</a></span>
<span class="normal"><a href="#__codelineno-0-2534">2534</a></span>
<span class="normal"><a href="#__codelineno-0-2535">2535</a></span>
<span class="normal"><a href="#__codelineno-0-2536">2536</a></span>
<span class="normal"><a href="#__codelineno-0-2537">2537</a></span>
<span class="normal"><a href="#__codelineno-0-2538">2538</a></span>
<span class="normal"><a href="#__codelineno-0-2539">2539</a></span>
<span class="normal"><a href="#__codelineno-0-2540">2540</a></span>
<span class="normal"><a href="#__codelineno-0-2541">2541</a></span>
<span class="normal"><a href="#__codelineno-0-2542">2542</a></span>
<span class="normal"><a href="#__codelineno-0-2543">2543</a></span>
<span class="normal"><a href="#__codelineno-0-2544">2544</a></span>
<span class="normal"><a href="#__codelineno-0-2545">2545</a></span>
<span class="normal"><a href="#__codelineno-0-2546">2546</a></span>
<span class="normal"><a href="#__codelineno-0-2547">2547</a></span>
<span class="normal"><a href="#__codelineno-0-2548">2548</a></span>
<span class="normal"><a href="#__codelineno-0-2549">2549</a></span>
<span class="normal"><a href="#__codelineno-0-2550">2550</a></span>
<span class="normal"><a href="#__codelineno-0-2551">2551</a></span>
<span class="normal"><a href="#__codelineno-0-2552">2552</a></span>
<span class="normal"><a href="#__codelineno-0-2553">2553</a></span>
<span class="normal"><a href="#__codelineno-0-2554">2554</a></span>
<span class="normal"><a href="#__codelineno-0-2555">2555</a></span>
<span class="normal"><a href="#__codelineno-0-2556">2556</a></span>
<span class="normal"><a href="#__codelineno-0-2557">2557</a></span>
<span class="normal"><a href="#__codelineno-0-2558">2558</a></span>
<span class="normal"><a href="#__codelineno-0-2559">2559</a></span>
<span class="normal"><a href="#__codelineno-0-2560">2560</a></span>
<span class="normal"><a href="#__codelineno-0-2561">2561</a></span>
<span class="normal"><a href="#__codelineno-0-2562">2562</a></span>
<span class="normal"><a href="#__codelineno-0-2563">2563</a></span>
<span class="normal"><a href="#__codelineno-0-2564">2564</a></span>
<span class="normal"><a href="#__codelineno-0-2565">2565</a></span>
<span class="normal"><a href="#__codelineno-0-2566">2566</a></span>
<span class="normal"><a href="#__codelineno-0-2567">2567</a></span>
<span class="normal"><a href="#__codelineno-0-2568">2568</a></span>
<span class="normal"><a href="#__codelineno-0-2569">2569</a></span>
<span class="normal"><a href="#__codelineno-0-2570">2570</a></span>
<span class="normal"><a href="#__codelineno-0-2571">2571</a></span>
<span class="normal"><a href="#__codelineno-0-2572">2572</a></span>
<span class="normal"><a href="#__codelineno-0-2573">2573</a></span>
<span class="normal"><a href="#__codelineno-0-2574">2574</a></span>
<span class="normal"><a href="#__codelineno-0-2575">2575</a></span>
<span class="normal"><a href="#__codelineno-0-2576">2576</a></span>
<span class="normal"><a href="#__codelineno-0-2577">2577</a></span>
<span class="normal"><a href="#__codelineno-0-2578">2578</a></span>
<span class="normal"><a href="#__codelineno-0-2579">2579</a></span>
<span class="normal"><a href="#__codelineno-0-2580">2580</a></span>
<span class="normal"><a href="#__codelineno-0-2581">2581</a></span>
<span class="normal"><a href="#__codelineno-0-2582">2582</a></span>
<span class="normal"><a href="#__codelineno-0-2583">2583</a></span>
<span class="normal"><a href="#__codelineno-0-2584">2584</a></span>
<span class="normal"><a href="#__codelineno-0-2585">2585</a></span>
<span class="normal"><a href="#__codelineno-0-2586">2586</a></span>
<span class="normal"><a href="#__codelineno-0-2587">2587</a></span>
<span class="normal"><a href="#__codelineno-0-2588">2588</a></span>
<span class="normal"><a href="#__codelineno-0-2589">2589</a></span>
<span class="normal"><a href="#__codelineno-0-2590">2590</a></span>
<span class="normal"><a href="#__codelineno-0-2591">2591</a></span>
<span class="normal"><a href="#__codelineno-0-2592">2592</a></span>
<span class="normal"><a href="#__codelineno-0-2593">2593</a></span>
<span class="normal"><a href="#__codelineno-0-2594">2594</a></span>
<span class="normal"><a href="#__codelineno-0-2595">2595</a></span>
<span class="normal"><a href="#__codelineno-0-2596">2596</a></span>
<span class="normal"><a href="#__codelineno-0-2597">2597</a></span>
<span class="normal"><a href="#__codelineno-0-2598">2598</a></span>
<span class="normal"><a href="#__codelineno-0-2599">2599</a></span>
<span class="normal"><a href="#__codelineno-0-2600">2600</a></span>
<span class="normal"><a href="#__codelineno-0-2601">2601</a></span>
<span class="normal"><a href="#__codelineno-0-2602">2602</a></span>
<span class="normal"><a href="#__codelineno-0-2603">2603</a></span>
<span class="normal"><a href="#__codelineno-0-2604">2604</a></span>
<span class="normal"><a href="#__codelineno-0-2605">2605</a></span>
<span class="normal"><a href="#__codelineno-0-2606">2606</a></span>
<span class="normal"><a href="#__codelineno-0-2607">2607</a></span>
<span class="normal"><a href="#__codelineno-0-2608">2608</a></span>
<span class="normal"><a href="#__codelineno-0-2609">2609</a></span>
<span class="normal"><a href="#__codelineno-0-2610">2610</a></span>
<span class="normal"><a href="#__codelineno-0-2611">2611</a></span>
<span class="normal"><a href="#__codelineno-0-2612">2612</a></span>
<span class="normal"><a href="#__codelineno-0-2613">2613</a></span>
<span class="normal"><a href="#__codelineno-0-2614">2614</a></span>
<span class="normal"><a href="#__codelineno-0-2615">2615</a></span>
<span class="normal"><a href="#__codelineno-0-2616">2616</a></span>
<span class="normal"><a href="#__codelineno-0-2617">2617</a></span>
<span class="normal"><a href="#__codelineno-0-2618">2618</a></span>
<span class="normal"><a href="#__codelineno-0-2619">2619</a></span>
<span class="normal"><a href="#__codelineno-0-2620">2620</a></span>
<span class="normal"><a href="#__codelineno-0-2621">2621</a></span>
<span class="normal"><a href="#__codelineno-0-2622">2622</a></span>
<span class="normal"><a href="#__codelineno-0-2623">2623</a></span>
<span class="normal"><a href="#__codelineno-0-2624">2624</a></span>
<span class="normal"><a href="#__codelineno-0-2625">2625</a></span>
<span class="normal"><a href="#__codelineno-0-2626">2626</a></span>
<span class="normal"><a href="#__codelineno-0-2627">2627</a></span>
<span class="normal"><a href="#__codelineno-0-2628">2628</a></span>
<span class="normal"><a href="#__codelineno-0-2629">2629</a></span>
<span class="normal"><a href="#__codelineno-0-2630">2630</a></span>
<span class="normal"><a href="#__codelineno-0-2631">2631</a></span>
<span class="normal"><a href="#__codelineno-0-2632">2632</a></span>
<span class="normal"><a href="#__codelineno-0-2633">2633</a></span>
<span class="normal"><a href="#__codelineno-0-2634">2634</a></span>
<span class="normal"><a href="#__codelineno-0-2635">2635</a></span>
<span class="normal"><a href="#__codelineno-0-2636">2636</a></span>
<span class="normal"><a href="#__codelineno-0-2637">2637</a></span>
<span class="normal"><a href="#__codelineno-0-2638">2638</a></span>
<span class="normal"><a href="#__codelineno-0-2639">2639</a></span>
<span class="normal"><a href="#__codelineno-0-2640">2640</a></span>
<span class="normal"><a href="#__codelineno-0-2641">2641</a></span>
<span class="normal"><a href="#__codelineno-0-2642">2642</a></span>
<span class="normal"><a href="#__codelineno-0-2643">2643</a></span>
<span class="normal"><a href="#__codelineno-0-2644">2644</a></span>
<span class="normal"><a href="#__codelineno-0-2645">2645</a></span>
<span class="normal"><a href="#__codelineno-0-2646">2646</a></span>
<span class="normal"><a href="#__codelineno-0-2647">2647</a></span>
<span class="normal"><a href="#__codelineno-0-2648">2648</a></span>
<span class="normal"><a href="#__codelineno-0-2649">2649</a></span>
<span class="normal"><a href="#__codelineno-0-2650">2650</a></span>
<span class="normal"><a href="#__codelineno-0-2651">2651</a></span>
<span class="normal"><a href="#__codelineno-0-2652">2652</a></span>
<span class="normal"><a href="#__codelineno-0-2653">2653</a></span>
<span class="normal"><a href="#__codelineno-0-2654">2654</a></span>
<span class="normal"><a href="#__codelineno-0-2655">2655</a></span>
<span class="normal"><a href="#__codelineno-0-2656">2656</a></span>
<span class="normal"><a href="#__codelineno-0-2657">2657</a></span>
<span class="normal"><a href="#__codelineno-0-2658">2658</a></span>
<span class="normal"><a href="#__codelineno-0-2659">2659</a></span>
<span class="normal"><a href="#__codelineno-0-2660">2660</a></span>
<span class="normal"><a href="#__codelineno-0-2661">2661</a></span>
<span class="normal"><a href="#__codelineno-0-2662">2662</a></span>
<span class="normal"><a href="#__codelineno-0-2663">2663</a></span>
<span class="normal"><a href="#__codelineno-0-2664">2664</a></span>
<span class="normal"><a href="#__codelineno-0-2665">2665</a></span>
<span class="normal"><a href="#__codelineno-0-2666">2666</a></span>
<span class="normal"><a href="#__codelineno-0-2667">2667</a></span>
<span class="normal"><a href="#__codelineno-0-2668">2668</a></span>
<span class="normal"><a href="#__codelineno-0-2669">2669</a></span>
<span class="normal"><a href="#__codelineno-0-2670">2670</a></span>
<span class="normal"><a href="#__codelineno-0-2671">2671</a></span>
<span class="normal"><a href="#__codelineno-0-2672">2672</a></span>
<span class="normal"><a href="#__codelineno-0-2673">2673</a></span>
<span class="normal"><a href="#__codelineno-0-2674">2674</a></span>
<span class="normal"><a href="#__codelineno-0-2675">2675</a></span>
<span class="normal"><a href="#__codelineno-0-2676">2676</a></span>
<span class="normal"><a href="#__codelineno-0-2677">2677</a></span>
<span class="normal"><a href="#__codelineno-0-2678">2678</a></span>
<span class="normal"><a href="#__codelineno-0-2679">2679</a></span>
<span class="normal"><a href="#__codelineno-0-2680">2680</a></span>
<span class="normal"><a href="#__codelineno-0-2681">2681</a></span>
<span class="normal"><a href="#__codelineno-0-2682">2682</a></span>
<span class="normal"><a href="#__codelineno-0-2683">2683</a></span>
<span class="normal"><a href="#__codelineno-0-2684">2684</a></span>
<span class="normal"><a href="#__codelineno-0-2685">2685</a></span>
<span class="normal"><a href="#__codelineno-0-2686">2686</a></span>
<span class="normal"><a href="#__codelineno-0-2687">2687</a></span>
<span class="normal"><a href="#__codelineno-0-2688">2688</a></span>
<span class="normal"><a href="#__codelineno-0-2689">2689</a></span>
<span class="normal"><a href="#__codelineno-0-2690">2690</a></span>
<span class="normal"><a href="#__codelineno-0-2691">2691</a></span>
<span class="normal"><a href="#__codelineno-0-2692">2692</a></span>
<span class="normal"><a href="#__codelineno-0-2693">2693</a></span>
<span class="normal"><a href="#__codelineno-0-2694">2694</a></span>
<span class="normal"><a href="#__codelineno-0-2695">2695</a></span>
<span class="normal"><a href="#__codelineno-0-2696">2696</a></span>
<span class="normal"><a href="#__codelineno-0-2697">2697</a></span>
<span class="normal"><a href="#__codelineno-0-2698">2698</a></span>
<span class="normal"><a href="#__codelineno-0-2699">2699</a></span>
<span class="normal"><a href="#__codelineno-0-2700">2700</a></span>
<span class="normal"><a href="#__codelineno-0-2701">2701</a></span>
<span class="normal"><a href="#__codelineno-0-2702">2702</a></span>
<span class="normal"><a href="#__codelineno-0-2703">2703</a></span>
<span class="normal"><a href="#__codelineno-0-2704">2704</a></span>
<span class="normal"><a href="#__codelineno-0-2705">2705</a></span>
<span class="normal"><a href="#__codelineno-0-2706">2706</a></span>
<span class="normal"><a href="#__codelineno-0-2707">2707</a></span>
<span class="normal"><a href="#__codelineno-0-2708">2708</a></span>
<span class="normal"><a href="#__codelineno-0-2709">2709</a></span>
<span class="normal"><a href="#__codelineno-0-2710">2710</a></span>
<span class="normal"><a href="#__codelineno-0-2711">2711</a></span>
<span class="normal"><a href="#__codelineno-0-2712">2712</a></span>
<span class="normal"><a href="#__codelineno-0-2713">2713</a></span>
<span class="normal"><a href="#__codelineno-0-2714">2714</a></span>
<span class="normal"><a href="#__codelineno-0-2715">2715</a></span>
<span class="normal"><a href="#__codelineno-0-2716">2716</a></span>
<span class="normal"><a href="#__codelineno-0-2717">2717</a></span>
<span class="normal"><a href="#__codelineno-0-2718">2718</a></span>
<span class="normal"><a href="#__codelineno-0-2719">2719</a></span>
<span class="normal"><a href="#__codelineno-0-2720">2720</a></span>
<span class="normal"><a href="#__codelineno-0-2721">2721</a></span>
<span class="normal"><a href="#__codelineno-0-2722">2722</a></span>
<span class="normal"><a href="#__codelineno-0-2723">2723</a></span>
<span class="normal"><a href="#__codelineno-0-2724">2724</a></span>
<span class="normal"><a href="#__codelineno-0-2725">2725</a></span>
<span class="normal"><a href="#__codelineno-0-2726">2726</a></span>
<span class="normal"><a href="#__codelineno-0-2727">2727</a></span>
<span class="normal"><a href="#__codelineno-0-2728">2728</a></span>
<span class="normal"><a href="#__codelineno-0-2729">2729</a></span>
<span class="normal"><a href="#__codelineno-0-2730">2730</a></span>
<span class="normal"><a href="#__codelineno-0-2731">2731</a></span>
<span class="normal"><a href="#__codelineno-0-2732">2732</a></span>
<span class="normal"><a href="#__codelineno-0-2733">2733</a></span>
<span class="normal"><a href="#__codelineno-0-2734">2734</a></span>
<span class="normal"><a href="#__codelineno-0-2735">2735</a></span>
<span class="normal"><a href="#__codelineno-0-2736">2736</a></span>
<span class="normal"><a href="#__codelineno-0-2737">2737</a></span>
<span class="normal"><a href="#__codelineno-0-2738">2738</a></span>
<span class="normal"><a href="#__codelineno-0-2739">2739</a></span>
<span class="normal"><a href="#__codelineno-0-2740">2740</a></span>
<span class="normal"><a href="#__codelineno-0-2741">2741</a></span>
<span class="normal"><a href="#__codelineno-0-2742">2742</a></span>
<span class="normal"><a href="#__codelineno-0-2743">2743</a></span>
<span class="normal"><a href="#__codelineno-0-2744">2744</a></span>
<span class="normal"><a href="#__codelineno-0-2745">2745</a></span>
<span class="normal"><a href="#__codelineno-0-2746">2746</a></span>
<span class="normal"><a href="#__codelineno-0-2747">2747</a></span>
<span class="normal"><a href="#__codelineno-0-2748">2748</a></span>
<span class="normal"><a href="#__codelineno-0-2749">2749</a></span>
<span class="normal"><a href="#__codelineno-0-2750">2750</a></span>
<span class="normal"><a href="#__codelineno-0-2751">2751</a></span>
<span class="normal"><a href="#__codelineno-0-2752">2752</a></span>
<span class="normal"><a href="#__codelineno-0-2753">2753</a></span>
<span class="normal"><a href="#__codelineno-0-2754">2754</a></span>
<span class="normal"><a href="#__codelineno-0-2755">2755</a></span>
<span class="normal"><a href="#__codelineno-0-2756">2756</a></span>
<span class="normal"><a href="#__codelineno-0-2757">2757</a></span>
<span class="normal"><a href="#__codelineno-0-2758">2758</a></span>
<span class="normal"><a href="#__codelineno-0-2759">2759</a></span>
<span class="normal"><a href="#__codelineno-0-2760">2760</a></span>
<span class="normal"><a href="#__codelineno-0-2761">2761</a></span>
<span class="normal"><a href="#__codelineno-0-2762">2762</a></span>
<span class="normal"><a href="#__codelineno-0-2763">2763</a></span>
<span class="normal"><a href="#__codelineno-0-2764">2764</a></span>
<span class="normal"><a href="#__codelineno-0-2765">2765</a></span>
<span class="normal"><a href="#__codelineno-0-2766">2766</a></span>
<span class="normal"><a href="#__codelineno-0-2767">2767</a></span>
<span class="normal"><a href="#__codelineno-0-2768">2768</a></span>
<span class="normal"><a href="#__codelineno-0-2769">2769</a></span>
<span class="normal"><a href="#__codelineno-0-2770">2770</a></span>
<span class="normal"><a href="#__codelineno-0-2771">2771</a></span>
<span class="normal"><a href="#__codelineno-0-2772">2772</a></span>
<span class="normal"><a href="#__codelineno-0-2773">2773</a></span>
<span class="normal"><a href="#__codelineno-0-2774">2774</a></span>
<span class="normal"><a href="#__codelineno-0-2775">2775</a></span>
<span class="normal"><a href="#__codelineno-0-2776">2776</a></span>
<span class="normal"><a href="#__codelineno-0-2777">2777</a></span>
<span class="normal"><a href="#__codelineno-0-2778">2778</a></span>
<span class="normal"><a href="#__codelineno-0-2779">2779</a></span>
<span class="normal"><a href="#__codelineno-0-2780">2780</a></span>
<span class="normal"><a href="#__codelineno-0-2781">2781</a></span>
<span class="normal"><a href="#__codelineno-0-2782">2782</a></span>
<span class="normal"><a href="#__codelineno-0-2783">2783</a></span>
<span class="normal"><a href="#__codelineno-0-2784">2784</a></span>
<span class="normal"><a href="#__codelineno-0-2785">2785</a></span>
<span class="normal"><a href="#__codelineno-0-2786">2786</a></span>
<span class="normal"><a href="#__codelineno-0-2787">2787</a></span>
<span class="normal"><a href="#__codelineno-0-2788">2788</a></span>
<span class="normal"><a href="#__codelineno-0-2789">2789</a></span>
<span class="normal"><a href="#__codelineno-0-2790">2790</a></span>
<span class="normal"><a href="#__codelineno-0-2791">2791</a></span>
<span class="normal"><a href="#__codelineno-0-2792">2792</a></span>
<span class="normal"><a href="#__codelineno-0-2793">2793</a></span>
<span class="normal"><a href="#__codelineno-0-2794">2794</a></span>
<span class="normal"><a href="#__codelineno-0-2795">2795</a></span>
<span class="normal"><a href="#__codelineno-0-2796">2796</a></span>
<span class="normal"><a href="#__codelineno-0-2797">2797</a></span>
<span class="normal"><a href="#__codelineno-0-2798">2798</a></span>
<span class="normal"><a href="#__codelineno-0-2799">2799</a></span>
<span class="normal"><a href="#__codelineno-0-2800">2800</a></span>
<span class="normal"><a href="#__codelineno-0-2801">2801</a></span>
<span class="normal"><a href="#__codelineno-0-2802">2802</a></span>
<span class="normal"><a href="#__codelineno-0-2803">2803</a></span>
<span class="normal"><a href="#__codelineno-0-2804">2804</a></span>
<span class="normal"><a href="#__codelineno-0-2805">2805</a></span>
<span class="normal"><a href="#__codelineno-0-2806">2806</a></span>
<span class="normal"><a href="#__codelineno-0-2807">2807</a></span>
<span class="normal"><a href="#__codelineno-0-2808">2808</a></span>
<span class="normal"><a href="#__codelineno-0-2809">2809</a></span>
<span class="normal"><a href="#__codelineno-0-2810">2810</a></span>
<span class="normal"><a href="#__codelineno-0-2811">2811</a></span>
<span class="normal"><a href="#__codelineno-0-2812">2812</a></span>
<span class="normal"><a href="#__codelineno-0-2813">2813</a></span>
<span class="normal"><a href="#__codelineno-0-2814">2814</a></span>
<span class="normal"><a href="#__codelineno-0-2815">2815</a></span>
<span class="normal"><a href="#__codelineno-0-2816">2816</a></span>
<span class="normal"><a href="#__codelineno-0-2817">2817</a></span>
<span class="normal"><a href="#__codelineno-0-2818">2818</a></span>
<span class="normal"><a href="#__codelineno-0-2819">2819</a></span>
<span class="normal"><a href="#__codelineno-0-2820">2820</a></span>
<span class="normal"><a href="#__codelineno-0-2821">2821</a></span>
<span class="normal"><a href="#__codelineno-0-2822">2822</a></span>
<span class="normal"><a href="#__codelineno-0-2823">2823</a></span>
<span class="normal"><a href="#__codelineno-0-2824">2824</a></span>
<span class="normal"><a href="#__codelineno-0-2825">2825</a></span>
<span class="normal"><a href="#__codelineno-0-2826">2826</a></span>
<span class="normal"><a href="#__codelineno-0-2827">2827</a></span>
<span class="normal"><a href="#__codelineno-0-2828">2828</a></span>
<span class="normal"><a href="#__codelineno-0-2829">2829</a></span>
<span class="normal"><a href="#__codelineno-0-2830">2830</a></span>
<span class="normal"><a href="#__codelineno-0-2831">2831</a></span>
<span class="normal"><a href="#__codelineno-0-2832">2832</a></span>
<span class="normal"><a href="#__codelineno-0-2833">2833</a></span>
<span class="normal"><a href="#__codelineno-0-2834">2834</a></span>
<span class="normal"><a href="#__codelineno-0-2835">2835</a></span>
<span class="normal"><a href="#__codelineno-0-2836">2836</a></span>
<span class="normal"><a href="#__codelineno-0-2837">2837</a></span>
<span class="normal"><a href="#__codelineno-0-2838">2838</a></span>
<span class="normal"><a href="#__codelineno-0-2839">2839</a></span>
<span class="normal"><a href="#__codelineno-0-2840">2840</a></span>
<span class="normal"><a href="#__codelineno-0-2841">2841</a></span>
<span class="normal"><a href="#__codelineno-0-2842">2842</a></span>
<span class="normal"><a href="#__codelineno-0-2843">2843</a></span>
<span class="normal"><a href="#__codelineno-0-2844">2844</a></span>
<span class="normal"><a href="#__codelineno-0-2845">2845</a></span>
<span class="normal"><a href="#__codelineno-0-2846">2846</a></span>
<span class="normal"><a href="#__codelineno-0-2847">2847</a></span>
<span class="normal"><a href="#__codelineno-0-2848">2848</a></span>
<span class="normal"><a href="#__codelineno-0-2849">2849</a></span>
<span class="normal"><a href="#__codelineno-0-2850">2850</a></span>
<span class="normal"><a href="#__codelineno-0-2851">2851</a></span>
<span class="normal"><a href="#__codelineno-0-2852">2852</a></span>
<span class="normal"><a href="#__codelineno-0-2853">2853</a></span>
<span class="normal"><a href="#__codelineno-0-2854">2854</a></span>
<span class="normal"><a href="#__codelineno-0-2855">2855</a></span>
<span class="normal"><a href="#__codelineno-0-2856">2856</a></span>
<span class="normal"><a href="#__codelineno-0-2857">2857</a></span>
<span class="normal"><a href="#__codelineno-0-2858">2858</a></span>
<span class="normal"><a href="#__codelineno-0-2859">2859</a></span>
<span class="normal"><a href="#__codelineno-0-2860">2860</a></span>
<span class="normal"><a href="#__codelineno-0-2861">2861</a></span>
<span class="normal"><a href="#__codelineno-0-2862">2862</a></span>
<span class="normal"><a href="#__codelineno-0-2863">2863</a></span>
<span class="normal"><a href="#__codelineno-0-2864">2864</a></span>
<span class="normal"><a href="#__codelineno-0-2865">2865</a></span>
<span class="normal"><a href="#__codelineno-0-2866">2866</a></span>
<span class="normal"><a href="#__codelineno-0-2867">2867</a></span>
<span class="normal"><a href="#__codelineno-0-2868">2868</a></span>
<span class="normal"><a href="#__codelineno-0-2869">2869</a></span>
<span class="normal"><a href="#__codelineno-0-2870">2870</a></span>
<span class="normal"><a href="#__codelineno-0-2871">2871</a></span>
<span class="normal"><a href="#__codelineno-0-2872">2872</a></span>
<span class="normal"><a href="#__codelineno-0-2873">2873</a></span>
<span class="normal"><a href="#__codelineno-0-2874">2874</a></span>
<span class="normal"><a href="#__codelineno-0-2875">2875</a></span>
<span class="normal"><a href="#__codelineno-0-2876">2876</a></span>
<span class="normal"><a href="#__codelineno-0-2877">2877</a></span>
<span class="normal"><a href="#__codelineno-0-2878">2878</a></span>
<span class="normal"><a href="#__codelineno-0-2879">2879</a></span>
<span class="normal"><a href="#__codelineno-0-2880">2880</a></span>
<span class="normal"><a href="#__codelineno-0-2881">2881</a></span>
<span class="normal"><a href="#__codelineno-0-2882">2882</a></span>
<span class="normal"><a href="#__codelineno-0-2883">2883</a></span>
<span class="normal"><a href="#__codelineno-0-2884">2884</a></span>
<span class="normal"><a href="#__codelineno-0-2885">2885</a></span>
<span class="normal"><a href="#__codelineno-0-2886">2886</a></span>
<span class="normal"><a href="#__codelineno-0-2887">2887</a></span>
<span class="normal"><a href="#__codelineno-0-2888">2888</a></span>
<span class="normal"><a href="#__codelineno-0-2889">2889</a></span>
<span class="normal"><a href="#__codelineno-0-2890">2890</a></span>
<span class="normal"><a href="#__codelineno-0-2891">2891</a></span>
<span class="normal"><a href="#__codelineno-0-2892">2892</a></span>
<span class="normal"><a href="#__codelineno-0-2893">2893</a></span>
<span class="normal"><a href="#__codelineno-0-2894">2894</a></span>
<span class="normal"><a href="#__codelineno-0-2895">2895</a></span>
<span class="normal"><a href="#__codelineno-0-2896">2896</a></span>
<span class="normal"><a href="#__codelineno-0-2897">2897</a></span>
<span class="normal"><a href="#__codelineno-0-2898">2898</a></span>
<span class="normal"><a href="#__codelineno-0-2899">2899</a></span>
<span class="normal"><a href="#__codelineno-0-2900">2900</a></span>
<span class="normal"><a href="#__codelineno-0-2901">2901</a></span>
<span class="normal"><a href="#__codelineno-0-2902">2902</a></span>
<span class="normal"><a href="#__codelineno-0-2903">2903</a></span>
<span class="normal"><a href="#__codelineno-0-2904">2904</a></span>
<span class="normal"><a href="#__codelineno-0-2905">2905</a></span>
<span class="normal"><a href="#__codelineno-0-2906">2906</a></span>
<span class="normal"><a href="#__codelineno-0-2907">2907</a></span>
<span class="normal"><a href="#__codelineno-0-2908">2908</a></span>
<span class="normal"><a href="#__codelineno-0-2909">2909</a></span>
<span class="normal"><a href="#__codelineno-0-2910">2910</a></span>
<span class="normal"><a href="#__codelineno-0-2911">2911</a></span>
<span class="normal"><a href="#__codelineno-0-2912">2912</a></span>
<span class="normal"><a href="#__codelineno-0-2913">2913</a></span>
<span class="normal"><a href="#__codelineno-0-2914">2914</a></span>
<span class="normal"><a href="#__codelineno-0-2915">2915</a></span>
<span class="normal"><a href="#__codelineno-0-2916">2916</a></span>
<span class="normal"><a href="#__codelineno-0-2917">2917</a></span>
<span class="normal"><a href="#__codelineno-0-2918">2918</a></span>
<span class="normal"><a href="#__codelineno-0-2919">2919</a></span>
<span class="normal"><a href="#__codelineno-0-2920">2920</a></span>
<span class="normal"><a href="#__codelineno-0-2921">2921</a></span>
<span class="normal"><a href="#__codelineno-0-2922">2922</a></span>
<span class="normal"><a href="#__codelineno-0-2923">2923</a></span>
<span class="normal"><a href="#__codelineno-0-2924">2924</a></span>
<span class="normal"><a href="#__codelineno-0-2925">2925</a></span>
<span class="normal"><a href="#__codelineno-0-2926">2926</a></span>
<span class="normal"><a href="#__codelineno-0-2927">2927</a></span>
<span class="normal"><a href="#__codelineno-0-2928">2928</a></span>
<span class="normal"><a href="#__codelineno-0-2929">2929</a></span>
<span class="normal"><a href="#__codelineno-0-2930">2930</a></span>
<span class="normal"><a href="#__codelineno-0-2931">2931</a></span>
<span class="normal"><a href="#__codelineno-0-2932">2932</a></span>
<span class="normal"><a href="#__codelineno-0-2933">2933</a></span>
<span class="normal"><a href="#__codelineno-0-2934">2934</a></span>
<span class="normal"><a href="#__codelineno-0-2935">2935</a></span>
<span class="normal"><a href="#__codelineno-0-2936">2936</a></span>
<span class="normal"><a href="#__codelineno-0-2937">2937</a></span>
<span class="normal"><a href="#__codelineno-0-2938">2938</a></span>
<span class="normal"><a href="#__codelineno-0-2939">2939</a></span>
<span class="normal"><a href="#__codelineno-0-2940">2940</a></span>
<span class="normal"><a href="#__codelineno-0-2941">2941</a></span>
<span class="normal"><a href="#__codelineno-0-2942">2942</a></span>
<span class="normal"><a href="#__codelineno-0-2943">2943</a></span>
<span class="normal"><a href="#__codelineno-0-2944">2944</a></span>
<span class="normal"><a href="#__codelineno-0-2945">2945</a></span>
<span class="normal"><a href="#__codelineno-0-2946">2946</a></span>
<span class="normal"><a href="#__codelineno-0-2947">2947</a></span>
<span class="normal"><a href="#__codelineno-0-2948">2948</a></span>
<span class="normal"><a href="#__codelineno-0-2949">2949</a></span>
<span class="normal"><a href="#__codelineno-0-2950">2950</a></span>
<span class="normal"><a href="#__codelineno-0-2951">2951</a></span>
<span class="normal"><a href="#__codelineno-0-2952">2952</a></span>
<span class="normal"><a href="#__codelineno-0-2953">2953</a></span>
<span class="normal"><a href="#__codelineno-0-2954">2954</a></span>
<span class="normal"><a href="#__codelineno-0-2955">2955</a></span>
<span class="normal"><a href="#__codelineno-0-2956">2956</a></span>
<span class="normal"><a href="#__codelineno-0-2957">2957</a></span>
<span class="normal"><a href="#__codelineno-0-2958">2958</a></span>
<span class="normal"><a href="#__codelineno-0-2959">2959</a></span>
<span class="normal"><a href="#__codelineno-0-2960">2960</a></span>
<span class="normal"><a href="#__codelineno-0-2961">2961</a></span>
<span class="normal"><a href="#__codelineno-0-2962">2962</a></span>
<span class="normal"><a href="#__codelineno-0-2963">2963</a></span>
<span class="normal"><a href="#__codelineno-0-2964">2964</a></span>
<span class="normal"><a href="#__codelineno-0-2965">2965</a></span>
<span class="normal"><a href="#__codelineno-0-2966">2966</a></span>
<span class="normal"><a href="#__codelineno-0-2967">2967</a></span>
<span class="normal"><a href="#__codelineno-0-2968">2968</a></span>
<span class="normal"><a href="#__codelineno-0-2969">2969</a></span>
<span class="normal"><a href="#__codelineno-0-2970">2970</a></span>
<span class="normal"><a href="#__codelineno-0-2971">2971</a></span>
<span class="normal"><a href="#__codelineno-0-2972">2972</a></span>
<span class="normal"><a href="#__codelineno-0-2973">2973</a></span>
<span class="normal"><a href="#__codelineno-0-2974">2974</a></span>
<span class="normal"><a href="#__codelineno-0-2975">2975</a></span>
<span class="normal"><a href="#__codelineno-0-2976">2976</a></span>
<span class="normal"><a href="#__codelineno-0-2977">2977</a></span>
<span class="normal"><a href="#__codelineno-0-2978">2978</a></span>
<span class="normal"><a href="#__codelineno-0-2979">2979</a></span>
<span class="normal"><a href="#__codelineno-0-2980">2980</a></span>
<span class="normal"><a href="#__codelineno-0-2981">2981</a></span>
<span class="normal"><a href="#__codelineno-0-2982">2982</a></span>
<span class="normal"><a href="#__codelineno-0-2983">2983</a></span>
<span class="normal"><a href="#__codelineno-0-2984">2984</a></span>
<span class="normal"><a href="#__codelineno-0-2985">2985</a></span>
<span class="normal"><a href="#__codelineno-0-2986">2986</a></span>
<span class="normal"><a href="#__codelineno-0-2987">2987</a></span>
<span class="normal"><a href="#__codelineno-0-2988">2988</a></span>
<span class="normal"><a href="#__codelineno-0-2989">2989</a></span>
<span class="normal"><a href="#__codelineno-0-2990">2990</a></span>
<span class="normal"><a href="#__codelineno-0-2991">2991</a></span>
<span class="normal"><a href="#__codelineno-0-2992">2992</a></span>
<span class="normal"><a href="#__codelineno-0-2993">2993</a></span>
<span class="normal"><a href="#__codelineno-0-2994">2994</a></span>
<span class="normal"><a href="#__codelineno-0-2995">2995</a></span>
<span class="normal"><a href="#__codelineno-0-2996">2996</a></span>
<span class="normal"><a href="#__codelineno-0-2997">2997</a></span>
<span class="normal"><a href="#__codelineno-0-2998">2998</a></span>
<span class="normal"><a href="#__codelineno-0-2999">2999</a></span>
<span class="normal"><a href="#__codelineno-0-3000">3000</a></span>
<span class="normal"><a href="#__codelineno-0-3001">3001</a></span>
<span class="normal"><a href="#__codelineno-0-3002">3002</a></span>
<span class="normal"><a href="#__codelineno-0-3003">3003</a></span>
<span class="normal"><a href="#__codelineno-0-3004">3004</a></span>
<span class="normal"><a href="#__codelineno-0-3005">3005</a></span>
<span class="normal"><a href="#__codelineno-0-3006">3006</a></span>
<span class="normal"><a href="#__codelineno-0-3007">3007</a></span>
<span class="normal"><a href="#__codelineno-0-3008">3008</a></span>
<span class="normal"><a href="#__codelineno-0-3009">3009</a></span>
<span class="normal"><a href="#__codelineno-0-3010">3010</a></span>
<span class="normal"><a href="#__codelineno-0-3011">3011</a></span>
<span class="normal"><a href="#__codelineno-0-3012">3012</a></span>
<span class="normal"><a href="#__codelineno-0-3013">3013</a></span>
<span class="normal"><a href="#__codelineno-0-3014">3014</a></span>
<span class="normal"><a href="#__codelineno-0-3015">3015</a></span>
<span class="normal"><a href="#__codelineno-0-3016">3016</a></span>
<span class="normal"><a href="#__codelineno-0-3017">3017</a></span>
<span class="normal"><a href="#__codelineno-0-3018">3018</a></span>
<span class="normal"><a href="#__codelineno-0-3019">3019</a></span>
<span class="normal"><a href="#__codelineno-0-3020">3020</a></span>
<span class="normal"><a href="#__codelineno-0-3021">3021</a></span>
<span class="normal"><a href="#__codelineno-0-3022">3022</a></span>
<span class="normal"><a href="#__codelineno-0-3023">3023</a></span>
<span class="normal"><a href="#__codelineno-0-3024">3024</a></span>
<span class="normal"><a href="#__codelineno-0-3025">3025</a></span>
<span class="normal"><a href="#__codelineno-0-3026">3026</a></span>
<span class="normal"><a href="#__codelineno-0-3027">3027</a></span>
<span class="normal"><a href="#__codelineno-0-3028">3028</a></span>
<span class="normal"><a href="#__codelineno-0-3029">3029</a></span>
<span class="normal"><a href="#__codelineno-0-3030">3030</a></span>
<span class="normal"><a href="#__codelineno-0-3031">3031</a></span>
<span class="normal"><a href="#__codelineno-0-3032">3032</a></span>
<span class="normal"><a href="#__codelineno-0-3033">3033</a></span>
<span class="normal"><a href="#__codelineno-0-3034">3034</a></span>
<span class="normal"><a href="#__codelineno-0-3035">3035</a></span>
<span class="normal"><a href="#__codelineno-0-3036">3036</a></span>
<span class="normal"><a href="#__codelineno-0-3037">3037</a></span>
<span class="normal"><a href="#__codelineno-0-3038">3038</a></span>
<span class="normal"><a href="#__codelineno-0-3039">3039</a></span>
<span class="normal"><a href="#__codelineno-0-3040">3040</a></span>
<span class="normal"><a href="#__codelineno-0-3041">3041</a></span>
<span class="normal"><a href="#__codelineno-0-3042">3042</a></span>
<span class="normal"><a href="#__codelineno-0-3043">3043</a></span>
<span class="normal"><a href="#__codelineno-0-3044">3044</a></span>
<span class="normal"><a href="#__codelineno-0-3045">3045</a></span>
<span class="normal"><a href="#__codelineno-0-3046">3046</a></span>
<span class="normal"><a href="#__codelineno-0-3047">3047</a></span>
<span class="normal"><a href="#__codelineno-0-3048">3048</a></span>
<span class="normal"><a href="#__codelineno-0-3049">3049</a></span>
<span class="normal"><a href="#__codelineno-0-3050">3050</a></span>
<span class="normal"><a href="#__codelineno-0-3051">3051</a></span>
<span class="normal"><a href="#__codelineno-0-3052">3052</a></span>
<span class="normal"><a href="#__codelineno-0-3053">3053</a></span>
<span class="normal"><a href="#__codelineno-0-3054">3054</a></span>
<span class="normal"><a href="#__codelineno-0-3055">3055</a></span>
<span class="normal"><a href="#__codelineno-0-3056">3056</a></span>
<span class="normal"><a href="#__codelineno-0-3057">3057</a></span>
<span class="normal"><a href="#__codelineno-0-3058">3058</a></span>
<span class="normal"><a href="#__codelineno-0-3059">3059</a></span>
<span class="normal"><a href="#__codelineno-0-3060">3060</a></span>
<span class="normal"><a href="#__codelineno-0-3061">3061</a></span>
<span class="normal"><a href="#__codelineno-0-3062">3062</a></span>
<span class="normal"><a href="#__codelineno-0-3063">3063</a></span>
<span class="normal"><a href="#__codelineno-0-3064">3064</a></span>
<span class="normal"><a href="#__codelineno-0-3065">3065</a></span>
<span class="normal"><a href="#__codelineno-0-3066">3066</a></span>
<span class="normal"><a href="#__codelineno-0-3067">3067</a></span>
<span class="normal"><a href="#__codelineno-0-3068">3068</a></span>
<span class="normal"><a href="#__codelineno-0-3069">3069</a></span>
<span class="normal"><a href="#__codelineno-0-3070">3070</a></span>
<span class="normal"><a href="#__codelineno-0-3071">3071</a></span>
<span class="normal"><a href="#__codelineno-0-3072">3072</a></span>
<span class="normal"><a href="#__codelineno-0-3073">3073</a></span>
<span class="normal"><a href="#__codelineno-0-3074">3074</a></span>
<span class="normal"><a href="#__codelineno-0-3075">3075</a></span>
<span class="normal"><a href="#__codelineno-0-3076">3076</a></span>
<span class="normal"><a href="#__codelineno-0-3077">3077</a></span>
<span class="normal"><a href="#__codelineno-0-3078">3078</a></span>
<span class="normal"><a href="#__codelineno-0-3079">3079</a></span>
<span class="normal"><a href="#__codelineno-0-3080">3080</a></span>
<span class="normal"><a href="#__codelineno-0-3081">3081</a></span>
<span class="normal"><a href="#__codelineno-0-3082">3082</a></span>
<span class="normal"><a href="#__codelineno-0-3083">3083</a></span>
<span class="normal"><a href="#__codelineno-0-3084">3084</a></span>
<span class="normal"><a href="#__codelineno-0-3085">3085</a></span>
<span class="normal"><a href="#__codelineno-0-3086">3086</a></span>
<span class="normal"><a href="#__codelineno-0-3087">3087</a></span>
<span class="normal"><a href="#__codelineno-0-3088">3088</a></span>
<span class="normal"><a href="#__codelineno-0-3089">3089</a></span>
<span class="normal"><a href="#__codelineno-0-3090">3090</a></span>
<span class="normal"><a href="#__codelineno-0-3091">3091</a></span>
<span class="normal"><a href="#__codelineno-0-3092">3092</a></span>
<span class="normal"><a href="#__codelineno-0-3093">3093</a></span>
<span class="normal"><a href="#__codelineno-0-3094">3094</a></span>
<span class="normal"><a href="#__codelineno-0-3095">3095</a></span>
<span class="normal"><a href="#__codelineno-0-3096">3096</a></span>
<span class="normal"><a href="#__codelineno-0-3097">3097</a></span>
<span class="normal"><a href="#__codelineno-0-3098">3098</a></span>
<span class="normal"><a href="#__codelineno-0-3099">3099</a></span>
<span class="normal"><a href="#__codelineno-0-3100">3100</a></span>
<span class="normal"><a href="#__codelineno-0-3101">3101</a></span>
<span class="normal"><a href="#__codelineno-0-3102">3102</a></span>
<span class="normal"><a href="#__codelineno-0-3103">3103</a></span>
<span class="normal"><a href="#__codelineno-0-3104">3104</a></span>
<span class="normal"><a href="#__codelineno-0-3105">3105</a></span>
<span class="normal"><a href="#__codelineno-0-3106">3106</a></span>
<span class="normal"><a href="#__codelineno-0-3107">3107</a></span>
<span class="normal"><a href="#__codelineno-0-3108">3108</a></span>
<span class="normal"><a href="#__codelineno-0-3109">3109</a></span>
<span class="normal"><a href="#__codelineno-0-3110">3110</a></span>
<span class="normal"><a href="#__codelineno-0-3111">3111</a></span>
<span class="normal"><a href="#__codelineno-0-3112">3112</a></span>
<span class="normal"><a href="#__codelineno-0-3113">3113</a></span>
<span class="normal"><a href="#__codelineno-0-3114">3114</a></span>
<span class="normal"><a href="#__codelineno-0-3115">3115</a></span>
<span class="normal"><a href="#__codelineno-0-3116">3116</a></span>
<span class="normal"><a href="#__codelineno-0-3117">3117</a></span>
<span class="normal"><a href="#__codelineno-0-3118">3118</a></span>
<span class="normal"><a href="#__codelineno-0-3119">3119</a></span>
<span class="normal"><a href="#__codelineno-0-3120">3120</a></span>
<span class="normal"><a href="#__codelineno-0-3121">3121</a></span>
<span class="normal"><a href="#__codelineno-0-3122">3122</a></span>
<span class="normal"><a href="#__codelineno-0-3123">3123</a></span>
<span class="normal"><a href="#__codelineno-0-3124">3124</a></span>
<span class="normal"><a href="#__codelineno-0-3125">3125</a></span>
<span class="normal"><a href="#__codelineno-0-3126">3126</a></span>
<span class="normal"><a href="#__codelineno-0-3127">3127</a></span>
<span class="normal"><a href="#__codelineno-0-3128">3128</a></span>
<span class="normal"><a href="#__codelineno-0-3129">3129</a></span>
<span class="normal"><a href="#__codelineno-0-3130">3130</a></span>
<span class="normal"><a href="#__codelineno-0-3131">3131</a></span>
<span class="normal"><a href="#__codelineno-0-3132">3132</a></span>
<span class="normal"><a href="#__codelineno-0-3133">3133</a></span>
<span class="normal"><a href="#__codelineno-0-3134">3134</a></span>
<span class="normal"><a href="#__codelineno-0-3135">3135</a></span>
<span class="normal"><a href="#__codelineno-0-3136">3136</a></span>
<span class="normal"><a href="#__codelineno-0-3137">3137</a></span>
<span class="normal"><a href="#__codelineno-0-3138">3138</a></span>
<span class="normal"><a href="#__codelineno-0-3139">3139</a></span>
<span class="normal"><a href="#__codelineno-0-3140">3140</a></span>
<span class="normal"><a href="#__codelineno-0-3141">3141</a></span>
<span class="normal"><a href="#__codelineno-0-3142">3142</a></span>
<span class="normal"><a href="#__codelineno-0-3143">3143</a></span>
<span class="normal"><a href="#__codelineno-0-3144">3144</a></span>
<span class="normal"><a href="#__codelineno-0-3145">3145</a></span>
<span class="normal"><a href="#__codelineno-0-3146">3146</a></span>
<span class="normal"><a href="#__codelineno-0-3147">3147</a></span>
<span class="normal"><a href="#__codelineno-0-3148">3148</a></span>
<span class="normal"><a href="#__codelineno-0-3149">3149</a></span>
<span class="normal"><a href="#__codelineno-0-3150">3150</a></span>
<span class="normal"><a href="#__codelineno-0-3151">3151</a></span>
<span class="normal"><a href="#__codelineno-0-3152">3152</a></span>
<span class="normal"><a href="#__codelineno-0-3153">3153</a></span>
<span class="normal"><a href="#__codelineno-0-3154">3154</a></span>
<span class="normal"><a href="#__codelineno-0-3155">3155</a></span>
<span class="normal"><a href="#__codelineno-0-3156">3156</a></span>
<span class="normal"><a href="#__codelineno-0-3157">3157</a></span>
<span class="normal"><a href="#__codelineno-0-3158">3158</a></span>
<span class="normal"><a href="#__codelineno-0-3159">3159</a></span>
<span class="normal"><a href="#__codelineno-0-3160">3160</a></span>
<span class="normal"><a href="#__codelineno-0-3161">3161</a></span>
<span class="normal"><a href="#__codelineno-0-3162">3162</a></span>
<span class="normal"><a href="#__codelineno-0-3163">3163</a></span>
<span class="normal"><a href="#__codelineno-0-3164">3164</a></span>
<span class="normal"><a href="#__codelineno-0-3165">3165</a></span>
<span class="normal"><a href="#__codelineno-0-3166">3166</a></span>
<span class="normal"><a href="#__codelineno-0-3167">3167</a></span>
<span class="normal"><a href="#__codelineno-0-3168">3168</a></span>
<span class="normal"><a href="#__codelineno-0-3169">3169</a></span>
<span class="normal"><a href="#__codelineno-0-3170">3170</a></span>
<span class="normal"><a href="#__codelineno-0-3171">3171</a></span>
<span class="normal"><a href="#__codelineno-0-3172">3172</a></span>
<span class="normal"><a href="#__codelineno-0-3173">3173</a></span>
<span class="normal"><a href="#__codelineno-0-3174">3174</a></span>
<span class="normal"><a href="#__codelineno-0-3175">3175</a></span>
<span class="normal"><a href="#__codelineno-0-3176">3176</a></span>
<span class="normal"><a href="#__codelineno-0-3177">3177</a></span>
<span class="normal"><a href="#__codelineno-0-3178">3178</a></span>
<span class="normal"><a href="#__codelineno-0-3179">3179</a></span>
<span class="normal"><a href="#__codelineno-0-3180">3180</a></span>
<span class="normal"><a href="#__codelineno-0-3181">3181</a></span>
<span class="normal"><a href="#__codelineno-0-3182">3182</a></span>
<span class="normal"><a href="#__codelineno-0-3183">3183</a></span>
<span class="normal"><a href="#__codelineno-0-3184">3184</a></span>
<span class="normal"><a href="#__codelineno-0-3185">3185</a></span>
<span class="normal"><a href="#__codelineno-0-3186">3186</a></span>
<span class="normal"><a href="#__codelineno-0-3187">3187</a></span>
<span class="normal"><a href="#__codelineno-0-3188">3188</a></span>
<span class="normal"><a href="#__codelineno-0-3189">3189</a></span>
<span class="normal"><a href="#__codelineno-0-3190">3190</a></span>
<span class="normal"><a href="#__codelineno-0-3191">3191</a></span>
<span class="normal"><a href="#__codelineno-0-3192">3192</a></span>
<span class="normal"><a href="#__codelineno-0-3193">3193</a></span>
<span class="normal"><a href="#__codelineno-0-3194">3194</a></span>
<span class="normal"><a href="#__codelineno-0-3195">3195</a></span>
<span class="normal"><a href="#__codelineno-0-3196">3196</a></span>
<span class="normal"><a href="#__codelineno-0-3197">3197</a></span>
<span class="normal"><a href="#__codelineno-0-3198">3198</a></span>
<span class="normal"><a href="#__codelineno-0-3199">3199</a></span>
<span class="normal"><a href="#__codelineno-0-3200">3200</a></span>
<span class="normal"><a href="#__codelineno-0-3201">3201</a></span>
<span class="normal"><a href="#__codelineno-0-3202">3202</a></span>
<span class="normal"><a href="#__codelineno-0-3203">3203</a></span>
<span class="normal"><a href="#__codelineno-0-3204">3204</a></span>
<span class="normal"><a href="#__codelineno-0-3205">3205</a></span>
<span class="normal"><a href="#__codelineno-0-3206">3206</a></span>
<span class="normal"><a href="#__codelineno-0-3207">3207</a></span>
<span class="normal"><a href="#__codelineno-0-3208">3208</a></span>
<span class="normal"><a href="#__codelineno-0-3209">3209</a></span>
<span class="normal"><a href="#__codelineno-0-3210">3210</a></span>
<span class="normal"><a href="#__codelineno-0-3211">3211</a></span>
<span class="normal"><a href="#__codelineno-0-3212">3212</a></span>
<span class="normal"><a href="#__codelineno-0-3213">3213</a></span>
<span class="normal"><a href="#__codelineno-0-3214">3214</a></span>
<span class="normal"><a href="#__codelineno-0-3215">3215</a></span>
<span class="normal"><a href="#__codelineno-0-3216">3216</a></span>
<span class="normal"><a href="#__codelineno-0-3217">3217</a></span>
<span class="normal"><a href="#__codelineno-0-3218">3218</a></span>
<span class="normal"><a href="#__codelineno-0-3219">3219</a></span>
<span class="normal"><a href="#__codelineno-0-3220">3220</a></span>
<span class="normal"><a href="#__codelineno-0-3221">3221</a></span>
<span class="normal"><a href="#__codelineno-0-3222">3222</a></span>
<span class="normal"><a href="#__codelineno-0-3223">3223</a></span>
<span class="normal"><a href="#__codelineno-0-3224">3224</a></span>
<span class="normal"><a href="#__codelineno-0-3225">3225</a></span>
<span class="normal"><a href="#__codelineno-0-3226">3226</a></span>
<span class="normal"><a href="#__codelineno-0-3227">3227</a></span>
<span class="normal"><a href="#__codelineno-0-3228">3228</a></span>
<span class="normal"><a href="#__codelineno-0-3229">3229</a></span>
<span class="normal"><a href="#__codelineno-0-3230">3230</a></span>
<span class="normal"><a href="#__codelineno-0-3231">3231</a></span>
<span class="normal"><a href="#__codelineno-0-3232">3232</a></span>
<span class="normal"><a href="#__codelineno-0-3233">3233</a></span>
<span class="normal"><a href="#__codelineno-0-3234">3234</a></span>
<span class="normal"><a href="#__codelineno-0-3235">3235</a></span>
<span class="normal"><a href="#__codelineno-0-3236">3236</a></span>
<span class="normal"><a href="#__codelineno-0-3237">3237</a></span>
<span class="normal"><a href="#__codelineno-0-3238">3238</a></span>
<span class="normal"><a href="#__codelineno-0-3239">3239</a></span>
<span class="normal"><a href="#__codelineno-0-3240">3240</a></span>
<span class="normal"><a href="#__codelineno-0-3241">3241</a></span>
<span class="normal"><a href="#__codelineno-0-3242">3242</a></span>
<span class="normal"><a href="#__codelineno-0-3243">3243</a></span>
<span class="normal"><a href="#__codelineno-0-3244">3244</a></span>
<span class="normal"><a href="#__codelineno-0-3245">3245</a></span>
<span class="normal"><a href="#__codelineno-0-3246">3246</a></span>
<span class="normal"><a href="#__codelineno-0-3247">3247</a></span>
<span class="normal"><a href="#__codelineno-0-3248">3248</a></span>
<span class="normal"><a href="#__codelineno-0-3249">3249</a></span>
<span class="normal"><a href="#__codelineno-0-3250">3250</a></span>
<span class="normal"><a href="#__codelineno-0-3251">3251</a></span>
<span class="normal"><a href="#__codelineno-0-3252">3252</a></span>
<span class="normal"><a href="#__codelineno-0-3253">3253</a></span>
<span class="normal"><a href="#__codelineno-0-3254">3254</a></span>
<span class="normal"><a href="#__codelineno-0-3255">3255</a></span>
<span class="normal"><a href="#__codelineno-0-3256">3256</a></span>
<span class="normal"><a href="#__codelineno-0-3257">3257</a></span>
<span class="normal"><a href="#__codelineno-0-3258">3258</a></span>
<span class="normal"><a href="#__codelineno-0-3259">3259</a></span>
<span class="normal"><a href="#__codelineno-0-3260">3260</a></span>
<span class="normal"><a href="#__codelineno-0-3261">3261</a></span>
<span class="normal"><a href="#__codelineno-0-3262">3262</a></span>
<span class="normal"><a href="#__codelineno-0-3263">3263</a></span>
<span class="normal"><a href="#__codelineno-0-3264">3264</a></span>
<span class="normal"><a href="#__codelineno-0-3265">3265</a></span>
<span class="normal"><a href="#__codelineno-0-3266">3266</a></span>
<span class="normal"><a href="#__codelineno-0-3267">3267</a></span>
<span class="normal"><a href="#__codelineno-0-3268">3268</a></span>
<span class="normal"><a href="#__codelineno-0-3269">3269</a></span>
<span class="normal"><a href="#__codelineno-0-3270">3270</a></span>
<span class="normal"><a href="#__codelineno-0-3271">3271</a></span>
<span class="normal"><a href="#__codelineno-0-3272">3272</a></span>
<span class="normal"><a href="#__codelineno-0-3273">3273</a></span>
<span class="normal"><a href="#__codelineno-0-3274">3274</a></span>
<span class="normal"><a href="#__codelineno-0-3275">3275</a></span>
<span class="normal"><a href="#__codelineno-0-3276">3276</a></span>
<span class="normal"><a href="#__codelineno-0-3277">3277</a></span>
<span class="normal"><a href="#__codelineno-0-3278">3278</a></span>
<span class="normal"><a href="#__codelineno-0-3279">3279</a></span>
<span class="normal"><a href="#__codelineno-0-3280">3280</a></span>
<span class="normal"><a href="#__codelineno-0-3281">3281</a></span>
<span class="normal"><a href="#__codelineno-0-3282">3282</a></span>
<span class="normal"><a href="#__codelineno-0-3283">3283</a></span>
<span class="normal"><a href="#__codelineno-0-3284">3284</a></span>
<span class="normal"><a href="#__codelineno-0-3285">3285</a></span>
<span class="normal"><a href="#__codelineno-0-3286">3286</a></span>
<span class="normal"><a href="#__codelineno-0-3287">3287</a></span>
<span class="normal"><a href="#__codelineno-0-3288">3288</a></span>
<span class="normal"><a href="#__codelineno-0-3289">3289</a></span>
<span class="normal"><a href="#__codelineno-0-3290">3290</a></span>
<span class="normal"><a href="#__codelineno-0-3291">3291</a></span>
<span class="normal"><a href="#__codelineno-0-3292">3292</a></span>
<span class="normal"><a href="#__codelineno-0-3293">3293</a></span>
<span class="normal"><a href="#__codelineno-0-3294">3294</a></span>
<span class="normal"><a href="#__codelineno-0-3295">3295</a></span>
<span class="normal"><a href="#__codelineno-0-3296">3296</a></span>
<span class="normal"><a href="#__codelineno-0-3297">3297</a></span>
<span class="normal"><a href="#__codelineno-0-3298">3298</a></span>
<span class="normal"><a href="#__codelineno-0-3299">3299</a></span>
<span class="normal"><a href="#__codelineno-0-3300">3300</a></span>
<span class="normal"><a href="#__codelineno-0-3301">3301</a></span>
<span class="normal"><a href="#__codelineno-0-3302">3302</a></span>
<span class="normal"><a href="#__codelineno-0-3303">3303</a></span>
<span class="normal"><a href="#__codelineno-0-3304">3304</a></span>
<span class="normal"><a href="#__codelineno-0-3305">3305</a></span>
<span class="normal"><a href="#__codelineno-0-3306">3306</a></span>
<span class="normal"><a href="#__codelineno-0-3307">3307</a></span>
<span class="normal"><a href="#__codelineno-0-3308">3308</a></span>
<span class="normal"><a href="#__codelineno-0-3309">3309</a></span>
<span class="normal"><a href="#__codelineno-0-3310">3310</a></span>
<span class="normal"><a href="#__codelineno-0-3311">3311</a></span>
<span class="normal"><a href="#__codelineno-0-3312">3312</a></span>
<span class="normal"><a href="#__codelineno-0-3313">3313</a></span>
<span class="normal"><a href="#__codelineno-0-3314">3314</a></span>
<span class="normal"><a href="#__codelineno-0-3315">3315</a></span>
<span class="normal"><a href="#__codelineno-0-3316">3316</a></span>
<span class="normal"><a href="#__codelineno-0-3317">3317</a></span>
<span class="normal"><a href="#__codelineno-0-3318">3318</a></span>
<span class="normal"><a href="#__codelineno-0-3319">3319</a></span>
<span class="normal"><a href="#__codelineno-0-3320">3320</a></span>
<span class="normal"><a href="#__codelineno-0-3321">3321</a></span>
<span class="normal"><a href="#__codelineno-0-3322">3322</a></span>
<span class="normal"><a href="#__codelineno-0-3323">3323</a></span>
<span class="normal"><a href="#__codelineno-0-3324">3324</a></span>
<span class="normal"><a href="#__codelineno-0-3325">3325</a></span>
<span class="normal"><a href="#__codelineno-0-3326">3326</a></span>
<span class="normal"><a href="#__codelineno-0-3327">3327</a></span>
<span class="normal"><a href="#__codelineno-0-3328">3328</a></span>
<span class="normal"><a href="#__codelineno-0-3329">3329</a></span>
<span class="normal"><a href="#__codelineno-0-3330">3330</a></span>
<span class="normal"><a href="#__codelineno-0-3331">3331</a></span>
<span class="normal"><a href="#__codelineno-0-3332">3332</a></span>
<span class="normal"><a href="#__codelineno-0-3333">3333</a></span>
<span class="normal"><a href="#__codelineno-0-3334">3334</a></span>
<span class="normal"><a href="#__codelineno-0-3335">3335</a></span>
<span class="normal"><a href="#__codelineno-0-3336">3336</a></span>
<span class="normal"><a href="#__codelineno-0-3337">3337</a></span>
<span class="normal"><a href="#__codelineno-0-3338">3338</a></span>
<span class="normal"><a href="#__codelineno-0-3339">3339</a></span>
<span class="normal"><a href="#__codelineno-0-3340">3340</a></span>
<span class="normal"><a href="#__codelineno-0-3341">3341</a></span>
<span class="normal"><a href="#__codelineno-0-3342">3342</a></span>
<span class="normal"><a href="#__codelineno-0-3343">3343</a></span>
<span class="normal"><a href="#__codelineno-0-3344">3344</a></span>
<span class="normal"><a href="#__codelineno-0-3345">3345</a></span>
<span class="normal"><a href="#__codelineno-0-3346">3346</a></span>
<span class="normal"><a href="#__codelineno-0-3347">3347</a></span>
<span class="normal"><a href="#__codelineno-0-3348">3348</a></span>
<span class="normal"><a href="#__codelineno-0-3349">3349</a></span>
<span class="normal"><a href="#__codelineno-0-3350">3350</a></span>
<span class="normal"><a href="#__codelineno-0-3351">3351</a></span>
<span class="normal"><a href="#__codelineno-0-3352">3352</a></span>
<span class="normal"><a href="#__codelineno-0-3353">3353</a></span>
<span class="normal"><a href="#__codelineno-0-3354">3354</a></span>
<span class="normal"><a href="#__codelineno-0-3355">3355</a></span>
<span class="normal"><a href="#__codelineno-0-3356">3356</a></span>
<span class="normal"><a href="#__codelineno-0-3357">3357</a></span>
<span class="normal"><a href="#__codelineno-0-3358">3358</a></span>
<span class="normal"><a href="#__codelineno-0-3359">3359</a></span>
<span class="normal"><a href="#__codelineno-0-3360">3360</a></span>
<span class="normal"><a href="#__codelineno-0-3361">3361</a></span>
<span class="normal"><a href="#__codelineno-0-3362">3362</a></span>
<span class="normal"><a href="#__codelineno-0-3363">3363</a></span>
<span class="normal"><a href="#__codelineno-0-3364">3364</a></span>
<span class="normal"><a href="#__codelineno-0-3365">3365</a></span>
<span class="normal"><a href="#__codelineno-0-3366">3366</a></span>
<span class="normal"><a href="#__codelineno-0-3367">3367</a></span>
<span class="normal"><a href="#__codelineno-0-3368">3368</a></span>
<span class="normal"><a href="#__codelineno-0-3369">3369</a></span>
<span class="normal"><a href="#__codelineno-0-3370">3370</a></span>
<span class="normal"><a href="#__codelineno-0-3371">3371</a></span>
<span class="normal"><a href="#__codelineno-0-3372">3372</a></span>
<span class="normal"><a href="#__codelineno-0-3373">3373</a></span>
<span class="normal"><a href="#__codelineno-0-3374">3374</a></span>
<span class="normal"><a href="#__codelineno-0-3375">3375</a></span>
<span class="normal"><a href="#__codelineno-0-3376">3376</a></span>
<span class="normal"><a href="#__codelineno-0-3377">3377</a></span>
<span class="normal"><a href="#__codelineno-0-3378">3378</a></span>
<span class="normal"><a href="#__codelineno-0-3379">3379</a></span>
<span class="normal"><a href="#__codelineno-0-3380">3380</a></span>
<span class="normal"><a href="#__codelineno-0-3381">3381</a></span>
<span class="normal"><a href="#__codelineno-0-3382">3382</a></span>
<span class="normal"><a href="#__codelineno-0-3383">3383</a></span>
<span class="normal"><a href="#__codelineno-0-3384">3384</a></span>
<span class="normal"><a href="#__codelineno-0-3385">3385</a></span>
<span class="normal"><a href="#__codelineno-0-3386">3386</a></span>
<span class="normal"><a href="#__codelineno-0-3387">3387</a></span>
<span class="normal"><a href="#__codelineno-0-3388">3388</a></span>
<span class="normal"><a href="#__codelineno-0-3389">3389</a></span>
<span class="normal"><a href="#__codelineno-0-3390">3390</a></span>
<span class="normal"><a href="#__codelineno-0-3391">3391</a></span>
<span class="normal"><a href="#__codelineno-0-3392">3392</a></span>
<span class="normal"><a href="#__codelineno-0-3393">3393</a></span>
<span class="normal"><a href="#__codelineno-0-3394">3394</a></span>
<span class="normal"><a href="#__codelineno-0-3395">3395</a></span>
<span class="normal"><a href="#__codelineno-0-3396">3396</a></span>
<span class="normal"><a href="#__codelineno-0-3397">3397</a></span>
<span class="normal"><a href="#__codelineno-0-3398">3398</a></span>
<span class="normal"><a href="#__codelineno-0-3399">3399</a></span>
<span class="normal"><a href="#__codelineno-0-3400">3400</a></span>
<span class="normal"><a href="#__codelineno-0-3401">3401</a></span>
<span class="normal"><a href="#__codelineno-0-3402">3402</a></span>
<span class="normal"><a href="#__codelineno-0-3403">3403</a></span>
<span class="normal"><a href="#__codelineno-0-3404">3404</a></span>
<span class="normal"><a href="#__codelineno-0-3405">3405</a></span>
<span class="normal"><a href="#__codelineno-0-3406">3406</a></span>
<span class="normal"><a href="#__codelineno-0-3407">3407</a></span>
<span class="normal"><a href="#__codelineno-0-3408">3408</a></span>
<span class="normal"><a href="#__codelineno-0-3409">3409</a></span>
<span class="normal"><a href="#__codelineno-0-3410">3410</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-365" name="__codelineno-0-365"></a><span class="k">class</span><span class="w"> </span><span class="nc">Problem</span><span class="p">(</span><span class="n">TensorMakerMixin</span><span class="p">,</span> <span class="n">Serializable</span><span class="p">):</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a><span class="sd">    Representation of a problem to be optimized.</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a><span class="sd">    The simplest way to use this class is to instantiate it with an</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a><span class="sd">    external fitness function.</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a><span class="sd">    Let us imagine that we have the following fitness function:</span>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a><span class="sd">    import torch</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a><span class="sd">    def f(solution: torch.Tensor) -&gt; torch.Tensor:</span>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a><span class="sd">        return torch.linalg.norm(solution)</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a><span class="sd">    ```</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a><span class="sd">    A problem definition can be made around this fitness function as follows:</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a><span class="sd">    from evotorch import Problem</span>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a><span class="sd">    problem = Problem(</span>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a><span class="sd">        &quot;min&quot;,</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a><span class="sd">        f,  # Goal is to minimize f (would be &quot;max&quot; for maximization)</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a><span class="sd">        solution_length=10,  # Length of a solution is 10</span>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a><span class="sd">        initial_bounds=(-5.0, 5.0),  # Bounds for sampling a new solution</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a><span class="sd">        dtype=torch.float32,  # dtype of a solution</span>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a><span class="sd">    )</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a><span class="sd">    ```</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a><span class="sd">    **Vectorized problem definitions.**</span>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a><span class="sd">    To boost the runtime performance, one might want to define a vectorized</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a><span class="sd">    fitness function where the fitnesses of multiple solutions are computed</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a><span class="sd">    in a batched manner using the vectorization capabilities of PyTorch.</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a><span class="sd">    A vectorized problem definition can be made as follows:</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a><span class="sd">    from evotorch.decorators import vectorized</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a><span class="sd">    @vectorized</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a><span class="sd">    def vf(solutions: torch.Tensor) -&gt; torch.Tensor:</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a><span class="sd">        return torch.linalg.norm(solutions**2, dim=-1)</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a><span class="sd">    problem = Problem(</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a><span class="sd">        &quot;min&quot;,</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a><span class="sd">        vf,  # Goal is to minimize vf (would be &quot;max&quot; for maximization)</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a><span class="sd">        solution_length=10,  # Length of a solution is 10</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a><span class="sd">        initial_bounds=(-5.0, 5.0),  # Bounds for sampling a new solution</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a><span class="sd">        dtype=torch.float32,  # dtype of a solution</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a><span class="sd">    )</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a><span class="sd">    ```</span>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a><span class="sd">    **Parallelization across multiple CPUs.**</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a><span class="sd">    An optimization problem can be configured to parallelize its evaluation</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a><span class="sd">    operations across multiple CPUs as follows:</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a><span class="sd">    problem = Problem(&quot;min&quot;, f, ..., num_actors=4)  # will use 4 actors</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a><span class="sd">    ```</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a><span class="sd">    **Exploiting hardware accelerators.**</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a><span class="sd">    As an alternative to CPU-based parallelization, one might prefer to use</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a><span class="sd">    the parallelized computation capabilities of a hardware accelerator such</span>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a><span class="sd">    as CUDA. To load the problem onto a cuda device (for example, onto</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a><span class="sd">    &quot;cuda:0&quot;), one can do:</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a><span class="sd">    from evotorch.decorators import vectorized</span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a><span class="sd">    @vectorized</span>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a><span class="sd">    def vf(solutions: torch.Tensor) -&gt; torch.Tensor:</span>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a><span class="sd">        return ...</span>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a><span class="sd">    problem = Problem(&quot;min&quot;, vf, ..., device=&quot;cuda:0&quot;)</span>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a><span class="sd">    ```</span>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a><span class="sd">    **Exploiting multiple GPUs in parallel.**</span>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a><span class="sd">    One can also keep the entire population on the CPU, and split and distribute</span>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a><span class="sd">    it to multiple GPUs for GPU-accelerated and parallelized fitness evaluation.</span>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a><span class="sd">    For this, the main device of the problem is set as CPU, but the fitness</span>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a><span class="sd">    function is decorated with `evotorch.decorators.on_cuda`.</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a><span class="sd">    from evotorch.decorators import on_cuda, vectorized</span>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a><span class="sd">    @on_cuda</span>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a><span class="sd">    @vectorized</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a><span class="sd">    def vf(solutions: torch.Tensor) -&gt; torch.Tensor:</span>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a><span class="sd">        return ...</span>
<a id="__codelineno-0-460" name="__codelineno-0-460"></a>
<a id="__codelineno-0-461" name="__codelineno-0-461"></a>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a><span class="sd">    problem = Problem(</span>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a><span class="sd">        &quot;min&quot;,</span>
<a id="__codelineno-0-464" name="__codelineno-0-464"></a><span class="sd">        vf,</span>
<a id="__codelineno-0-465" name="__codelineno-0-465"></a><span class="sd">        ...,</span>
<a id="__codelineno-0-466" name="__codelineno-0-466"></a><span class="sd">        num_actors=N,  # where N&gt;1 and equal to the number of GPUs</span>
<a id="__codelineno-0-467" name="__codelineno-0-467"></a><span class="sd">        # Note: if you are on a computer or on a ray cluster with multiple</span>
<a id="__codelineno-0-468" name="__codelineno-0-468"></a><span class="sd">        # GPUs, you might prefer to use the string &quot;num_gpus&quot; instead of an</span>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a><span class="sd">        # integer N, which will cause the number of available GPUs to be</span>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a><span class="sd">        # counted, and the number of actors to be configured as that count.</span>
<a id="__codelineno-0-471" name="__codelineno-0-471"></a><span class="sd">        #</span>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a><span class="sd">        num_gpus_per_actor=1,  # each GPU is assigned to an actor</span>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a><span class="sd">        device=&quot;cpu&quot;,</span>
<a id="__codelineno-0-474" name="__codelineno-0-474"></a><span class="sd">    )</span>
<a id="__codelineno-0-475" name="__codelineno-0-475"></a><span class="sd">    ```</span>
<a id="__codelineno-0-476" name="__codelineno-0-476"></a>
<a id="__codelineno-0-477" name="__codelineno-0-477"></a><span class="sd">    **Defining problems via inheritance.**</span>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a><span class="sd">    A problem can also be defined via inheritance.</span>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a><span class="sd">    Using inheritance, one can define problems which carry their own additional</span>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a><span class="sd">    data, and/or update their states as more solutions are evaluated,</span>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a><span class="sd">    and/or have custom procedures for sampling new solutions, etc.</span>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a><span class="sd">    As a first example, let us define a parameterized problem. In this example</span>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a><span class="sd">    problem, the goal is to minimize `x^(2q)`, `q` being a parameter of the</span>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a><span class="sd">    problem. The definition of such a problem can be as follows:</span>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a>
<a id="__codelineno-0-487" name="__codelineno-0-487"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-488" name="__codelineno-0-488"></a><span class="sd">    from evotorch import Problem, Solution</span>
<a id="__codelineno-0-489" name="__codelineno-0-489"></a>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a>
<a id="__codelineno-0-491" name="__codelineno-0-491"></a><span class="sd">    class MyProblem(Problem):</span>
<a id="__codelineno-0-492" name="__codelineno-0-492"></a><span class="sd">        def __init__(self, q: float):</span>
<a id="__codelineno-0-493" name="__codelineno-0-493"></a><span class="sd">            self.q = float(q)</span>
<a id="__codelineno-0-494" name="__codelineno-0-494"></a>
<a id="__codelineno-0-495" name="__codelineno-0-495"></a><span class="sd">            super().__init__(</span>
<a id="__codelineno-0-496" name="__codelineno-0-496"></a><span class="sd">                objective_sense=&quot;min&quot;,  # the goal is to minimize</span>
<a id="__codelineno-0-497" name="__codelineno-0-497"></a><span class="sd">                solution_length=10,  # a solution has the length 10</span>
<a id="__codelineno-0-498" name="__codelineno-0-498"></a><span class="sd">                initial_bounds=(-5.0, 5.0),  # sample new solutions from within [-5, 5]</span>
<a id="__codelineno-0-499" name="__codelineno-0-499"></a><span class="sd">                dtype=torch.float32,  # the dtype of a solution is float32</span>
<a id="__codelineno-0-500" name="__codelineno-0-500"></a><span class="sd">                # num_actors=...,  # if parallelization via multiple actors is desired</span>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a><span class="sd">            )</span>
<a id="__codelineno-0-502" name="__codelineno-0-502"></a>
<a id="__codelineno-0-503" name="__codelineno-0-503"></a><span class="sd">        def _evaluate(self, solution: Solution):</span>
<a id="__codelineno-0-504" name="__codelineno-0-504"></a><span class="sd">            # This is where we declare the procedure of evaluating a solution</span>
<a id="__codelineno-0-505" name="__codelineno-0-505"></a>
<a id="__codelineno-0-506" name="__codelineno-0-506"></a><span class="sd">            # Get the decision values of the solution as a PyTorch tensor</span>
<a id="__codelineno-0-507" name="__codelineno-0-507"></a><span class="sd">            x = solution.values</span>
<a id="__codelineno-0-508" name="__codelineno-0-508"></a>
<a id="__codelineno-0-509" name="__codelineno-0-509"></a><span class="sd">            # Compute the fitness</span>
<a id="__codelineno-0-510" name="__codelineno-0-510"></a><span class="sd">            fitness = torch.sum(x ** (2 * self.q))</span>
<a id="__codelineno-0-511" name="__codelineno-0-511"></a>
<a id="__codelineno-0-512" name="__codelineno-0-512"></a><span class="sd">            # Register the fitness into the Solution object</span>
<a id="__codelineno-0-513" name="__codelineno-0-513"></a><span class="sd">            solution.set_evaluation(fitness)</span>
<a id="__codelineno-0-514" name="__codelineno-0-514"></a><span class="sd">    ```</span>
<a id="__codelineno-0-515" name="__codelineno-0-515"></a>
<a id="__codelineno-0-516" name="__codelineno-0-516"></a><span class="sd">    This parameterized problem can be instantiated as follows (let&#39;s say with q=3):</span>
<a id="__codelineno-0-517" name="__codelineno-0-517"></a>
<a id="__codelineno-0-518" name="__codelineno-0-518"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-519" name="__codelineno-0-519"></a><span class="sd">    problem = MyProblem(q=3)</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a><span class="sd">    ```</span>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a><span class="sd">    **Defining vectorized problems via inheritance.**</span>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a><span class="sd">    Vectorization can be used with inheritance-based problem definitions as well.</span>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a><span class="sd">    Please see the following example where the method `_evaluate_batch`</span>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a><span class="sd">    is used instead of `_evaluate` for vectorization:</span>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a>
<a id="__codelineno-0-527" name="__codelineno-0-527"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-528" name="__codelineno-0-528"></a><span class="sd">    from evotorch import Problem, SolutionBatch</span>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a><span class="sd">    class MyVectorizedProblem(Problem):</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a><span class="sd">        def __init__(self, q: float):</span>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a><span class="sd">            self.q = float(q)</span>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a><span class="sd">            super().__init__(</span>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a><span class="sd">                objective_sense=&quot;min&quot;,  # the goal is to minimize</span>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a><span class="sd">                solution_length=10,  # a solution has the length 10</span>
<a id="__codelineno-0-538" name="__codelineno-0-538"></a><span class="sd">                initial_bounds=(-5.0, 5.0),  # sample new solutions from within [-5, 5]</span>
<a id="__codelineno-0-539" name="__codelineno-0-539"></a><span class="sd">                dtype=torch.float32,  # the dtype of a solution is float32</span>
<a id="__codelineno-0-540" name="__codelineno-0-540"></a><span class="sd">                # num_actors=...,  # if parallelization via multiple actors is desired</span>
<a id="__codelineno-0-541" name="__codelineno-0-541"></a><span class="sd">                # device=&quot;cuda:0&quot;,  # if hardware acceleration is desired</span>
<a id="__codelineno-0-542" name="__codelineno-0-542"></a><span class="sd">            )</span>
<a id="__codelineno-0-543" name="__codelineno-0-543"></a>
<a id="__codelineno-0-544" name="__codelineno-0-544"></a><span class="sd">        def _evaluate_batch(self, solutions: SolutionBatch):</span>
<a id="__codelineno-0-545" name="__codelineno-0-545"></a><span class="sd">            # Get the decision values of all the solutions in a 2D PyTorch tensor:</span>
<a id="__codelineno-0-546" name="__codelineno-0-546"></a><span class="sd">            xs = solutions.values</span>
<a id="__codelineno-0-547" name="__codelineno-0-547"></a>
<a id="__codelineno-0-548" name="__codelineno-0-548"></a><span class="sd">            # Compute the fitnesses</span>
<a id="__codelineno-0-549" name="__codelineno-0-549"></a><span class="sd">            fitnesses = torch.sum(x ** (2 * self.q), dim=-1)</span>
<a id="__codelineno-0-550" name="__codelineno-0-550"></a>
<a id="__codelineno-0-551" name="__codelineno-0-551"></a><span class="sd">            # Register the fitness into the Solution object</span>
<a id="__codelineno-0-552" name="__codelineno-0-552"></a><span class="sd">            solutions.set_evals(fitnesses)</span>
<a id="__codelineno-0-553" name="__codelineno-0-553"></a><span class="sd">    ```</span>
<a id="__codelineno-0-554" name="__codelineno-0-554"></a>
<a id="__codelineno-0-555" name="__codelineno-0-555"></a><span class="sd">    **Using multiple GPUs from a problem defined via inheritance.**</span>
<a id="__codelineno-0-556" name="__codelineno-0-556"></a><span class="sd">    The previous example demonstrating the use of multiple GPUs showed how</span>
<a id="__codelineno-0-557" name="__codelineno-0-557"></a><span class="sd">    an independent fitness function can be decorated via</span>
<a id="__codelineno-0-558" name="__codelineno-0-558"></a><span class="sd">    `evotorch.decorators.on_cuda`. Instead of using an independent fitness</span>
<a id="__codelineno-0-559" name="__codelineno-0-559"></a><span class="sd">    function, if one wishes to define a problem by subclassing `Problem`,</span>
<a id="__codelineno-0-560" name="__codelineno-0-560"></a><span class="sd">    the overriden method `_evaluate_batch(...)` has to be decorated by</span>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a><span class="sd">    `evotorch.decorators.on_cuda`. Like in the previous multi-GPU example,</span>
<a id="__codelineno-0-562" name="__codelineno-0-562"></a><span class="sd">    let us assume that we want to parallelize the fitness evaluation</span>
<a id="__codelineno-0-563" name="__codelineno-0-563"></a><span class="sd">    across N GPUs (where N&gt;1). The inheritance-based code to achieve this</span>
<a id="__codelineno-0-564" name="__codelineno-0-564"></a><span class="sd">    can look like this:</span>
<a id="__codelineno-0-565" name="__codelineno-0-565"></a>
<a id="__codelineno-0-566" name="__codelineno-0-566"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-567" name="__codelineno-0-567"></a><span class="sd">    from evotorch import Problem, SolutionBatch</span>
<a id="__codelineno-0-568" name="__codelineno-0-568"></a><span class="sd">    from evotorch.decorators import on_cuda</span>
<a id="__codelineno-0-569" name="__codelineno-0-569"></a>
<a id="__codelineno-0-570" name="__codelineno-0-570"></a>
<a id="__codelineno-0-571" name="__codelineno-0-571"></a><span class="sd">    class MyMultiGPUProblem(Problem):</span>
<a id="__codelineno-0-572" name="__codelineno-0-572"></a><span class="sd">        def __init__(self):</span>
<a id="__codelineno-0-573" name="__codelineno-0-573"></a><span class="sd">            ...</span>
<a id="__codelineno-0-574" name="__codelineno-0-574"></a><span class="sd">            super().__init__(</span>
<a id="__codelineno-0-575" name="__codelineno-0-575"></a><span class="sd">                objective_sense=&quot;min&quot;,  # the goal is to minimize</span>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a><span class="sd">                solution_length=10,  # a solution has the length 10</span>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a><span class="sd">                initial_bounds=(-5.0, 5.0),  # sample new solutions from within [-5, 5]</span>
<a id="__codelineno-0-578" name="__codelineno-0-578"></a><span class="sd">                dtype=torch.float32,  # the dtype of a solution is float32</span>
<a id="__codelineno-0-579" name="__codelineno-0-579"></a><span class="sd">                num_actors=N,  # allocate N actors</span>
<a id="__codelineno-0-580" name="__codelineno-0-580"></a><span class="sd">                # Note: if you are on a computer or on a ray cluster with multiple</span>
<a id="__codelineno-0-581" name="__codelineno-0-581"></a><span class="sd">                # GPUs, you might prefer to use the string &quot;num_gpus&quot; instead of an</span>
<a id="__codelineno-0-582" name="__codelineno-0-582"></a><span class="sd">                # integer N, which will cause the number of available GPUs to be</span>
<a id="__codelineno-0-583" name="__codelineno-0-583"></a><span class="sd">                # counted, and the number of actors to be configured as that count.</span>
<a id="__codelineno-0-584" name="__codelineno-0-584"></a><span class="sd">                #</span>
<a id="__codelineno-0-585" name="__codelineno-0-585"></a><span class="sd">                num_gpus_per_actor=1,  # for each actor, assign a cuda device</span>
<a id="__codelineno-0-586" name="__codelineno-0-586"></a><span class="sd">                device=&quot;cpu&quot;,  # keep the main population on the CPU</span>
<a id="__codelineno-0-587" name="__codelineno-0-587"></a><span class="sd">            )</span>
<a id="__codelineno-0-588" name="__codelineno-0-588"></a>
<a id="__codelineno-0-589" name="__codelineno-0-589"></a><span class="sd">        @on_cuda</span>
<a id="__codelineno-0-590" name="__codelineno-0-590"></a><span class="sd">        def _evaluate_batch(self, solutions: SolutionBatch):</span>
<a id="__codelineno-0-591" name="__codelineno-0-591"></a><span class="sd">            # Get the decision values of all the solutions in a 2D PyTorch tensor:</span>
<a id="__codelineno-0-592" name="__codelineno-0-592"></a><span class="sd">            xs = solutions.values</span>
<a id="__codelineno-0-593" name="__codelineno-0-593"></a>
<a id="__codelineno-0-594" name="__codelineno-0-594"></a><span class="sd">            # Compute the fitnesses</span>
<a id="__codelineno-0-595" name="__codelineno-0-595"></a><span class="sd">            fitnesses = ...</span>
<a id="__codelineno-0-596" name="__codelineno-0-596"></a>
<a id="__codelineno-0-597" name="__codelineno-0-597"></a><span class="sd">            # Register the fitness into the Solution object</span>
<a id="__codelineno-0-598" name="__codelineno-0-598"></a><span class="sd">            solutions.set_evals(fitnesses)</span>
<a id="__codelineno-0-599" name="__codelineno-0-599"></a><span class="sd">    ```</span>
<a id="__codelineno-0-600" name="__codelineno-0-600"></a>
<a id="__codelineno-0-601" name="__codelineno-0-601"></a><span class="sd">    **Customizing how initial solutions are sampled.**</span>
<a id="__codelineno-0-602" name="__codelineno-0-602"></a><span class="sd">    Instead of sampling solutions from within an interval, one might wish to</span>
<a id="__codelineno-0-603" name="__codelineno-0-603"></a><span class="sd">    define a special procedure for generating new solutions. This can be</span>
<a id="__codelineno-0-604" name="__codelineno-0-604"></a><span class="sd">    achieved by overriding the `_fill(...)` method of the Problem class.</span>
<a id="__codelineno-0-605" name="__codelineno-0-605"></a><span class="sd">    Please see the example below.</span>
<a id="__codelineno-0-606" name="__codelineno-0-606"></a>
<a id="__codelineno-0-607" name="__codelineno-0-607"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-608" name="__codelineno-0-608"></a><span class="sd">    class MyProblemWithCustomizedFilling(Problem):</span>
<a id="__codelineno-0-609" name="__codelineno-0-609"></a><span class="sd">        def __init__(self):</span>
<a id="__codelineno-0-610" name="__codelineno-0-610"></a><span class="sd">            super().__init__(</span>
<a id="__codelineno-0-611" name="__codelineno-0-611"></a><span class="sd">                objective_sense=&quot;min&quot;,</span>
<a id="__codelineno-0-612" name="__codelineno-0-612"></a><span class="sd">                solution_length=10,</span>
<a id="__codelineno-0-613" name="__codelineno-0-613"></a><span class="sd">                dtype=torch.float32,</span>
<a id="__codelineno-0-614" name="__codelineno-0-614"></a><span class="sd">                # we do not set initial_bounds because we have a manual procedure</span>
<a id="__codelineno-0-615" name="__codelineno-0-615"></a><span class="sd">                # for initializing solutions</span>
<a id="__codelineno-0-616" name="__codelineno-0-616"></a><span class="sd">            )</span>
<a id="__codelineno-0-617" name="__codelineno-0-617"></a>
<a id="__codelineno-0-618" name="__codelineno-0-618"></a><span class="sd">        def _evaluate_batch(</span>
<a id="__codelineno-0-619" name="__codelineno-0-619"></a><span class="sd">            self, solutions: SolutionBatch</span>
<a id="__codelineno-0-620" name="__codelineno-0-620"></a><span class="sd">        ): ...  # code to compute and fill the fitnesses goes here</span>
<a id="__codelineno-0-621" name="__codelineno-0-621"></a>
<a id="__codelineno-0-622" name="__codelineno-0-622"></a><span class="sd">        def _fill(self, values: torch.Tensor):</span>
<a id="__codelineno-0-623" name="__codelineno-0-623"></a><span class="sd">            # `values` is an empty tensor of shape (n, m) where n is the number</span>
<a id="__codelineno-0-624" name="__codelineno-0-624"></a><span class="sd">            # of solutions and m is the solution length.</span>
<a id="__codelineno-0-625" name="__codelineno-0-625"></a><span class="sd">            # The responsibility of this method is to fill this tensor.</span>
<a id="__codelineno-0-626" name="__codelineno-0-626"></a><span class="sd">            # In the case of this example, let us say that we wish the new</span>
<a id="__codelineno-0-627" name="__codelineno-0-627"></a><span class="sd">            # solutions to have values sampled from a standard normal distribution.</span>
<a id="__codelineno-0-628" name="__codelineno-0-628"></a><span class="sd">            values.normal_()</span>
<a id="__codelineno-0-629" name="__codelineno-0-629"></a><span class="sd">    ```</span>
<a id="__codelineno-0-630" name="__codelineno-0-630"></a>
<a id="__codelineno-0-631" name="__codelineno-0-631"></a><span class="sd">    **Defining manually-structured optimization problems.**</span>
<a id="__codelineno-0-632" name="__codelineno-0-632"></a><span class="sd">    The `dtype` of an optimization problem can be set as `object`.</span>
<a id="__codelineno-0-633" name="__codelineno-0-633"></a><span class="sd">    When the `dtype` is set as an `object`, it means that a solution&#39;s</span>
<a id="__codelineno-0-634" name="__codelineno-0-634"></a><span class="sd">    value can be a PyTorch tensor, or a numpy array, or a Python list,</span>
<a id="__codelineno-0-635" name="__codelineno-0-635"></a><span class="sd">    or a Python dictionary, or a string, or a scalar, or `None`.</span>
<a id="__codelineno-0-636" name="__codelineno-0-636"></a><span class="sd">    This gives the user enough flexibility to express non-numeric</span>
<a id="__codelineno-0-637" name="__codelineno-0-637"></a><span class="sd">    optimization problems and/or problems where each solution has its</span>
<a id="__codelineno-0-638" name="__codelineno-0-638"></a><span class="sd">    own length, or even its own structure.</span>
<a id="__codelineno-0-639" name="__codelineno-0-639"></a>
<a id="__codelineno-0-640" name="__codelineno-0-640"></a><span class="sd">    In the example below, we define an optimization problem where a</span>
<a id="__codelineno-0-641" name="__codelineno-0-641"></a><span class="sd">    solution is represented by a Python list and where each solution can</span>
<a id="__codelineno-0-642" name="__codelineno-0-642"></a><span class="sd">    have its own length. For simplicity, we define the fitness function</span>
<a id="__codelineno-0-643" name="__codelineno-0-643"></a><span class="sd">    as the sum of the values of a solution.</span>
<a id="__codelineno-0-644" name="__codelineno-0-644"></a>
<a id="__codelineno-0-645" name="__codelineno-0-645"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-646" name="__codelineno-0-646"></a><span class="sd">    from evotorch import Problem, SolutionBatch</span>
<a id="__codelineno-0-647" name="__codelineno-0-647"></a><span class="sd">    from evotorch.tools import ObjectArray</span>
<a id="__codelineno-0-648" name="__codelineno-0-648"></a><span class="sd">    import random</span>
<a id="__codelineno-0-649" name="__codelineno-0-649"></a><span class="sd">    import torch</span>
<a id="__codelineno-0-650" name="__codelineno-0-650"></a>
<a id="__codelineno-0-651" name="__codelineno-0-651"></a>
<a id="__codelineno-0-652" name="__codelineno-0-652"></a><span class="sd">    class MyCustomStructuredProblem(Problem):</span>
<a id="__codelineno-0-653" name="__codelineno-0-653"></a><span class="sd">        def __init__(self):</span>
<a id="__codelineno-0-654" name="__codelineno-0-654"></a><span class="sd">            super().__init__(</span>
<a id="__codelineno-0-655" name="__codelineno-0-655"></a><span class="sd">                objective_sense=&quot;min&quot;,</span>
<a id="__codelineno-0-656" name="__codelineno-0-656"></a><span class="sd">                dtype=object,</span>
<a id="__codelineno-0-657" name="__codelineno-0-657"></a><span class="sd">            )</span>
<a id="__codelineno-0-658" name="__codelineno-0-658"></a>
<a id="__codelineno-0-659" name="__codelineno-0-659"></a><span class="sd">        def _evaluate_batch(self, solutions: SolutionBatch):</span>
<a id="__codelineno-0-660" name="__codelineno-0-660"></a><span class="sd">            # Get the number of solutions</span>
<a id="__codelineno-0-661" name="__codelineno-0-661"></a><span class="sd">            n = len(solutions)</span>
<a id="__codelineno-0-662" name="__codelineno-0-662"></a>
<a id="__codelineno-0-663" name="__codelineno-0-663"></a><span class="sd">            # Allocate a PyTorch tensor that will store the fitnesses</span>
<a id="__codelineno-0-664" name="__codelineno-0-664"></a><span class="sd">            fitnesses = torch.empty(n, dtype=torch.float32)</span>
<a id="__codelineno-0-665" name="__codelineno-0-665"></a>
<a id="__codelineno-0-666" name="__codelineno-0-666"></a><span class="sd">            # Fitness is computed as the sum of numeric values stored</span>
<a id="__codelineno-0-667" name="__codelineno-0-667"></a><span class="sd">            # by a solution.</span>
<a id="__codelineno-0-668" name="__codelineno-0-668"></a><span class="sd">            for i in range(n):</span>
<a id="__codelineno-0-669" name="__codelineno-0-669"></a><span class="sd">                # Get the values stored by a solution (which, in the case of</span>
<a id="__codelineno-0-670" name="__codelineno-0-670"></a><span class="sd">                # this example, is a Python list, because we initialize them</span>
<a id="__codelineno-0-671" name="__codelineno-0-671"></a><span class="sd">                # so in the _fill method).</span>
<a id="__codelineno-0-672" name="__codelineno-0-672"></a><span class="sd">                sln_values = solutions[i].values</span>
<a id="__codelineno-0-673" name="__codelineno-0-673"></a><span class="sd">                fitnesses[i] = sum(sln_values)</span>
<a id="__codelineno-0-674" name="__codelineno-0-674"></a>
<a id="__codelineno-0-675" name="__codelineno-0-675"></a><span class="sd">            # Set the fitnesses</span>
<a id="__codelineno-0-676" name="__codelineno-0-676"></a><span class="sd">            solutions.set_evals(fitnesses)</span>
<a id="__codelineno-0-677" name="__codelineno-0-677"></a>
<a id="__codelineno-0-678" name="__codelineno-0-678"></a><span class="sd">        def _fill(self, values: ObjectArray):</span>
<a id="__codelineno-0-679" name="__codelineno-0-679"></a><span class="sd">            # At this point, we have an ObjectArray of length `n`.</span>
<a id="__codelineno-0-680" name="__codelineno-0-680"></a><span class="sd">            # This means, we need to fill the values of `n` solutions.</span>
<a id="__codelineno-0-681" name="__codelineno-0-681"></a><span class="sd">            # `values[i]` represents the values of the i-th solution.</span>
<a id="__codelineno-0-682" name="__codelineno-0-682"></a><span class="sd">            # Initially, `values[i]` is None.</span>
<a id="__codelineno-0-683" name="__codelineno-0-683"></a><span class="sd">            # It is up to us how `values[i]` will be filled.</span>
<a id="__codelineno-0-684" name="__codelineno-0-684"></a><span class="sd">            # Let us make each solution be initialized as a list of</span>
<a id="__codelineno-0-685" name="__codelineno-0-685"></a><span class="sd">            # random length, containing random real numbers.</span>
<a id="__codelineno-0-686" name="__codelineno-0-686"></a>
<a id="__codelineno-0-687" name="__codelineno-0-687"></a><span class="sd">            for i in range(len(values)):</span>
<a id="__codelineno-0-688" name="__codelineno-0-688"></a><span class="sd">                ith_solution_length = random.randint(1, 10)</span>
<a id="__codelineno-0-689" name="__codelineno-0-689"></a><span class="sd">                ith_solution_values = [random.random() for _ in range(ith_solution_length)]</span>
<a id="__codelineno-0-690" name="__codelineno-0-690"></a><span class="sd">                values[i] = ith_solution_values</span>
<a id="__codelineno-0-691" name="__codelineno-0-691"></a><span class="sd">    ```</span>
<a id="__codelineno-0-692" name="__codelineno-0-692"></a>
<a id="__codelineno-0-693" name="__codelineno-0-693"></a><span class="sd">    **Multi-objective optimization.**</span>
<a id="__codelineno-0-694" name="__codelineno-0-694"></a><span class="sd">    A multi-objective optimization problem can be expressed by using multiple</span>
<a id="__codelineno-0-695" name="__codelineno-0-695"></a><span class="sd">    objective senses. As an example, let us consider an optimization problem</span>
<a id="__codelineno-0-696" name="__codelineno-0-696"></a><span class="sd">    where the first objective sense is minimization and the second objective</span>
<a id="__codelineno-0-697" name="__codelineno-0-697"></a><span class="sd">    sense is maximization. When working with an external fitness function,</span>
<a id="__codelineno-0-698" name="__codelineno-0-698"></a><span class="sd">    the code to express such an optimization problem would look like this:</span>
<a id="__codelineno-0-699" name="__codelineno-0-699"></a>
<a id="__codelineno-0-700" name="__codelineno-0-700"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-701" name="__codelineno-0-701"></a><span class="sd">    from evotorch import Problem</span>
<a id="__codelineno-0-702" name="__codelineno-0-702"></a><span class="sd">    from evotorch.decorators import vectorized</span>
<a id="__codelineno-0-703" name="__codelineno-0-703"></a><span class="sd">    import torch</span>
<a id="__codelineno-0-704" name="__codelineno-0-704"></a>
<a id="__codelineno-0-705" name="__codelineno-0-705"></a>
<a id="__codelineno-0-706" name="__codelineno-0-706"></a><span class="sd">    @vectorized</span>
<a id="__codelineno-0-707" name="__codelineno-0-707"></a><span class="sd">    def f(x: torch.Tensor) -&gt; torch.Tensor:</span>
<a id="__codelineno-0-708" name="__codelineno-0-708"></a><span class="sd">        # (Note that if dtype is object, x will be of type ObjectArray,</span>
<a id="__codelineno-0-709" name="__codelineno-0-709"></a><span class="sd">        # and not a PyTorch tensor)</span>
<a id="__codelineno-0-710" name="__codelineno-0-710"></a>
<a id="__codelineno-0-711" name="__codelineno-0-711"></a><span class="sd">        # Code to compute the fitnesses goes here.</span>
<a id="__codelineno-0-712" name="__codelineno-0-712"></a><span class="sd">        # Our resulting tensor `fitnesses` is expected to have a shape (n, m)</span>
<a id="__codelineno-0-713" name="__codelineno-0-713"></a><span class="sd">        # where n is the number of solutions and m is the number of objectives</span>
<a id="__codelineno-0-714" name="__codelineno-0-714"></a><span class="sd">        # (which is 2 in the case of this example).</span>
<a id="__codelineno-0-715" name="__codelineno-0-715"></a><span class="sd">        # `fitnesses[i, k]` is expected to store the fitness value belonging</span>
<a id="__codelineno-0-716" name="__codelineno-0-716"></a><span class="sd">        # to the i-th solution according to the k-th objective.</span>
<a id="__codelineno-0-717" name="__codelineno-0-717"></a><span class="sd">        fitnesses: torch.Tensor = ...</span>
<a id="__codelineno-0-718" name="__codelineno-0-718"></a><span class="sd">        return fitnesses</span>
<a id="__codelineno-0-719" name="__codelineno-0-719"></a>
<a id="__codelineno-0-720" name="__codelineno-0-720"></a>
<a id="__codelineno-0-721" name="__codelineno-0-721"></a><span class="sd">    problem = Problem([&quot;min&quot;, &quot;max&quot;], f, ...)</span>
<a id="__codelineno-0-722" name="__codelineno-0-722"></a><span class="sd">    ```</span>
<a id="__codelineno-0-723" name="__codelineno-0-723"></a>
<a id="__codelineno-0-724" name="__codelineno-0-724"></a><span class="sd">    A multi-objective problem defined via class inheritance would look like this:</span>
<a id="__codelineno-0-725" name="__codelineno-0-725"></a>
<a id="__codelineno-0-726" name="__codelineno-0-726"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-727" name="__codelineno-0-727"></a><span class="sd">    from evotorch import Problem, SolutionBatch</span>
<a id="__codelineno-0-728" name="__codelineno-0-728"></a>
<a id="__codelineno-0-729" name="__codelineno-0-729"></a>
<a id="__codelineno-0-730" name="__codelineno-0-730"></a><span class="sd">    class MyMultiObjectiveProblem(Problem):</span>
<a id="__codelineno-0-731" name="__codelineno-0-731"></a><span class="sd">        def __init__(self):</span>
<a id="__codelineno-0-732" name="__codelineno-0-732"></a><span class="sd">            super().__init__(objective_sense=[&quot;min&quot;, &quot;max&quot;], ...)</span>
<a id="__codelineno-0-733" name="__codelineno-0-733"></a>
<a id="__codelineno-0-734" name="__codelineno-0-734"></a><span class="sd">        def _evaluate_batch(self, solutions: SolutionBatch):</span>
<a id="__codelineno-0-735" name="__codelineno-0-735"></a><span class="sd">            # Code to compute the fitnesses goes here.</span>
<a id="__codelineno-0-736" name="__codelineno-0-736"></a><span class="sd">            # `fitnesses[i, k]` is expected to store the fitness value belonging</span>
<a id="__codelineno-0-737" name="__codelineno-0-737"></a><span class="sd">            # to the i-th solution according to the k-th objective.</span>
<a id="__codelineno-0-738" name="__codelineno-0-738"></a><span class="sd">            fitnesses: torch.Tensor = ...</span>
<a id="__codelineno-0-739" name="__codelineno-0-739"></a>
<a id="__codelineno-0-740" name="__codelineno-0-740"></a><span class="sd">            # Set the fitnesses</span>
<a id="__codelineno-0-741" name="__codelineno-0-741"></a><span class="sd">            solutions.set_evals(fitnesses)</span>
<a id="__codelineno-0-742" name="__codelineno-0-742"></a><span class="sd">    ```</span>
<a id="__codelineno-0-743" name="__codelineno-0-743"></a>
<a id="__codelineno-0-744" name="__codelineno-0-744"></a><span class="sd">    **How to solve a problem.**</span>
<a id="__codelineno-0-745" name="__codelineno-0-745"></a><span class="sd">    If the optimization problem is single-objective and its dtype is a float</span>
<a id="__codelineno-0-746" name="__codelineno-0-746"></a><span class="sd">    (e.g. torch.float32, torch.float64, etc.), then it can be solved using</span>
<a id="__codelineno-0-747" name="__codelineno-0-747"></a><span class="sd">    any search algorithm implemented in EvoTorch. Let us assume that we have</span>
<a id="__codelineno-0-748" name="__codelineno-0-748"></a><span class="sd">    such an optimization problem stored by the variable `prob`. We could use</span>
<a id="__codelineno-0-749" name="__codelineno-0-749"></a><span class="sd">    the [cross entropy method][evotorch.algorithms.distributed.gaussian.CEM])</span>
<a id="__codelineno-0-750" name="__codelineno-0-750"></a><span class="sd">    to solve it:</span>
<a id="__codelineno-0-751" name="__codelineno-0-751"></a>
<a id="__codelineno-0-752" name="__codelineno-0-752"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-753" name="__codelineno-0-753"></a><span class="sd">    from evotorch import Problem</span>
<a id="__codelineno-0-754" name="__codelineno-0-754"></a><span class="sd">    from evotorch.algorithms import CEM</span>
<a id="__codelineno-0-755" name="__codelineno-0-755"></a><span class="sd">    from evotorch.logging import StdOutLogger</span>
<a id="__codelineno-0-756" name="__codelineno-0-756"></a>
<a id="__codelineno-0-757" name="__codelineno-0-757"></a>
<a id="__codelineno-0-758" name="__codelineno-0-758"></a><span class="sd">    def f(x: torch.Tensor) -&gt; torch.Tensor: ...</span>
<a id="__codelineno-0-759" name="__codelineno-0-759"></a>
<a id="__codelineno-0-760" name="__codelineno-0-760"></a>
<a id="__codelineno-0-761" name="__codelineno-0-761"></a><span class="sd">    prob = Problem(&quot;min&quot;, f, solution_length=..., dtype=torch.float32)</span>
<a id="__codelineno-0-762" name="__codelineno-0-762"></a>
<a id="__codelineno-0-763" name="__codelineno-0-763"></a><span class="sd">    searcher = CEM(</span>
<a id="__codelineno-0-764" name="__codelineno-0-764"></a><span class="sd">        problem,</span>
<a id="__codelineno-0-765" name="__codelineno-0-765"></a><span class="sd">        # The keyword arguments below refer to hyperparameters specific to the</span>
<a id="__codelineno-0-766" name="__codelineno-0-766"></a><span class="sd">        # cross entropy method algorithm. It is recommended to tune these</span>
<a id="__codelineno-0-767" name="__codelineno-0-767"></a><span class="sd">        # hyperparameters according to the problem at hand.</span>
<a id="__codelineno-0-768" name="__codelineno-0-768"></a><span class="sd">        popsize=100,  # population size</span>
<a id="__codelineno-0-769" name="__codelineno-0-769"></a><span class="sd">        parenthood_ratio=0.5,  # 0.5 means better half of solutions become parents</span>
<a id="__codelineno-0-770" name="__codelineno-0-770"></a><span class="sd">        stdev_init=10.0,  # initial standard deviation of the search distribution</span>
<a id="__codelineno-0-771" name="__codelineno-0-771"></a><span class="sd">    )</span>
<a id="__codelineno-0-772" name="__codelineno-0-772"></a>
<a id="__codelineno-0-773" name="__codelineno-0-773"></a><span class="sd">    _ = StdOutLogger(searcher)  # to report the progress onto the screen</span>
<a id="__codelineno-0-774" name="__codelineno-0-774"></a><span class="sd">    searcher.run(50)  # run for 50 generations</span>
<a id="__codelineno-0-775" name="__codelineno-0-775"></a>
<a id="__codelineno-0-776" name="__codelineno-0-776"></a><span class="sd">    print(&quot;Center of the search distribution:&quot;, searcher.status[&quot;center&quot;])</span>
<a id="__codelineno-0-777" name="__codelineno-0-777"></a><span class="sd">    print(&quot;Solution with best fitness ever:&quot;, searcher.status[&quot;best&quot;])</span>
<a id="__codelineno-0-778" name="__codelineno-0-778"></a><span class="sd">    ```</span>
<a id="__codelineno-0-779" name="__codelineno-0-779"></a>
<a id="__codelineno-0-780" name="__codelineno-0-780"></a><span class="sd">    See the namespace [evotorch.algorithms][evotorch.algorithms] to see the</span>
<a id="__codelineno-0-781" name="__codelineno-0-781"></a><span class="sd">    algorithms implemented within EvoTorch.</span>
<a id="__codelineno-0-782" name="__codelineno-0-782"></a>
<a id="__codelineno-0-783" name="__codelineno-0-783"></a><span class="sd">    If the optimization problem at hand has an integer dtype (e.g. torch.int64),</span>
<a id="__codelineno-0-784" name="__codelineno-0-784"></a><span class="sd">    or has the `object` dtype, or has multiple objectives, then distribution-based</span>
<a id="__codelineno-0-785" name="__codelineno-0-785"></a><span class="sd">    search algorithms such as CEM cannot be used (since those algorithms were</span>
<a id="__codelineno-0-786" name="__codelineno-0-786"></a><span class="sd">    implemented with continuous decision variables and with single-objective</span>
<a id="__codelineno-0-787" name="__codelineno-0-787"></a><span class="sd">    problems in mind). In such cases, one can use the algorithm named</span>
<a id="__codelineno-0-788" name="__codelineno-0-788"></a><span class="sd">    [SteadyState][evotorch.algorithms.ga.SteadyStateGA].</span>
<a id="__codelineno-0-789" name="__codelineno-0-789"></a><span class="sd">    Please also note that, while using</span>
<a id="__codelineno-0-790" name="__codelineno-0-790"></a><span class="sd">    [SteadyStateGA][evotorch.algorithms.ga.SteadyStateGA] on a problem with an</span>
<a id="__codelineno-0-791" name="__codelineno-0-791"></a><span class="sd">    integer dtype or with the `object` dtype, one will have to define manual</span>
<a id="__codelineno-0-792" name="__codelineno-0-792"></a><span class="sd">    cross-over and mutation operators specialized to the solution structure</span>
<a id="__codelineno-0-793" name="__codelineno-0-793"></a><span class="sd">    of the problem at hand. Please see the documentation of</span>
<a id="__codelineno-0-794" name="__codelineno-0-794"></a><span class="sd">    [SteadyStateGA][evotorch.algorithms.ga.SteadyStateGA] for details.</span>
<a id="__codelineno-0-795" name="__codelineno-0-795"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-796" name="__codelineno-0-796"></a>
<a id="__codelineno-0-797" name="__codelineno-0-797"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-0-798" name="__codelineno-0-798"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-799" name="__codelineno-0-799"></a>        <span class="n">objective_sense</span><span class="p">:</span> <span class="n">ObjectiveSense</span><span class="p">,</span>
<a id="__codelineno-0-800" name="__codelineno-0-800"></a>        <span class="n">objective_func</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-801" name="__codelineno-0-801"></a>        <span class="o">*</span><span class="p">,</span>
<a id="__codelineno-0-802" name="__codelineno-0-802"></a>        <span class="n">initial_bounds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">BoundsPairLike</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-803" name="__codelineno-0-803"></a>        <span class="n">bounds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">BoundsPairLike</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-804" name="__codelineno-0-804"></a>        <span class="n">solution_length</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-805" name="__codelineno-0-805"></a>        <span class="n">dtype</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">DType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-806" name="__codelineno-0-806"></a>        <span class="n">eval_dtype</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">DType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-807" name="__codelineno-0-807"></a>        <span class="n">device</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Device</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-808" name="__codelineno-0-808"></a>        <span class="n">eval_data_length</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-809" name="__codelineno-0-809"></a>        <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-810" name="__codelineno-0-810"></a>        <span class="n">num_actors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-811" name="__codelineno-0-811"></a>        <span class="n">actor_config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-812" name="__codelineno-0-812"></a>        <span class="n">num_gpus_per_actor</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-813" name="__codelineno-0-813"></a>        <span class="n">num_subbatches</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-814" name="__codelineno-0-814"></a>        <span class="n">subbatch_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-815" name="__codelineno-0-815"></a>        <span class="n">store_solution_stats</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-816" name="__codelineno-0-816"></a>        <span class="n">vectorized</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-817" name="__codelineno-0-817"></a>    <span class="p">):</span>
<a id="__codelineno-0-818" name="__codelineno-0-818"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-819" name="__codelineno-0-819"></a><span class="sd">        `__init__(...)`: Initialize the Problem object.</span>
<a id="__codelineno-0-820" name="__codelineno-0-820"></a>
<a id="__codelineno-0-821" name="__codelineno-0-821"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-822" name="__codelineno-0-822"></a><span class="sd">            objective_sense: A string, or a sequence of strings.</span>
<a id="__codelineno-0-823" name="__codelineno-0-823"></a><span class="sd">                For a single-objective problem, a single string</span>
<a id="__codelineno-0-824" name="__codelineno-0-824"></a><span class="sd">                (&quot;min&quot; or &quot;max&quot;, for minimization or maximization)</span>
<a id="__codelineno-0-825" name="__codelineno-0-825"></a><span class="sd">                is enough.</span>
<a id="__codelineno-0-826" name="__codelineno-0-826"></a><span class="sd">                For a problem with `n` objectives, a sequence</span>
<a id="__codelineno-0-827" name="__codelineno-0-827"></a><span class="sd">                of strings (e.g. a list of strings) of length `n` is</span>
<a id="__codelineno-0-828" name="__codelineno-0-828"></a><span class="sd">                required, each string in the sequence being &quot;min&quot; or</span>
<a id="__codelineno-0-829" name="__codelineno-0-829"></a><span class="sd">                &quot;max&quot;. This argument specifies the goal of the</span>
<a id="__codelineno-0-830" name="__codelineno-0-830"></a><span class="sd">                optimization.</span>
<a id="__codelineno-0-831" name="__codelineno-0-831"></a><span class="sd">            initial_bounds: In which interval will the values of a</span>
<a id="__codelineno-0-832" name="__codelineno-0-832"></a><span class="sd">                new solution will be initialized.</span>
<a id="__codelineno-0-833" name="__codelineno-0-833"></a><span class="sd">                Expected as a tuple, each element being either a</span>
<a id="__codelineno-0-834" name="__codelineno-0-834"></a><span class="sd">                scalar, or a vector of length `n`, `n` being the</span>
<a id="__codelineno-0-835" name="__codelineno-0-835"></a><span class="sd">                length of a solution.</span>
<a id="__codelineno-0-836" name="__codelineno-0-836"></a><span class="sd">                If a manual solution initialization is preferred</span>
<a id="__codelineno-0-837" name="__codelineno-0-837"></a><span class="sd">                (instead of an interval-based initialization),</span>
<a id="__codelineno-0-838" name="__codelineno-0-838"></a><span class="sd">                one can leave `initial_bounds` as None, and override</span>
<a id="__codelineno-0-839" name="__codelineno-0-839"></a><span class="sd">                the `_fill(...)` method in the inheriting subclass.</span>
<a id="__codelineno-0-840" name="__codelineno-0-840"></a><span class="sd">            bounds: Interval in which all the solutions must always</span>
<a id="__codelineno-0-841" name="__codelineno-0-841"></a><span class="sd">                reside.</span>
<a id="__codelineno-0-842" name="__codelineno-0-842"></a><span class="sd">                Expected as a tuple, each element being either a</span>
<a id="__codelineno-0-843" name="__codelineno-0-843"></a><span class="sd">                scalar, or a vector of length `n`, `n` being the</span>
<a id="__codelineno-0-844" name="__codelineno-0-844"></a><span class="sd">                length of a solution.</span>
<a id="__codelineno-0-845" name="__codelineno-0-845"></a><span class="sd">                This argument is optional, and can be left as None</span>
<a id="__codelineno-0-846" name="__codelineno-0-846"></a><span class="sd">                if one does not wish to declare hard bounds on the</span>
<a id="__codelineno-0-847" name="__codelineno-0-847"></a><span class="sd">                decision values of the problem.</span>
<a id="__codelineno-0-848" name="__codelineno-0-848"></a><span class="sd">                If `bounds` is specified, `initial_bounds` is missing,</span>
<a id="__codelineno-0-849" name="__codelineno-0-849"></a><span class="sd">                and `_fill(...)` is not overriden, then `bounds` will</span>
<a id="__codelineno-0-850" name="__codelineno-0-850"></a><span class="sd">                also serve as the `initial_bounds`.</span>
<a id="__codelineno-0-851" name="__codelineno-0-851"></a><span class="sd">            solution_length: Length of a solution.</span>
<a id="__codelineno-0-852" name="__codelineno-0-852"></a><span class="sd">                Required for all fixed-length numeric optimization</span>
<a id="__codelineno-0-853" name="__codelineno-0-853"></a><span class="sd">                problems.</span>
<a id="__codelineno-0-854" name="__codelineno-0-854"></a><span class="sd">                For variable-length problems (which might or might not</span>
<a id="__codelineno-0-855" name="__codelineno-0-855"></a><span class="sd">                be numeric), one is expected to leave `solution_length`</span>
<a id="__codelineno-0-856" name="__codelineno-0-856"></a><span class="sd">                as None, and declare `dtype` as `object`.</span>
<a id="__codelineno-0-857" name="__codelineno-0-857"></a><span class="sd">            dtype: dtype (data type) of the data stored by a solution.</span>
<a id="__codelineno-0-858" name="__codelineno-0-858"></a><span class="sd">                Can be given as a string (e.g. &quot;float32&quot;),</span>
<a id="__codelineno-0-859" name="__codelineno-0-859"></a><span class="sd">                or as a numpy dtype (e.g. `numpy.dtype(&quot;float32&quot;)`),</span>
<a id="__codelineno-0-860" name="__codelineno-0-860"></a><span class="sd">                or as a PyTorch dtype (e.g. `torch.float32`).</span>
<a id="__codelineno-0-861" name="__codelineno-0-861"></a><span class="sd">                Alternatively, if the problem is variable-length</span>
<a id="__codelineno-0-862" name="__codelineno-0-862"></a><span class="sd">                and/or non-numeric, one is expected to declare `dtype`</span>
<a id="__codelineno-0-863" name="__codelineno-0-863"></a><span class="sd">                as `object`.</span>
<a id="__codelineno-0-864" name="__codelineno-0-864"></a><span class="sd">            eval_dtype: dtype to be used for storing the evaluations</span>
<a id="__codelineno-0-865" name="__codelineno-0-865"></a><span class="sd">                (or fitnesses, or scores, or costs, or losses)</span>
<a id="__codelineno-0-866" name="__codelineno-0-866"></a><span class="sd">                of the solutions.</span>
<a id="__codelineno-0-867" name="__codelineno-0-867"></a><span class="sd">                Can be given as a string (e.g. &quot;float32&quot;),</span>
<a id="__codelineno-0-868" name="__codelineno-0-868"></a><span class="sd">                or as a numpy dtype (e.g. `numpy.dtype(&quot;float32&quot;)`),</span>
<a id="__codelineno-0-869" name="__codelineno-0-869"></a><span class="sd">                or as a PyTorch dtype (e.g. `torch.float32`).</span>
<a id="__codelineno-0-870" name="__codelineno-0-870"></a><span class="sd">                `eval_dtype` must always refer to a &quot;float&quot; data type,</span>
<a id="__codelineno-0-871" name="__codelineno-0-871"></a><span class="sd">                therefore, `object` is not accepted as a valid `eval_dtype`.</span>
<a id="__codelineno-0-872" name="__codelineno-0-872"></a><span class="sd">                If `eval_dtype` is not specified (i.e. left as None),</span>
<a id="__codelineno-0-873" name="__codelineno-0-873"></a><span class="sd">                then the following actions are taken to determine the</span>
<a id="__codelineno-0-874" name="__codelineno-0-874"></a><span class="sd">                `eval_dtype`:</span>
<a id="__codelineno-0-875" name="__codelineno-0-875"></a><span class="sd">                if `dtype` is &quot;float16&quot;, `eval_dtype` becomes &quot;float16&quot;;</span>
<a id="__codelineno-0-876" name="__codelineno-0-876"></a><span class="sd">                if `dtype` is &quot;bfloat16&quot;, `eval_dtype` becomes &quot;bfloat16&quot;;</span>
<a id="__codelineno-0-877" name="__codelineno-0-877"></a><span class="sd">                if `dtype` is &quot;float32&quot;, `eval_dtype` becomes &quot;float32&quot;;</span>
<a id="__codelineno-0-878" name="__codelineno-0-878"></a><span class="sd">                if `dtype` is &quot;float64&quot;, `eval_dtype` becomes &quot;float64&quot;;</span>
<a id="__codelineno-0-879" name="__codelineno-0-879"></a><span class="sd">                and for any other `dtype`, `eval_dtype` becomes &quot;float32&quot;.</span>
<a id="__codelineno-0-880" name="__codelineno-0-880"></a><span class="sd">            device: Default device in which a new population will be</span>
<a id="__codelineno-0-881" name="__codelineno-0-881"></a><span class="sd">                generated. For non-numeric problems, this must be &quot;cpu&quot;.</span>
<a id="__codelineno-0-882" name="__codelineno-0-882"></a><span class="sd">                For numeric problems, this can be any device supported</span>
<a id="__codelineno-0-883" name="__codelineno-0-883"></a><span class="sd">                by PyTorch (e.g. &quot;cuda&quot;).</span>
<a id="__codelineno-0-884" name="__codelineno-0-884"></a><span class="sd">                Note that, if the number of actors of the problem is configured</span>
<a id="__codelineno-0-885" name="__codelineno-0-885"></a><span class="sd">                to be more than 1, `device` has to be &quot;cpu&quot; (or, equivalently,</span>
<a id="__codelineno-0-886" name="__codelineno-0-886"></a><span class="sd">                left as None).</span>
<a id="__codelineno-0-887" name="__codelineno-0-887"></a><span class="sd">            eval_data_length: In addition to evaluation results</span>
<a id="__codelineno-0-888" name="__codelineno-0-888"></a><span class="sd">                (which are (un)fitnesses, or scores, or costs, or losses),</span>
<a id="__codelineno-0-889" name="__codelineno-0-889"></a><span class="sd">                each solution can store extra evaluation data.</span>
<a id="__codelineno-0-890" name="__codelineno-0-890"></a><span class="sd">                If storage of such extra evaluation data is required,</span>
<a id="__codelineno-0-891" name="__codelineno-0-891"></a><span class="sd">                one can set this argument to an integer bigger than 0.</span>
<a id="__codelineno-0-892" name="__codelineno-0-892"></a><span class="sd">            seed: Random seed to be used by the random number generator</span>
<a id="__codelineno-0-893" name="__codelineno-0-893"></a><span class="sd">                attached to the problem object.</span>
<a id="__codelineno-0-894" name="__codelineno-0-894"></a><span class="sd">                If left as None, no random number generator will be</span>
<a id="__codelineno-0-895" name="__codelineno-0-895"></a><span class="sd">                attached, and the global random number generator of</span>
<a id="__codelineno-0-896" name="__codelineno-0-896"></a><span class="sd">                PyTorch will be used instead.</span>
<a id="__codelineno-0-897" name="__codelineno-0-897"></a><span class="sd">            num_actors: Number of actors to create for parallelized</span>
<a id="__codelineno-0-898" name="__codelineno-0-898"></a><span class="sd">                evaluation of the solutions.</span>
<a id="__codelineno-0-899" name="__codelineno-0-899"></a><span class="sd">                Certain string values are also accepted.</span>
<a id="__codelineno-0-900" name="__codelineno-0-900"></a><span class="sd">                When given as &quot;max&quot; or as &quot;num_cpus&quot;, the number of actors</span>
<a id="__codelineno-0-901" name="__codelineno-0-901"></a><span class="sd">                will be equal to the number of all available CPUs in the ray</span>
<a id="__codelineno-0-902" name="__codelineno-0-902"></a><span class="sd">                cluster.</span>
<a id="__codelineno-0-903" name="__codelineno-0-903"></a><span class="sd">                When given as &quot;num_gpus&quot;, the number of actors will be</span>
<a id="__codelineno-0-904" name="__codelineno-0-904"></a><span class="sd">                equal to the number of all available GPUs in the ray</span>
<a id="__codelineno-0-905" name="__codelineno-0-905"></a><span class="sd">                cluster, and each actor will be assigned a GPU.</span>
<a id="__codelineno-0-906" name="__codelineno-0-906"></a><span class="sd">                There is also an option, &quot;num_devices&quot;, which means that</span>
<a id="__codelineno-0-907" name="__codelineno-0-907"></a><span class="sd">                both the numbers of CPUs and GPUs will be analyzed, and</span>
<a id="__codelineno-0-908" name="__codelineno-0-908"></a><span class="sd">                new actors and GPUs for them will be allocated,</span>
<a id="__codelineno-0-909" name="__codelineno-0-909"></a><span class="sd">                in a one-to-one mapping manner, if possible.</span>
<a id="__codelineno-0-910" name="__codelineno-0-910"></a><span class="sd">                In more details, with `num_actors=&quot;num_devices&quot;`, if</span>
<a id="__codelineno-0-911" name="__codelineno-0-911"></a><span class="sd">                `device` is given as a GPU device, then it will be inferred</span>
<a id="__codelineno-0-912" name="__codelineno-0-912"></a><span class="sd">                that the user wishes to put everything (including the</span>
<a id="__codelineno-0-913" name="__codelineno-0-913"></a><span class="sd">                population) on a single GPU, and therefore there won&#39;t be</span>
<a id="__codelineno-0-914" name="__codelineno-0-914"></a><span class="sd">                any allocation of actors nor GPUs.</span>
<a id="__codelineno-0-915" name="__codelineno-0-915"></a><span class="sd">                With `num_actors=&quot;num_devices&quot;` and with `device` set as</span>
<a id="__codelineno-0-916" name="__codelineno-0-916"></a><span class="sd">                &quot;cpu&quot; (or as left as None), if there are multiple CPUs</span>
<a id="__codelineno-0-917" name="__codelineno-0-917"></a><span class="sd">                and multiple GPUs, then `n` actors will be allocated</span>
<a id="__codelineno-0-918" name="__codelineno-0-918"></a><span class="sd">                where `n` is the minimum among the number of CPUs</span>
<a id="__codelineno-0-919" name="__codelineno-0-919"></a><span class="sd">                and the number of GPUs, so that there can be one-to-one</span>
<a id="__codelineno-0-920" name="__codelineno-0-920"></a><span class="sd">                mapping between CPUs and GPUs (i.e. such that each actor</span>
<a id="__codelineno-0-921" name="__codelineno-0-921"></a><span class="sd">                can be assigned an entire GPU).</span>
<a id="__codelineno-0-922" name="__codelineno-0-922"></a><span class="sd">                If `num_actors` is given as &quot;num_gpus&quot; or &quot;num_devices&quot;,</span>
<a id="__codelineno-0-923" name="__codelineno-0-923"></a><span class="sd">                the argument `num_gpus_per_actor` must not be used,</span>
<a id="__codelineno-0-924" name="__codelineno-0-924"></a><span class="sd">                and the `actor_config` dictionary must not contain the</span>
<a id="__codelineno-0-925" name="__codelineno-0-925"></a><span class="sd">                key &quot;num_gpus&quot;.</span>
<a id="__codelineno-0-926" name="__codelineno-0-926"></a><span class="sd">                If `num_actors` is given as something other than &quot;num_gpus&quot;</span>
<a id="__codelineno-0-927" name="__codelineno-0-927"></a><span class="sd">                or &quot;num_devices&quot;, and if you wish to assign GPUs to each</span>
<a id="__codelineno-0-928" name="__codelineno-0-928"></a><span class="sd">                actor, then please see the argument `num_gpus_per_actor`.</span>
<a id="__codelineno-0-929" name="__codelineno-0-929"></a><span class="sd">            actor_config: A dictionary, representing the keyword arguments</span>
<a id="__codelineno-0-930" name="__codelineno-0-930"></a><span class="sd">                to be passed to the options(...) used when creating the</span>
<a id="__codelineno-0-931" name="__codelineno-0-931"></a><span class="sd">                ray actor objects. To be used for explicitly allocating</span>
<a id="__codelineno-0-932" name="__codelineno-0-932"></a><span class="sd">                resources per each actor.</span>
<a id="__codelineno-0-933" name="__codelineno-0-933"></a><span class="sd">                For example, for declaring that each actor is to use a GPU,</span>
<a id="__codelineno-0-934" name="__codelineno-0-934"></a><span class="sd">                one can pass `actor_config=dict(num_gpus=1)`.</span>
<a id="__codelineno-0-935" name="__codelineno-0-935"></a><span class="sd">                Can also be given as None (which is the default),</span>
<a id="__codelineno-0-936" name="__codelineno-0-936"></a><span class="sd">                if no such options are to be passed.</span>
<a id="__codelineno-0-937" name="__codelineno-0-937"></a><span class="sd">            num_gpus_per_actor: Number of GPUs to be allocated by each</span>
<a id="__codelineno-0-938" name="__codelineno-0-938"></a><span class="sd">                remote actor.</span>
<a id="__codelineno-0-939" name="__codelineno-0-939"></a><span class="sd">                The default behavior is to NOT allocate any GPU at all</span>
<a id="__codelineno-0-940" name="__codelineno-0-940"></a><span class="sd">                (which is the default behavior of the ray library as well).</span>
<a id="__codelineno-0-941" name="__codelineno-0-941"></a><span class="sd">                When given as a number `n`, each actor will be given</span>
<a id="__codelineno-0-942" name="__codelineno-0-942"></a><span class="sd">                `n` GPUs (where `n` can be an integer, or can be a `float`</span>
<a id="__codelineno-0-943" name="__codelineno-0-943"></a><span class="sd">                for fractional allocation).</span>
<a id="__codelineno-0-944" name="__codelineno-0-944"></a><span class="sd">                When given as a string &quot;max&quot;, then the available GPUs</span>
<a id="__codelineno-0-945" name="__codelineno-0-945"></a><span class="sd">                across the entire ray cluster (or within the local computer</span>
<a id="__codelineno-0-946" name="__codelineno-0-946"></a><span class="sd">                in the simplest cases) will be equally distributed among</span>
<a id="__codelineno-0-947" name="__codelineno-0-947"></a><span class="sd">                the actors.</span>
<a id="__codelineno-0-948" name="__codelineno-0-948"></a><span class="sd">                When given as a string &quot;all&quot;, then each actor will have</span>
<a id="__codelineno-0-949" name="__codelineno-0-949"></a><span class="sd">                access to all the GPUs (this will be achieved by suppressing</span>
<a id="__codelineno-0-950" name="__codelineno-0-950"></a><span class="sd">                the environment variable `CUDA_VISIBLE_DEVICES` for each</span>
<a id="__codelineno-0-951" name="__codelineno-0-951"></a><span class="sd">                actor).</span>
<a id="__codelineno-0-952" name="__codelineno-0-952"></a><span class="sd">                When the problem is not distributed (i.e. when there are</span>
<a id="__codelineno-0-953" name="__codelineno-0-953"></a><span class="sd">                no actors), this argument is expected to be left as None.</span>
<a id="__codelineno-0-954" name="__codelineno-0-954"></a><span class="sd">            num_subbatches: If `num_subbatches` is None (assuming that</span>
<a id="__codelineno-0-955" name="__codelineno-0-955"></a><span class="sd">                `subbatch_size` is also None), then, when evaluating a</span>
<a id="__codelineno-0-956" name="__codelineno-0-956"></a><span class="sd">                population, the population will be split into n pieces, `n`</span>
<a id="__codelineno-0-957" name="__codelineno-0-957"></a><span class="sd">                being the number of actors, and each actor will evaluate</span>
<a id="__codelineno-0-958" name="__codelineno-0-958"></a><span class="sd">                its assigned piece. If `num_subbatches` is an integer `m`,</span>
<a id="__codelineno-0-959" name="__codelineno-0-959"></a><span class="sd">                then the population will be split into `m` pieces,</span>
<a id="__codelineno-0-960" name="__codelineno-0-960"></a><span class="sd">                and actors will continually accept the next unevaluated</span>
<a id="__codelineno-0-961" name="__codelineno-0-961"></a><span class="sd">                piece as they finish their current tasks.</span>
<a id="__codelineno-0-962" name="__codelineno-0-962"></a><span class="sd">                The arguments `num_subbatches` and `subbatch_size` cannot</span>
<a id="__codelineno-0-963" name="__codelineno-0-963"></a><span class="sd">                be given values other than None at the same time.</span>
<a id="__codelineno-0-964" name="__codelineno-0-964"></a><span class="sd">                While using a distributed algorithm, this argument determines</span>
<a id="__codelineno-0-965" name="__codelineno-0-965"></a><span class="sd">                how many sub-batches will be generated, and therefore,</span>
<a id="__codelineno-0-966" name="__codelineno-0-966"></a><span class="sd">                how many gradients will be computed by the remote actors.</span>
<a id="__codelineno-0-967" name="__codelineno-0-967"></a><span class="sd">            subbatch_size: If `subbatch_size` is None (assuming that</span>
<a id="__codelineno-0-968" name="__codelineno-0-968"></a><span class="sd">                `num_subbatches` is also None), then, when evaluating a</span>
<a id="__codelineno-0-969" name="__codelineno-0-969"></a><span class="sd">                population, the population will be split into `n` pieces, `n`</span>
<a id="__codelineno-0-970" name="__codelineno-0-970"></a><span class="sd">                being the number of actors, and each actor will evaluate its</span>
<a id="__codelineno-0-971" name="__codelineno-0-971"></a><span class="sd">                assigned piece. If `subbatch_size` is an integer `m`,</span>
<a id="__codelineno-0-972" name="__codelineno-0-972"></a><span class="sd">                then the population will be split into pieces of size `m`,</span>
<a id="__codelineno-0-973" name="__codelineno-0-973"></a><span class="sd">                and actors will continually accept the next unevaluated</span>
<a id="__codelineno-0-974" name="__codelineno-0-974"></a><span class="sd">                piece as they finish their current tasks.</span>
<a id="__codelineno-0-975" name="__codelineno-0-975"></a><span class="sd">                When there can be significant difference across the solutions</span>
<a id="__codelineno-0-976" name="__codelineno-0-976"></a><span class="sd">                in terms of computational requirements, specifying a</span>
<a id="__codelineno-0-977" name="__codelineno-0-977"></a><span class="sd">                `subbatch_size` can be beneficial, because, while one</span>
<a id="__codelineno-0-978" name="__codelineno-0-978"></a><span class="sd">                actor is busy with a subbatch containing computationally</span>
<a id="__codelineno-0-979" name="__codelineno-0-979"></a><span class="sd">                challenging solutions, other actors can accept more</span>
<a id="__codelineno-0-980" name="__codelineno-0-980"></a><span class="sd">                tasks and save time.</span>
<a id="__codelineno-0-981" name="__codelineno-0-981"></a><span class="sd">                The arguments `num_subbatches` and `subbatch_size` cannot</span>
<a id="__codelineno-0-982" name="__codelineno-0-982"></a><span class="sd">                be given values other than None at the same time.</span>
<a id="__codelineno-0-983" name="__codelineno-0-983"></a><span class="sd">                While using a distributed algorithm, this argument determines</span>
<a id="__codelineno-0-984" name="__codelineno-0-984"></a><span class="sd">                the size of a sub-batch (or sub-population) sampled by a</span>
<a id="__codelineno-0-985" name="__codelineno-0-985"></a><span class="sd">                remote actor for computing a gradient.</span>
<a id="__codelineno-0-986" name="__codelineno-0-986"></a><span class="sd">                In distributed mode, it is expected that the population size</span>
<a id="__codelineno-0-987" name="__codelineno-0-987"></a><span class="sd">                is divisible by `subbatch_size`.</span>
<a id="__codelineno-0-988" name="__codelineno-0-988"></a><span class="sd">            store_solution_stats: Whether or not the problem object should</span>
<a id="__codelineno-0-989" name="__codelineno-0-989"></a><span class="sd">                keep track of the best and worst solutions.</span>
<a id="__codelineno-0-990" name="__codelineno-0-990"></a><span class="sd">                Can also be left as None (which is the default behavior),</span>
<a id="__codelineno-0-991" name="__codelineno-0-991"></a><span class="sd">                in which case, it will store the best and worst solutions</span>
<a id="__codelineno-0-992" name="__codelineno-0-992"></a><span class="sd">                only when the first solution batch it encounters is on the</span>
<a id="__codelineno-0-993" name="__codelineno-0-993"></a><span class="sd">                cpu. This default behavior is to ensure that there is no</span>
<a id="__codelineno-0-994" name="__codelineno-0-994"></a><span class="sd">                transfer between the cpu and a foreign computation device</span>
<a id="__codelineno-0-995" name="__codelineno-0-995"></a><span class="sd">                (like the gpu) just for the sake of keeping the best and</span>
<a id="__codelineno-0-996" name="__codelineno-0-996"></a><span class="sd">                the worst solutions.</span>
<a id="__codelineno-0-997" name="__codelineno-0-997"></a><span class="sd">            vectorized: Set this to True if the provided fitness function</span>
<a id="__codelineno-0-998" name="__codelineno-0-998"></a><span class="sd">                is vectorized but is not decorated via `@vectorized`.</span>
<a id="__codelineno-0-999" name="__codelineno-0-999"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1000" name="__codelineno-0-1000"></a>
<a id="__codelineno-0-1001" name="__codelineno-0-1001"></a>        <span class="c1"># Set the dtype for the decision variables of the Problem</span>
<a id="__codelineno-0-1002" name="__codelineno-0-1002"></a>        <span class="k">if</span> <span class="n">dtype</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1003" name="__codelineno-0-1003"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_dtype</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">float32</span>
<a id="__codelineno-0-1004" name="__codelineno-0-1004"></a>        <span class="k">elif</span> <span class="n">is_dtype_object</span><span class="p">(</span><span class="n">dtype</span><span class="p">):</span>
<a id="__codelineno-0-1005" name="__codelineno-0-1005"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_dtype</span> <span class="o">=</span> <span class="nb">object</span>
<a id="__codelineno-0-1006" name="__codelineno-0-1006"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1007" name="__codelineno-0-1007"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_dtype</span> <span class="o">=</span> <span class="n">to_torch_dtype</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span>
<a id="__codelineno-0-1008" name="__codelineno-0-1008"></a>
<a id="__codelineno-0-1009" name="__codelineno-0-1009"></a>        <span class="n">_evolog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">message_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;The `dtype` for the problem&#39;s decision variables is set as </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_dtype</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
<a id="__codelineno-0-1010" name="__codelineno-0-1010"></a>
<a id="__codelineno-0-1011" name="__codelineno-0-1011"></a>        <span class="c1"># Set the dtype for the solution evaluations (i.e. fitnesses and evaluation data)</span>
<a id="__codelineno-0-1012" name="__codelineno-0-1012"></a>        <span class="k">if</span> <span class="n">eval_dtype</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1013" name="__codelineno-0-1013"></a>            <span class="c1"># If an `eval_dtype` is explicitly stated, then accept it as the `_eval_dtype` of the Problem</span>
<a id="__codelineno-0-1014" name="__codelineno-0-1014"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_eval_dtype</span> <span class="o">=</span> <span class="n">to_torch_dtype</span><span class="p">(</span><span class="n">eval_dtype</span><span class="p">)</span>
<a id="__codelineno-0-1015" name="__codelineno-0-1015"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1016" name="__codelineno-0-1016"></a>            <span class="c1"># This is the case where an `eval_dtype` is not explicitly stated by the user.</span>
<a id="__codelineno-0-1017" name="__codelineno-0-1017"></a>            <span class="c1"># We need to choose a default.</span>
<a id="__codelineno-0-1018" name="__codelineno-0-1018"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dtype</span> <span class="ow">in</span> <span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">float16</span><span class="p">,</span> <span class="n">torch</span><span class="o">.</span><span class="n">bfloat16</span><span class="p">,</span> <span class="n">torch</span><span class="o">.</span><span class="n">float64</span><span class="p">):</span>
<a id="__codelineno-0-1019" name="__codelineno-0-1019"></a>                <span class="c1"># If the `dtype` of the problem is a non-32-bit float type (i.e. float16, bfloat16, float64)</span>
<a id="__codelineno-0-1020" name="__codelineno-0-1020"></a>                <span class="c1"># then we use that as our `_eval_dtype` as well.</span>
<a id="__codelineno-0-1021" name="__codelineno-0-1021"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_eval_dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dtype</span>
<a id="__codelineno-0-1022" name="__codelineno-0-1022"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1023" name="__codelineno-0-1023"></a>                <span class="c1"># For any other `dtype`, we use float32 as our `_eval_dtype`.</span>
<a id="__codelineno-0-1024" name="__codelineno-0-1024"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_eval_dtype</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">float32</span>
<a id="__codelineno-0-1025" name="__codelineno-0-1025"></a>
<a id="__codelineno-0-1026" name="__codelineno-0-1026"></a>            <span class="n">_evolog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
<a id="__codelineno-0-1027" name="__codelineno-0-1027"></a>                <span class="n">message_from</span><span class="p">(</span>
<a id="__codelineno-0-1028" name="__codelineno-0-1028"></a>                    <span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;`eval_dtype` (the dtype of the fitnesses and evaluation data) is set as </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_eval_dtype</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1029" name="__codelineno-0-1029"></a>                <span class="p">)</span>
<a id="__codelineno-0-1030" name="__codelineno-0-1030"></a>            <span class="p">)</span>
<a id="__codelineno-0-1031" name="__codelineno-0-1031"></a>
<a id="__codelineno-0-1032" name="__codelineno-0-1032"></a>        <span class="c1"># Set the main device of the Problem object</span>
<a id="__codelineno-0-1033" name="__codelineno-0-1033"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_device</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cpu&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">device</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-1034" name="__codelineno-0-1034"></a>        <span class="n">_evolog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">message_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;The `device` of the problem is set as </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_device</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
<a id="__codelineno-0-1035" name="__codelineno-0-1035"></a>
<a id="__codelineno-0-1036" name="__codelineno-0-1036"></a>        <span class="c1"># Declare the internal variable that might store the random number generator</span>
<a id="__codelineno-0-1037" name="__codelineno-0-1037"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_generator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Generator</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1038" name="__codelineno-0-1038"></a>
<a id="__codelineno-0-1039" name="__codelineno-0-1039"></a>        <span class="c1"># Set the seed of the Problem object, if a seed is provided</span>
<a id="__codelineno-0-1040" name="__codelineno-0-1040"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">manual_seed</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>
<a id="__codelineno-0-1041" name="__codelineno-0-1041"></a>
<a id="__codelineno-0-1042" name="__codelineno-0-1042"></a>        <span class="c1"># Declare the internal variables that will store the bounds and the solution length</span>
<a id="__codelineno-0-1043" name="__codelineno-0-1043"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initial_lower_bounds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1044" name="__codelineno-0-1044"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_initial_upper_bounds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1045" name="__codelineno-0-1045"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_lower_bounds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1046" name="__codelineno-0-1046"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_upper_bounds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1047" name="__codelineno-0-1047"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_solution_length</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1048" name="__codelineno-0-1048"></a>
<a id="__codelineno-0-1049" name="__codelineno-0-1049"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dtype</span> <span class="ow">is</span> <span class="nb">object</span><span class="p">:</span>
<a id="__codelineno-0-1050" name="__codelineno-0-1050"></a>            <span class="c1"># If dtype is given as `object`, then there are some runtime sanity checks to perform</span>
<a id="__codelineno-0-1051" name="__codelineno-0-1051"></a>            <span class="k">if</span> <span class="n">bounds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">initial_bounds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1052" name="__codelineno-0-1052"></a>                <span class="c1"># With dtype as object, if bounds are given then we raise an error.</span>
<a id="__codelineno-0-1053" name="__codelineno-0-1053"></a>                <span class="c1"># This is because the `object` dtype implies that the decision values are not necessarily numeric,</span>
<a id="__codelineno-0-1054" name="__codelineno-0-1054"></a>                <span class="c1"># and therefore, we cannot have the guarantee of satisfying numeric bounds.</span>
<a id="__codelineno-0-1055" name="__codelineno-0-1055"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1056" name="__codelineno-0-1056"></a>                    <span class="sa">f</span><span class="s2">&quot;With dtype as </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span><span class="si">}</span><span class="s2">, expected to receive `initial_bounds` and/or `bounds` as None.&quot;</span>
<a id="__codelineno-0-1057" name="__codelineno-0-1057"></a>                    <span class="sa">f</span><span class="s2">&quot; However, one or both of them is/are set as value(s) other than None.&quot;</span>
<a id="__codelineno-0-1058" name="__codelineno-0-1058"></a>                <span class="p">)</span>
<a id="__codelineno-0-1059" name="__codelineno-0-1059"></a>            <span class="k">if</span> <span class="n">solution_length</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1060" name="__codelineno-0-1060"></a>                <span class="c1"># With dtype as object, if `solution_length` is provided, then we raise an error.</span>
<a id="__codelineno-0-1061" name="__codelineno-0-1061"></a>                <span class="c1"># This is because the `object` dtype implies that the solutions can be expressed via various</span>
<a id="__codelineno-0-1062" name="__codelineno-0-1062"></a>                <span class="c1"># containers, each with its own length, and therefore, a fixed solution length cannot be guaranteed.</span>
<a id="__codelineno-0-1063" name="__codelineno-0-1063"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1064" name="__codelineno-0-1064"></a>                    <span class="sa">f</span><span class="s2">&quot;With dtype as </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span><span class="si">}</span><span class="s2">, expected to receive `solution_length` as None.&quot;</span>
<a id="__codelineno-0-1065" name="__codelineno-0-1065"></a>                    <span class="sa">f</span><span class="s2">&quot; However, received `solution_length` as </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">solution_length</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1066" name="__codelineno-0-1066"></a>                <span class="p">)</span>
<a id="__codelineno-0-1067" name="__codelineno-0-1067"></a>            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_device</span><span class="p">)</span> <span class="o">!=</span> <span class="s2">&quot;cpu&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1068" name="__codelineno-0-1068"></a>                <span class="c1"># With dtype as object, if `device` is something other than &quot;cpu&quot;, then we raise an error.</span>
<a id="__codelineno-0-1069" name="__codelineno-0-1069"></a>                <span class="c1"># This is because the `object` dtype implies that the decision values are stored by an ObjectArray,</span>
<a id="__codelineno-0-1070" name="__codelineno-0-1070"></a>                <span class="c1"># whose device is always &quot;cpu&quot;.</span>
<a id="__codelineno-0-1071" name="__codelineno-0-1071"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1072" name="__codelineno-0-1072"></a>                    <span class="sa">f</span><span class="s2">&quot;With dtype as </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span><span class="si">}</span><span class="s2">, expected to receive `device` as &#39;cpu&#39;.&quot;</span>
<a id="__codelineno-0-1073" name="__codelineno-0-1073"></a>                    <span class="sa">f</span><span class="s2">&quot; However, received `device` as </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">device</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1074" name="__codelineno-0-1074"></a>                <span class="p">)</span>
<a id="__codelineno-0-1075" name="__codelineno-0-1075"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1076" name="__codelineno-0-1076"></a>            <span class="c1"># If dtype is something other than `object`, then we need to make sure that we have a valid length for</span>
<a id="__codelineno-0-1077" name="__codelineno-0-1077"></a>            <span class="c1"># solutions, and also properly store the given numeric bounds.</span>
<a id="__codelineno-0-1078" name="__codelineno-0-1078"></a>
<a id="__codelineno-0-1079" name="__codelineno-0-1079"></a>            <span class="k">if</span> <span class="n">solution_length</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1080" name="__codelineno-0-1080"></a>                <span class="c1"># With a numeric dtype, if solution length is missing, then we raise an error.</span>
<a id="__codelineno-0-1081" name="__codelineno-0-1081"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1082" name="__codelineno-0-1082"></a>                    <span class="sa">f</span><span class="s2">&quot;Together with a numeric dtype (</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span><span class="si">}</span><span class="s2">),&quot;</span>
<a id="__codelineno-0-1083" name="__codelineno-0-1083"></a>                    <span class="sa">f</span><span class="s2">&quot; expected to receive `solution_length` as an integer.&quot;</span>
<a id="__codelineno-0-1084" name="__codelineno-0-1084"></a>                    <span class="sa">f</span><span class="s2">&quot; However, `solution_length` is None.&quot;</span>
<a id="__codelineno-0-1085" name="__codelineno-0-1085"></a>                <span class="p">)</span>
<a id="__codelineno-0-1086" name="__codelineno-0-1086"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1087" name="__codelineno-0-1087"></a>                <span class="c1"># With a numeric dtype, if a solution length is provided, we make sure that it is integer.</span>
<a id="__codelineno-0-1088" name="__codelineno-0-1088"></a>                <span class="n">solution_length</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">solution_length</span><span class="p">)</span>
<a id="__codelineno-0-1089" name="__codelineno-0-1089"></a>
<a id="__codelineno-0-1090" name="__codelineno-0-1090"></a>            <span class="c1"># Store the solution length</span>
<a id="__codelineno-0-1091" name="__codelineno-0-1091"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_solution_length</span> <span class="o">=</span> <span class="n">solution_length</span>
<a id="__codelineno-0-1092" name="__codelineno-0-1092"></a>
<a id="__codelineno-0-1093" name="__codelineno-0-1093"></a>            <span class="k">if</span> <span class="p">(</span><span class="n">bounds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">initial_bounds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-1094" name="__codelineno-0-1094"></a>                <span class="c1"># This is the case where we have a dtype other than `object`, and either `bounds` or `initial_bounds`</span>
<a id="__codelineno-0-1095" name="__codelineno-0-1095"></a>                <span class="c1"># was provided.</span>
<a id="__codelineno-0-1096" name="__codelineno-0-1096"></a>                <span class="n">initbnd_tuple_name</span> <span class="o">=</span> <span class="s2">&quot;initial_bounds&quot;</span>
<a id="__codelineno-0-1097" name="__codelineno-0-1097"></a>                <span class="n">bnd_tuple_name</span> <span class="o">=</span> <span class="s2">&quot;bounds&quot;</span>
<a id="__codelineno-0-1098" name="__codelineno-0-1098"></a>
<a id="__codelineno-0-1099" name="__codelineno-0-1099"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">bounds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">initial_bounds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-1100" name="__codelineno-0-1100"></a>                    <span class="c1"># With a numeric dtype, if strict bounds are given but initial bounds are not given, then we assume</span>
<a id="__codelineno-0-1101" name="__codelineno-0-1101"></a>                    <span class="c1"># that the strict bounds also serve as the initial bounds.</span>
<a id="__codelineno-0-1102" name="__codelineno-0-1102"></a>                    <span class="c1"># Therefore, we take clones of the strict bounds and use this clones as the initial bounds.</span>
<a id="__codelineno-0-1103" name="__codelineno-0-1103"></a>                    <span class="n">initial_bounds</span> <span class="o">=</span> <span class="n">clone</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>
<a id="__codelineno-0-1104" name="__codelineno-0-1104"></a>                    <span class="n">initbnd_tuple_name</span> <span class="o">=</span> <span class="s2">&quot;bounds&quot;</span>
<a id="__codelineno-0-1105" name="__codelineno-0-1105"></a>
<a id="__codelineno-0-1106" name="__codelineno-0-1106"></a>                <span class="c1"># Below is an internal helper function for some common operations for the (strict) bounds</span>
<a id="__codelineno-0-1107" name="__codelineno-0-1107"></a>                <span class="c1"># and for the initial bounds.</span>
<a id="__codelineno-0-1108" name="__codelineno-0-1108"></a>                <span class="k">def</span><span class="w"> </span><span class="nf">process_bounds</span><span class="p">(</span><span class="n">bounds_tuple</span><span class="p">:</span> <span class="n">BoundsPairLike</span><span class="p">,</span> <span class="n">tuple_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BoundsPair</span><span class="p">:</span>
<a id="__codelineno-0-1109" name="__codelineno-0-1109"></a>                    <span class="c1"># This function receives the bounds_tuple (a tuple containing lower and upper bounds),</span>
<a id="__codelineno-0-1110" name="__codelineno-0-1110"></a>                    <span class="c1"># and the string name of the bounds argument (&quot;bounds&quot; or &quot;initial_bounds&quot;).</span>
<a id="__codelineno-0-1111" name="__codelineno-0-1111"></a>                    <span class="c1"># What is returned is the bounds expressed as PyTorch tensors in the correct dtype and device.</span>
<a id="__codelineno-0-1112" name="__codelineno-0-1112"></a>
<a id="__codelineno-0-1113" name="__codelineno-0-1113"></a>                    <span class="k">nonlocal</span> <span class="n">solution_length</span>
<a id="__codelineno-0-1114" name="__codelineno-0-1114"></a>
<a id="__codelineno-0-1115" name="__codelineno-0-1115"></a>                    <span class="c1"># Extract the lower and upper bounds from the received bounds tuple.</span>
<a id="__codelineno-0-1116" name="__codelineno-0-1116"></a>                    <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span> <span class="o">=</span> <span class="n">bounds_tuple</span>
<a id="__codelineno-0-1117" name="__codelineno-0-1117"></a>
<a id="__codelineno-0-1118" name="__codelineno-0-1118"></a>                    <span class="c1"># Make sure that the lower and upper bounds are expressed as tensors of correct dtype and device.</span>
<a id="__codelineno-0-1119" name="__codelineno-0-1119"></a>                    <span class="n">lb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_tensor</span><span class="p">(</span><span class="n">lb</span><span class="p">)</span>
<a id="__codelineno-0-1120" name="__codelineno-0-1120"></a>                    <span class="n">ub</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_tensor</span><span class="p">(</span><span class="n">ub</span><span class="p">)</span>
<a id="__codelineno-0-1121" name="__codelineno-0-1121"></a>
<a id="__codelineno-0-1122" name="__codelineno-0-1122"></a>                    <span class="k">for</span> <span class="n">bound_array</span> <span class="ow">in</span> <span class="p">(</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">):</span>  <span class="c1"># For each boundary tensor (lb and ub)</span>
<a id="__codelineno-0-1123" name="__codelineno-0-1123"></a>                        <span class="k">if</span> <span class="n">bound_array</span><span class="o">.</span><span class="n">ndim</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
<a id="__codelineno-0-1124" name="__codelineno-0-1124"></a>                            <span class="c1"># If the boundary tensor is not as scalar and is not a 1-dimensional vector, then raise an</span>
<a id="__codelineno-0-1125" name="__codelineno-0-1125"></a>                            <span class="c1"># error.</span>
<a id="__codelineno-0-1126" name="__codelineno-0-1126"></a>                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1127" name="__codelineno-0-1127"></a>                                <span class="sa">f</span><span class="s2">&quot;Lower and upper bounds are expected as scalars or as 1-dimensional vectors.&quot;</span>
<a id="__codelineno-0-1128" name="__codelineno-0-1128"></a>                                <span class="sa">f</span><span class="s2">&quot; However, these given boundaries have incompatible shape:&quot;</span>
<a id="__codelineno-0-1129" name="__codelineno-0-1129"></a>                                <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">bound_array</span><span class="si">}</span><span class="s2"> (of shape </span><span class="si">{</span><span class="n">bound_array</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">).&quot;</span>
<a id="__codelineno-0-1130" name="__codelineno-0-1130"></a>                            <span class="p">)</span>
<a id="__codelineno-0-1131" name="__codelineno-0-1131"></a>                        <span class="k">if</span> <span class="n">bound_array</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-1132" name="__codelineno-0-1132"></a>                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bound_array</span><span class="p">)</span> <span class="o">!=</span> <span class="n">solution_length</span><span class="p">:</span>
<a id="__codelineno-0-1133" name="__codelineno-0-1133"></a>                                <span class="c1"># In the case where the boundary tensor is a 1-dimensional vector, if this vector&#39;s length</span>
<a id="__codelineno-0-1134" name="__codelineno-0-1134"></a>                                <span class="c1"># is not equal to the solution length, then we raise an error.</span>
<a id="__codelineno-0-1135" name="__codelineno-0-1135"></a>                                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1136" name="__codelineno-0-1136"></a>                                    <span class="sa">f</span><span class="s2">&quot;When boundaries are expressed as 1-dimensional vectors, their length are&quot;</span>
<a id="__codelineno-0-1137" name="__codelineno-0-1137"></a>                                    <span class="sa">f</span><span class="s2">&quot; expected as the solution length of the Problem object.&quot;</span>
<a id="__codelineno-0-1138" name="__codelineno-0-1138"></a>                                    <span class="sa">f</span><span class="s2">&quot; However, while the problem&#39;s solution length is </span><span class="si">{</span><span class="n">solution_length</span><span class="si">}</span><span class="s2">,&quot;</span>
<a id="__codelineno-0-1139" name="__codelineno-0-1139"></a>                                    <span class="sa">f</span><span class="s2">&quot; these given boundaries have incompatible length:&quot;</span>
<a id="__codelineno-0-1140" name="__codelineno-0-1140"></a>                                    <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">bound_array</span><span class="si">}</span><span class="s2"> (of length </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">bound_array</span><span class="p">)</span><span class="si">}</span><span class="s2">).&quot;</span>
<a id="__codelineno-0-1141" name="__codelineno-0-1141"></a>                                <span class="p">)</span>
<a id="__codelineno-0-1142" name="__codelineno-0-1142"></a>
<a id="__codelineno-0-1143" name="__codelineno-0-1143"></a>                    <span class="c1"># Return the processed forms of the lower and upper boundary tensors.</span>
<a id="__codelineno-0-1144" name="__codelineno-0-1144"></a>                    <span class="k">return</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span>
<a id="__codelineno-0-1145" name="__codelineno-0-1145"></a>
<a id="__codelineno-0-1146" name="__codelineno-0-1146"></a>                <span class="c1"># Process the initial bounds with the help of the internal function `process_bounds(...)`</span>
<a id="__codelineno-0-1147" name="__codelineno-0-1147"></a>                <span class="n">init_lb</span><span class="p">,</span> <span class="n">init_ub</span> <span class="o">=</span> <span class="n">process_bounds</span><span class="p">(</span><span class="n">initial_bounds</span><span class="p">,</span> <span class="n">initbnd_tuple_name</span><span class="p">)</span>
<a id="__codelineno-0-1148" name="__codelineno-0-1148"></a>
<a id="__codelineno-0-1149" name="__codelineno-0-1149"></a>                <span class="c1"># Store the processed initial bounds</span>
<a id="__codelineno-0-1150" name="__codelineno-0-1150"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_initial_lower_bounds</span> <span class="o">=</span> <span class="n">init_lb</span>
<a id="__codelineno-0-1151" name="__codelineno-0-1151"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_initial_upper_bounds</span> <span class="o">=</span> <span class="n">init_ub</span>
<a id="__codelineno-0-1152" name="__codelineno-0-1152"></a>
<a id="__codelineno-0-1153" name="__codelineno-0-1153"></a>                <span class="k">if</span> <span class="n">bounds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1154" name="__codelineno-0-1154"></a>                    <span class="c1"># If there are strict bounds, then process those bounds with the help of `process_bounds(...)`.</span>
<a id="__codelineno-0-1155" name="__codelineno-0-1155"></a>                    <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span> <span class="o">=</span> <span class="n">process_bounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="n">bnd_tuple_name</span><span class="p">)</span>
<a id="__codelineno-0-1156" name="__codelineno-0-1156"></a>                    <span class="c1"># Store the processed bounds</span>
<a id="__codelineno-0-1157" name="__codelineno-0-1157"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_lower_bounds</span> <span class="o">=</span> <span class="n">lb</span>
<a id="__codelineno-0-1158" name="__codelineno-0-1158"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_upper_bounds</span> <span class="o">=</span> <span class="n">ub</span>
<a id="__codelineno-0-1159" name="__codelineno-0-1159"></a>
<a id="__codelineno-0-1160" name="__codelineno-0-1160"></a>        <span class="c1"># Annotate the variable that will store the objective sense(s) of the problem</span>
<a id="__codelineno-0-1161" name="__codelineno-0-1161"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_objective_sense</span><span class="p">:</span> <span class="n">ObjectiveSense</span>
<a id="__codelineno-0-1162" name="__codelineno-0-1162"></a>
<a id="__codelineno-0-1163" name="__codelineno-0-1163"></a>        <span class="c1"># Below is an internal function which makes sure that a provided objective sense has a valid value</span>
<a id="__codelineno-0-1164" name="__codelineno-0-1164"></a>        <span class="c1"># (where valid values are &quot;min&quot; or &quot;max&quot;)</span>
<a id="__codelineno-0-1165" name="__codelineno-0-1165"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">validate_sense</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-1166" name="__codelineno-0-1166"></a>            <span class="k">if</span> <span class="n">s</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">):</span>
<a id="__codelineno-0-1167" name="__codelineno-0-1167"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1168" name="__codelineno-0-1168"></a>                    <span class="sa">f</span><span class="s2">&quot;Invalid objective sense: </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1169" name="__codelineno-0-1169"></a>                    <span class="s2">&quot; Instead, please provide the objective sense as &#39;min&#39; or &#39;max&#39;.&quot;</span>
<a id="__codelineno-0-1170" name="__codelineno-0-1170"></a>                <span class="p">)</span>
<a id="__codelineno-0-1171" name="__codelineno-0-1171"></a>
<a id="__codelineno-0-1172" name="__codelineno-0-1172"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_sequence</span><span class="p">(</span><span class="n">objective_sense</span><span class="p">):</span>
<a id="__codelineno-0-1173" name="__codelineno-0-1173"></a>            <span class="c1"># If the provided objective sense is not a sequence, then convert it to a single-element list</span>
<a id="__codelineno-0-1174" name="__codelineno-0-1174"></a>            <span class="n">senses</span> <span class="o">=</span> <span class="p">[</span><span class="n">objective_sense</span><span class="p">]</span>
<a id="__codelineno-0-1175" name="__codelineno-0-1175"></a>            <span class="n">num_senses</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-1176" name="__codelineno-0-1176"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1177" name="__codelineno-0-1177"></a>            <span class="c1"># If the provided objective sense is a sequence, then take a list copy of it</span>
<a id="__codelineno-0-1178" name="__codelineno-0-1178"></a>            <span class="n">senses</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">objective_sense</span><span class="p">)</span>
<a id="__codelineno-0-1179" name="__codelineno-0-1179"></a>            <span class="n">num_senses</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">objective_sense</span><span class="p">)</span>
<a id="__codelineno-0-1180" name="__codelineno-0-1180"></a>
<a id="__codelineno-0-1181" name="__codelineno-0-1181"></a>            <span class="c1"># Ensure that each provided objective sense is valid</span>
<a id="__codelineno-0-1182" name="__codelineno-0-1182"></a>            <span class="k">for</span> <span class="n">sense</span> <span class="ow">in</span> <span class="n">senses</span><span class="p">:</span>
<a id="__codelineno-0-1183" name="__codelineno-0-1183"></a>                <span class="n">validate_sense</span><span class="p">(</span><span class="n">sense</span><span class="p">)</span>
<a id="__codelineno-0-1184" name="__codelineno-0-1184"></a>
<a id="__codelineno-0-1185" name="__codelineno-0-1185"></a>            <span class="k">if</span> <span class="n">num_senses</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-1186" name="__codelineno-0-1186"></a>                <span class="c1"># If the given sequence of objective senses is empty, then we raise an error.</span>
<a id="__codelineno-0-1187" name="__codelineno-0-1187"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1188" name="__codelineno-0-1188"></a>                    <span class="s2">&quot;Encountered an empty sequence via `objective_sense`.&quot;</span>
<a id="__codelineno-0-1189" name="__codelineno-0-1189"></a>                    <span class="s2">&quot; For a single-objective problem, please set `objective_sense` as &#39;min&#39; or &#39;max&#39;.&quot;</span>
<a id="__codelineno-0-1190" name="__codelineno-0-1190"></a>                    <span class="s2">&quot; For a multi-objective problem, please set `objective_sense` as a sequence,&quot;</span>
<a id="__codelineno-0-1191" name="__codelineno-0-1191"></a>                    <span class="s2">&quot; each element being &#39;min&#39; or &#39;max&#39;.&quot;</span>
<a id="__codelineno-0-1192" name="__codelineno-0-1192"></a>                <span class="p">)</span>
<a id="__codelineno-0-1193" name="__codelineno-0-1193"></a>
<a id="__codelineno-0-1194" name="__codelineno-0-1194"></a>        <span class="c1"># Store the objective senses</span>
<a id="__codelineno-0-1195" name="__codelineno-0-1195"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_senses</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">senses</span>
<a id="__codelineno-0-1196" name="__codelineno-0-1196"></a>
<a id="__codelineno-0-1197" name="__codelineno-0-1197"></a>        <span class="c1"># Store the provided objective function (which can be None)</span>
<a id="__codelineno-0-1198" name="__codelineno-0-1198"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_objective_func</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="n">objective_func</span>
<a id="__codelineno-0-1199" name="__codelineno-0-1199"></a>
<a id="__codelineno-0-1200" name="__codelineno-0-1200"></a>        <span class="c1"># Declare the instance variable that will store whether or not the external fitness function is</span>
<a id="__codelineno-0-1201" name="__codelineno-0-1201"></a>        <span class="c1"># vectorized, if such an external fitness function is given.</span>
<a id="__codelineno-0-1202" name="__codelineno-0-1202"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_vectorized</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span>
<a id="__codelineno-0-1203" name="__codelineno-0-1203"></a>
<a id="__codelineno-0-1204" name="__codelineno-0-1204"></a>        <span class="c1"># Store the information which indicates whether or not the given objective function is vectorized</span>
<a id="__codelineno-0-1205" name="__codelineno-0-1205"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_func</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1206" name="__codelineno-0-1206"></a>            <span class="c1"># This is the case where an external fitness function is not given.</span>
<a id="__codelineno-0-1207" name="__codelineno-0-1207"></a>            <span class="c1"># In this case, we expect the keyword argument `vectorized` to be left as None.</span>
<a id="__codelineno-0-1208" name="__codelineno-0-1208"></a>
<a id="__codelineno-0-1209" name="__codelineno-0-1209"></a>            <span class="k">if</span> <span class="n">vectorized</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1210" name="__codelineno-0-1210"></a>                <span class="c1"># If the keyword argument `vectorized` is something other than None, then we raise an error</span>
<a id="__codelineno-0-1211" name="__codelineno-0-1211"></a>                <span class="c1"># to let the user know.</span>
<a id="__codelineno-0-1212" name="__codelineno-0-1212"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1213" name="__codelineno-0-1213"></a>                    <span class="sa">f</span><span class="s2">&quot;This problem object received no external fitness function.&quot;</span>
<a id="__codelineno-0-1214" name="__codelineno-0-1214"></a>                    <span class="sa">f</span><span class="s2">&quot; When not using an external fitness function, the keyword argument `vectorized`&quot;</span>
<a id="__codelineno-0-1215" name="__codelineno-0-1215"></a>                    <span class="sa">f</span><span class="s2">&quot; is expected to be left as None.&quot;</span>
<a id="__codelineno-0-1216" name="__codelineno-0-1216"></a>                    <span class="sa">f</span><span class="s2">&quot; However, the value of the keyword argument `vectorized` is </span><span class="si">{</span><span class="n">vectorized</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1217" name="__codelineno-0-1217"></a>                <span class="p">)</span>
<a id="__codelineno-0-1218" name="__codelineno-0-1218"></a>
<a id="__codelineno-0-1219" name="__codelineno-0-1219"></a>            <span class="c1"># At this point, we know that we do not have an external fitness function.</span>
<a id="__codelineno-0-1220" name="__codelineno-0-1220"></a>            <span class="c1"># The variable which is supposed to tell us whether or not the external fitness function is vectorized</span>
<a id="__codelineno-0-1221" name="__codelineno-0-1221"></a>            <span class="c1"># is therefore irrelevant. We just set it as None.</span>
<a id="__codelineno-0-1222" name="__codelineno-0-1222"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_vectorized</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1223" name="__codelineno-0-1223"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1224" name="__codelineno-0-1224"></a>            <span class="c1"># This is the case where an external fitness function is given.</span>
<a id="__codelineno-0-1225" name="__codelineno-0-1225"></a>
<a id="__codelineno-0-1226" name="__codelineno-0-1226"></a>            <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-1227" name="__codelineno-0-1227"></a>                <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_objective_func</span><span class="p">,</span> <span class="s2">&quot;__evotorch_vectorized__&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1228" name="__codelineno-0-1228"></a>                <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_func</span><span class="o">.</span><span class="n">__evotorch_vectorized__</span>
<a id="__codelineno-0-1229" name="__codelineno-0-1229"></a>            <span class="p">):</span>
<a id="__codelineno-0-1230" name="__codelineno-0-1230"></a>                <span class="c1"># If the external fitness function has an attribute `__evotorch_vectorized__`, and the value of this</span>
<a id="__codelineno-0-1231" name="__codelineno-0-1231"></a>                <span class="c1"># attribute evaluates to True, then this is an indication that the fitness function was decorated</span>
<a id="__codelineno-0-1232" name="__codelineno-0-1232"></a>                <span class="c1"># with `@vectorized`.</span>
<a id="__codelineno-0-1233" name="__codelineno-0-1233"></a>
<a id="__codelineno-0-1234" name="__codelineno-0-1234"></a>                <span class="k">if</span> <span class="n">vectorized</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1235" name="__codelineno-0-1235"></a>                    <span class="c1"># At this point, we know (or at least have the assumption) that the fitness function was decorated</span>
<a id="__codelineno-0-1236" name="__codelineno-0-1236"></a>                    <span class="c1"># with `@vectorized`. Any boolean value given via the keyword argument `vectorized` would therefore</span>
<a id="__codelineno-0-1237" name="__codelineno-0-1237"></a>                    <span class="c1"># be either redundant or conflicting.</span>
<a id="__codelineno-0-1238" name="__codelineno-0-1238"></a>                    <span class="c1"># Therefore, in this case, if the keyword argument `vectorized` is anything other than None, we</span>
<a id="__codelineno-0-1239" name="__codelineno-0-1239"></a>                    <span class="c1"># raise an error to inform the user.</span>
<a id="__codelineno-0-1240" name="__codelineno-0-1240"></a>
<a id="__codelineno-0-1241" name="__codelineno-0-1241"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1242" name="__codelineno-0-1242"></a>                        <span class="sa">f</span><span class="s2">&quot;Received a fitness function that was decorated via @vectorized.&quot;</span>
<a id="__codelineno-0-1243" name="__codelineno-0-1243"></a>                        <span class="sa">f</span><span class="s2">&quot; When using such a fitness function, the keyword argument `vectorized`&quot;</span>
<a id="__codelineno-0-1244" name="__codelineno-0-1244"></a>                        <span class="sa">f</span><span class="s2">&quot; is expected to be left as None.&quot;</span>
<a id="__codelineno-0-1245" name="__codelineno-0-1245"></a>                        <span class="sa">f</span><span class="s2">&quot; However, the value of the keyword argument `vectorized` is </span><span class="si">{</span><span class="n">vectorized</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1246" name="__codelineno-0-1246"></a>                    <span class="p">)</span>
<a id="__codelineno-0-1247" name="__codelineno-0-1247"></a>
<a id="__codelineno-0-1248" name="__codelineno-0-1248"></a>                <span class="c1"># Since we know that our fitness function declares itself as vectorized, we set the instance variable</span>
<a id="__codelineno-0-1249" name="__codelineno-0-1249"></a>                <span class="c1"># _vectorized as True.</span>
<a id="__codelineno-0-1250" name="__codelineno-0-1250"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_vectorized</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-1251" name="__codelineno-0-1251"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1252" name="__codelineno-0-1252"></a>                <span class="c1"># This is the case in which the fitness function does not appear to be decorated via `@vectorized`.</span>
<a id="__codelineno-0-1253" name="__codelineno-0-1253"></a>                <span class="c1"># In this case, if the keyword argument `vectorized` has a value that is equivalent to True,</span>
<a id="__codelineno-0-1254" name="__codelineno-0-1254"></a>                <span class="c1"># then the value of `_vectorized` becomes True. On the other hand, if the keyword argument `vectorized`</span>
<a id="__codelineno-0-1255" name="__codelineno-0-1255"></a>                <span class="c1"># was left as None or if it has a value that is equivalent to False, `_vectorized` becomes False.</span>
<a id="__codelineno-0-1256" name="__codelineno-0-1256"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_vectorized</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">vectorized</span><span class="p">)</span>
<a id="__codelineno-0-1257" name="__codelineno-0-1257"></a>
<a id="__codelineno-0-1258" name="__codelineno-0-1258"></a>        <span class="c1"># If the evaluation data length is explicitly stated, then convert it to an integer and store it.</span>
<a id="__codelineno-0-1259" name="__codelineno-0-1259"></a>        <span class="c1"># Otherwise, store the evaluation data length as 0.</span>
<a id="__codelineno-0-1260" name="__codelineno-0-1260"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_eval_data_length</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">eval_data_length</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">eval_data_length</span><span class="p">)</span>
<a id="__codelineno-0-1261" name="__codelineno-0-1261"></a>
<a id="__codelineno-0-1262" name="__codelineno-0-1262"></a>        <span class="c1"># Initialize the actor index.</span>
<a id="__codelineno-0-1263" name="__codelineno-0-1263"></a>        <span class="c1"># If the problem is configured to be parallelized and the parallelization is triggered, then each remote</span>
<a id="__codelineno-0-1264" name="__codelineno-0-1264"></a>        <span class="c1"># copy will have a different integer value for `_actor_index`.</span>
<a id="__codelineno-0-1265" name="__codelineno-0-1265"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_actor_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1266" name="__codelineno-0-1266"></a>
<a id="__codelineno-0-1267" name="__codelineno-0-1267"></a>        <span class="c1"># Initialize the variable that might store the list of actors as None.</span>
<a id="__codelineno-0-1268" name="__codelineno-0-1268"></a>        <span class="c1"># If the problem is configured to be parallelized and the parallelization is triggered, then this variable</span>
<a id="__codelineno-0-1269" name="__codelineno-0-1269"></a>        <span class="c1"># will store references to the remote actors (each remote actor storing its own copy of this Problem</span>
<a id="__codelineno-0-1270" name="__codelineno-0-1270"></a>        <span class="c1"># instance).</span>
<a id="__codelineno-0-1271" name="__codelineno-0-1271"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_actors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1272" name="__codelineno-0-1272"></a>
<a id="__codelineno-0-1273" name="__codelineno-0-1273"></a>        <span class="c1"># Initialize the variable that might store the ray ActorPool.</span>
<a id="__codelineno-0-1274" name="__codelineno-0-1274"></a>        <span class="c1"># If the problem is configured to be parallelized and the parallelization is triggered, then this variable</span>
<a id="__codelineno-0-1275" name="__codelineno-0-1275"></a>        <span class="c1"># will store the ray ActorPool that is generated out of the remote actors.</span>
<a id="__codelineno-0-1276" name="__codelineno-0-1276"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_actor_pool</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ActorPool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1277" name="__codelineno-0-1277"></a>
<a id="__codelineno-0-1278" name="__codelineno-0-1278"></a>        <span class="c1"># Store the ray actor configuration dictionary provided by the user (if any).</span>
<a id="__codelineno-0-1279" name="__codelineno-0-1279"></a>        <span class="c1"># When (or if) the parallelization is triggered, each actor will be created with this given configuration.</span>
<a id="__codelineno-0-1280" name="__codelineno-0-1280"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_actor_config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">actor_config</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">deepcopy</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">actor_config</span><span class="p">))</span>
<a id="__codelineno-0-1281" name="__codelineno-0-1281"></a>
<a id="__codelineno-0-1282" name="__codelineno-0-1282"></a>        <span class="c1"># If given, store the sub-batch size or number of sub-batches.</span>
<a id="__codelineno-0-1283" name="__codelineno-0-1283"></a>        <span class="c1"># When the problem is parallelized, a sub-batch size determines the maximum size for a SolutionBatch</span>
<a id="__codelineno-0-1284" name="__codelineno-0-1284"></a>        <span class="c1"># that will be sent to a remote actor for parallel solution evaluation.</span>
<a id="__codelineno-0-1285" name="__codelineno-0-1285"></a>        <span class="c1"># Alternatively, num_subbatches determines into how many pieces will a SolutionBatch be split</span>
<a id="__codelineno-0-1286" name="__codelineno-0-1286"></a>        <span class="c1"># for parallelization.</span>
<a id="__codelineno-0-1287" name="__codelineno-0-1287"></a>        <span class="c1"># If both are None, then the main SolutionBatch will be split among the actors.</span>
<a id="__codelineno-0-1288" name="__codelineno-0-1288"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">num_subbatches</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">subbatch_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-1289" name="__codelineno-0-1289"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1290" name="__codelineno-0-1290"></a>                <span class="sa">f</span><span class="s2">&quot;Encountered both `num_subbatches` and `subbatch_size` as values other than None.&quot;</span>
<a id="__codelineno-0-1291" name="__codelineno-0-1291"></a>                <span class="sa">f</span><span class="s2">&quot; num_subbatches=</span><span class="si">{</span><span class="n">num_subbatches</span><span class="si">}</span><span class="s2">, subbatch_size=</span><span class="si">{</span><span class="n">subbatch_size</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1292" name="__codelineno-0-1292"></a>                <span class="sa">f</span><span class="s2">&quot; Having both of them as values other than None cannot be accepted.&quot;</span>
<a id="__codelineno-0-1293" name="__codelineno-0-1293"></a>            <span class="p">)</span>
<a id="__codelineno-0-1294" name="__codelineno-0-1294"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_num_subbatches</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">num_subbatches</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_subbatches</span><span class="p">)</span>
<a id="__codelineno-0-1295" name="__codelineno-0-1295"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_subbatch_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">subbatch_size</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">subbatch_size</span><span class="p">)</span>
<a id="__codelineno-0-1296" name="__codelineno-0-1296"></a>
<a id="__codelineno-0-1297" name="__codelineno-0-1297"></a>        <span class="c1"># Initialize the additional states to be loaded by the remote actor as None.</span>
<a id="__codelineno-0-1298" name="__codelineno-0-1298"></a>        <span class="c1"># If there are such additional states for remote actors, the inheriting class can fill this as a list</span>
<a id="__codelineno-0-1299" name="__codelineno-0-1299"></a>        <span class="c1"># of dictionaries.</span>
<a id="__codelineno-0-1300" name="__codelineno-0-1300"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_remote_states</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">dict</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1301" name="__codelineno-0-1301"></a>
<a id="__codelineno-0-1302" name="__codelineno-0-1302"></a>        <span class="c1"># Initialize a temporary internal variable which stores the resources available in the ray cluster.</span>
<a id="__codelineno-0-1303" name="__codelineno-0-1303"></a>        <span class="c1"># Most probably, we are interested in the resources &quot;CPU&quot; and &quot;GPU&quot;.</span>
<a id="__codelineno-0-1304" name="__codelineno-0-1304"></a>        <span class="n">ray_resources</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1305" name="__codelineno-0-1305"></a>
<a id="__codelineno-0-1306" name="__codelineno-0-1306"></a>        <span class="c1"># The following is an internal helper function which returns the amount of availability for a given</span>
<a id="__codelineno-0-1307" name="__codelineno-0-1307"></a>        <span class="c1"># resource in the ray cluster.</span>
<a id="__codelineno-0-1308" name="__codelineno-0-1308"></a>        <span class="c1"># If the requested resource is not available at all, None will be returned.</span>
<a id="__codelineno-0-1309" name="__codelineno-0-1309"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">get_ray_resource</span><span class="p">(</span><span class="n">resource_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<a id="__codelineno-0-1310" name="__codelineno-0-1310"></a>            <span class="c1"># Ensure that the ray cluster is initialized</span>
<a id="__codelineno-0-1311" name="__codelineno-0-1311"></a>            <span class="n">ensure_ray</span><span class="p">()</span>
<a id="__codelineno-0-1312" name="__codelineno-0-1312"></a>            <span class="k">nonlocal</span> <span class="n">ray_resources</span>
<a id="__codelineno-0-1313" name="__codelineno-0-1313"></a>            <span class="k">if</span> <span class="n">ray_resources</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1314" name="__codelineno-0-1314"></a>                <span class="c1"># If the ray resource information was not fetched, then fetch them and store them.</span>
<a id="__codelineno-0-1315" name="__codelineno-0-1315"></a>                <span class="n">ray_resources</span> <span class="o">=</span> <span class="n">ray</span><span class="o">.</span><span class="n">available_resources</span><span class="p">()</span>
<a id="__codelineno-0-1316" name="__codelineno-0-1316"></a>            <span class="c1"># Return the information regarding the requested resource from the fetched resource information.</span>
<a id="__codelineno-0-1317" name="__codelineno-0-1317"></a>            <span class="c1"># If it turns out that the requested resource is not available at all, the result will be None.</span>
<a id="__codelineno-0-1318" name="__codelineno-0-1318"></a>            <span class="k">return</span> <span class="n">ray_resources</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">resource_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-1319" name="__codelineno-0-1319"></a>
<a id="__codelineno-0-1320" name="__codelineno-0-1320"></a>        <span class="c1"># Annotate the variable that will store the number of actors (to be created when the parallelization</span>
<a id="__codelineno-0-1321" name="__codelineno-0-1321"></a>        <span class="c1"># is triggered).</span>
<a id="__codelineno-0-1322" name="__codelineno-0-1322"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span><span class="p">:</span> <span class="nb">int</span>
<a id="__codelineno-0-1323" name="__codelineno-0-1323"></a>
<a id="__codelineno-0-1324" name="__codelineno-0-1324"></a>        <span class="k">if</span> <span class="n">num_actors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1325" name="__codelineno-0-1325"></a>            <span class="c1"># If the argument `num_actors` is left as None, then we set `_num_actors` as 0, which means that</span>
<a id="__codelineno-0-1326" name="__codelineno-0-1326"></a>            <span class="c1"># there will be no parallelization.</span>
<a id="__codelineno-0-1327" name="__codelineno-0-1327"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-1328" name="__codelineno-0-1328"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">num_actors</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-1329" name="__codelineno-0-1329"></a>            <span class="c1"># This is the case where `num_actors` has a string value</span>
<a id="__codelineno-0-1330" name="__codelineno-0-1330"></a>            <span class="k">if</span> <span class="n">num_actors</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;max&quot;</span><span class="p">,</span> <span class="s2">&quot;num_cpus&quot;</span><span class="p">):</span>
<a id="__codelineno-0-1331" name="__codelineno-0-1331"></a>                <span class="c1"># If the `num_actors` argument was given as &quot;max&quot; or as &quot;num_cpus&quot;, then we first read how many CPUs</span>
<a id="__codelineno-0-1332" name="__codelineno-0-1332"></a>                <span class="c1"># are available in the ray cluster, then convert it to integer (via computing its ceil value), and</span>
<a id="__codelineno-0-1333" name="__codelineno-0-1333"></a>                <span class="c1"># finally set `_num_actors` as this integer.</span>
<a id="__codelineno-0-1334" name="__codelineno-0-1334"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">get_ray_resource</span><span class="p">(</span><span class="s2">&quot;CPU&quot;</span><span class="p">))</span>
<a id="__codelineno-0-1335" name="__codelineno-0-1335"></a>            <span class="k">elif</span> <span class="n">num_actors</span> <span class="o">==</span> <span class="s2">&quot;num_gpus&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1336" name="__codelineno-0-1336"></a>                <span class="c1"># If the `num_actors` argument was given as &quot;num_gpus&quot;, then we first read how many GPUs are</span>
<a id="__codelineno-0-1337" name="__codelineno-0-1337"></a>                <span class="c1"># available in the ray cluster.</span>
<a id="__codelineno-0-1338" name="__codelineno-0-1338"></a>                <span class="n">num_gpus</span> <span class="o">=</span> <span class="n">get_ray_resource</span><span class="p">(</span><span class="s2">&quot;GPU&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1339" name="__codelineno-0-1339"></a>                <span class="k">if</span> <span class="n">num_gpus</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1340" name="__codelineno-0-1340"></a>                    <span class="c1"># If there are no GPUs at all, then we raise an error</span>
<a id="__codelineno-0-1341" name="__codelineno-0-1341"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1342" name="__codelineno-0-1342"></a>                        <span class="s2">&quot;The argument `num_actors` was encountered as &#39;num_gpus&#39;.&quot;</span>
<a id="__codelineno-0-1343" name="__codelineno-0-1343"></a>                        <span class="s2">&quot; However, there does not seem to be any GPU available.&quot;</span>
<a id="__codelineno-0-1344" name="__codelineno-0-1344"></a>                    <span class="p">)</span>
<a id="__codelineno-0-1345" name="__codelineno-0-1345"></a>                <span class="k">if</span> <span class="n">num_gpus</span> <span class="o">&lt;</span> <span class="mf">1e-4</span><span class="p">:</span>
<a id="__codelineno-0-1346" name="__codelineno-0-1346"></a>                    <span class="c1"># If the number of available GPUs are 0 or close to 0, then we raise an error</span>
<a id="__codelineno-0-1347" name="__codelineno-0-1347"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1348" name="__codelineno-0-1348"></a>                        <span class="sa">f</span><span class="s2">&quot;The argument `num_actors` was encountered as &#39;num_gpus&#39;.&quot;</span>
<a id="__codelineno-0-1349" name="__codelineno-0-1349"></a>                        <span class="sa">f</span><span class="s2">&quot; However, the number of available GPUs are either 0 or close to 0 (= </span><span class="si">{</span><span class="n">num_gpus</span><span class="si">}</span><span class="s2">).&quot;</span>
<a id="__codelineno-0-1350" name="__codelineno-0-1350"></a>                    <span class="p">)</span>
<a id="__codelineno-0-1351" name="__codelineno-0-1351"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">actor_config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;num_gpus&quot;</span> <span class="ow">in</span> <span class="n">actor_config</span><span class="p">):</span>
<a id="__codelineno-0-1352" name="__codelineno-0-1352"></a>                    <span class="c1"># With `num_actors` argument given as &quot;num_gpus&quot;, we will also allocate each GPU to an actor.</span>
<a id="__codelineno-0-1353" name="__codelineno-0-1353"></a>                    <span class="c1"># If `actor_config` contains an item with key &quot;num_gpus&quot;, then that configuration item would</span>
<a id="__codelineno-0-1354" name="__codelineno-0-1354"></a>                    <span class="c1"># conflict with the GPU allocation we are about to do here.</span>
<a id="__codelineno-0-1355" name="__codelineno-0-1355"></a>                    <span class="c1"># So, we raise an error.</span>
<a id="__codelineno-0-1356" name="__codelineno-0-1356"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1357" name="__codelineno-0-1357"></a>                        <span class="s2">&quot;The argument `num_actors` was encountered as &#39;num_gpus&#39;.&quot;</span>
<a id="__codelineno-0-1358" name="__codelineno-0-1358"></a>                        <span class="s2">&quot; With this configuration, the number of GPUs assigned to an actor is automatically determined.&quot;</span>
<a id="__codelineno-0-1359" name="__codelineno-0-1359"></a>                        <span class="s2">&quot; However, at the same time, the `actor_config` argument was received with the key &#39;num_gpus&#39;,&quot;</span>
<a id="__codelineno-0-1360" name="__codelineno-0-1360"></a>                        <span class="s2">&quot; which causes a conflict.&quot;</span>
<a id="__codelineno-0-1361" name="__codelineno-0-1361"></a>                    <span class="p">)</span>
<a id="__codelineno-0-1362" name="__codelineno-0-1362"></a>                <span class="k">if</span> <span class="n">num_gpus_per_actor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1363" name="__codelineno-0-1363"></a>                    <span class="c1"># With `num_actors` argument given as &quot;num_gpus&quot;, we will also allocate each GPU to an actor.</span>
<a id="__codelineno-0-1364" name="__codelineno-0-1364"></a>                    <span class="c1"># If the argument `num_gpus_per_actor` is also stated, then such a configuration item would</span>
<a id="__codelineno-0-1365" name="__codelineno-0-1365"></a>                    <span class="c1"># conflict with the GPU allocation we are about to do here.</span>
<a id="__codelineno-0-1366" name="__codelineno-0-1366"></a>                    <span class="c1"># So, we raise an error.</span>
<a id="__codelineno-0-1367" name="__codelineno-0-1367"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1368" name="__codelineno-0-1368"></a>                        <span class="sa">f</span><span class="s2">&quot;The argument `num_actors` was encountered as &#39;num_gpus&#39;.&quot;</span>
<a id="__codelineno-0-1369" name="__codelineno-0-1369"></a>                        <span class="sa">f</span><span class="s2">&quot; With this configuration, the number of GPUs assigned to an actor is automatically determined.&quot;</span>
<a id="__codelineno-0-1370" name="__codelineno-0-1370"></a>                        <span class="sa">f</span><span class="s2">&quot; However, at the same time, the `num_gpus_per_actor` argument was received with a value other&quot;</span>
<a id="__codelineno-0-1371" name="__codelineno-0-1371"></a>                        <span class="sa">f</span><span class="s2">&quot; than None (</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">num_gpus_per_actor</span><span class="p">)</span><span class="si">}</span><span class="s2">), which causes a conflict.&quot;</span>
<a id="__codelineno-0-1372" name="__codelineno-0-1372"></a>                    <span class="p">)</span>
<a id="__codelineno-0-1373" name="__codelineno-0-1373"></a>                <span class="c1"># Set the number of actors as the ceiled integer counterpart of the number of available GPUs</span>
<a id="__codelineno-0-1374" name="__codelineno-0-1374"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">num_gpus</span><span class="p">)</span>
<a id="__codelineno-0-1375" name="__codelineno-0-1375"></a>                <span class="c1"># We assign a GPU for each actor (by overriding the value for the argument `num_gpus_per_actor`).</span>
<a id="__codelineno-0-1376" name="__codelineno-0-1376"></a>                <span class="n">num_gpus_per_actor</span> <span class="o">=</span> <span class="n">num_gpus</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span>
<a id="__codelineno-0-1377" name="__codelineno-0-1377"></a>            <span class="k">elif</span> <span class="n">num_actors</span> <span class="o">==</span> <span class="s2">&quot;num_devices&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1378" name="__codelineno-0-1378"></a>                <span class="c1"># This is the case where `num_actors` has the string value &quot;num_devices&quot;.</span>
<a id="__codelineno-0-1379" name="__codelineno-0-1379"></a>
<a id="__codelineno-0-1380" name="__codelineno-0-1380"></a>                <span class="c1"># With `num_actors` set as &quot;num_devices&quot;, if there are any GPUs, the behavior is to assign a GPU</span>
<a id="__codelineno-0-1381" name="__codelineno-0-1381"></a>                <span class="c1"># to each actor. If there are conflicting configurations regarding how many GPUs are to be assigned</span>
<a id="__codelineno-0-1382" name="__codelineno-0-1382"></a>                <span class="c1"># to each actor, then we raise an error.</span>
<a id="__codelineno-0-1383" name="__codelineno-0-1383"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">actor_config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;num_gpus&quot;</span> <span class="ow">in</span> <span class="n">actor_config</span><span class="p">):</span>
<a id="__codelineno-0-1384" name="__codelineno-0-1384"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1385" name="__codelineno-0-1385"></a>                        <span class="s2">&quot;The argument `num_actors` was encountered as &#39;num_devices&#39;.&quot;</span>
<a id="__codelineno-0-1386" name="__codelineno-0-1386"></a>                        <span class="s2">&quot; With this configuration, the number of GPUs assigned to an actor is automatically determined.&quot;</span>
<a id="__codelineno-0-1387" name="__codelineno-0-1387"></a>                        <span class="s2">&quot; However, at the same time, the `actor_config` argument was received with the key &#39;num_gpus&#39;,&quot;</span>
<a id="__codelineno-0-1388" name="__codelineno-0-1388"></a>                        <span class="s2">&quot; which causes a conflict.&quot;</span>
<a id="__codelineno-0-1389" name="__codelineno-0-1389"></a>                    <span class="p">)</span>
<a id="__codelineno-0-1390" name="__codelineno-0-1390"></a>                <span class="k">if</span> <span class="n">num_gpus_per_actor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1391" name="__codelineno-0-1391"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1392" name="__codelineno-0-1392"></a>                        <span class="sa">f</span><span class="s2">&quot;The argument `num_actors` was encountered as &#39;num_devices&#39;.&quot;</span>
<a id="__codelineno-0-1393" name="__codelineno-0-1393"></a>                        <span class="sa">f</span><span class="s2">&quot; With this configuration, the number of GPUs assigned to an actor is automatically determined.&quot;</span>
<a id="__codelineno-0-1394" name="__codelineno-0-1394"></a>                        <span class="sa">f</span><span class="s2">&quot; However, at the same time, the `num_gpus_per_actor` argument was received with a value other&quot;</span>
<a id="__codelineno-0-1395" name="__codelineno-0-1395"></a>                        <span class="sa">f</span><span class="s2">&quot; than None (</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">num_gpus_per_actor</span><span class="p">)</span><span class="si">}</span><span class="s2">), which causes a conflict.&quot;</span>
<a id="__codelineno-0-1396" name="__codelineno-0-1396"></a>                    <span class="p">)</span>
<a id="__codelineno-0-1397" name="__codelineno-0-1397"></a>
<a id="__codelineno-0-1398" name="__codelineno-0-1398"></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_device</span> <span class="o">!=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cpu&quot;</span><span class="p">):</span>
<a id="__codelineno-0-1399" name="__codelineno-0-1399"></a>                    <span class="c1"># If the main device is not CPU, then the user most probably wishes to put all the</span>
<a id="__codelineno-0-1400" name="__codelineno-0-1400"></a>                    <span class="c1"># computations (both evaluations and the population) on the GPU, without allocating</span>
<a id="__codelineno-0-1401" name="__codelineno-0-1401"></a>                    <span class="c1"># any actor.</span>
<a id="__codelineno-0-1402" name="__codelineno-0-1402"></a>                    <span class="c1"># So, we set `_num_actors` as None, and overwrite `num_gpus_per_actor` with None.</span>
<a id="__codelineno-0-1403" name="__codelineno-0-1403"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1404" name="__codelineno-0-1404"></a>                    <span class="n">num_gpus_per_actor</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1405" name="__codelineno-0-1405"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1406" name="__codelineno-0-1406"></a>                    <span class="c1"># If the device argument is &quot;cpu&quot; or left as None, then we assume that actor allocations</span>
<a id="__codelineno-0-1407" name="__codelineno-0-1407"></a>                    <span class="c1"># might be desired.</span>
<a id="__codelineno-0-1408" name="__codelineno-0-1408"></a>
<a id="__codelineno-0-1409" name="__codelineno-0-1409"></a>                    <span class="c1"># Read how many CPUs and GPUs are available in the ray cluster.</span>
<a id="__codelineno-0-1410" name="__codelineno-0-1410"></a>                    <span class="n">num_cpus</span> <span class="o">=</span> <span class="n">get_ray_resource</span><span class="p">(</span><span class="s2">&quot;CPU&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1411" name="__codelineno-0-1411"></a>                    <span class="n">num_gpus</span> <span class="o">=</span> <span class="n">get_ray_resource</span><span class="p">(</span><span class="s2">&quot;GPU&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1412" name="__codelineno-0-1412"></a>
<a id="__codelineno-0-1413" name="__codelineno-0-1413"></a>                    <span class="c1"># If we have multiple CPUs, then we continue with the actor allocation procedures.</span>
<a id="__codelineno-0-1414" name="__codelineno-0-1414"></a>                    <span class="k">if</span> <span class="p">(</span><span class="n">num_gpus</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">num_gpus</span> <span class="o">&lt;</span> <span class="mf">1e-4</span><span class="p">):</span>
<a id="__codelineno-0-1415" name="__codelineno-0-1415"></a>                        <span class="c1"># If there are no GPUs, then we set the number of actors as the number of CPUs, and we</span>
<a id="__codelineno-0-1416" name="__codelineno-0-1416"></a>                        <span class="c1"># set the number of GPUs per actor as None (which means that there will be no GPU</span>
<a id="__codelineno-0-1417" name="__codelineno-0-1417"></a>                        <span class="c1"># assignment)</span>
<a id="__codelineno-0-1418" name="__codelineno-0-1418"></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">num_cpus</span><span class="p">)</span>
<a id="__codelineno-0-1419" name="__codelineno-0-1419"></a>                        <span class="n">num_gpus_per_actor</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1420" name="__codelineno-0-1420"></a>                    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1421" name="__codelineno-0-1421"></a>                        <span class="c1"># If there are GPUs available, then we compute the minimum among the number of CPUs and</span>
<a id="__codelineno-0-1422" name="__codelineno-0-1422"></a>                        <span class="c1"># GPUs, and this minimum value becomes the number of actors (so that there can be</span>
<a id="__codelineno-0-1423" name="__codelineno-0-1423"></a>                        <span class="c1"># one-to-one mapping between actors and GPUs).</span>
<a id="__codelineno-0-1424" name="__codelineno-0-1424"></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">num_cpus</span><span class="p">,</span> <span class="n">num_gpus</span><span class="p">))</span>
<a id="__codelineno-0-1425" name="__codelineno-0-1425"></a>
<a id="__codelineno-0-1426" name="__codelineno-0-1426"></a>                        <span class="c1"># We assign a GPU for each actor (by overriding the value for the argument</span>
<a id="__codelineno-0-1427" name="__codelineno-0-1427"></a>                        <span class="c1"># `num_gpus_per_actor`).</span>
<a id="__codelineno-0-1428" name="__codelineno-0-1428"></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">&lt;=</span> <span class="n">num_gpus</span><span class="p">:</span>
<a id="__codelineno-0-1429" name="__codelineno-0-1429"></a>                            <span class="n">num_gpus_per_actor</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-1430" name="__codelineno-0-1430"></a>                        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1431" name="__codelineno-0-1431"></a>                            <span class="n">num_gpus_per_actor</span> <span class="o">=</span> <span class="n">num_gpus</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span>
<a id="__codelineno-0-1432" name="__codelineno-0-1432"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1433" name="__codelineno-0-1433"></a>                <span class="c1"># This is the case where `num_actors` is given as an unexpected string. We raise an error here.</span>
<a id="__codelineno-0-1434" name="__codelineno-0-1434"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1435" name="__codelineno-0-1435"></a>                    <span class="sa">f</span><span class="s2">&quot;Invalid string value for `num_actors`: </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">num_actors</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1436" name="__codelineno-0-1436"></a>                    <span class="sa">f</span><span class="s2">&quot; The acceptable string values for `num_actors` are &#39;max&#39;, &#39;num_cpus&#39;, &#39;num_gpus&#39;, &#39;num_devices&#39;.&quot;</span>
<a id="__codelineno-0-1437" name="__codelineno-0-1437"></a>                <span class="p">)</span>
<a id="__codelineno-0-1438" name="__codelineno-0-1438"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1439" name="__codelineno-0-1439"></a>            <span class="c1"># This is the case where `num_actors` has a value which is not a string.</span>
<a id="__codelineno-0-1440" name="__codelineno-0-1440"></a>            <span class="c1"># In this case, we make sure that the given value is an integer, and then use this integer as our</span>
<a id="__codelineno-0-1441" name="__codelineno-0-1441"></a>            <span class="c1"># number of actors.</span>
<a id="__codelineno-0-1442" name="__codelineno-0-1442"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_actors</span><span class="p">)</span>
<a id="__codelineno-0-1443" name="__codelineno-0-1443"></a>
<a id="__codelineno-0-1444" name="__codelineno-0-1444"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-1445" name="__codelineno-0-1445"></a>            <span class="n">_evolog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
<a id="__codelineno-0-1446" name="__codelineno-0-1446"></a>                <span class="n">message_from</span><span class="p">(</span>
<a id="__codelineno-0-1447" name="__codelineno-0-1447"></a>                    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-1448" name="__codelineno-0-1448"></a>                    <span class="p">(</span>
<a id="__codelineno-0-1449" name="__codelineno-0-1449"></a>                        <span class="s2">&quot;The number of actors that will be allocated for parallelized evaluation was encountered as 1.&quot;</span>
<a id="__codelineno-0-1450" name="__codelineno-0-1450"></a>                        <span class="s2">&quot; This number is automatically dropped to 0,&quot;</span>
<a id="__codelineno-0-1451" name="__codelineno-0-1451"></a>                        <span class="s2">&quot; because having only 1 actor does not bring any benefit in terms of parallelization.&quot;</span>
<a id="__codelineno-0-1452" name="__codelineno-0-1452"></a>                    <span class="p">),</span>
<a id="__codelineno-0-1453" name="__codelineno-0-1453"></a>                <span class="p">)</span>
<a id="__codelineno-0-1454" name="__codelineno-0-1454"></a>            <span class="p">)</span>
<a id="__codelineno-0-1455" name="__codelineno-0-1455"></a>            <span class="c1"># Creating a single actor does not bring any benefit of parallelization.</span>
<a id="__codelineno-0-1456" name="__codelineno-0-1456"></a>            <span class="c1"># Therefore, at the end of all the computations above regarding the number of actors, if it turns out</span>
<a id="__codelineno-0-1457" name="__codelineno-0-1457"></a>            <span class="c1"># that the target number of actors is 1, we reduce it to 0 (meaning that no actor will be initialized).</span>
<a id="__codelineno-0-1458" name="__codelineno-0-1458"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-1459" name="__codelineno-0-1459"></a>
<a id="__codelineno-0-1460" name="__codelineno-0-1460"></a>            <span class="c1"># Since we are to allocate no actor, the value of the argument `num_gpus_per_actor` is meaningless.</span>
<a id="__codelineno-0-1461" name="__codelineno-0-1461"></a>            <span class="c1"># We therefore overwrite the value of that argument with None.</span>
<a id="__codelineno-0-1462" name="__codelineno-0-1462"></a>            <span class="n">num_gpus_per_actor</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1463" name="__codelineno-0-1463"></a>
<a id="__codelineno-0-1464" name="__codelineno-0-1464"></a>        <span class="n">_evolog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
<a id="__codelineno-0-1465" name="__codelineno-0-1465"></a>            <span class="n">message_from</span><span class="p">(</span>
<a id="__codelineno-0-1466" name="__codelineno-0-1466"></a>                <span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;The number of actors that will be allocated for parallelized evaluation is </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1467" name="__codelineno-0-1467"></a>            <span class="p">)</span>
<a id="__codelineno-0-1468" name="__codelineno-0-1468"></a>        <span class="p">)</span>
<a id="__codelineno-0-1469" name="__codelineno-0-1469"></a>
<a id="__codelineno-0-1470" name="__codelineno-0-1470"></a>        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_device</span> <span class="o">!=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cpu&quot;</span><span class="p">)):</span>
<a id="__codelineno-0-1471" name="__codelineno-0-1471"></a>            <span class="n">detailed_error_msg</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-1472" name="__codelineno-0-1472"></a>                <span class="sa">f</span><span class="s2">&quot;The number of actors that will be allocated for parallelized evaluation is </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1473" name="__codelineno-0-1473"></a>                <span class="s2">&quot; When the number of actors is at least 2,&quot;</span>
<a id="__codelineno-0-1474" name="__codelineno-0-1474"></a>                <span class="s1">&#39; the only supported value for the `device` argument is &quot;cpu&quot;.&#39;</span>
<a id="__codelineno-0-1475" name="__codelineno-0-1475"></a>                <span class="sa">f</span><span class="s2">&quot; However, `device` was received as </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_device</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1476" name="__codelineno-0-1476"></a>                <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">---- Possible ways to fix the error: ----&quot;</span>
<a id="__codelineno-0-1477" name="__codelineno-0-1477"></a>                <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1478" name="__codelineno-0-1478"></a>                <span class="s2">&quot;(1)&quot;</span>
<a id="__codelineno-0-1479" name="__codelineno-0-1479"></a>                <span class="s2">&quot; If both the population and the fitness evaluation operations can fit into the same device,&quot;</span>
<a id="__codelineno-0-1480" name="__codelineno-0-1480"></a>                <span class="sa">f</span><span class="s2">&quot; try setting `device=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_device</span><span class="si">}</span><span class="s2">` and `num_actors=0`.&quot;</span>
<a id="__codelineno-0-1481" name="__codelineno-0-1481"></a>                <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1482" name="__codelineno-0-1482"></a>                <span class="s2">&quot;(2)&quot;</span>
<a id="__codelineno-0-1483" name="__codelineno-0-1483"></a>                <span class="s2">&quot; If you would like to use N number of GPUs in parallel for fitness evaluation (where N&gt;1),&quot;</span>
<a id="__codelineno-0-1484" name="__codelineno-0-1484"></a>                <span class="s1">&#39; set `device=&quot;cpu&quot;` (so that the main process will keep the population on the cpu), set&#39;</span>
<a id="__codelineno-0-1485" name="__codelineno-0-1485"></a>                <span class="s2">&quot; `num_actors=N` and `num_gpus_per_actor=1` (to allocate an actor for each of the `N` GPUs),&quot;</span>
<a id="__codelineno-0-1486" name="__codelineno-0-1486"></a>                <span class="s2">&quot; and then, decorate your fitness function using `evotorch.decorators.on_cuda`&quot;</span>
<a id="__codelineno-0-1487" name="__codelineno-0-1487"></a>                <span class="s2">&quot; so that the fitness evaluation will be performed on the cuda device assigned to the actor.&quot;</span>
<a id="__codelineno-0-1488" name="__codelineno-0-1488"></a>                <span class="s2">&quot; The code for achieving this can look like this:&quot;</span>
<a id="__codelineno-0-1489" name="__codelineno-0-1489"></a>                <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1490" name="__codelineno-0-1490"></a>                <span class="s2">&quot;    from evotorch import Problem</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1491" name="__codelineno-0-1491"></a>                <span class="s2">&quot;    from evotorch.decorators import on_cuda, vectorized</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1492" name="__codelineno-0-1492"></a>                <span class="s2">&quot;    import torch</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1493" name="__codelineno-0-1493"></a>                <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1494" name="__codelineno-0-1494"></a>                <span class="s2">&quot;    @on_cuda</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1495" name="__codelineno-0-1495"></a>                <span class="s2">&quot;    @vectorized</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1496" name="__codelineno-0-1496"></a>                <span class="s2">&quot;    def f(x: torch.Tensor) -&gt; torch.Tensor:</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1497" name="__codelineno-0-1497"></a>                <span class="s2">&quot;        ...</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1498" name="__codelineno-0-1498"></a>                <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1499" name="__codelineno-0-1499"></a>                <span class="s1">&#39;    problem = Problem(&quot;min&quot;, f, device=&quot;cpu&quot;, num_actors=N, num_gpus_per_actor=1)</span><span class="se">\n</span><span class="s1">&#39;</span>
<a id="__codelineno-0-1500" name="__codelineno-0-1500"></a>                <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1501" name="__codelineno-0-1501"></a>                <span class="s2">&quot;Or, it can look like this:</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1502" name="__codelineno-0-1502"></a>                <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1503" name="__codelineno-0-1503"></a>                <span class="s2">&quot;    from evotorch import Problem, SolutionBatch</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1504" name="__codelineno-0-1504"></a>                <span class="s2">&quot;    from evotorch.decorators import on_cuda</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1505" name="__codelineno-0-1505"></a>                <span class="s2">&quot;    import torch</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1506" name="__codelineno-0-1506"></a>                <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1507" name="__codelineno-0-1507"></a>                <span class="s2">&quot;    class MyProblem(Problem):</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1508" name="__codelineno-0-1508"></a>                <span class="s2">&quot;        def __init__(self, ...):</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1509" name="__codelineno-0-1509"></a>                <span class="s2">&quot;            super().__init__(</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1510" name="__codelineno-0-1510"></a>                <span class="s1">&#39;                objective_sense=&quot;min&quot;, device=&quot;cpu&quot;, num_actors=N, num_gpus_per_actor=1, ...</span><span class="se">\n</span><span class="s1">&#39;</span>
<a id="__codelineno-0-1511" name="__codelineno-0-1511"></a>                <span class="s2">&quot;            )</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1512" name="__codelineno-0-1512"></a>                <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1513" name="__codelineno-0-1513"></a>                <span class="s2">&quot;        @on_cuda</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1514" name="__codelineno-0-1514"></a>                <span class="s2">&quot;        def _evaluate_batch(self, batch: SolutionBatch):</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1515" name="__codelineno-0-1515"></a>                <span class="s2">&quot;            ...</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1516" name="__codelineno-0-1516"></a>                <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1517" name="__codelineno-0-1517"></a>                <span class="s2">&quot;    problem = MyProblem(...)</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1518" name="__codelineno-0-1518"></a>                <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1519" name="__codelineno-0-1519"></a>                <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1520" name="__codelineno-0-1520"></a>                <span class="s2">&quot;(3)&quot;</span>
<a id="__codelineno-0-1521" name="__codelineno-0-1521"></a>                <span class="s2">&quot; Similarly to option (2), for when you wish to use N number of GPUs for fitness evaluation,&quot;</span>
<a id="__codelineno-0-1522" name="__codelineno-0-1522"></a>                <span class="s1">&#39; set `device=&quot;cpu&quot;`, set `num_actors=N` and `num_gpus_per_actor=1`, then, within the evaluation&#39;</span>
<a id="__codelineno-0-1523" name="__codelineno-0-1523"></a>                <span class="s1">&#39; function, manually use the device `&quot;cuda&quot;` to accelerate the computation.&#39;</span>
<a id="__codelineno-0-1524" name="__codelineno-0-1524"></a>                <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1525" name="__codelineno-0-1525"></a>                <span class="s2">&quot;--------------</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1526" name="__codelineno-0-1526"></a>                <span class="s2">&quot;Note for cases (2) and (3): if you are on a computer or on a ray cluster with multiple GPUs, you&quot;</span>
<a id="__codelineno-0-1527" name="__codelineno-0-1527"></a>                <span class="s1">&#39; might prefer to set `num_actors` as the string &quot;num_gpus&quot; instead of an integer N,&#39;</span>
<a id="__codelineno-0-1528" name="__codelineno-0-1528"></a>                <span class="s2">&quot; which will cause the number of available GPUs to be counted, and the number of actors to be&quot;</span>
<a id="__codelineno-0-1529" name="__codelineno-0-1529"></a>                <span class="s2">&quot; configured as that count.&quot;</span>
<a id="__codelineno-0-1530" name="__codelineno-0-1530"></a>            <span class="p">)</span>
<a id="__codelineno-0-1531" name="__codelineno-0-1531"></a>
<a id="__codelineno-0-1532" name="__codelineno-0-1532"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">detailed_error_msg</span><span class="p">)</span>
<a id="__codelineno-0-1533" name="__codelineno-0-1533"></a>
<a id="__codelineno-0-1534" name="__codelineno-0-1534"></a>        <span class="c1"># Annotate the variable which will determine how many GPUs are to be assigned to each actor.</span>
<a id="__codelineno-0-1535" name="__codelineno-0-1535"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_num_gpus_per_actor</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span>
<a id="__codelineno-0-1536" name="__codelineno-0-1536"></a>
<a id="__codelineno-0-1537" name="__codelineno-0-1537"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">actor_config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;num_gpus&quot;</span> <span class="ow">in</span> <span class="n">actor_config</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">num_gpus_per_actor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-1538" name="__codelineno-0-1538"></a>            <span class="c1"># If `actor_config` dictionary has the item &quot;num_gpus&quot; and also `num_gpus_per_actor` is not None,</span>
<a id="__codelineno-0-1539" name="__codelineno-0-1539"></a>            <span class="c1"># then there is a conflicting (or redundant) configuration. We raise an error here.</span>
<a id="__codelineno-0-1540" name="__codelineno-0-1540"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1541" name="__codelineno-0-1541"></a>                <span class="s1">&#39;The `actor_config` dictionary contains the key &quot;num_gpus&quot;.&#39;</span>
<a id="__codelineno-0-1542" name="__codelineno-0-1542"></a>                <span class="s2">&quot; At the same time, `num_gpus_per_actor` has a value other than None.&quot;</span>
<a id="__codelineno-0-1543" name="__codelineno-0-1543"></a>                <span class="s2">&quot; These two configurations are conflicting.&quot;</span>
<a id="__codelineno-0-1544" name="__codelineno-0-1544"></a>                <span class="s2">&quot; Please specify the number of GPUs per actor either via the `actor_config` dictionary,&quot;</span>
<a id="__codelineno-0-1545" name="__codelineno-0-1545"></a>                <span class="s2">&quot; or via the `num_gpus_per_actor` argument, but not via both.&quot;</span>
<a id="__codelineno-0-1546" name="__codelineno-0-1546"></a>            <span class="p">)</span>
<a id="__codelineno-0-1547" name="__codelineno-0-1547"></a>
<a id="__codelineno-0-1548" name="__codelineno-0-1548"></a>        <span class="k">if</span> <span class="n">num_gpus_per_actor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1549" name="__codelineno-0-1549"></a>            <span class="c1"># If the argument `num_gpus_per_actor` is not specified, then we set the attribute</span>
<a id="__codelineno-0-1550" name="__codelineno-0-1550"></a>            <span class="c1"># `_num_gpus_per_actor` as None, which means that no GPUs will be assigned to the actors.</span>
<a id="__codelineno-0-1551" name="__codelineno-0-1551"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_num_gpus_per_actor</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1552" name="__codelineno-0-1552"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">num_gpus_per_actor</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-1553" name="__codelineno-0-1553"></a>            <span class="c1"># This is the case where `num_gpus_per_actor` is given as a string.</span>
<a id="__codelineno-0-1554" name="__codelineno-0-1554"></a>            <span class="k">if</span> <span class="n">num_gpus_per_actor</span> <span class="o">==</span> <span class="s2">&quot;max&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1555" name="__codelineno-0-1555"></a>                <span class="c1"># This is the case where `num_gpus_per_actor` is given as &quot;max&quot;.</span>
<a id="__codelineno-0-1556" name="__codelineno-0-1556"></a>                <span class="n">num_gpus</span> <span class="o">=</span> <span class="n">get_ray_resource</span><span class="p">(</span><span class="s2">&quot;GPU&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1557" name="__codelineno-0-1557"></a>                <span class="k">if</span> <span class="n">num_gpus</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1558" name="__codelineno-0-1558"></a>                    <span class="c1"># With `num_gpus_per_actor` as &quot;max&quot;, if there is no GPU available, then we set the attribute</span>
<a id="__codelineno-0-1559" name="__codelineno-0-1559"></a>                    <span class="c1"># `_num_gpus_per_actor` as None, which means there will be no GPU assignment to the actors.</span>
<a id="__codelineno-0-1560" name="__codelineno-0-1560"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_num_gpus_per_actor</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1561" name="__codelineno-0-1561"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1562" name="__codelineno-0-1562"></a>                    <span class="c1"># With `num_gpus_per_actor` as &quot;max&quot;, if there are GPUs available, then the available GPUs will</span>
<a id="__codelineno-0-1563" name="__codelineno-0-1563"></a>                    <span class="c1"># be shared among the actors.</span>
<a id="__codelineno-0-1564" name="__codelineno-0-1564"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_num_gpus_per_actor</span> <span class="o">=</span> <span class="n">num_gpus</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span>
<a id="__codelineno-0-1565" name="__codelineno-0-1565"></a>            <span class="k">elif</span> <span class="n">num_gpus_per_actor</span> <span class="o">==</span> <span class="s2">&quot;all&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1566" name="__codelineno-0-1566"></a>                <span class="c1"># When `num_gpus_per_actor` is &quot;all&quot;, we also set the attribute `_num_gpus_per_actor` as &quot;all&quot;.</span>
<a id="__codelineno-0-1567" name="__codelineno-0-1567"></a>                <span class="c1"># When a remote actor is initialized, the remote actor will see that the Problem instance has its</span>
<a id="__codelineno-0-1568" name="__codelineno-0-1568"></a>                <span class="c1"># `_num_gpus_per_actor` set as &quot;all&quot;, and it will remove the environment variable named</span>
<a id="__codelineno-0-1569" name="__codelineno-0-1569"></a>                <span class="c1"># &quot;CUDA_VISIBLE_DEVICES&quot; in its own environment.</span>
<a id="__codelineno-0-1570" name="__codelineno-0-1570"></a>                <span class="c1"># With &quot;CUDA_VISIBLE_DEVICES&quot; removed, an actor will see all the GPUs available in its own</span>
<a id="__codelineno-0-1571" name="__codelineno-0-1571"></a>                <span class="c1"># environment.</span>
<a id="__codelineno-0-1572" name="__codelineno-0-1572"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_num_gpus_per_actor</span> <span class="o">=</span> <span class="s2">&quot;all&quot;</span>
<a id="__codelineno-0-1573" name="__codelineno-0-1573"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1574" name="__codelineno-0-1574"></a>                <span class="c1"># This is the case where `num_gpus_per_actor` argument has an unexpected string value.</span>
<a id="__codelineno-0-1575" name="__codelineno-0-1575"></a>                <span class="c1"># We raise an error.</span>
<a id="__codelineno-0-1576" name="__codelineno-0-1576"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1577" name="__codelineno-0-1577"></a>                    <span class="sa">f</span><span class="s2">&quot;Invalid string value for `num_gpus_per_actor`: </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">num_gpus_per_actor</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1578" name="__codelineno-0-1578"></a>                    <span class="sa">f</span><span class="s1">&#39; Acceptable string values for `num_gpus_per_actor` are: &quot;max&quot;, &quot;all&quot;.&#39;</span>
<a id="__codelineno-0-1579" name="__codelineno-0-1579"></a>                <span class="p">)</span>
<a id="__codelineno-0-1580" name="__codelineno-0-1580"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">num_gpus_per_actor</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
<a id="__codelineno-0-1581" name="__codelineno-0-1581"></a>            <span class="c1"># When the argument `num_gpus_per_actor` is set as an integer we just set the attribute</span>
<a id="__codelineno-0-1582" name="__codelineno-0-1582"></a>            <span class="c1"># `_num_gpus_per_actor` as this integer.</span>
<a id="__codelineno-0-1583" name="__codelineno-0-1583"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_num_gpus_per_actor</span> <span class="o">=</span> <span class="n">num_gpus_per_actor</span>
<a id="__codelineno-0-1584" name="__codelineno-0-1584"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1585" name="__codelineno-0-1585"></a>            <span class="c1"># For anything else, we assume that `num_gpus_per_actor` is an object that is convertible to float.</span>
<a id="__codelineno-0-1586" name="__codelineno-0-1586"></a>            <span class="c1"># Therefore, we convert it to float and store it in the attribute `_num_gpus_per_actor`.</span>
<a id="__codelineno-0-1587" name="__codelineno-0-1587"></a>            <span class="c1"># Also, remember that, when `num_actors` is given as &quot;num_gpus&quot; or as &quot;num_devices&quot;,</span>
<a id="__codelineno-0-1588" name="__codelineno-0-1588"></a>            <span class="c1"># the code above overrides the value for the argument `num_gpus_per_actor`, which means,</span>
<a id="__codelineno-0-1589" name="__codelineno-0-1589"></a>            <span class="c1"># this is the case that is activated when `num_actors` is &quot;num_gpus&quot; or &quot;num_devices&quot;.</span>
<a id="__codelineno-0-1590" name="__codelineno-0-1590"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_num_gpus_per_actor</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">num_gpus_per_actor</span><span class="p">)</span>
<a id="__codelineno-0-1591" name="__codelineno-0-1591"></a>
<a id="__codelineno-0-1592" name="__codelineno-0-1592"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-1593" name="__codelineno-0-1593"></a>            <span class="n">_evolog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
<a id="__codelineno-0-1594" name="__codelineno-0-1594"></a>                <span class="n">message_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Number of GPUs that will be allocated per actor is </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_gpus_per_actor</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1595" name="__codelineno-0-1595"></a>            <span class="p">)</span>
<a id="__codelineno-0-1596" name="__codelineno-0-1596"></a>
<a id="__codelineno-0-1597" name="__codelineno-0-1597"></a>        <span class="c1"># Initialize the Hook instances (and the related status dictionary for the `_after_eval_hook`)</span>
<a id="__codelineno-0-1598" name="__codelineno-0-1598"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_before_eval_hook</span><span class="p">:</span> <span class="n">Hook</span> <span class="o">=</span> <span class="n">Hook</span><span class="p">()</span>
<a id="__codelineno-0-1599" name="__codelineno-0-1599"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_after_eval_hook</span><span class="p">:</span> <span class="n">Hook</span> <span class="o">=</span> <span class="n">Hook</span><span class="p">()</span>
<a id="__codelineno-0-1600" name="__codelineno-0-1600"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_after_eval_status</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-1601" name="__codelineno-0-1601"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_remote_hook</span><span class="p">:</span> <span class="n">Hook</span> <span class="o">=</span> <span class="n">Hook</span><span class="p">()</span>
<a id="__codelineno-0-1602" name="__codelineno-0-1602"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_before_grad_hook</span><span class="p">:</span> <span class="n">Hook</span> <span class="o">=</span> <span class="n">Hook</span><span class="p">()</span>
<a id="__codelineno-0-1603" name="__codelineno-0-1603"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_after_grad_hook</span><span class="p">:</span> <span class="n">Hook</span> <span class="o">=</span> <span class="n">Hook</span><span class="p">()</span>
<a id="__codelineno-0-1604" name="__codelineno-0-1604"></a>
<a id="__codelineno-0-1605" name="__codelineno-0-1605"></a>        <span class="c1"># Initialize various stats regarding the solutions encountered by this Problem instance.</span>
<a id="__codelineno-0-1606" name="__codelineno-0-1606"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_store_solution_stats</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">store_solution_stats</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">bool</span><span class="p">(</span><span class="n">store_solution_stats</span><span class="p">)</span>
<a id="__codelineno-0-1607" name="__codelineno-0-1607"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_best</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1608" name="__codelineno-0-1608"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_worst</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1609" name="__codelineno-0-1609"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_best_evals</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1610" name="__codelineno-0-1610"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_worst_evals</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1611" name="__codelineno-0-1611"></a>
<a id="__codelineno-0-1612" name="__codelineno-0-1612"></a>        <span class="c1"># Initialize the boolean attribute which indicates whether or not this Problem instance (which can be</span>
<a id="__codelineno-0-1613" name="__codelineno-0-1613"></a>        <span class="c1"># the main instance or a remote instance on an actor) is &quot;prepared&quot; via the `_prepare` method.</span>
<a id="__codelineno-0-1614" name="__codelineno-0-1614"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_prepared</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-1615" name="__codelineno-0-1615"></a>
<a id="__codelineno-0-1616" name="__codelineno-0-1616"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">manual_seed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-1617" name="__codelineno-0-1617"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1618" name="__codelineno-0-1618"></a><span class="sd">        Provide a manual seed for the Problem object.</span>
<a id="__codelineno-0-1619" name="__codelineno-0-1619"></a>
<a id="__codelineno-0-1620" name="__codelineno-0-1620"></a><span class="sd">        If the given seed is None, then the Problem object will remove</span>
<a id="__codelineno-0-1621" name="__codelineno-0-1621"></a><span class="sd">        its own stored generator, and start using the global generator</span>
<a id="__codelineno-0-1622" name="__codelineno-0-1622"></a><span class="sd">        of PyTorch instead.</span>
<a id="__codelineno-0-1623" name="__codelineno-0-1623"></a><span class="sd">        If the given seed is an integer, then the Problem object will</span>
<a id="__codelineno-0-1624" name="__codelineno-0-1624"></a><span class="sd">        instantiate its own generator with the given seed.</span>
<a id="__codelineno-0-1625" name="__codelineno-0-1625"></a>
<a id="__codelineno-0-1626" name="__codelineno-0-1626"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-1627" name="__codelineno-0-1627"></a><span class="sd">            seed: None for using the global PyTorch generator; an integer</span>
<a id="__codelineno-0-1628" name="__codelineno-0-1628"></a><span class="sd">                for instantiating a new PyTorch generator with this given</span>
<a id="__codelineno-0-1629" name="__codelineno-0-1629"></a><span class="sd">                integer seed, specific to this Problem object.</span>
<a id="__codelineno-0-1630" name="__codelineno-0-1630"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1631" name="__codelineno-0-1631"></a>        <span class="k">if</span> <span class="n">seed</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1632" name="__codelineno-0-1632"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_generator</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1633" name="__codelineno-0-1633"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1634" name="__codelineno-0-1634"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generator</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1635" name="__codelineno-0-1635"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_generator</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">Generator</span><span class="p">(</span><span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-1636" name="__codelineno-0-1636"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_generator</span><span class="o">.</span><span class="n">manual_seed</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>
<a id="__codelineno-0-1637" name="__codelineno-0-1637"></a>
<a id="__codelineno-0-1638" name="__codelineno-0-1638"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-1639" name="__codelineno-0-1639"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">dtype</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DType</span><span class="p">:</span>
<a id="__codelineno-0-1640" name="__codelineno-0-1640"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1641" name="__codelineno-0-1641"></a><span class="sd">        dtype of the Problem object.</span>
<a id="__codelineno-0-1642" name="__codelineno-0-1642"></a>
<a id="__codelineno-0-1643" name="__codelineno-0-1643"></a><span class="sd">        The decision variables of the optimization problem are of this dtype.</span>
<a id="__codelineno-0-1644" name="__codelineno-0-1644"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1645" name="__codelineno-0-1645"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dtype</span>
<a id="__codelineno-0-1646" name="__codelineno-0-1646"></a>
<a id="__codelineno-0-1647" name="__codelineno-0-1647"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-1648" name="__codelineno-0-1648"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">device</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Device</span><span class="p">:</span>
<a id="__codelineno-0-1649" name="__codelineno-0-1649"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1650" name="__codelineno-0-1650"></a><span class="sd">        device of the Problem object.</span>
<a id="__codelineno-0-1651" name="__codelineno-0-1651"></a>
<a id="__codelineno-0-1652" name="__codelineno-0-1652"></a><span class="sd">        New solutions and populations will be generated in this device.</span>
<a id="__codelineno-0-1653" name="__codelineno-0-1653"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1654" name="__codelineno-0-1654"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_device</span>
<a id="__codelineno-0-1655" name="__codelineno-0-1655"></a>
<a id="__codelineno-0-1656" name="__codelineno-0-1656"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-1657" name="__codelineno-0-1657"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">aux_device</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Device</span><span class="p">:</span>
<a id="__codelineno-0-1658" name="__codelineno-0-1658"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1659" name="__codelineno-0-1659"></a><span class="sd">        Auxiliary device to help with the computations, most commonly for</span>
<a id="__codelineno-0-1660" name="__codelineno-0-1660"></a><span class="sd">        speeding up the solution evaluations.</span>
<a id="__codelineno-0-1661" name="__codelineno-0-1661"></a>
<a id="__codelineno-0-1662" name="__codelineno-0-1662"></a><span class="sd">        An auxiliary device is different than the main device of the Problem</span>
<a id="__codelineno-0-1663" name="__codelineno-0-1663"></a><span class="sd">        object (the main device being expressed by the `device` property).</span>
<a id="__codelineno-0-1664" name="__codelineno-0-1664"></a><span class="sd">        While the main device of the Problem object determines where the</span>
<a id="__codelineno-0-1665" name="__codelineno-0-1665"></a><span class="sd">        solutions and the populations are stored (and also using which device</span>
<a id="__codelineno-0-1666" name="__codelineno-0-1666"></a><span class="sd">        should a SearchAlgorithm instance communicate with the problem),</span>
<a id="__codelineno-0-1667" name="__codelineno-0-1667"></a><span class="sd">        an auxiliary device is a device that might be used by the Problem</span>
<a id="__codelineno-0-1668" name="__codelineno-0-1668"></a><span class="sd">        instance itself for its own computations (e.g. computations defined</span>
<a id="__codelineno-0-1669" name="__codelineno-0-1669"></a><span class="sd">        within the methods `_evaluate(...)` or `_evaluate_batch(...)`).</span>
<a id="__codelineno-0-1670" name="__codelineno-0-1670"></a>
<a id="__codelineno-0-1671" name="__codelineno-0-1671"></a><span class="sd">        If the problem&#39;s main device is something other than &quot;cpu&quot;, that main</span>
<a id="__codelineno-0-1672" name="__codelineno-0-1672"></a><span class="sd">        device is also seen as the auxiliary device, and therefore returned</span>
<a id="__codelineno-0-1673" name="__codelineno-0-1673"></a><span class="sd">        by this property.</span>
<a id="__codelineno-0-1674" name="__codelineno-0-1674"></a>
<a id="__codelineno-0-1675" name="__codelineno-0-1675"></a><span class="sd">        If the problem&#39;s main device is &quot;cpu&quot;, then the auxiliary device</span>
<a id="__codelineno-0-1676" name="__codelineno-0-1676"></a><span class="sd">        is decided as follows. If `num_gpus_per_actor` of the Problem object</span>
<a id="__codelineno-0-1677" name="__codelineno-0-1677"></a><span class="sd">        was set as &quot;all&quot; and if this instance is a remote instance, then the</span>
<a id="__codelineno-0-1678" name="__codelineno-0-1678"></a><span class="sd">        auxiliary device is guessed as &quot;cuda:N&quot; where N is the actor index.</span>
<a id="__codelineno-0-1679" name="__codelineno-0-1679"></a><span class="sd">        In all other cases, the auxiliary device is &quot;cuda&quot; if cuda is</span>
<a id="__codelineno-0-1680" name="__codelineno-0-1680"></a><span class="sd">        available, and &quot;cpu&quot; otherwise.</span>
<a id="__codelineno-0-1681" name="__codelineno-0-1681"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1682" name="__codelineno-0-1682"></a>        <span class="n">cpu_device</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cpu&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1683" name="__codelineno-0-1683"></a>        <span class="k">if</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span> <span class="o">==</span> <span class="n">cpu_device</span><span class="p">:</span>
<a id="__codelineno-0-1684" name="__codelineno-0-1684"></a>            <span class="k">if</span> <span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">is_available</span><span class="p">():</span>
<a id="__codelineno-0-1685" name="__codelineno-0-1685"></a>                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_gpus_per_actor</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_gpus_per_actor</span> <span class="o">==</span> <span class="s2">&quot;all&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_remote</span><span class="p">:</span>
<a id="__codelineno-0-1686" name="__codelineno-0-1686"></a>                    <span class="k">return</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cuda&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">actor_index</span><span class="p">)</span>
<a id="__codelineno-0-1687" name="__codelineno-0-1687"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1688" name="__codelineno-0-1688"></a>                    <span class="k">return</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cuda&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1689" name="__codelineno-0-1689"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1690" name="__codelineno-0-1690"></a>                <span class="k">return</span> <span class="n">cpu_device</span>
<a id="__codelineno-0-1691" name="__codelineno-0-1691"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1692" name="__codelineno-0-1692"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span>
<a id="__codelineno-0-1693" name="__codelineno-0-1693"></a>
<a id="__codelineno-0-1694" name="__codelineno-0-1694"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-1695" name="__codelineno-0-1695"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">eval_dtype</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DType</span><span class="p">:</span>
<a id="__codelineno-0-1696" name="__codelineno-0-1696"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1697" name="__codelineno-0-1697"></a><span class="sd">        evaluation dtype of the Problem object.</span>
<a id="__codelineno-0-1698" name="__codelineno-0-1698"></a>
<a id="__codelineno-0-1699" name="__codelineno-0-1699"></a><span class="sd">        The evaluation results of the solutions are stored according to this</span>
<a id="__codelineno-0-1700" name="__codelineno-0-1700"></a><span class="sd">        dtype.</span>
<a id="__codelineno-0-1701" name="__codelineno-0-1701"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1702" name="__codelineno-0-1702"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_eval_dtype</span>
<a id="__codelineno-0-1703" name="__codelineno-0-1703"></a>
<a id="__codelineno-0-1704" name="__codelineno-0-1704"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-1705" name="__codelineno-0-1705"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generator</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Generator</span><span class="p">]:</span>
<a id="__codelineno-0-1706" name="__codelineno-0-1706"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1707" name="__codelineno-0-1707"></a><span class="sd">        Random generator used by this Problem object.</span>
<a id="__codelineno-0-1708" name="__codelineno-0-1708"></a>
<a id="__codelineno-0-1709" name="__codelineno-0-1709"></a><span class="sd">        Can also be None, which means that the Problem object will use the</span>
<a id="__codelineno-0-1710" name="__codelineno-0-1710"></a><span class="sd">        global random generator of PyTorch.</span>
<a id="__codelineno-0-1711" name="__codelineno-0-1711"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1712" name="__codelineno-0-1712"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generator</span>
<a id="__codelineno-0-1713" name="__codelineno-0-1713"></a>
<a id="__codelineno-0-1714" name="__codelineno-0-1714"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-1715" name="__codelineno-0-1715"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">has_own_generator</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-1716" name="__codelineno-0-1716"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1717" name="__codelineno-0-1717"></a><span class="sd">        Whether or not the Problem object has its own random generator.</span>
<a id="__codelineno-0-1718" name="__codelineno-0-1718"></a>
<a id="__codelineno-0-1719" name="__codelineno-0-1719"></a><span class="sd">        If this is True, then the Problem object will use its own</span>
<a id="__codelineno-0-1720" name="__codelineno-0-1720"></a><span class="sd">        random generator when creating random values or tensors.</span>
<a id="__codelineno-0-1721" name="__codelineno-0-1721"></a><span class="sd">        If this is False, then the Problem object will use the global</span>
<a id="__codelineno-0-1722" name="__codelineno-0-1722"></a><span class="sd">        random generator when creating random values or tensors.</span>
<a id="__codelineno-0-1723" name="__codelineno-0-1723"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1724" name="__codelineno-0-1724"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generator</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-1725" name="__codelineno-0-1725"></a>
<a id="__codelineno-0-1726" name="__codelineno-0-1726"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-1727" name="__codelineno-0-1727"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">objective_sense</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ObjectiveSense</span><span class="p">:</span>
<a id="__codelineno-0-1728" name="__codelineno-0-1728"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1729" name="__codelineno-0-1729"></a><span class="sd">        Get the objective sense.</span>
<a id="__codelineno-0-1730" name="__codelineno-0-1730"></a>
<a id="__codelineno-0-1731" name="__codelineno-0-1731"></a><span class="sd">        If the problem is single-objective, then a single string is returned.</span>
<a id="__codelineno-0-1732" name="__codelineno-0-1732"></a><span class="sd">        If the problem is multi-objective, then the objective senses will be</span>
<a id="__codelineno-0-1733" name="__codelineno-0-1733"></a><span class="sd">        returned in a list.</span>
<a id="__codelineno-0-1734" name="__codelineno-0-1734"></a>
<a id="__codelineno-0-1735" name="__codelineno-0-1735"></a><span class="sd">        The returned string in the single-objective case, or each returned</span>
<a id="__codelineno-0-1736" name="__codelineno-0-1736"></a><span class="sd">        string in the multi-objective case, is &quot;min&quot; or &quot;max&quot;.</span>
<a id="__codelineno-0-1737" name="__codelineno-0-1737"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1738" name="__codelineno-0-1738"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">senses</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-1739" name="__codelineno-0-1739"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">senses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-1740" name="__codelineno-0-1740"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1741" name="__codelineno-0-1741"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">senses</span>
<a id="__codelineno-0-1742" name="__codelineno-0-1742"></a>
<a id="__codelineno-0-1743" name="__codelineno-0-1743"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-1744" name="__codelineno-0-1744"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">senses</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<a id="__codelineno-0-1745" name="__codelineno-0-1745"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1746" name="__codelineno-0-1746"></a><span class="sd">        Get the objective senses.</span>
<a id="__codelineno-0-1747" name="__codelineno-0-1747"></a>
<a id="__codelineno-0-1748" name="__codelineno-0-1748"></a><span class="sd">        The return value is a list of strings, each string being</span>
<a id="__codelineno-0-1749" name="__codelineno-0-1749"></a><span class="sd">        &quot;min&quot; or &quot;max&quot;.</span>
<a id="__codelineno-0-1750" name="__codelineno-0-1750"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1751" name="__codelineno-0-1751"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_senses</span>
<a id="__codelineno-0-1752" name="__codelineno-0-1752"></a>
<a id="__codelineno-0-1753" name="__codelineno-0-1753"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-1754" name="__codelineno-0-1754"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_single_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-1755" name="__codelineno-0-1755"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Whether or not the problem is single-objective&quot;&quot;&quot;</span>
<a id="__codelineno-0-1756" name="__codelineno-0-1756"></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">senses</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
<a id="__codelineno-0-1757" name="__codelineno-0-1757"></a>
<a id="__codelineno-0-1758" name="__codelineno-0-1758"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-1759" name="__codelineno-0-1759"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_multi_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-1760" name="__codelineno-0-1760"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Whether or not the problem is multi-objective&quot;&quot;&quot;</span>
<a id="__codelineno-0-1761" name="__codelineno-0-1761"></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">senses</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span>
<a id="__codelineno-0-1762" name="__codelineno-0-1762"></a>
<a id="__codelineno-0-1763" name="__codelineno-0-1763"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_obj_order_descending</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">bool</span><span class="p">]:</span>
<a id="__codelineno-0-1764" name="__codelineno-0-1764"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;When sorting the solutions from best to worst according to each objective i, is the ordering descending?&quot;&quot;&quot;</span>
<a id="__codelineno-0-1765" name="__codelineno-0-1765"></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-1766" name="__codelineno-0-1766"></a>        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">senses</span><span class="p">:</span>
<a id="__codelineno-0-1767" name="__codelineno-0-1767"></a>            <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="s2">&quot;min&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1768" name="__codelineno-0-1768"></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-1769" name="__codelineno-0-1769"></a>            <span class="k">elif</span> <span class="n">s</span> <span class="o">==</span> <span class="s2">&quot;max&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1770" name="__codelineno-0-1770"></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-1771" name="__codelineno-0-1771"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1772" name="__codelineno-0-1772"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid sense: </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1773" name="__codelineno-0-1773"></a>        <span class="k">return</span> <span class="n">result</span>
<a id="__codelineno-0-1774" name="__codelineno-0-1774"></a>
<a id="__codelineno-0-1775" name="__codelineno-0-1775"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-1776" name="__codelineno-0-1776"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">solution_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-0-1777" name="__codelineno-0-1777"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1778" name="__codelineno-0-1778"></a><span class="sd">        Get the solution length.</span>
<a id="__codelineno-0-1779" name="__codelineno-0-1779"></a>
<a id="__codelineno-0-1780" name="__codelineno-0-1780"></a><span class="sd">        Problems with `dtype=None` do not have solution lengths.</span>
<a id="__codelineno-0-1781" name="__codelineno-0-1781"></a><span class="sd">        For such problems, this property returns None.</span>
<a id="__codelineno-0-1782" name="__codelineno-0-1782"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1783" name="__codelineno-0-1783"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solution_length</span>
<a id="__codelineno-0-1784" name="__codelineno-0-1784"></a>
<a id="__codelineno-0-1785" name="__codelineno-0-1785"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-1786" name="__codelineno-0-1786"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">eval_data_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-1787" name="__codelineno-0-1787"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1788" name="__codelineno-0-1788"></a><span class="sd">        Length of the extra evaluation data vector for each solution.</span>
<a id="__codelineno-0-1789" name="__codelineno-0-1789"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1790" name="__codelineno-0-1790"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_eval_data_length</span>
<a id="__codelineno-0-1791" name="__codelineno-0-1791"></a>
<a id="__codelineno-0-1792" name="__codelineno-0-1792"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-1793" name="__codelineno-0-1793"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">initial_lower_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">]:</span>
<a id="__codelineno-0-1794" name="__codelineno-0-1794"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1795" name="__codelineno-0-1795"></a><span class="sd">        Initial lower bounds, for when initializing a new solution.</span>
<a id="__codelineno-0-1796" name="__codelineno-0-1796"></a>
<a id="__codelineno-0-1797" name="__codelineno-0-1797"></a><span class="sd">        If such a bound was declared during the initialization phase,</span>
<a id="__codelineno-0-1798" name="__codelineno-0-1798"></a><span class="sd">        the returned value is a torch tensor (in the form of a vector</span>
<a id="__codelineno-0-1799" name="__codelineno-0-1799"></a><span class="sd">        or in the form of a scalar).</span>
<a id="__codelineno-0-1800" name="__codelineno-0-1800"></a><span class="sd">        If no such bound was declared, the returned value is None.</span>
<a id="__codelineno-0-1801" name="__codelineno-0-1801"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1802" name="__codelineno-0-1802"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initial_lower_bounds</span>
<a id="__codelineno-0-1803" name="__codelineno-0-1803"></a>
<a id="__codelineno-0-1804" name="__codelineno-0-1804"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-1805" name="__codelineno-0-1805"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">initial_upper_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">]:</span>
<a id="__codelineno-0-1806" name="__codelineno-0-1806"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1807" name="__codelineno-0-1807"></a><span class="sd">        Initial upper bounds, for when initializing a new solution.</span>
<a id="__codelineno-0-1808" name="__codelineno-0-1808"></a>
<a id="__codelineno-0-1809" name="__codelineno-0-1809"></a><span class="sd">        If such a bound was declared during the initialization phase,</span>
<a id="__codelineno-0-1810" name="__codelineno-0-1810"></a><span class="sd">        the returned value is a torch tensor (in the form of a vector</span>
<a id="__codelineno-0-1811" name="__codelineno-0-1811"></a><span class="sd">        or in the form of a scalar).</span>
<a id="__codelineno-0-1812" name="__codelineno-0-1812"></a><span class="sd">        If no such bound was declared, the returned value is None.</span>
<a id="__codelineno-0-1813" name="__codelineno-0-1813"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1814" name="__codelineno-0-1814"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initial_upper_bounds</span>
<a id="__codelineno-0-1815" name="__codelineno-0-1815"></a>
<a id="__codelineno-0-1816" name="__codelineno-0-1816"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-1817" name="__codelineno-0-1817"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">lower_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">]:</span>
<a id="__codelineno-0-1818" name="__codelineno-0-1818"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1819" name="__codelineno-0-1819"></a><span class="sd">        Lower bounds for the allowed values of a solution.</span>
<a id="__codelineno-0-1820" name="__codelineno-0-1820"></a>
<a id="__codelineno-0-1821" name="__codelineno-0-1821"></a><span class="sd">        If such a bound was declared during the initialization phase,</span>
<a id="__codelineno-0-1822" name="__codelineno-0-1822"></a><span class="sd">        the returned value is a torch tensor (in the form of a vector</span>
<a id="__codelineno-0-1823" name="__codelineno-0-1823"></a><span class="sd">        or in the form of a scalar).</span>
<a id="__codelineno-0-1824" name="__codelineno-0-1824"></a><span class="sd">        If no such bound was declared, the returned value is None.</span>
<a id="__codelineno-0-1825" name="__codelineno-0-1825"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1826" name="__codelineno-0-1826"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lower_bounds</span>
<a id="__codelineno-0-1827" name="__codelineno-0-1827"></a>
<a id="__codelineno-0-1828" name="__codelineno-0-1828"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-1829" name="__codelineno-0-1829"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">upper_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">]:</span>
<a id="__codelineno-0-1830" name="__codelineno-0-1830"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1831" name="__codelineno-0-1831"></a><span class="sd">        Upper bounds for the allowed values of a solution.</span>
<a id="__codelineno-0-1832" name="__codelineno-0-1832"></a>
<a id="__codelineno-0-1833" name="__codelineno-0-1833"></a><span class="sd">        If such a bound was declared during the initialization phase,</span>
<a id="__codelineno-0-1834" name="__codelineno-0-1834"></a><span class="sd">        the returned value is a torch tensor (in the form of a vector</span>
<a id="__codelineno-0-1835" name="__codelineno-0-1835"></a><span class="sd">        or in the form of a scalar).</span>
<a id="__codelineno-0-1836" name="__codelineno-0-1836"></a><span class="sd">        If no such bound was declared, the returned value is None.</span>
<a id="__codelineno-0-1837" name="__codelineno-0-1837"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1838" name="__codelineno-0-1838"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upper_bounds</span>
<a id="__codelineno-0-1839" name="__codelineno-0-1839"></a>
<a id="__codelineno-0-1840" name="__codelineno-0-1840"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_solutions</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">,</span> <span class="n">ObjectArray</span><span class="p">]:</span>
<a id="__codelineno-0-1841" name="__codelineno-0-1841"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1842" name="__codelineno-0-1842"></a><span class="sd">        Generate decision values.</span>
<a id="__codelineno-0-1843" name="__codelineno-0-1843"></a>
<a id="__codelineno-0-1844" name="__codelineno-0-1844"></a><span class="sd">        This function returns a tensor containing the decision values</span>
<a id="__codelineno-0-1845" name="__codelineno-0-1845"></a><span class="sd">        for `n` new solutions, `n` being the integer passed as the `num_rows`</span>
<a id="__codelineno-0-1846" name="__codelineno-0-1846"></a><span class="sd">        argument.</span>
<a id="__codelineno-0-1847" name="__codelineno-0-1847"></a>
<a id="__codelineno-0-1848" name="__codelineno-0-1848"></a><span class="sd">        For numeric problems, this function generates the decision values</span>
<a id="__codelineno-0-1849" name="__codelineno-0-1849"></a><span class="sd">        which respect `initial_bounds` (or `bounds`, if `initial_bounds`</span>
<a id="__codelineno-0-1850" name="__codelineno-0-1850"></a><span class="sd">        was not provided).</span>
<a id="__codelineno-0-1851" name="__codelineno-0-1851"></a><span class="sd">        If this type of initialization is not desired, one can override</span>
<a id="__codelineno-0-1852" name="__codelineno-0-1852"></a><span class="sd">        this function and define a manual initialization scheme in the</span>
<a id="__codelineno-0-1853" name="__codelineno-0-1853"></a><span class="sd">        inheriting subclass.</span>
<a id="__codelineno-0-1854" name="__codelineno-0-1854"></a>
<a id="__codelineno-0-1855" name="__codelineno-0-1855"></a><span class="sd">        For non-numeric problems, it is expected that the inheriting subclass</span>
<a id="__codelineno-0-1856" name="__codelineno-0-1856"></a><span class="sd">        will override the method `_fill(...)`.</span>
<a id="__codelineno-0-1857" name="__codelineno-0-1857"></a>
<a id="__codelineno-0-1858" name="__codelineno-0-1858"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-1859" name="__codelineno-0-1859"></a><span class="sd">            num_solutions: For how many solutions will new decision values be</span>
<a id="__codelineno-0-1860" name="__codelineno-0-1860"></a><span class="sd">                generated.</span>
<a id="__codelineno-0-1861" name="__codelineno-0-1861"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-1862" name="__codelineno-0-1862"></a><span class="sd">            A PyTorch tensor for numeric problems, an ObjectArray for</span>
<a id="__codelineno-0-1863" name="__codelineno-0-1863"></a><span class="sd">            non-numeric problems.</span>
<a id="__codelineno-0-1864" name="__codelineno-0-1864"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1865" name="__codelineno-0-1865"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="nb">object</span><span class="p">:</span>
<a id="__codelineno-0-1866" name="__codelineno-0-1866"></a>            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_empty</span><span class="p">(</span><span class="n">num_solutions</span><span class="o">=</span><span class="n">num_solutions</span><span class="p">)</span>
<a id="__codelineno-0-1867" name="__codelineno-0-1867"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1868" name="__codelineno-0-1868"></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-1869" name="__codelineno-0-1869"></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="n">num_solutions</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">solution_length</span><span class="p">)</span>
<a id="__codelineno-0-1870" name="__codelineno-0-1870"></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">+</span> <span class="n">make_batched_false_for_vmap</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-1871" name="__codelineno-0-1871"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_fill</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<a id="__codelineno-0-1872" name="__codelineno-0-1872"></a>        <span class="k">return</span> <span class="n">result</span>
<a id="__codelineno-0-1873" name="__codelineno-0-1873"></a>
<a id="__codelineno-0-1874" name="__codelineno-0-1874"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_fill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">):</span>
<a id="__codelineno-0-1875" name="__codelineno-0-1875"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1876" name="__codelineno-0-1876"></a><span class="sd">        Fill the provided `values` tensor with new decision values.</span>
<a id="__codelineno-0-1877" name="__codelineno-0-1877"></a>
<a id="__codelineno-0-1878" name="__codelineno-0-1878"></a><span class="sd">        Inheriting subclasses can override this method to specialize how</span>
<a id="__codelineno-0-1879" name="__codelineno-0-1879"></a><span class="sd">        new solutions are generated.</span>
<a id="__codelineno-0-1880" name="__codelineno-0-1880"></a>
<a id="__codelineno-0-1881" name="__codelineno-0-1881"></a><span class="sd">        For numeric problems, this method already has an implementation</span>
<a id="__codelineno-0-1882" name="__codelineno-0-1882"></a><span class="sd">        which samples the initial decision values uniformly from the</span>
<a id="__codelineno-0-1883" name="__codelineno-0-1883"></a><span class="sd">        interval expressed by `initial_bounds` attribute.</span>
<a id="__codelineno-0-1884" name="__codelineno-0-1884"></a><span class="sd">        For non-numeric problems, overriding this method is mandatory.</span>
<a id="__codelineno-0-1885" name="__codelineno-0-1885"></a>
<a id="__codelineno-0-1886" name="__codelineno-0-1886"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-1887" name="__codelineno-0-1887"></a><span class="sd">            values: The tensor which is to be filled with the new decision</span>
<a id="__codelineno-0-1888" name="__codelineno-0-1888"></a><span class="sd">                values.</span>
<a id="__codelineno-0-1889" name="__codelineno-0-1889"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1890" name="__codelineno-0-1890"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="nb">object</span><span class="p">:</span>
<a id="__codelineno-0-1891" name="__codelineno-0-1891"></a>            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
<a id="__codelineno-0-1892" name="__codelineno-0-1892"></a>                <span class="s2">&quot;The dtype of this problem is object, therefore a manual implementation of the&quot;</span>
<a id="__codelineno-0-1893" name="__codelineno-0-1893"></a>                <span class="s2">&quot; method `_fill(...)` needs to be provided by the inheriting class.&quot;</span>
<a id="__codelineno-0-1894" name="__codelineno-0-1894"></a>            <span class="p">)</span>
<a id="__codelineno-0-1895" name="__codelineno-0-1895"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1896" name="__codelineno-0-1896"></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">initial_lower_bounds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">initial_upper_bounds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-1897" name="__codelineno-0-1897"></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
<a id="__codelineno-0-1898" name="__codelineno-0-1898"></a>                    <span class="s2">&quot;The default implementation of the method `_fill(...)` does not know how to initialize solutions&quot;</span>
<a id="__codelineno-0-1899" name="__codelineno-0-1899"></a>                    <span class="s2">&quot; because it appears that this Problem object was not given neither `initial_bounds` nor `bounds`&quot;</span>
<a id="__codelineno-0-1900" name="__codelineno-0-1900"></a>                    <span class="s2">&quot; during the moment of initialization.&quot;</span>
<a id="__codelineno-0-1901" name="__codelineno-0-1901"></a>                    <span class="s2">&quot; Please either instantiate this Problem object with `initial_bounds` and/or `bounds`, or override&quot;</span>
<a id="__codelineno-0-1902" name="__codelineno-0-1902"></a>                    <span class="s2">&quot; the method `_fill(...)` to specify how solutions should be initialized.&quot;</span>
<a id="__codelineno-0-1903" name="__codelineno-0-1903"></a>                <span class="p">)</span>
<a id="__codelineno-0-1904" name="__codelineno-0-1904"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1905" name="__codelineno-0-1905"></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_uniform</span><span class="p">(</span>
<a id="__codelineno-0-1906" name="__codelineno-0-1906"></a>                    <span class="n">out</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
<a id="__codelineno-0-1907" name="__codelineno-0-1907"></a>                    <span class="n">lb</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">initial_lower_bounds</span><span class="p">,</span>
<a id="__codelineno-0-1908" name="__codelineno-0-1908"></a>                    <span class="n">ub</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">initial_upper_bounds</span><span class="p">,</span>
<a id="__codelineno-0-1909" name="__codelineno-0-1909"></a>                <span class="p">)</span>
<a id="__codelineno-0-1910" name="__codelineno-0-1910"></a>
<a id="__codelineno-0-1911" name="__codelineno-0-1911"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_batch</span><span class="p">(</span>
<a id="__codelineno-0-1912" name="__codelineno-0-1912"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-1913" name="__codelineno-0-1913"></a>        <span class="n">popsize</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1914" name="__codelineno-0-1914"></a>        <span class="o">*</span><span class="p">,</span>
<a id="__codelineno-0-1915" name="__codelineno-0-1915"></a>        <span class="n">empty</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-1916" name="__codelineno-0-1916"></a>        <span class="n">center</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">RealOrVector</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1917" name="__codelineno-0-1917"></a>        <span class="n">stdev</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">RealOrVector</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1918" name="__codelineno-0-1918"></a>        <span class="n">symmetric</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-1919" name="__codelineno-0-1919"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SolutionBatch&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1920" name="__codelineno-0-1920"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1921" name="__codelineno-0-1921"></a><span class="sd">        Generate a new SolutionBatch.</span>
<a id="__codelineno-0-1922" name="__codelineno-0-1922"></a>
<a id="__codelineno-0-1923" name="__codelineno-0-1923"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-1924" name="__codelineno-0-1924"></a><span class="sd">            popsize: Number of solutions that will be contained in the new</span>
<a id="__codelineno-0-1925" name="__codelineno-0-1925"></a><span class="sd">                batch.</span>
<a id="__codelineno-0-1926" name="__codelineno-0-1926"></a><span class="sd">            empty: Set this as True if you would like to receive the solutions</span>
<a id="__codelineno-0-1927" name="__codelineno-0-1927"></a><span class="sd">                un-initialized.</span>
<a id="__codelineno-0-1928" name="__codelineno-0-1928"></a><span class="sd">            center: Center point of the Gaussian distribution from which</span>
<a id="__codelineno-0-1929" name="__codelineno-0-1929"></a><span class="sd">                the decision values will be sampled, as a scalar or as a</span>
<a id="__codelineno-0-1930" name="__codelineno-0-1930"></a><span class="sd">                1-dimensional vector.</span>
<a id="__codelineno-0-1931" name="__codelineno-0-1931"></a><span class="sd">                Can also be left as None.</span>
<a id="__codelineno-0-1932" name="__codelineno-0-1932"></a><span class="sd">                If `center` is None and `stdev` is None, all the decision</span>
<a id="__codelineno-0-1933" name="__codelineno-0-1933"></a><span class="sd">                values will be sampled from the interval specified by</span>
<a id="__codelineno-0-1934" name="__codelineno-0-1934"></a><span class="sd">                `initial_bounds` (or by `bounds` if `initial_bounds` was not</span>
<a id="__codelineno-0-1935" name="__codelineno-0-1935"></a><span class="sd">                specified).</span>
<a id="__codelineno-0-1936" name="__codelineno-0-1936"></a><span class="sd">                If `center` is None and `stdev` is not None, a center point</span>
<a id="__codelineno-0-1937" name="__codelineno-0-1937"></a><span class="sd">                will be sampled from within the interval specified by</span>
<a id="__codelineno-0-1938" name="__codelineno-0-1938"></a><span class="sd">                `initial_bounds` or `bounds`, and the decision values will be</span>
<a id="__codelineno-0-1939" name="__codelineno-0-1939"></a><span class="sd">                sampled from a Gaussian distribution around this center point.</span>
<a id="__codelineno-0-1940" name="__codelineno-0-1940"></a><span class="sd">            stdev: Can be None (default) if the SolutionBatch is to contain</span>
<a id="__codelineno-0-1941" name="__codelineno-0-1941"></a><span class="sd">                decision values sampled from the interval specified by</span>
<a id="__codelineno-0-1942" name="__codelineno-0-1942"></a><span class="sd">                `initial_bounds` (or by `bounds` if `initial_bounds` was not</span>
<a id="__codelineno-0-1943" name="__codelineno-0-1943"></a><span class="sd">                provided during the initialization phase).</span>
<a id="__codelineno-0-1944" name="__codelineno-0-1944"></a><span class="sd">                Alternatively, a scalar or a 1-dimensional vector specifying</span>
<a id="__codelineno-0-1945" name="__codelineno-0-1945"></a><span class="sd">                the standard deviation of the Gaussian distribution from which</span>
<a id="__codelineno-0-1946" name="__codelineno-0-1946"></a><span class="sd">                the decision values will be sampled.</span>
<a id="__codelineno-0-1947" name="__codelineno-0-1947"></a><span class="sd">            symmetric: To be used only when `stdev` is not None.</span>
<a id="__codelineno-0-1948" name="__codelineno-0-1948"></a><span class="sd">                If `symmetric` is True, decision values will be sampled from</span>
<a id="__codelineno-0-1949" name="__codelineno-0-1949"></a><span class="sd">                the Gaussian distribution in a symmetric (i.e. antithetic)</span>
<a id="__codelineno-0-1950" name="__codelineno-0-1950"></a><span class="sd">                manner.</span>
<a id="__codelineno-0-1951" name="__codelineno-0-1951"></a><span class="sd">                Otherwise, the decision values will be sampled in the</span>
<a id="__codelineno-0-1952" name="__codelineno-0-1952"></a><span class="sd">                non-antithetic manner.</span>
<a id="__codelineno-0-1953" name="__codelineno-0-1953"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1954" name="__codelineno-0-1954"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">center</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">stdev</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-1955" name="__codelineno-0-1955"></a>            <span class="k">if</span> <span class="n">symmetric</span><span class="p">:</span>
<a id="__codelineno-0-1956" name="__codelineno-0-1956"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1957" name="__codelineno-0-1957"></a>                    <span class="sa">f</span><span class="s2">&quot;The argument `symmetric` can be set as True only when `center` and `stdev` are provided.&quot;</span>
<a id="__codelineno-0-1958" name="__codelineno-0-1958"></a>                    <span class="sa">f</span><span class="s2">&quot; Although `center` and `stdev` are None, `symmetric` was received as </span><span class="si">{</span><span class="n">symmetric</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1959" name="__codelineno-0-1959"></a>                <span class="p">)</span>
<a id="__codelineno-0-1960" name="__codelineno-0-1960"></a>            <span class="k">return</span> <span class="n">SolutionBatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">popsize</span><span class="p">,</span> <span class="n">empty</span><span class="o">=</span><span class="n">empty</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-1961" name="__codelineno-0-1961"></a>        <span class="k">elif</span> <span class="p">(</span><span class="n">center</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">stdev</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-1962" name="__codelineno-0-1962"></a>            <span class="k">if</span> <span class="n">empty</span><span class="p">:</span>
<a id="__codelineno-0-1963" name="__codelineno-0-1963"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1964" name="__codelineno-0-1964"></a>                    <span class="sa">f</span><span class="s2">&quot;When `center` and `stdev` are provided, the argument `empty` must be False.&quot;</span>
<a id="__codelineno-0-1965" name="__codelineno-0-1965"></a>                    <span class="sa">f</span><span class="s2">&quot; However, the received value for `empty` is </span><span class="si">{</span><span class="n">empty</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1966" name="__codelineno-0-1966"></a>                <span class="p">)</span>
<a id="__codelineno-0-1967" name="__codelineno-0-1967"></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">SolutionBatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">popsize</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">,</span> <span class="n">empty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-1968" name="__codelineno-0-1968"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">make_gaussian</span><span class="p">(</span><span class="n">out</span><span class="o">=</span><span class="n">result</span><span class="o">.</span><span class="n">access_values</span><span class="p">(),</span> <span class="n">center</span><span class="o">=</span><span class="n">center</span><span class="p">,</span> <span class="n">stdev</span><span class="o">=</span><span class="n">stdev</span><span class="p">,</span> <span class="n">symmetric</span><span class="o">=</span><span class="n">symmetric</span><span class="p">)</span>
<a id="__codelineno-0-1969" name="__codelineno-0-1969"></a>            <span class="k">return</span> <span class="n">result</span>
<a id="__codelineno-0-1970" name="__codelineno-0-1970"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1971" name="__codelineno-0-1971"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1972" name="__codelineno-0-1972"></a>                <span class="sa">f</span><span class="s2">&quot;The arguments `center` and `stdev` were expected to be None or non-None at the same time.&quot;</span>
<a id="__codelineno-0-1973" name="__codelineno-0-1973"></a>                <span class="sa">f</span><span class="s2">&quot; Received `center`: </span><span class="si">{</span><span class="n">center</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1974" name="__codelineno-0-1974"></a>                <span class="sa">f</span><span class="s2">&quot; Received `stdev`: </span><span class="si">{</span><span class="n">stdev</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1975" name="__codelineno-0-1975"></a>            <span class="p">)</span>
<a id="__codelineno-0-1976" name="__codelineno-0-1976"></a>
<a id="__codelineno-0-1977" name="__codelineno-0-1977"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_parallelize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-1978" name="__codelineno-0-1978"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create ray actors for parallelizing the solution evaluations.&quot;&quot;&quot;</span>
<a id="__codelineno-0-1979" name="__codelineno-0-1979"></a>
<a id="__codelineno-0-1980" name="__codelineno-0-1980"></a>        <span class="c1"># If the problem was explicitly configured for</span>
<a id="__codelineno-0-1981" name="__codelineno-0-1981"></a>        <span class="c1"># NOT having parallelization, leave this function.</span>
<a id="__codelineno-0-1982" name="__codelineno-0-1982"></a>        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span><span class="p">,</span> <span class="nb">str</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span>
<a id="__codelineno-0-1983" name="__codelineno-0-1983"></a>            <span class="k">return</span>
<a id="__codelineno-0-1984" name="__codelineno-0-1984"></a>
<a id="__codelineno-0-1985" name="__codelineno-0-1985"></a>        <span class="c1"># If this problem object is a remote one,</span>
<a id="__codelineno-0-1986" name="__codelineno-0-1986"></a>        <span class="c1"># leave this function</span>
<a id="__codelineno-0-1987" name="__codelineno-0-1987"></a>        <span class="c1"># (because we do not want the remote worker</span>
<a id="__codelineno-0-1988" name="__codelineno-0-1988"></a>        <span class="c1"># to parallelize itself further)</span>
<a id="__codelineno-0-1989" name="__codelineno-0-1989"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actor_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1990" name="__codelineno-0-1990"></a>            <span class="k">return</span>
<a id="__codelineno-0-1991" name="__codelineno-0-1991"></a>
<a id="__codelineno-0-1992" name="__codelineno-0-1992"></a>        <span class="c1"># If the actors list is not None, then this means</span>
<a id="__codelineno-0-1993" name="__codelineno-0-1993"></a>        <span class="c1"># that the initialization of the parallelization mechanism</span>
<a id="__codelineno-0-1994" name="__codelineno-0-1994"></a>        <span class="c1"># was already completed. So, leave this function.</span>
<a id="__codelineno-0-1995" name="__codelineno-0-1995"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1996" name="__codelineno-0-1996"></a>            <span class="k">return</span>
<a id="__codelineno-0-1997" name="__codelineno-0-1997"></a>
<a id="__codelineno-0-1998" name="__codelineno-0-1998"></a>        <span class="c1"># Make sure that ray is initialized</span>
<a id="__codelineno-0-1999" name="__codelineno-0-1999"></a>        <span class="n">ensure_ray</span><span class="p">()</span>
<a id="__codelineno-0-2000" name="__codelineno-0-2000"></a>        <span class="n">number_of_actors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span>
<a id="__codelineno-0-2001" name="__codelineno-0-2001"></a>
<a id="__codelineno-0-2002" name="__codelineno-0-2002"></a>        <span class="c1"># numpy&#39;s RandomState uses 32-bit unsigned integers</span>
<a id="__codelineno-0-2003" name="__codelineno-0-2003"></a>        <span class="c1"># for random seeds.</span>
<a id="__codelineno-0-2004" name="__codelineno-0-2004"></a>        <span class="c1"># So, the following value is the exclusive upper bound</span>
<a id="__codelineno-0-2005" name="__codelineno-0-2005"></a>        <span class="c1"># for a random seed.</span>
<a id="__codelineno-0-2006" name="__codelineno-0-2006"></a>        <span class="n">supremum_seed</span> <span class="o">=</span> <span class="mi">2</span><span class="o">**</span><span class="mi">32</span>
<a id="__codelineno-0-2007" name="__codelineno-0-2007"></a>
<a id="__codelineno-0-2008" name="__codelineno-0-2008"></a>        <span class="c1"># Generate an integer from the main problem object&#39;s</span>
<a id="__codelineno-0-2009" name="__codelineno-0-2009"></a>        <span class="c1"># random_state. From this integer, further seed integers</span>
<a id="__codelineno-0-2010" name="__codelineno-0-2010"></a>        <span class="c1"># will be computed, and these generated seeds will be</span>
<a id="__codelineno-0-2011" name="__codelineno-0-2011"></a>        <span class="c1"># used by the remote actors.</span>
<a id="__codelineno-0-2012" name="__codelineno-0-2012"></a>        <span class="n">base_seed</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">make_randint</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(),</span> <span class="n">n</span><span class="o">=</span><span class="n">supremum_seed</span><span class="p">))</span>
<a id="__codelineno-0-2013" name="__codelineno-0-2013"></a>
<a id="__codelineno-0-2014" name="__codelineno-0-2014"></a>        <span class="c1"># The following function returns a seed number for the actor</span>
<a id="__codelineno-0-2015" name="__codelineno-0-2015"></a>        <span class="c1"># number i.</span>
<a id="__codelineno-0-2016" name="__codelineno-0-2016"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">generate_actor_seed</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
<a id="__codelineno-0-2017" name="__codelineno-0-2017"></a>            <span class="k">nonlocal</span> <span class="n">base_seed</span><span class="p">,</span> <span class="n">supremum_seed</span>
<a id="__codelineno-0-2018" name="__codelineno-0-2018"></a>            <span class="k">return</span> <span class="p">(</span><span class="n">base_seed</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="o">%</span> <span class="n">supremum_seed</span>
<a id="__codelineno-0-2019" name="__codelineno-0-2019"></a>
<a id="__codelineno-0-2020" name="__codelineno-0-2020"></a>        <span class="n">all_seeds</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-2021" name="__codelineno-0-2021"></a>        <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-2022" name="__codelineno-0-2022"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">number_of_actors</span><span class="p">):</span>
<a id="__codelineno-0-2023" name="__codelineno-0-2023"></a>            <span class="n">actor_seeds</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-2024" name="__codelineno-0-2024"></a>            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
<a id="__codelineno-0-2025" name="__codelineno-0-2025"></a>                <span class="n">actor_seeds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">generate_actor_seed</span><span class="p">(</span><span class="n">j</span><span class="p">))</span>
<a id="__codelineno-0-2026" name="__codelineno-0-2026"></a>                <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-0-2027" name="__codelineno-0-2027"></a>            <span class="n">all_seeds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">actor_seeds</span><span class="p">))</span>
<a id="__codelineno-0-2028" name="__codelineno-0-2028"></a>
<a id="__codelineno-0-2029" name="__codelineno-0-2029"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remote_states</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2030" name="__codelineno-0-2030"></a>            <span class="n">remote_states</span> <span class="o">=</span> <span class="p">[{}</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">number_of_actors</span><span class="p">)]</span>
<a id="__codelineno-0-2031" name="__codelineno-0-2031"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2032" name="__codelineno-0-2032"></a>            <span class="n">remote_states</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remote_states</span>
<a id="__codelineno-0-2033" name="__codelineno-0-2033"></a>
<a id="__codelineno-0-2034" name="__codelineno-0-2034"></a>        <span class="c1"># Prepare the necessary actor config</span>
<a id="__codelineno-0-2035" name="__codelineno-0-2035"></a>        <span class="n">config_per_actor</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-2036" name="__codelineno-0-2036"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actor_config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2037" name="__codelineno-0-2037"></a>            <span class="n">config_per_actor</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_actor_config</span><span class="p">)</span>
<a id="__codelineno-0-2038" name="__codelineno-0-2038"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_gpus_per_actor</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
<a id="__codelineno-0-2039" name="__codelineno-0-2039"></a>            <span class="n">config_per_actor</span><span class="p">[</span><span class="s2">&quot;num_gpus&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_gpus_per_actor</span>
<a id="__codelineno-0-2040" name="__codelineno-0-2040"></a>
<a id="__codelineno-0-2041" name="__codelineno-0-2041"></a>        <span class="c1"># Generate the actors, each with a unique seed.</span>
<a id="__codelineno-0-2042" name="__codelineno-0-2042"></a>        <span class="k">if</span> <span class="n">config_per_actor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2043" name="__codelineno-0-2043"></a>            <span class="n">actors</span> <span class="o">=</span> <span class="p">[</span><span class="n">EvaluationActor</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">all_seeds</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">remote_states</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">number_of_actors</span><span class="p">)]</span>
<a id="__codelineno-0-2044" name="__codelineno-0-2044"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2045" name="__codelineno-0-2045"></a>            <span class="n">actors</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-2046" name="__codelineno-0-2046"></a>                <span class="n">EvaluationActor</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="o">**</span><span class="n">config_per_actor</span><span class="p">)</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">all_seeds</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">remote_states</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
<a id="__codelineno-0-2047" name="__codelineno-0-2047"></a>                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">number_of_actors</span><span class="p">)</span>
<a id="__codelineno-0-2048" name="__codelineno-0-2048"></a>            <span class="p">]</span>
<a id="__codelineno-0-2049" name="__codelineno-0-2049"></a>
<a id="__codelineno-0-2050" name="__codelineno-0-2050"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_actors</span> <span class="o">=</span> <span class="n">actors</span>
<a id="__codelineno-0-2051" name="__codelineno-0-2051"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_actor_pool</span> <span class="o">=</span> <span class="n">ActorPool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_actors</span><span class="p">)</span>
<a id="__codelineno-0-2052" name="__codelineno-0-2052"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_remote_states</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-2053" name="__codelineno-0-2053"></a>
<a id="__codelineno-0-2054" name="__codelineno-0-2054"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">all_remote_problems</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AllRemoteProblems</span><span class="p">:</span>
<a id="__codelineno-0-2055" name="__codelineno-0-2055"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2056" name="__codelineno-0-2056"></a><span class="sd">        Get an accessor which is used for running a method</span>
<a id="__codelineno-0-2057" name="__codelineno-0-2057"></a><span class="sd">        on all remote clones of this Problem object.</span>
<a id="__codelineno-0-2058" name="__codelineno-0-2058"></a>
<a id="__codelineno-0-2059" name="__codelineno-0-2059"></a><span class="sd">        For example, given a Problem object named `my_problem`,</span>
<a id="__codelineno-0-2060" name="__codelineno-0-2060"></a><span class="sd">        also assuming that this Problem object is parallelized,</span>
<a id="__codelineno-0-2061" name="__codelineno-0-2061"></a><span class="sd">        and therefore has `n` remote actors, a method `f()`</span>
<a id="__codelineno-0-2062" name="__codelineno-0-2062"></a><span class="sd">        can be executed on all the remote instances as follows:</span>
<a id="__codelineno-0-2063" name="__codelineno-0-2063"></a>
<a id="__codelineno-0-2064" name="__codelineno-0-2064"></a><span class="sd">            results = my_problem.all_remote_problems().f()</span>
<a id="__codelineno-0-2065" name="__codelineno-0-2065"></a>
<a id="__codelineno-0-2066" name="__codelineno-0-2066"></a><span class="sd">        The variable `results` is a list of length `n`, the i-th</span>
<a id="__codelineno-0-2067" name="__codelineno-0-2067"></a><span class="sd">        item of the list belonging to the method f&#39;s result</span>
<a id="__codelineno-0-2068" name="__codelineno-0-2068"></a><span class="sd">        from the i-th actor.</span>
<a id="__codelineno-0-2069" name="__codelineno-0-2069"></a>
<a id="__codelineno-0-2070" name="__codelineno-0-2070"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-2071" name="__codelineno-0-2071"></a><span class="sd">            A method accessor for all the remote Problem objects.</span>
<a id="__codelineno-0-2072" name="__codelineno-0-2072"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2073" name="__codelineno-0-2073"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_parallelize</span><span class="p">()</span>
<a id="__codelineno-0-2074" name="__codelineno-0-2074"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_remote</span><span class="p">:</span>
<a id="__codelineno-0-2075" name="__codelineno-0-2075"></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
<a id="__codelineno-0-2076" name="__codelineno-0-2076"></a>                <span class="s2">&quot;The method `all_remote_problems()` can only be used on the main (i.e. non-remote)&quot;</span>
<a id="__codelineno-0-2077" name="__codelineno-0-2077"></a>                <span class="s2">&quot; Problem instance.&quot;</span>
<a id="__codelineno-0-2078" name="__codelineno-0-2078"></a>                <span class="s2">&quot; However, this Problem instance is on a remote actor.&quot;</span>
<a id="__codelineno-0-2079" name="__codelineno-0-2079"></a>            <span class="p">)</span>
<a id="__codelineno-0-2080" name="__codelineno-0-2080"></a>        <span class="k">return</span> <span class="n">AllRemoteProblems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_actors</span><span class="p">)</span>
<a id="__codelineno-0-2081" name="__codelineno-0-2081"></a>
<a id="__codelineno-0-2082" name="__codelineno-0-2082"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">all_remote_envs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AllRemoteEnvs</span><span class="p">:</span>
<a id="__codelineno-0-2083" name="__codelineno-0-2083"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2084" name="__codelineno-0-2084"></a><span class="sd">        Get an accessor which is used for running a method</span>
<a id="__codelineno-0-2085" name="__codelineno-0-2085"></a><span class="sd">        on all remote reinforcement learning environments.</span>
<a id="__codelineno-0-2086" name="__codelineno-0-2086"></a>
<a id="__codelineno-0-2087" name="__codelineno-0-2087"></a><span class="sd">        This method can only be used on parallelized Problem</span>
<a id="__codelineno-0-2088" name="__codelineno-0-2088"></a><span class="sd">        objects which have their `get_env()` methods defined.</span>
<a id="__codelineno-0-2089" name="__codelineno-0-2089"></a><span class="sd">        For example, one can use this feature on a parallelized</span>
<a id="__codelineno-0-2090" name="__codelineno-0-2090"></a><span class="sd">        GymProblem.</span>
<a id="__codelineno-0-2091" name="__codelineno-0-2091"></a>
<a id="__codelineno-0-2092" name="__codelineno-0-2092"></a><span class="sd">        As an example, let us consider a parallelized GymProblem</span>
<a id="__codelineno-0-2093" name="__codelineno-0-2093"></a><span class="sd">        object named `my_problem`. Given that `my_problem` has</span>
<a id="__codelineno-0-2094" name="__codelineno-0-2094"></a><span class="sd">        `n` remote actors, a method `f()` can be executed</span>
<a id="__codelineno-0-2095" name="__codelineno-0-2095"></a><span class="sd">        on all remote reinforcement learning environments as</span>
<a id="__codelineno-0-2096" name="__codelineno-0-2096"></a><span class="sd">        follows:</span>
<a id="__codelineno-0-2097" name="__codelineno-0-2097"></a>
<a id="__codelineno-0-2098" name="__codelineno-0-2098"></a><span class="sd">            results = my_problem.all_remote_envs().f()</span>
<a id="__codelineno-0-2099" name="__codelineno-0-2099"></a>
<a id="__codelineno-0-2100" name="__codelineno-0-2100"></a><span class="sd">        The variable `results` is a list of length `n`, the i-th</span>
<a id="__codelineno-0-2101" name="__codelineno-0-2101"></a><span class="sd">        item of the list belonging to the method f&#39;s result</span>
<a id="__codelineno-0-2102" name="__codelineno-0-2102"></a><span class="sd">        from the i-th actor.</span>
<a id="__codelineno-0-2103" name="__codelineno-0-2103"></a>
<a id="__codelineno-0-2104" name="__codelineno-0-2104"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-2105" name="__codelineno-0-2105"></a><span class="sd">            A method accessor for all the remote reinforcement</span>
<a id="__codelineno-0-2106" name="__codelineno-0-2106"></a><span class="sd">            learning environments.</span>
<a id="__codelineno-0-2107" name="__codelineno-0-2107"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2108" name="__codelineno-0-2108"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_parallelize</span><span class="p">()</span>
<a id="__codelineno-0-2109" name="__codelineno-0-2109"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_remote</span><span class="p">:</span>
<a id="__codelineno-0-2110" name="__codelineno-0-2110"></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
<a id="__codelineno-0-2111" name="__codelineno-0-2111"></a>                <span class="s2">&quot;The method `all_remote_envs()` can only be used on the main (i.e. non-remote)&quot;</span>
<a id="__codelineno-0-2112" name="__codelineno-0-2112"></a>                <span class="s2">&quot; Problem instance.&quot;</span>
<a id="__codelineno-0-2113" name="__codelineno-0-2113"></a>                <span class="s2">&quot; However, this Problem instance is on a remote actor.&quot;</span>
<a id="__codelineno-0-2114" name="__codelineno-0-2114"></a>            <span class="p">)</span>
<a id="__codelineno-0-2115" name="__codelineno-0-2115"></a>        <span class="k">return</span> <span class="n">AllRemoteEnvs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_actors</span><span class="p">)</span>
<a id="__codelineno-0-2116" name="__codelineno-0-2116"></a>
<a id="__codelineno-0-2117" name="__codelineno-0-2117"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">kill_actors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-2118" name="__codelineno-0-2118"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2119" name="__codelineno-0-2119"></a><span class="sd">        Kill all the remote actors used by the Problem instance.</span>
<a id="__codelineno-0-2120" name="__codelineno-0-2120"></a>
<a id="__codelineno-0-2121" name="__codelineno-0-2121"></a><span class="sd">        One might use this method to release the resources used by the</span>
<a id="__codelineno-0-2122" name="__codelineno-0-2122"></a><span class="sd">        remote actors.</span>
<a id="__codelineno-0-2123" name="__codelineno-0-2123"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2124" name="__codelineno-0-2124"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_main</span><span class="p">:</span>
<a id="__codelineno-0-2125" name="__codelineno-0-2125"></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
<a id="__codelineno-0-2126" name="__codelineno-0-2126"></a>                <span class="s2">&quot;The method `kill_actors()` can only be used on the main (i.e. non-remote)&quot;</span>
<a id="__codelineno-0-2127" name="__codelineno-0-2127"></a>                <span class="s2">&quot; Problem instance.&quot;</span>
<a id="__codelineno-0-2128" name="__codelineno-0-2128"></a>                <span class="s2">&quot; However, this Problem instance is on a remote actor.&quot;</span>
<a id="__codelineno-0-2129" name="__codelineno-0-2129"></a>            <span class="p">)</span>
<a id="__codelineno-0-2130" name="__codelineno-0-2130"></a>        <span class="k">for</span> <span class="n">actor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actors</span><span class="p">:</span>
<a id="__codelineno-0-2131" name="__codelineno-0-2131"></a>            <span class="n">ray</span><span class="o">.</span><span class="n">kill</span><span class="p">(</span><span class="n">actor</span><span class="p">)</span>
<a id="__codelineno-0-2132" name="__codelineno-0-2132"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_actors</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-2133" name="__codelineno-0-2133"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_actor_pool</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-2134" name="__codelineno-0-2134"></a>
<a id="__codelineno-0-2135" name="__codelineno-0-2135"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-2136" name="__codelineno-0-2136"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">num_actors</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-2137" name="__codelineno-0-2137"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2138" name="__codelineno-0-2138"></a><span class="sd">        Number of actors (to be) used for parallelization.</span>
<a id="__codelineno-0-2139" name="__codelineno-0-2139"></a><span class="sd">        If the problem is configured for no parallelization,</span>
<a id="__codelineno-0-2140" name="__codelineno-0-2140"></a><span class="sd">        the result will be 0.</span>
<a id="__codelineno-0-2141" name="__codelineno-0-2141"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2142" name="__codelineno-0-2142"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span>
<a id="__codelineno-0-2143" name="__codelineno-0-2143"></a>
<a id="__codelineno-0-2144" name="__codelineno-0-2144"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-2145" name="__codelineno-0-2145"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">actors</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]:</span>
<a id="__codelineno-0-2146" name="__codelineno-0-2146"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2147" name="__codelineno-0-2147"></a><span class="sd">        Get the ray actors, if the Problem object is distributed.</span>
<a id="__codelineno-0-2148" name="__codelineno-0-2148"></a><span class="sd">        If the Problem object is not distributed and therefore</span>
<a id="__codelineno-0-2149" name="__codelineno-0-2149"></a><span class="sd">        has no actors, then, the result will be None.</span>
<a id="__codelineno-0-2150" name="__codelineno-0-2150"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2151" name="__codelineno-0-2151"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actors</span>
<a id="__codelineno-0-2152" name="__codelineno-0-2152"></a>
<a id="__codelineno-0-2153" name="__codelineno-0-2153"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-2154" name="__codelineno-0-2154"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">actor_index</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-0-2155" name="__codelineno-0-2155"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the actor index if this is a remote worker.</span>
<a id="__codelineno-0-2156" name="__codelineno-0-2156"></a><span class="sd">        If this is not a remote worker, return None.</span>
<a id="__codelineno-0-2157" name="__codelineno-0-2157"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2158" name="__codelineno-0-2158"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actor_index</span>
<a id="__codelineno-0-2159" name="__codelineno-0-2159"></a>
<a id="__codelineno-0-2160" name="__codelineno-0-2160"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-2161" name="__codelineno-0-2161"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_remote</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-2162" name="__codelineno-0-2162"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if this problem object lives in a remote ray actor.</span>
<a id="__codelineno-0-2163" name="__codelineno-0-2163"></a><span class="sd">        Otherwise, returns False.</span>
<a id="__codelineno-0-2164" name="__codelineno-0-2164"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2165" name="__codelineno-0-2165"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actor_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-2166" name="__codelineno-0-2166"></a>
<a id="__codelineno-0-2167" name="__codelineno-0-2167"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-2168" name="__codelineno-0-2168"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_main</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-2169" name="__codelineno-0-2169"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if this problem object lives in the main process</span>
<a id="__codelineno-0-2170" name="__codelineno-0-2170"></a><span class="sd">        and not in a remote actor.</span>
<a id="__codelineno-0-2171" name="__codelineno-0-2171"></a><span class="sd">        Otherwise, returns False.</span>
<a id="__codelineno-0-2172" name="__codelineno-0-2172"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2173" name="__codelineno-0-2173"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actor_index</span> <span class="ow">is</span> <span class="kc">None</span>
<a id="__codelineno-0-2174" name="__codelineno-0-2174"></a>
<a id="__codelineno-0-2175" name="__codelineno-0-2175"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-2176" name="__codelineno-0-2176"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">before_eval_hook</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hook</span><span class="p">:</span>
<a id="__codelineno-0-2177" name="__codelineno-0-2177"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2178" name="__codelineno-0-2178"></a><span class="sd">        Get the Hook which stores the functions to call just before</span>
<a id="__codelineno-0-2179" name="__codelineno-0-2179"></a><span class="sd">        evaluating a SolutionBatch.</span>
<a id="__codelineno-0-2180" name="__codelineno-0-2180"></a>
<a id="__codelineno-0-2181" name="__codelineno-0-2181"></a><span class="sd">        The functions to be stored in this hook are expected to</span>
<a id="__codelineno-0-2182" name="__codelineno-0-2182"></a><span class="sd">        accept one positional argument, that one argument being the</span>
<a id="__codelineno-0-2183" name="__codelineno-0-2183"></a><span class="sd">        SolutionBatch which is about to be evaluated.</span>
<a id="__codelineno-0-2184" name="__codelineno-0-2184"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2185" name="__codelineno-0-2185"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_before_eval_hook</span>
<a id="__codelineno-0-2186" name="__codelineno-0-2186"></a>
<a id="__codelineno-0-2187" name="__codelineno-0-2187"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-2188" name="__codelineno-0-2188"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">after_eval_hook</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hook</span><span class="p">:</span>
<a id="__codelineno-0-2189" name="__codelineno-0-2189"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2190" name="__codelineno-0-2190"></a><span class="sd">        Get the Hook which stores the functions to call just after</span>
<a id="__codelineno-0-2191" name="__codelineno-0-2191"></a><span class="sd">        evaluating a SolutionBatch.</span>
<a id="__codelineno-0-2192" name="__codelineno-0-2192"></a>
<a id="__codelineno-0-2193" name="__codelineno-0-2193"></a><span class="sd">        The functions to be stored in this hook are expected to</span>
<a id="__codelineno-0-2194" name="__codelineno-0-2194"></a><span class="sd">        accept one argument, that one argument being the SolutionBatch</span>
<a id="__codelineno-0-2195" name="__codelineno-0-2195"></a><span class="sd">        whose evaluation has just been completed.</span>
<a id="__codelineno-0-2196" name="__codelineno-0-2196"></a>
<a id="__codelineno-0-2197" name="__codelineno-0-2197"></a><span class="sd">        The dictionaries returned by the functions in this hook</span>
<a id="__codelineno-0-2198" name="__codelineno-0-2198"></a><span class="sd">        are accumulated, and reported in the status dictionary of this</span>
<a id="__codelineno-0-2199" name="__codelineno-0-2199"></a><span class="sd">        problem object.</span>
<a id="__codelineno-0-2200" name="__codelineno-0-2200"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2201" name="__codelineno-0-2201"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_after_eval_hook</span>
<a id="__codelineno-0-2202" name="__codelineno-0-2202"></a>
<a id="__codelineno-0-2203" name="__codelineno-0-2203"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-2204" name="__codelineno-0-2204"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">before_grad_hook</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hook</span><span class="p">:</span>
<a id="__codelineno-0-2205" name="__codelineno-0-2205"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2206" name="__codelineno-0-2206"></a><span class="sd">        Get the Hook which stores the functions to call just before</span>
<a id="__codelineno-0-2207" name="__codelineno-0-2207"></a><span class="sd">        its `sample_and_compute_gradients(...)` operation.</span>
<a id="__codelineno-0-2208" name="__codelineno-0-2208"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2209" name="__codelineno-0-2209"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_before_grad_hook</span>
<a id="__codelineno-0-2210" name="__codelineno-0-2210"></a>
<a id="__codelineno-0-2211" name="__codelineno-0-2211"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-2212" name="__codelineno-0-2212"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">after_grad_hook</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hook</span><span class="p">:</span>
<a id="__codelineno-0-2213" name="__codelineno-0-2213"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2214" name="__codelineno-0-2214"></a><span class="sd">        Get the Hook which stores the functions to call just after</span>
<a id="__codelineno-0-2215" name="__codelineno-0-2215"></a><span class="sd">        its `sample_and_compute_gradients(...)` operation.</span>
<a id="__codelineno-0-2216" name="__codelineno-0-2216"></a>
<a id="__codelineno-0-2217" name="__codelineno-0-2217"></a><span class="sd">        The functions to be stored in this hook are expected to</span>
<a id="__codelineno-0-2218" name="__codelineno-0-2218"></a><span class="sd">        accept one argument, that one argument being the gradients</span>
<a id="__codelineno-0-2219" name="__codelineno-0-2219"></a><span class="sd">        dictionary (which was produced by the Problem object,</span>
<a id="__codelineno-0-2220" name="__codelineno-0-2220"></a><span class="sd">        but not yet followed by the search algorithm).</span>
<a id="__codelineno-0-2221" name="__codelineno-0-2221"></a>
<a id="__codelineno-0-2222" name="__codelineno-0-2222"></a><span class="sd">        The dictionaries returned by the functions in this hook</span>
<a id="__codelineno-0-2223" name="__codelineno-0-2223"></a><span class="sd">        are accumulated, and reported in the status dictionary of this</span>
<a id="__codelineno-0-2224" name="__codelineno-0-2224"></a><span class="sd">        problem object.</span>
<a id="__codelineno-0-2225" name="__codelineno-0-2225"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2226" name="__codelineno-0-2226"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_after_grad_hook</span>
<a id="__codelineno-0-2227" name="__codelineno-0-2227"></a>
<a id="__codelineno-0-2228" name="__codelineno-0-2228"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-2229" name="__codelineno-0-2229"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">remote_hook</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Hook</span><span class="p">:</span>
<a id="__codelineno-0-2230" name="__codelineno-0-2230"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2231" name="__codelineno-0-2231"></a><span class="sd">        Get the Hook which stores the functions to call when this</span>
<a id="__codelineno-0-2232" name="__codelineno-0-2232"></a><span class="sd">        Problem object is (re)created on a remote actor.</span>
<a id="__codelineno-0-2233" name="__codelineno-0-2233"></a>
<a id="__codelineno-0-2234" name="__codelineno-0-2234"></a><span class="sd">        The functions in this hook should expect one positional</span>
<a id="__codelineno-0-2235" name="__codelineno-0-2235"></a><span class="sd">        argument, that is the Problem object itself.</span>
<a id="__codelineno-0-2236" name="__codelineno-0-2236"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2237" name="__codelineno-0-2237"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remote_hook</span>
<a id="__codelineno-0-2238" name="__codelineno-0-2238"></a>
<a id="__codelineno-0-2239" name="__codelineno-0-2239"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_make_sync_data_for_actors</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<a id="__codelineno-0-2240" name="__codelineno-0-2240"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2241" name="__codelineno-0-2241"></a><span class="sd">        Override this function for providing synchronization between</span>
<a id="__codelineno-0-2242" name="__codelineno-0-2242"></a><span class="sd">        the main process and the remote actors.</span>
<a id="__codelineno-0-2243" name="__codelineno-0-2243"></a>
<a id="__codelineno-0-2244" name="__codelineno-0-2244"></a><span class="sd">        The responsibility of this function is to prepare and return the</span>
<a id="__codelineno-0-2245" name="__codelineno-0-2245"></a><span class="sd">        data to be sent to the remote actors for synchronization.</span>
<a id="__codelineno-0-2246" name="__codelineno-0-2246"></a>
<a id="__codelineno-0-2247" name="__codelineno-0-2247"></a><span class="sd">        If this function returns NotImplemented, then there will be no</span>
<a id="__codelineno-0-2248" name="__codelineno-0-2248"></a><span class="sd">        syncing.</span>
<a id="__codelineno-0-2249" name="__codelineno-0-2249"></a><span class="sd">        If this function returns None, there will be no data sent to the</span>
<a id="__codelineno-0-2250" name="__codelineno-0-2250"></a><span class="sd">        actors for syncing, however, syncing will still be enabled, and</span>
<a id="__codelineno-0-2251" name="__codelineno-0-2251"></a><span class="sd">        the main actor will ask for sync data from the remote actors</span>
<a id="__codelineno-0-2252" name="__codelineno-0-2252"></a><span class="sd">        after their jobs are finished.</span>
<a id="__codelineno-0-2253" name="__codelineno-0-2253"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2254" name="__codelineno-0-2254"></a>        <span class="k">return</span> <span class="bp">NotImplemented</span>
<a id="__codelineno-0-2255" name="__codelineno-0-2255"></a>
<a id="__codelineno-0-2256" name="__codelineno-0-2256"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_use_sync_data_from_main</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">received</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<a id="__codelineno-0-2257" name="__codelineno-0-2257"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2258" name="__codelineno-0-2258"></a><span class="sd">        Override this function for providing synchronization between</span>
<a id="__codelineno-0-2259" name="__codelineno-0-2259"></a><span class="sd">        the main process and the remote actors.</span>
<a id="__codelineno-0-2260" name="__codelineno-0-2260"></a>
<a id="__codelineno-0-2261" name="__codelineno-0-2261"></a><span class="sd">        The responsibility of this function is to update the state</span>
<a id="__codelineno-0-2262" name="__codelineno-0-2262"></a><span class="sd">        of the remote Problem object according to the synchronization</span>
<a id="__codelineno-0-2263" name="__codelineno-0-2263"></a><span class="sd">        data received by the main process.</span>
<a id="__codelineno-0-2264" name="__codelineno-0-2264"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2265" name="__codelineno-0-2265"></a>        <span class="k">pass</span>
<a id="__codelineno-0-2266" name="__codelineno-0-2266"></a>
<a id="__codelineno-0-2267" name="__codelineno-0-2267"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_make_sync_data_for_main</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<a id="__codelineno-0-2268" name="__codelineno-0-2268"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2269" name="__codelineno-0-2269"></a><span class="sd">        Override this function for providing synchronization between</span>
<a id="__codelineno-0-2270" name="__codelineno-0-2270"></a><span class="sd">        the main process and the remote actors.</span>
<a id="__codelineno-0-2271" name="__codelineno-0-2271"></a>
<a id="__codelineno-0-2272" name="__codelineno-0-2272"></a><span class="sd">        The responsibility of this function is to prepare and return the</span>
<a id="__codelineno-0-2273" name="__codelineno-0-2273"></a><span class="sd">        data to be sent to the main Problem object by a remote actor.</span>
<a id="__codelineno-0-2274" name="__codelineno-0-2274"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2275" name="__codelineno-0-2275"></a>        <span class="k">return</span> <span class="bp">NotImplemented</span>
<a id="__codelineno-0-2276" name="__codelineno-0-2276"></a>
<a id="__codelineno-0-2277" name="__codelineno-0-2277"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_use_sync_data_from_actors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">received</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-2278" name="__codelineno-0-2278"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2279" name="__codelineno-0-2279"></a><span class="sd">        Override this function for providing synchronization between</span>
<a id="__codelineno-0-2280" name="__codelineno-0-2280"></a><span class="sd">        the main process and the remote actors.</span>
<a id="__codelineno-0-2281" name="__codelineno-0-2281"></a>
<a id="__codelineno-0-2282" name="__codelineno-0-2282"></a><span class="sd">        The responsibility of this function is to update the state</span>
<a id="__codelineno-0-2283" name="__codelineno-0-2283"></a><span class="sd">        of the main Problem object according to the synchronization</span>
<a id="__codelineno-0-2284" name="__codelineno-0-2284"></a><span class="sd">        data received by the remote actors.</span>
<a id="__codelineno-0-2285" name="__codelineno-0-2285"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2286" name="__codelineno-0-2286"></a>        <span class="k">pass</span>
<a id="__codelineno-0-2287" name="__codelineno-0-2287"></a>
<a id="__codelineno-0-2288" name="__codelineno-0-2288"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_make_pickle_data_for_main</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-2289" name="__codelineno-0-2289"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2290" name="__codelineno-0-2290"></a><span class="sd">        Override this function for preserving the state of a remote</span>
<a id="__codelineno-0-2291" name="__codelineno-0-2291"></a><span class="sd">        actor in the main state dictionary when pickling a parallelized</span>
<a id="__codelineno-0-2292" name="__codelineno-0-2292"></a><span class="sd">        problem.</span>
<a id="__codelineno-0-2293" name="__codelineno-0-2293"></a>
<a id="__codelineno-0-2294" name="__codelineno-0-2294"></a><span class="sd">        The responsibility of this function is to return the state</span>
<a id="__codelineno-0-2295" name="__codelineno-0-2295"></a><span class="sd">        of a problem object which lives in a remote actor.</span>
<a id="__codelineno-0-2296" name="__codelineno-0-2296"></a>
<a id="__codelineno-0-2297" name="__codelineno-0-2297"></a><span class="sd">        If the remote clones of this problem do not need to be stateful</span>
<a id="__codelineno-0-2298" name="__codelineno-0-2298"></a><span class="sd">        then you probably do not need to override this method.</span>
<a id="__codelineno-0-2299" name="__codelineno-0-2299"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2300" name="__codelineno-0-2300"></a>        <span class="k">return</span> <span class="p">{}</span>
<a id="__codelineno-0-2301" name="__codelineno-0-2301"></a>
<a id="__codelineno-0-2302" name="__codelineno-0-2302"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_use_pickle_data_from_main</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-2303" name="__codelineno-0-2303"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2304" name="__codelineno-0-2304"></a><span class="sd">        Override this function for re-creating the internal state of</span>
<a id="__codelineno-0-2305" name="__codelineno-0-2305"></a><span class="sd">        a problem instance living in a remote actor, by using the</span>
<a id="__codelineno-0-2306" name="__codelineno-0-2306"></a><span class="sd">        given state dictionary.</span>
<a id="__codelineno-0-2307" name="__codelineno-0-2307"></a>
<a id="__codelineno-0-2308" name="__codelineno-0-2308"></a><span class="sd">        If the remote clones of this problem do not need to be stateful</span>
<a id="__codelineno-0-2309" name="__codelineno-0-2309"></a><span class="sd">        then you probably do not need to override this method.</span>
<a id="__codelineno-0-2310" name="__codelineno-0-2310"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2311" name="__codelineno-0-2311"></a>        <span class="k">pass</span>
<a id="__codelineno-0-2312" name="__codelineno-0-2312"></a>
<a id="__codelineno-0-2313" name="__codelineno-0-2313"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_sync_before</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-2314" name="__codelineno-0-2314"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2315" name="__codelineno-0-2315"></a>            <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-2316" name="__codelineno-0-2316"></a>
<a id="__codelineno-0-2317" name="__codelineno-0-2317"></a>        <span class="n">to_send</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_sync_data_for_actors</span><span class="p">()</span>
<a id="__codelineno-0-2318" name="__codelineno-0-2318"></a>        <span class="k">if</span> <span class="n">to_send</span> <span class="ow">is</span> <span class="bp">NotImplemented</span><span class="p">:</span>
<a id="__codelineno-0-2319" name="__codelineno-0-2319"></a>            <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-2320" name="__codelineno-0-2320"></a>
<a id="__codelineno-0-2321" name="__codelineno-0-2321"></a>        <span class="k">if</span> <span class="n">to_send</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2322" name="__codelineno-0-2322"></a>            <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="n">actor</span><span class="o">.</span><span class="n">call</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="s2">&quot;_use_sync_data_from_main&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">to_send</span><span class="p">],</span> <span class="p">{})</span> <span class="k">for</span> <span class="n">actor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actors</span><span class="p">])</span>
<a id="__codelineno-0-2323" name="__codelineno-0-2323"></a>
<a id="__codelineno-0-2324" name="__codelineno-0-2324"></a>        <span class="k">return</span> <span class="kc">True</span>
<a id="__codelineno-0-2325" name="__codelineno-0-2325"></a>
<a id="__codelineno-0-2326" name="__codelineno-0-2326"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_sync_after</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-2327" name="__codelineno-0-2327"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2328" name="__codelineno-0-2328"></a>            <span class="k">return</span>
<a id="__codelineno-0-2329" name="__codelineno-0-2329"></a>
<a id="__codelineno-0-2330" name="__codelineno-0-2330"></a>        <span class="n">received</span> <span class="o">=</span> <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="n">actor</span><span class="o">.</span><span class="n">call</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="s2">&quot;_make_sync_data_for_main&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{})</span> <span class="k">for</span> <span class="n">actor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actors</span><span class="p">])</span>
<a id="__codelineno-0-2331" name="__codelineno-0-2331"></a>
<a id="__codelineno-0-2332" name="__codelineno-0-2332"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_use_sync_data_from_actors</span><span class="p">(</span><span class="n">received</span><span class="p">)</span>
<a id="__codelineno-0-2333" name="__codelineno-0-2333"></a>
<a id="__codelineno-0-2334" name="__codelineno-0-2334"></a>    <span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-2335" name="__codelineno-0-2335"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_best_and_worst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">batch</span><span class="p">:</span> <span class="s2">&quot;SolutionBatch&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<a id="__codelineno-0-2336" name="__codelineno-0-2336"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_store_solution_stats</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2337" name="__codelineno-0-2337"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_store_solution_stats</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">device</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;cpu&quot;</span>
<a id="__codelineno-0-2338" name="__codelineno-0-2338"></a>
<a id="__codelineno-0-2339" name="__codelineno-0-2339"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_store_solution_stats</span><span class="p">:</span>
<a id="__codelineno-0-2340" name="__codelineno-0-2340"></a>            <span class="k">return</span> <span class="p">{}</span>
<a id="__codelineno-0-2341" name="__codelineno-0-2341"></a>
<a id="__codelineno-0-2342" name="__codelineno-0-2342"></a>        <span class="n">senses</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">senses</span>
<a id="__codelineno-0-2343" name="__codelineno-0-2343"></a>        <span class="n">nobjs</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">senses</span><span class="p">)</span>
<a id="__codelineno-0-2344" name="__codelineno-0-2344"></a>
<a id="__codelineno-0-2345" name="__codelineno-0-2345"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_best</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2346" name="__codelineno-0-2346"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_best_evals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_empty</span><span class="p">(</span><span class="n">nobjs</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">batch</span><span class="o">.</span><span class="n">device</span><span class="p">,</span> <span class="n">use_eval_dtype</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-2347" name="__codelineno-0-2347"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_worst_evals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_empty</span><span class="p">(</span><span class="n">nobjs</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">batch</span><span class="o">.</span><span class="n">device</span><span class="p">,</span> <span class="n">use_eval_dtype</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-2348" name="__codelineno-0-2348"></a>            <span class="k">for</span> <span class="n">i_obj</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nobjs</span><span class="p">):</span>
<a id="__codelineno-0-2349" name="__codelineno-0-2349"></a>                <span class="k">if</span> <span class="n">senses</span><span class="p">[</span><span class="n">i_obj</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;min&quot;</span><span class="p">:</span>
<a id="__codelineno-0-2350" name="__codelineno-0-2350"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_best_evals</span><span class="p">[</span><span class="n">i_obj</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2351" name="__codelineno-0-2351"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_worst_evals</span><span class="p">[</span><span class="n">i_obj</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;-inf&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2352" name="__codelineno-0-2352"></a>                <span class="k">elif</span> <span class="n">senses</span><span class="p">[</span><span class="n">i_obj</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;max&quot;</span><span class="p">:</span>
<a id="__codelineno-0-2353" name="__codelineno-0-2353"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_best_evals</span><span class="p">[</span><span class="n">i_obj</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;-inf&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2354" name="__codelineno-0-2354"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_worst_evals</span><span class="p">[</span><span class="n">i_obj</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2355" name="__codelineno-0-2355"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2356" name="__codelineno-0-2356"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid sense: </span><span class="si">{</span><span class="n">senses</span><span class="p">[</span><span class="n">i_obj</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2357" name="__codelineno-0-2357"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_best</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="n">nobjs</span>
<a id="__codelineno-0-2358" name="__codelineno-0-2358"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_worst</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="n">nobjs</span>
<a id="__codelineno-0-2359" name="__codelineno-0-2359"></a>
<a id="__codelineno-0-2360" name="__codelineno-0-2360"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">first_is_better</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">i_obj</span><span class="p">):</span>
<a id="__codelineno-0-2361" name="__codelineno-0-2361"></a>            <span class="k">if</span> <span class="n">senses</span><span class="p">[</span><span class="n">i_obj</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;min&quot;</span><span class="p">:</span>
<a id="__codelineno-0-2362" name="__codelineno-0-2362"></a>                <span class="k">return</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span>
<a id="__codelineno-0-2363" name="__codelineno-0-2363"></a>            <span class="k">elif</span> <span class="n">senses</span><span class="p">[</span><span class="n">i_obj</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;max&quot;</span><span class="p">:</span>
<a id="__codelineno-0-2364" name="__codelineno-0-2364"></a>                <span class="k">return</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span>
<a id="__codelineno-0-2365" name="__codelineno-0-2365"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2366" name="__codelineno-0-2366"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid sense: </span><span class="si">{</span><span class="n">senses</span><span class="p">[</span><span class="n">i_obj</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2367" name="__codelineno-0-2367"></a>
<a id="__codelineno-0-2368" name="__codelineno-0-2368"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">first_is_worse</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">i_obj</span><span class="p">):</span>
<a id="__codelineno-0-2369" name="__codelineno-0-2369"></a>            <span class="k">if</span> <span class="n">senses</span><span class="p">[</span><span class="n">i_obj</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;min&quot;</span><span class="p">:</span>
<a id="__codelineno-0-2370" name="__codelineno-0-2370"></a>                <span class="k">return</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span>
<a id="__codelineno-0-2371" name="__codelineno-0-2371"></a>            <span class="k">elif</span> <span class="n">senses</span><span class="p">[</span><span class="n">i_obj</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;max&quot;</span><span class="p">:</span>
<a id="__codelineno-0-2372" name="__codelineno-0-2372"></a>                <span class="k">return</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span>
<a id="__codelineno-0-2373" name="__codelineno-0-2373"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2374" name="__codelineno-0-2374"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid sense: </span><span class="si">{</span><span class="n">senses</span><span class="p">[</span><span class="n">i_obj</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2375" name="__codelineno-0-2375"></a>
<a id="__codelineno-0-2376" name="__codelineno-0-2376"></a>        <span class="n">best_sln_indices</span> <span class="o">=</span> <span class="p">[</span><span class="n">batch</span><span class="o">.</span><span class="n">argbest</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nobjs</span><span class="p">)]</span>
<a id="__codelineno-0-2377" name="__codelineno-0-2377"></a>        <span class="n">worst_sln_indices</span> <span class="o">=</span> <span class="p">[</span><span class="n">batch</span><span class="o">.</span><span class="n">argworst</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nobjs</span><span class="p">)]</span>
<a id="__codelineno-0-2378" name="__codelineno-0-2378"></a>
<a id="__codelineno-0-2379" name="__codelineno-0-2379"></a>        <span class="k">for</span> <span class="n">i_obj</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nobjs</span><span class="p">):</span>
<a id="__codelineno-0-2380" name="__codelineno-0-2380"></a>            <span class="n">best_sln_index</span> <span class="o">=</span> <span class="n">best_sln_indices</span><span class="p">[</span><span class="n">i_obj</span><span class="p">]</span>
<a id="__codelineno-0-2381" name="__codelineno-0-2381"></a>            <span class="n">worst_sln_index</span> <span class="o">=</span> <span class="n">worst_sln_indices</span><span class="p">[</span><span class="n">i_obj</span><span class="p">]</span>
<a id="__codelineno-0-2382" name="__codelineno-0-2382"></a>            <span class="n">scores</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">access_evals</span><span class="p">(</span><span class="n">i_obj</span><span class="p">)</span>
<a id="__codelineno-0-2383" name="__codelineno-0-2383"></a>            <span class="n">best_score</span> <span class="o">=</span> <span class="n">scores</span><span class="p">[</span><span class="n">best_sln_index</span><span class="p">]</span>
<a id="__codelineno-0-2384" name="__codelineno-0-2384"></a>            <span class="n">worst_score</span> <span class="o">=</span> <span class="n">scores</span><span class="p">[</span><span class="n">worst_sln_index</span><span class="p">]</span>
<a id="__codelineno-0-2385" name="__codelineno-0-2385"></a>            <span class="k">if</span> <span class="n">first_is_better</span><span class="p">(</span><span class="n">best_score</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_best_evals</span><span class="p">[</span><span class="n">i_obj</span><span class="p">],</span> <span class="n">i_obj</span><span class="p">):</span>
<a id="__codelineno-0-2386" name="__codelineno-0-2386"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_best_evals</span><span class="p">[</span><span class="n">i_obj</span><span class="p">]</span> <span class="o">=</span> <span class="n">best_score</span>
<a id="__codelineno-0-2387" name="__codelineno-0-2387"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_best</span><span class="p">[</span><span class="n">i_obj</span><span class="p">]</span> <span class="o">=</span> <span class="n">batch</span><span class="p">[</span><span class="n">best_sln_index</span><span class="p">]</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
<a id="__codelineno-0-2388" name="__codelineno-0-2388"></a>            <span class="k">if</span> <span class="n">first_is_worse</span><span class="p">(</span><span class="n">worst_score</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_worst_evals</span><span class="p">[</span><span class="n">i_obj</span><span class="p">],</span> <span class="n">i_obj</span><span class="p">):</span>
<a id="__codelineno-0-2389" name="__codelineno-0-2389"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_worst_evals</span><span class="p">[</span><span class="n">i_obj</span><span class="p">]</span> <span class="o">=</span> <span class="n">worst_score</span>
<a id="__codelineno-0-2390" name="__codelineno-0-2390"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_worst</span><span class="p">[</span><span class="n">i_obj</span><span class="p">]</span> <span class="o">=</span> <span class="n">batch</span><span class="p">[</span><span class="n">worst_sln_index</span><span class="p">]</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
<a id="__codelineno-0-2391" name="__codelineno-0-2391"></a>
<a id="__codelineno-0-2392" name="__codelineno-0-2392"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">senses</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-2393" name="__codelineno-0-2393"></a>            <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span>
<a id="__codelineno-0-2394" name="__codelineno-0-2394"></a>                <span class="n">best</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_best</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<a id="__codelineno-0-2395" name="__codelineno-0-2395"></a>                <span class="n">worst</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_worst</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<a id="__codelineno-0-2396" name="__codelineno-0-2396"></a>                <span class="n">best_eval</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_best</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">evals</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<a id="__codelineno-0-2397" name="__codelineno-0-2397"></a>                <span class="n">worst_eval</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_worst</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">evals</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<a id="__codelineno-0-2398" name="__codelineno-0-2398"></a>            <span class="p">)</span>
<a id="__codelineno-0-2399" name="__codelineno-0-2399"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2400" name="__codelineno-0-2400"></a>            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;best&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_best</span><span class="p">,</span> <span class="s2">&quot;worst&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_worst</span><span class="p">}</span>
<a id="__codelineno-0-2401" name="__codelineno-0-2401"></a>
<a id="__codelineno-0-2402" name="__codelineno-0-2402"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">compare_solutions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="s2">&quot;Solution&quot;</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="s2">&quot;Solution&quot;</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<a id="__codelineno-0-2403" name="__codelineno-0-2403"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2404" name="__codelineno-0-2404"></a><span class="sd">        Compare two solutions.</span>
<a id="__codelineno-0-2405" name="__codelineno-0-2405"></a><span class="sd">        It is assumed that both solutions are already evaluated.</span>
<a id="__codelineno-0-2406" name="__codelineno-0-2406"></a>
<a id="__codelineno-0-2407" name="__codelineno-0-2407"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-2408" name="__codelineno-0-2408"></a><span class="sd">            a: The first solution.</span>
<a id="__codelineno-0-2409" name="__codelineno-0-2409"></a><span class="sd">            b: The second solution.</span>
<a id="__codelineno-0-2410" name="__codelineno-0-2410"></a><span class="sd">            obj_index: The objective index according to which the comparison</span>
<a id="__codelineno-0-2411" name="__codelineno-0-2411"></a><span class="sd">                will be made.</span>
<a id="__codelineno-0-2412" name="__codelineno-0-2412"></a><span class="sd">                Can be left as None if the problem is single-objective.</span>
<a id="__codelineno-0-2413" name="__codelineno-0-2413"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-2414" name="__codelineno-0-2414"></a><span class="sd">            A positive number if `a` is better;</span>
<a id="__codelineno-0-2415" name="__codelineno-0-2415"></a><span class="sd">            a negative number if `b` is better;</span>
<a id="__codelineno-0-2416" name="__codelineno-0-2416"></a><span class="sd">            0 if there is a tie.</span>
<a id="__codelineno-0-2417" name="__codelineno-0-2417"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2418" name="__codelineno-0-2418"></a>        <span class="n">senses</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">senses</span>
<a id="__codelineno-0-2419" name="__codelineno-0-2419"></a>        <span class="n">obj_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">normalize_obj_index</span><span class="p">(</span><span class="n">obj_index</span><span class="p">)</span>
<a id="__codelineno-0-2420" name="__codelineno-0-2420"></a>        <span class="n">sense</span> <span class="o">=</span> <span class="n">senses</span><span class="p">[</span><span class="n">obj_index</span><span class="p">]</span>
<a id="__codelineno-0-2421" name="__codelineno-0-2421"></a>
<a id="__codelineno-0-2422" name="__codelineno-0-2422"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">score</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="n">Solution</span><span class="p">):</span>
<a id="__codelineno-0-2423" name="__codelineno-0-2423"></a>            <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="n">evals</span><span class="p">[</span><span class="n">obj_index</span><span class="p">]</span>
<a id="__codelineno-0-2424" name="__codelineno-0-2424"></a>
<a id="__codelineno-0-2425" name="__codelineno-0-2425"></a>        <span class="k">if</span> <span class="n">sense</span> <span class="o">==</span> <span class="s2">&quot;max&quot;</span><span class="p">:</span>
<a id="__codelineno-0-2426" name="__codelineno-0-2426"></a>            <span class="k">return</span> <span class="n">score</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">-</span> <span class="n">score</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<a id="__codelineno-0-2427" name="__codelineno-0-2427"></a>        <span class="k">elif</span> <span class="n">sense</span> <span class="o">==</span> <span class="s2">&quot;min&quot;</span><span class="p">:</span>
<a id="__codelineno-0-2428" name="__codelineno-0-2428"></a>            <span class="k">return</span> <span class="n">score</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">-</span> <span class="n">score</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<a id="__codelineno-0-2429" name="__codelineno-0-2429"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2430" name="__codelineno-0-2430"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unrecognized sense: &quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">sense</span><span class="p">))</span>
<a id="__codelineno-0-2431" name="__codelineno-0-2431"></a>
<a id="__codelineno-0-2432" name="__codelineno-0-2432"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_better</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="s2">&quot;Solution&quot;</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="s2">&quot;Solution&quot;</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-2433" name="__codelineno-0-2433"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2434" name="__codelineno-0-2434"></a><span class="sd">        Check whether or not the first solution is better.</span>
<a id="__codelineno-0-2435" name="__codelineno-0-2435"></a><span class="sd">        It is assumed that both solutions are already evaluated.</span>
<a id="__codelineno-0-2436" name="__codelineno-0-2436"></a>
<a id="__codelineno-0-2437" name="__codelineno-0-2437"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-2438" name="__codelineno-0-2438"></a><span class="sd">            a: The first solution.</span>
<a id="__codelineno-0-2439" name="__codelineno-0-2439"></a><span class="sd">            b: The second solution.</span>
<a id="__codelineno-0-2440" name="__codelineno-0-2440"></a><span class="sd">            obj_index: The objective index according to which the comparison</span>
<a id="__codelineno-0-2441" name="__codelineno-0-2441"></a><span class="sd">                will be made.</span>
<a id="__codelineno-0-2442" name="__codelineno-0-2442"></a><span class="sd">                Can be left as None if the problem is single-objective.</span>
<a id="__codelineno-0-2443" name="__codelineno-0-2443"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-2444" name="__codelineno-0-2444"></a><span class="sd">            True if `a` is better; False otherwise.</span>
<a id="__codelineno-0-2445" name="__codelineno-0-2445"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2446" name="__codelineno-0-2446"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare_solutions</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
<a id="__codelineno-0-2447" name="__codelineno-0-2447"></a>
<a id="__codelineno-0-2448" name="__codelineno-0-2448"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_worse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="s2">&quot;Solution&quot;</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="s2">&quot;Solution&quot;</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-2449" name="__codelineno-0-2449"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2450" name="__codelineno-0-2450"></a><span class="sd">        Check whether or not the first solution is worse.</span>
<a id="__codelineno-0-2451" name="__codelineno-0-2451"></a><span class="sd">        It is assumed that both solutions are already evaluated.</span>
<a id="__codelineno-0-2452" name="__codelineno-0-2452"></a>
<a id="__codelineno-0-2453" name="__codelineno-0-2453"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-2454" name="__codelineno-0-2454"></a><span class="sd">            a: The first solution.</span>
<a id="__codelineno-0-2455" name="__codelineno-0-2455"></a><span class="sd">            b: The second solution.</span>
<a id="__codelineno-0-2456" name="__codelineno-0-2456"></a><span class="sd">            obj_index: The objective index according to which the comparison</span>
<a id="__codelineno-0-2457" name="__codelineno-0-2457"></a><span class="sd">                will be made.</span>
<a id="__codelineno-0-2458" name="__codelineno-0-2458"></a><span class="sd">                Can be left as None if the problem is single-objective.</span>
<a id="__codelineno-0-2459" name="__codelineno-0-2459"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-2460" name="__codelineno-0-2460"></a><span class="sd">            True if `a` is worse; False otherwise.</span>
<a id="__codelineno-0-2461" name="__codelineno-0-2461"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2462" name="__codelineno-0-2462"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare_solutions</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span>
<a id="__codelineno-0-2463" name="__codelineno-0-2463"></a>
<a id="__codelineno-0-2464" name="__codelineno-0-2464"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_prepare</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2465" name="__codelineno-0-2465"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Prepare a worker instance of the problem for evaluation. To be overridden by the user&quot;&quot;&quot;</span>
<a id="__codelineno-0-2466" name="__codelineno-0-2466"></a>        <span class="k">pass</span>
<a id="__codelineno-0-2467" name="__codelineno-0-2467"></a>
<a id="__codelineno-0-2468" name="__codelineno-0-2468"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_prepare_main</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2469" name="__codelineno-0-2469"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Prepare the main instance of the problem for evaluation.&quot;&quot;&quot;</span>
<a id="__codelineno-0-2470" name="__codelineno-0-2470"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_share_attributes</span><span class="p">()</span>
<a id="__codelineno-0-2471" name="__codelineno-0-2471"></a>
<a id="__codelineno-0-2472" name="__codelineno-0-2472"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_start_preparations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2473" name="__codelineno-0-2473"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Prepare the problem for evaluation. Calls self._prepare() if the self._prepared flag is not True.&quot;&quot;&quot;</span>
<a id="__codelineno-0-2474" name="__codelineno-0-2474"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prepared</span><span class="p">:</span>
<a id="__codelineno-0-2475" name="__codelineno-0-2475"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">actors</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-2476" name="__codelineno-0-2476"></a>                <span class="c1"># Call prepare method for any problem class that is expected to do work</span>
<a id="__codelineno-0-2477" name="__codelineno-0-2477"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_prepare</span><span class="p">()</span>
<a id="__codelineno-0-2478" name="__codelineno-0-2478"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_main</span><span class="p">:</span>
<a id="__codelineno-0-2479" name="__codelineno-0-2479"></a>                <span class="c1"># Call share method to distribute shared attributes to actors</span>
<a id="__codelineno-0-2480" name="__codelineno-0-2480"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_prepare_main</span><span class="p">()</span>
<a id="__codelineno-0-2481" name="__codelineno-0-2481"></a>
<a id="__codelineno-0-2482" name="__codelineno-0-2482"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_prepared</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-2483" name="__codelineno-0-2483"></a>
<a id="__codelineno-0-2484" name="__codelineno-0-2484"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-2485" name="__codelineno-0-2485"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_nonserialized_attribs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<a id="__codelineno-0-2486" name="__codelineno-0-2486"></a>        <span class="k">return</span> <span class="p">[]</span>
<a id="__codelineno-0-2487" name="__codelineno-0-2487"></a>
<a id="__codelineno-0-2488" name="__codelineno-0-2488"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_share_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2489" name="__codelineno-0-2489"></a>        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_actors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_actors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
<a id="__codelineno-0-2490" name="__codelineno-0-2490"></a>            <span class="k">for</span> <span class="n">attrib_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_attribs</span><span class="p">:</span>
<a id="__codelineno-0-2491" name="__codelineno-0-2491"></a>                <span class="n">obj_ref</span> <span class="o">=</span> <span class="n">ray</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrib_name</span><span class="p">))</span>
<a id="__codelineno-0-2492" name="__codelineno-0-2492"></a>                <span class="k">for</span> <span class="n">actor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actors</span><span class="p">:</span>
<a id="__codelineno-0-2493" name="__codelineno-0-2493"></a>                    <span class="n">actor</span><span class="o">.</span><span class="n">call</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="s2">&quot;put_ray_object&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s2">&quot;obj_ref&quot;</span><span class="p">:</span> <span class="n">obj_ref</span><span class="p">,</span> <span class="s2">&quot;attrib_name&quot;</span><span class="p">:</span> <span class="n">attrib_name</span><span class="p">})</span>
<a id="__codelineno-0-2494" name="__codelineno-0-2494"></a>
<a id="__codelineno-0-2495" name="__codelineno-0-2495"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">put_ray_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_ref</span><span class="p">:</span> <span class="n">ray</span><span class="o">.</span><span class="n">ObjectRef</span><span class="p">,</span> <span class="n">attrib_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2496" name="__codelineno-0-2496"></a>        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrib_name</span><span class="p">,</span> <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">obj_ref</span><span class="p">))</span>
<a id="__codelineno-0-2497" name="__codelineno-0-2497"></a>
<a id="__codelineno-0-2498" name="__codelineno-0-2498"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-2499" name="__codelineno-0-2499"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_shared_attribs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<a id="__codelineno-0-2500" name="__codelineno-0-2500"></a>        <span class="k">return</span> <span class="p">[]</span>
<a id="__codelineno-0-2501" name="__codelineno-0-2501"></a>
<a id="__codelineno-0-2502" name="__codelineno-0-2502"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_device_of_fitness_function</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Device</span><span class="p">]:</span>
<a id="__codelineno-0-2503" name="__codelineno-0-2503"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">device_of_fn</span><span class="p">(</span><span class="n">fn</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Device</span><span class="p">]:</span>
<a id="__codelineno-0-2504" name="__codelineno-0-2504"></a>            <span class="k">if</span> <span class="n">fn</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2505" name="__codelineno-0-2505"></a>                <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-2506" name="__codelineno-0-2506"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2507" name="__codelineno-0-2507"></a>                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="s2">&quot;__evotorch_on_aux_device__&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">fn</span><span class="o">.</span><span class="n">__evotorch_on_aux_device__</span><span class="p">:</span>
<a id="__codelineno-0-2508" name="__codelineno-0-2508"></a>                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">aux_device</span>
<a id="__codelineno-0-2509" name="__codelineno-0-2509"></a>                <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="s2">&quot;device&quot;</span><span class="p">):</span>
<a id="__codelineno-0-2510" name="__codelineno-0-2510"></a>                    <span class="k">return</span> <span class="n">fn</span><span class="o">.</span><span class="n">device</span>
<a id="__codelineno-0-2511" name="__codelineno-0-2511"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2512" name="__codelineno-0-2512"></a>                    <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-2513" name="__codelineno-0-2513"></a>
<a id="__codelineno-0-2514" name="__codelineno-0-2514"></a>        <span class="k">for</span> <span class="n">candidate_fn</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_objective_func</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evaluate_all</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evaluate_batch</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evaluate</span><span class="p">):</span>
<a id="__codelineno-0-2515" name="__codelineno-0-2515"></a>            <span class="n">device</span> <span class="o">=</span> <span class="n">device_of_fn</span><span class="p">(</span><span class="n">candidate_fn</span><span class="p">)</span>
<a id="__codelineno-0-2516" name="__codelineno-0-2516"></a>            <span class="k">if</span> <span class="n">device</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2517" name="__codelineno-0-2517"></a>                <span class="k">if</span> <span class="n">candidate_fn</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evaluate_all</span><span class="p">:</span>
<a id="__codelineno-0-2518" name="__codelineno-0-2518"></a>                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
<a id="__codelineno-0-2519" name="__codelineno-0-2519"></a>                        <span class="s2">&quot;It seems that the `_evaluate_all(...)` method of this Problem object is either decorated&quot;</span>
<a id="__codelineno-0-2520" name="__codelineno-0-2520"></a>                        <span class="s2">&quot; by @on_aux_device or by @on_device, or it is specifying a target device via a `device`&quot;</span>
<a id="__codelineno-0-2521" name="__codelineno-0-2521"></a>                        <span class="s2">&quot; attribute. However, these decorators (or the `device` attribute) are not supported in the&quot;</span>
<a id="__codelineno-0-2522" name="__codelineno-0-2522"></a>                        <span class="s2">&quot; case of `_evaluate_all(...)`.&quot;</span>
<a id="__codelineno-0-2523" name="__codelineno-0-2523"></a>                        <span class="s2">&quot; The reason is that the checking of the target device and the operations of moving the batch&quot;</span>
<a id="__codelineno-0-2524" name="__codelineno-0-2524"></a>                        <span class="s2">&quot; onto the target device are handled by the default implementation of `_evaluate_all` itself.&quot;</span>
<a id="__codelineno-0-2525" name="__codelineno-0-2525"></a>                        <span class="s2">&quot; To specify a target device, consider decorating `_evaluate_batch(...)` or `_evaluate(...)`&quot;</span>
<a id="__codelineno-0-2526" name="__codelineno-0-2526"></a>                        <span class="s2">&quot; instead.&quot;</span>
<a id="__codelineno-0-2527" name="__codelineno-0-2527"></a>                    <span class="p">)</span>
<a id="__codelineno-0-2528" name="__codelineno-0-2528"></a>                <span class="k">return</span> <span class="n">device</span>
<a id="__codelineno-0-2529" name="__codelineno-0-2529"></a>
<a id="__codelineno-0-2530" name="__codelineno-0-2530"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-2531" name="__codelineno-0-2531"></a>
<a id="__codelineno-0-2532" name="__codelineno-0-2532"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;SolutionBatch&quot;</span><span class="p">,</span> <span class="s2">&quot;Solution&quot;</span><span class="p">]):</span>
<a id="__codelineno-0-2533" name="__codelineno-0-2533"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2534" name="__codelineno-0-2534"></a><span class="sd">        Evaluate the given Solution or SolutionBatch.</span>
<a id="__codelineno-0-2535" name="__codelineno-0-2535"></a>
<a id="__codelineno-0-2536" name="__codelineno-0-2536"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-2537" name="__codelineno-0-2537"></a><span class="sd">            x: The SolutionBatch to be evaluated.</span>
<a id="__codelineno-0-2538" name="__codelineno-0-2538"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2539" name="__codelineno-0-2539"></a>
<a id="__codelineno-0-2540" name="__codelineno-0-2540"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Solution</span><span class="p">):</span>
<a id="__codelineno-0-2541" name="__codelineno-0-2541"></a>            <span class="n">batch</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">to_batch</span><span class="p">()</span>
<a id="__codelineno-0-2542" name="__codelineno-0-2542"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">SolutionBatch</span><span class="p">):</span>
<a id="__codelineno-0-2543" name="__codelineno-0-2543"></a>            <span class="n">batch</span> <span class="o">=</span> <span class="n">x</span>
<a id="__codelineno-0-2544" name="__codelineno-0-2544"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2545" name="__codelineno-0-2545"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-2546" name="__codelineno-0-2546"></a>                <span class="sa">f</span><span class="s2">&quot;The method `evaluate(...)` expected a Solution or a SolutionBatch as its argument.&quot;</span>
<a id="__codelineno-0-2547" name="__codelineno-0-2547"></a>                <span class="sa">f</span><span class="s2">&quot; However, the received object is </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="si">}</span><span class="s2">, which is of type </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-2548" name="__codelineno-0-2548"></a>            <span class="p">)</span>
<a id="__codelineno-0-2549" name="__codelineno-0-2549"></a>
<a id="__codelineno-0-2550" name="__codelineno-0-2550"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_parallelize</span><span class="p">()</span>
<a id="__codelineno-0-2551" name="__codelineno-0-2551"></a>
<a id="__codelineno-0-2552" name="__codelineno-0-2552"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_main</span><span class="p">:</span>
<a id="__codelineno-0-2553" name="__codelineno-0-2553"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">before_eval_hook</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
<a id="__codelineno-0-2554" name="__codelineno-0-2554"></a>
<a id="__codelineno-0-2555" name="__codelineno-0-2555"></a>        <span class="n">must_sync_after</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sync_before</span><span class="p">()</span>
<a id="__codelineno-0-2556" name="__codelineno-0-2556"></a>
<a id="__codelineno-0-2557" name="__codelineno-0-2557"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_start_preparations</span><span class="p">()</span>
<a id="__codelineno-0-2558" name="__codelineno-0-2558"></a>
<a id="__codelineno-0-2559" name="__codelineno-0-2559"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_evaluate_all</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
<a id="__codelineno-0-2560" name="__codelineno-0-2560"></a>
<a id="__codelineno-0-2561" name="__codelineno-0-2561"></a>        <span class="k">if</span> <span class="n">must_sync_after</span><span class="p">:</span>
<a id="__codelineno-0-2562" name="__codelineno-0-2562"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_sync_after</span><span class="p">()</span>
<a id="__codelineno-0-2563" name="__codelineno-0-2563"></a>
<a id="__codelineno-0-2564" name="__codelineno-0-2564"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_main</span><span class="p">:</span>
<a id="__codelineno-0-2565" name="__codelineno-0-2565"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_after_eval_status</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-2566" name="__codelineno-0-2566"></a>
<a id="__codelineno-0-2567" name="__codelineno-0-2567"></a>            <span class="n">best_and_worst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_best_and_worst</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
<a id="__codelineno-0-2568" name="__codelineno-0-2568"></a>            <span class="k">if</span> <span class="n">best_and_worst</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2569" name="__codelineno-0-2569"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_after_eval_status</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">best_and_worst</span><span class="p">)</span>
<a id="__codelineno-0-2570" name="__codelineno-0-2570"></a>
<a id="__codelineno-0-2571" name="__codelineno-0-2571"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_after_eval_status</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">after_eval_hook</span><span class="o">.</span><span class="n">accumulate_dict</span><span class="p">(</span><span class="n">batch</span><span class="p">))</span>
<a id="__codelineno-0-2572" name="__codelineno-0-2572"></a>
<a id="__codelineno-0-2573" name="__codelineno-0-2573"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_evaluate_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">batch</span><span class="p">:</span> <span class="s2">&quot;SolutionBatch&quot;</span><span class="p">):</span>
<a id="__codelineno-0-2574" name="__codelineno-0-2574"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2575" name="__codelineno-0-2575"></a>            <span class="n">fitness_device</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_device_of_fitness_function</span><span class="p">()</span>
<a id="__codelineno-0-2576" name="__codelineno-0-2576"></a>            <span class="k">if</span> <span class="n">fitness_device</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2577" name="__codelineno-0-2577"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_evaluate_batch</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
<a id="__codelineno-0-2578" name="__codelineno-0-2578"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2579" name="__codelineno-0-2579"></a>                <span class="n">original_device</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">device</span>
<a id="__codelineno-0-2580" name="__codelineno-0-2580"></a>                <span class="n">moved_batch</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">fitness_device</span><span class="p">)</span>
<a id="__codelineno-0-2581" name="__codelineno-0-2581"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_evaluate_batch</span><span class="p">(</span><span class="n">moved_batch</span><span class="p">)</span>
<a id="__codelineno-0-2582" name="__codelineno-0-2582"></a>                <span class="n">batch</span><span class="o">.</span><span class="n">set_evals</span><span class="p">(</span><span class="n">moved_batch</span><span class="o">.</span><span class="n">evals</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">original_device</span><span class="p">))</span>
<a id="__codelineno-0-2583" name="__codelineno-0-2583"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2584" name="__codelineno-0-2584"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_subbatches</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2585" name="__codelineno-0-2585"></a>                <span class="n">pieces</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_subbatches</span><span class="p">)</span>
<a id="__codelineno-0-2586" name="__codelineno-0-2586"></a>            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subbatch_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2587" name="__codelineno-0-2587"></a>                <span class="n">pieces</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">max_size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_subbatch_size</span><span class="p">)</span>
<a id="__codelineno-0-2588" name="__codelineno-0-2588"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2589" name="__codelineno-0-2589"></a>                <span class="n">pieces</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_actors</span><span class="p">))</span>
<a id="__codelineno-0-2590" name="__codelineno-0-2590"></a>            <span class="c1"># mapresult = self._actor_pool.map(lambda a, v: a.evaluate_batch.remote(v), list(pieces))</span>
<a id="__codelineno-0-2591" name="__codelineno-0-2591"></a>            <span class="c1"># for i, evals in enumerate(mapresult):</span>
<a id="__codelineno-0-2592" name="__codelineno-0-2592"></a>            <span class="c1">#    row_begin, row_end = pieces.indices_of(i)</span>
<a id="__codelineno-0-2593" name="__codelineno-0-2593"></a>            <span class="c1">#    batch._evdata[row_begin:row_end, :] = evals</span>
<a id="__codelineno-0-2594" name="__codelineno-0-2594"></a>
<a id="__codelineno-0-2595" name="__codelineno-0-2595"></a>            <span class="n">mapresult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actor_pool</span><span class="o">.</span><span class="n">map_unordered</span><span class="p">(</span>
<a id="__codelineno-0-2596" name="__codelineno-0-2596"></a>                <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">a</span><span class="o">.</span><span class="n">evaluate_batch_piece</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">enumerate</span><span class="p">(</span><span class="n">pieces</span><span class="p">))</span>
<a id="__codelineno-0-2597" name="__codelineno-0-2597"></a>            <span class="p">)</span>
<a id="__codelineno-0-2598" name="__codelineno-0-2598"></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">evals</span> <span class="ow">in</span> <span class="n">mapresult</span><span class="p">:</span>
<a id="__codelineno-0-2599" name="__codelineno-0-2599"></a>                <span class="n">row_begin</span><span class="p">,</span> <span class="n">row_end</span> <span class="o">=</span> <span class="n">pieces</span><span class="o">.</span><span class="n">indices_of</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-0-2600" name="__codelineno-0-2600"></a>                <span class="n">batch</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[</span><span class="n">row_begin</span><span class="p">:</span><span class="n">row_end</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">evals</span>
<a id="__codelineno-0-2601" name="__codelineno-0-2601"></a>
<a id="__codelineno-0-2602" name="__codelineno-0-2602"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_evaluate_batch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">batch</span><span class="p">:</span> <span class="s2">&quot;SolutionBatch&quot;</span><span class="p">):</span>
<a id="__codelineno-0-2603" name="__codelineno-0-2603"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vectorized</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_objective_func</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-2604" name="__codelineno-0-2604"></a>            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_func</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<a id="__codelineno-0-2605" name="__codelineno-0-2605"></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
<a id="__codelineno-0-2606" name="__codelineno-0-2606"></a>                <span class="n">batch</span><span class="o">.</span><span class="n">set_evals</span><span class="p">(</span><span class="o">*</span><span class="n">result</span><span class="p">)</span>
<a id="__codelineno-0-2607" name="__codelineno-0-2607"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2608" name="__codelineno-0-2608"></a>                <span class="n">batch</span><span class="o">.</span><span class="n">set_evals</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<a id="__codelineno-0-2609" name="__codelineno-0-2609"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2610" name="__codelineno-0-2610"></a>            <span class="k">for</span> <span class="n">sln</span> <span class="ow">in</span> <span class="n">batch</span><span class="p">:</span>
<a id="__codelineno-0-2611" name="__codelineno-0-2611"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_evaluate</span><span class="p">(</span><span class="n">sln</span><span class="p">)</span>
<a id="__codelineno-0-2612" name="__codelineno-0-2612"></a>
<a id="__codelineno-0-2613" name="__codelineno-0-2613"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solution</span><span class="p">:</span> <span class="s2">&quot;Solution&quot;</span><span class="p">):</span>
<a id="__codelineno-0-2614" name="__codelineno-0-2614"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_func</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2615" name="__codelineno-0-2615"></a>            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_func</span><span class="p">(</span><span class="n">solution</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<a id="__codelineno-0-2616" name="__codelineno-0-2616"></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
<a id="__codelineno-0-2617" name="__codelineno-0-2617"></a>                <span class="n">solution</span><span class="o">.</span><span class="n">set_evals</span><span class="p">(</span><span class="o">*</span><span class="n">result</span><span class="p">)</span>
<a id="__codelineno-0-2618" name="__codelineno-0-2618"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2619" name="__codelineno-0-2619"></a>                <span class="n">solution</span><span class="o">.</span><span class="n">set_evals</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<a id="__codelineno-0-2620" name="__codelineno-0-2620"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2621" name="__codelineno-0-2621"></a>            <span class="k">raise</span> <span class="ne">NotImplementedError</span>
<a id="__codelineno-0-2622" name="__codelineno-0-2622"></a>
<a id="__codelineno-0-2623" name="__codelineno-0-2623"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-2624" name="__codelineno-0-2624"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">stores_solution_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]:</span>
<a id="__codelineno-0-2625" name="__codelineno-0-2625"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2626" name="__codelineno-0-2626"></a><span class="sd">        Whether or not the best and worst solutions are kept.</span>
<a id="__codelineno-0-2627" name="__codelineno-0-2627"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2628" name="__codelineno-0-2628"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_store_solution_stats</span>
<a id="__codelineno-0-2629" name="__codelineno-0-2629"></a>
<a id="__codelineno-0-2630" name="__codelineno-0-2630"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-2631" name="__codelineno-0-2631"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-2632" name="__codelineno-0-2632"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2633" name="__codelineno-0-2633"></a><span class="sd">        Status dictionary of the problem object, updated after the last</span>
<a id="__codelineno-0-2634" name="__codelineno-0-2634"></a><span class="sd">        evaluation operation.</span>
<a id="__codelineno-0-2635" name="__codelineno-0-2635"></a>
<a id="__codelineno-0-2636" name="__codelineno-0-2636"></a><span class="sd">        The dictionaries returned by the functions in `after_eval_hook`</span>
<a id="__codelineno-0-2637" name="__codelineno-0-2637"></a><span class="sd">        are accumulated, and reported in this status dictionary.</span>
<a id="__codelineno-0-2638" name="__codelineno-0-2638"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2639" name="__codelineno-0-2639"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_after_eval_status</span>
<a id="__codelineno-0-2640" name="__codelineno-0-2640"></a>
<a id="__codelineno-0-2641" name="__codelineno-0-2641"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ensure_numeric</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-2642" name="__codelineno-0-2642"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2643" name="__codelineno-0-2643"></a><span class="sd">        Ensure that the problem has a numeric dtype.</span>
<a id="__codelineno-0-2644" name="__codelineno-0-2644"></a>
<a id="__codelineno-0-2645" name="__codelineno-0-2645"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-2646" name="__codelineno-0-2646"></a><span class="sd">            ValueError: if the problem has a non-numeric dtype.</span>
<a id="__codelineno-0-2647" name="__codelineno-0-2647"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2648" name="__codelineno-0-2648"></a>        <span class="k">if</span> <span class="n">is_dtype_object</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">):</span>
<a id="__codelineno-0-2649" name="__codelineno-0-2649"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected a problem with numeric dtype, but the dtype is object.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2650" name="__codelineno-0-2650"></a>
<a id="__codelineno-0-2651" name="__codelineno-0-2651"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ensure_unbounded</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-2652" name="__codelineno-0-2652"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2653" name="__codelineno-0-2653"></a><span class="sd">        Ensure that the problem has no strict lower and upper bounds.</span>
<a id="__codelineno-0-2654" name="__codelineno-0-2654"></a>
<a id="__codelineno-0-2655" name="__codelineno-0-2655"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-2656" name="__codelineno-0-2656"></a><span class="sd">            ValueError: if the problem has strict lower and upper bounds.</span>
<a id="__codelineno-0-2657" name="__codelineno-0-2657"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2658" name="__codelineno-0-2658"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lower_bounds</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">upper_bounds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-2659" name="__codelineno-0-2659"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected an unbounded problem, but this problem has lower and/or upper bounds.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2660" name="__codelineno-0-2660"></a>
<a id="__codelineno-0-2661" name="__codelineno-0-2661"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ensure_single_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-2662" name="__codelineno-0-2662"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2663" name="__codelineno-0-2663"></a><span class="sd">        Ensure that the problem has only one objective.</span>
<a id="__codelineno-0-2664" name="__codelineno-0-2664"></a>
<a id="__codelineno-0-2665" name="__codelineno-0-2665"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-2666" name="__codelineno-0-2666"></a><span class="sd">            ValueError: if the problem is multi-objective.</span>
<a id="__codelineno-0-2667" name="__codelineno-0-2667"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2668" name="__codelineno-0-2668"></a>        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">senses</span><span class="p">)</span>
<a id="__codelineno-0-2669" name="__codelineno-0-2669"></a>        <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-2670" name="__codelineno-0-2670"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected a single-objective problem, but this problem has </span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2"> objectives.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2671" name="__codelineno-0-2671"></a>
<a id="__codelineno-0-2672" name="__codelineno-0-2672"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">normalize_obj_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-2673" name="__codelineno-0-2673"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2674" name="__codelineno-0-2674"></a><span class="sd">        Normalize the objective index.</span>
<a id="__codelineno-0-2675" name="__codelineno-0-2675"></a>
<a id="__codelineno-0-2676" name="__codelineno-0-2676"></a><span class="sd">        If the provided index is non-negative, it is ensured that the index</span>
<a id="__codelineno-0-2677" name="__codelineno-0-2677"></a><span class="sd">        is valid.</span>
<a id="__codelineno-0-2678" name="__codelineno-0-2678"></a>
<a id="__codelineno-0-2679" name="__codelineno-0-2679"></a><span class="sd">        If the provided index is negative, the objectives are counted in the</span>
<a id="__codelineno-0-2680" name="__codelineno-0-2680"></a><span class="sd">        reverse order, and the corresponding non-negative index is returned.</span>
<a id="__codelineno-0-2681" name="__codelineno-0-2681"></a><span class="sd">        For example, -1 is converted to a non-negative integer corresponding to</span>
<a id="__codelineno-0-2682" name="__codelineno-0-2682"></a><span class="sd">        the last objective.</span>
<a id="__codelineno-0-2683" name="__codelineno-0-2683"></a>
<a id="__codelineno-0-2684" name="__codelineno-0-2684"></a><span class="sd">        If the provided index is None and if the problem is single-objective,</span>
<a id="__codelineno-0-2685" name="__codelineno-0-2685"></a><span class="sd">        the returned value is 0, which represents the only objective.</span>
<a id="__codelineno-0-2686" name="__codelineno-0-2686"></a>
<a id="__codelineno-0-2687" name="__codelineno-0-2687"></a><span class="sd">        If the provided index is None and if the problem is multi-objective,</span>
<a id="__codelineno-0-2688" name="__codelineno-0-2688"></a><span class="sd">        an error is raised.</span>
<a id="__codelineno-0-2689" name="__codelineno-0-2689"></a>
<a id="__codelineno-0-2690" name="__codelineno-0-2690"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-2691" name="__codelineno-0-2691"></a><span class="sd">            obj_index: The non-normalized objective index.</span>
<a id="__codelineno-0-2692" name="__codelineno-0-2692"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-2693" name="__codelineno-0-2693"></a><span class="sd">            The normalized objective index, as a non-negative integer.</span>
<a id="__codelineno-0-2694" name="__codelineno-0-2694"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2695" name="__codelineno-0-2695"></a>        <span class="k">if</span> <span class="n">obj_index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2696" name="__codelineno-0-2696"></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">senses</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-2697" name="__codelineno-0-2697"></a>                <span class="k">return</span> <span class="mi">0</span>
<a id="__codelineno-0-2698" name="__codelineno-0-2698"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2699" name="__codelineno-0-2699"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-2700" name="__codelineno-0-2700"></a>                    <span class="s2">&quot;This problem is multi-objective, therefore, an explicit objective index was expected.&quot;</span>
<a id="__codelineno-0-2701" name="__codelineno-0-2701"></a>                    <span class="s2">&quot; However, `obj_index` was found to be None.&quot;</span>
<a id="__codelineno-0-2702" name="__codelineno-0-2702"></a>                <span class="p">)</span>
<a id="__codelineno-0-2703" name="__codelineno-0-2703"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2704" name="__codelineno-0-2704"></a>            <span class="n">obj_index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">obj_index</span><span class="p">)</span>
<a id="__codelineno-0-2705" name="__codelineno-0-2705"></a>            <span class="k">if</span> <span class="n">obj_index</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-2706" name="__codelineno-0-2706"></a>                <span class="n">obj_index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">senses</span><span class="p">)</span> <span class="o">+</span> <span class="n">obj_index</span>
<a id="__codelineno-0-2707" name="__codelineno-0-2707"></a>            <span class="k">if</span> <span class="n">obj_index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">obj_index</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">senses</span><span class="p">):</span>
<a id="__codelineno-0-2708" name="__codelineno-0-2708"></a>                <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;Objective index out of range.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2709" name="__codelineno-0-2709"></a>            <span class="k">return</span> <span class="n">obj_index</span>
<a id="__codelineno-0-2710" name="__codelineno-0-2710"></a>
<a id="__codelineno-0-2711" name="__codelineno-0-2711"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_cloned_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">memo</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-2712" name="__codelineno-0-2712"></a>        <span class="c1"># Collect the inner states of the remote Problem clones</span>
<a id="__codelineno-0-2713" name="__codelineno-0-2713"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2714" name="__codelineno-0-2714"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_remote_states</span> <span class="o">=</span> <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
<a id="__codelineno-0-2715" name="__codelineno-0-2715"></a>                <span class="p">[</span><span class="n">actor</span><span class="o">.</span><span class="n">call</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="s2">&quot;_make_pickle_data_for_main&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{})</span> <span class="k">for</span> <span class="n">actor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actors</span><span class="p">]</span>
<a id="__codelineno-0-2716" name="__codelineno-0-2716"></a>            <span class="p">)</span>
<a id="__codelineno-0-2717" name="__codelineno-0-2717"></a>
<a id="__codelineno-0-2718" name="__codelineno-0-2718"></a>        <span class="c1"># Prepare the main state dictionary</span>
<a id="__codelineno-0-2719" name="__codelineno-0-2719"></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-2720" name="__codelineno-0-2720"></a>        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-2721" name="__codelineno-0-2721"></a>            <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;_actors&quot;</span><span class="p">,</span> <span class="s2">&quot;_actor_pool&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nonserialized_attribs</span><span class="p">:</span>
<a id="__codelineno-0-2722" name="__codelineno-0-2722"></a>                <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-2723" name="__codelineno-0-2723"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2724" name="__codelineno-0-2724"></a>                <span class="n">v_id</span> <span class="o">=</span> <span class="nb">id</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<a id="__codelineno-0-2725" name="__codelineno-0-2725"></a>                <span class="k">if</span> <span class="n">v_id</span> <span class="ow">in</span> <span class="n">memo</span><span class="p">:</span>
<a id="__codelineno-0-2726" name="__codelineno-0-2726"></a>                    <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">memo</span><span class="p">[</span><span class="n">v_id</span><span class="p">]</span>
<a id="__codelineno-0-2727" name="__codelineno-0-2727"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2728" name="__codelineno-0-2728"></a>                    <span class="k">with</span> <span class="n">_no_grad_if_basic_dtype</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">):</span>
<a id="__codelineno-0-2729" name="__codelineno-0-2729"></a>                        <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">deep_clone</span><span class="p">(</span>
<a id="__codelineno-0-2730" name="__codelineno-0-2730"></a>                            <span class="n">v</span><span class="p">,</span>
<a id="__codelineno-0-2731" name="__codelineno-0-2731"></a>                            <span class="n">otherwise_deepcopy</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-2732" name="__codelineno-0-2732"></a>                            <span class="n">memo</span><span class="o">=</span><span class="n">memo</span><span class="p">,</span>
<a id="__codelineno-0-2733" name="__codelineno-0-2733"></a>                        <span class="p">)</span>
<a id="__codelineno-0-2734" name="__codelineno-0-2734"></a>        <span class="k">return</span> <span class="n">result</span>
<a id="__codelineno-0-2735" name="__codelineno-0-2735"></a>
<a id="__codelineno-0-2736" name="__codelineno-0-2736"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_local_interaction_count</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-2737" name="__codelineno-0-2737"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2738" name="__codelineno-0-2738"></a><span class="sd">        Get the number of simulator interactions this Problem encountered.</span>
<a id="__codelineno-0-2739" name="__codelineno-0-2739"></a>
<a id="__codelineno-0-2740" name="__codelineno-0-2740"></a><span class="sd">        For problems focused on reinforcement learning, it is expected</span>
<a id="__codelineno-0-2741" name="__codelineno-0-2741"></a><span class="sd">        that the subclass overrides this method to describe its own way</span>
<a id="__codelineno-0-2742" name="__codelineno-0-2742"></a><span class="sd">        of getting the local interaction count.</span>
<a id="__codelineno-0-2743" name="__codelineno-0-2743"></a>
<a id="__codelineno-0-2744" name="__codelineno-0-2744"></a><span class="sd">        When working on parallelized problems, what is returned here is</span>
<a id="__codelineno-0-2745" name="__codelineno-0-2745"></a><span class="sd">        not necessarily synchronized with the other parallelized instance.</span>
<a id="__codelineno-0-2746" name="__codelineno-0-2746"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2747" name="__codelineno-0-2747"></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
<a id="__codelineno-0-2748" name="__codelineno-0-2748"></a>
<a id="__codelineno-0-2749" name="__codelineno-0-2749"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_local_episode_count</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-2750" name="__codelineno-0-2750"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2751" name="__codelineno-0-2751"></a><span class="sd">        Get the number of episodes this Problem encountered.</span>
<a id="__codelineno-0-2752" name="__codelineno-0-2752"></a>
<a id="__codelineno-0-2753" name="__codelineno-0-2753"></a><span class="sd">        For problems focused on reinforcement learning, it is expected</span>
<a id="__codelineno-0-2754" name="__codelineno-0-2754"></a><span class="sd">        that the subclass overrides this method to describe its own way</span>
<a id="__codelineno-0-2755" name="__codelineno-0-2755"></a><span class="sd">        of getting the local episode count.</span>
<a id="__codelineno-0-2756" name="__codelineno-0-2756"></a>
<a id="__codelineno-0-2757" name="__codelineno-0-2757"></a><span class="sd">        When working on parallelized problems, what is returned here is</span>
<a id="__codelineno-0-2758" name="__codelineno-0-2758"></a><span class="sd">        not necessarily synchronized with the other parallelized instance.</span>
<a id="__codelineno-0-2759" name="__codelineno-0-2759"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2760" name="__codelineno-0-2760"></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
<a id="__codelineno-0-2761" name="__codelineno-0-2761"></a>
<a id="__codelineno-0-2762" name="__codelineno-0-2762"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sample_and_compute_gradients</span><span class="p">(</span>
<a id="__codelineno-0-2763" name="__codelineno-0-2763"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-2764" name="__codelineno-0-2764"></a>        <span class="n">distribution</span><span class="p">,</span>
<a id="__codelineno-0-2765" name="__codelineno-0-2765"></a>        <span class="n">popsize</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-2766" name="__codelineno-0-2766"></a>        <span class="o">*</span><span class="p">,</span>
<a id="__codelineno-0-2767" name="__codelineno-0-2767"></a>        <span class="n">num_interactions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2768" name="__codelineno-0-2768"></a>        <span class="n">popsize_max</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2769" name="__codelineno-0-2769"></a>        <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2770" name="__codelineno-0-2770"></a>        <span class="n">ranking_method</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2771" name="__codelineno-0-2771"></a>        <span class="n">with_stats</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-2772" name="__codelineno-0-2772"></a>        <span class="n">ensure_even_popsize</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-2773" name="__codelineno-0-2773"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]:</span>
<a id="__codelineno-0-2774" name="__codelineno-0-2774"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2775" name="__codelineno-0-2775"></a><span class="sd">        Sample new solutions from the distribution and compute gradients.</span>
<a id="__codelineno-0-2776" name="__codelineno-0-2776"></a>
<a id="__codelineno-0-2777" name="__codelineno-0-2777"></a><span class="sd">        The distribution can then be updated according to the computed</span>
<a id="__codelineno-0-2778" name="__codelineno-0-2778"></a><span class="sd">        gradients.</span>
<a id="__codelineno-0-2779" name="__codelineno-0-2779"></a>
<a id="__codelineno-0-2780" name="__codelineno-0-2780"></a><span class="sd">        If the problem is not parallelized, and `with_stats` is False,</span>
<a id="__codelineno-0-2781" name="__codelineno-0-2781"></a><span class="sd">        then the result will be a single dictionary of gradients.</span>
<a id="__codelineno-0-2782" name="__codelineno-0-2782"></a><span class="sd">        For example, in the case of a Gaussian distribution, the returned</span>
<a id="__codelineno-0-2783" name="__codelineno-0-2783"></a><span class="sd">        gradients dictionary would look like this:</span>
<a id="__codelineno-0-2784" name="__codelineno-0-2784"></a>
<a id="__codelineno-0-2785" name="__codelineno-0-2785"></a><span class="sd">            {</span>
<a id="__codelineno-0-2786" name="__codelineno-0-2786"></a><span class="sd">                &quot;mu&quot;: ...,     # the gradient for the mean</span>
<a id="__codelineno-0-2787" name="__codelineno-0-2787"></a><span class="sd">                &quot;sigma&quot;: ...,  # the gradient for the standard deviation</span>
<a id="__codelineno-0-2788" name="__codelineno-0-2788"></a><span class="sd">            }</span>
<a id="__codelineno-0-2789" name="__codelineno-0-2789"></a>
<a id="__codelineno-0-2790" name="__codelineno-0-2790"></a><span class="sd">        If the problem is not parallelized, and `with_stats` is True,</span>
<a id="__codelineno-0-2791" name="__codelineno-0-2791"></a><span class="sd">        then the result will be a dictionary which contains in itself</span>
<a id="__codelineno-0-2792" name="__codelineno-0-2792"></a><span class="sd">        the gradients dictionary, and additional elements for providing</span>
<a id="__codelineno-0-2793" name="__codelineno-0-2793"></a><span class="sd">        further information. In the case of a Gaussian distribution,</span>
<a id="__codelineno-0-2794" name="__codelineno-0-2794"></a><span class="sd">        the returned dictionary with additional stats would look like</span>
<a id="__codelineno-0-2795" name="__codelineno-0-2795"></a><span class="sd">        this:</span>
<a id="__codelineno-0-2796" name="__codelineno-0-2796"></a>
<a id="__codelineno-0-2797" name="__codelineno-0-2797"></a><span class="sd">            {</span>
<a id="__codelineno-0-2798" name="__codelineno-0-2798"></a><span class="sd">                &quot;gradients&quot;: {</span>
<a id="__codelineno-0-2799" name="__codelineno-0-2799"></a><span class="sd">                    &quot;mu&quot;: ...,     # the gradient for the mean</span>
<a id="__codelineno-0-2800" name="__codelineno-0-2800"></a><span class="sd">                    &quot;sigma&quot;: ...,  # the gradient for the standard deviation</span>
<a id="__codelineno-0-2801" name="__codelineno-0-2801"></a><span class="sd">                },</span>
<a id="__codelineno-0-2802" name="__codelineno-0-2802"></a><span class="sd">                &quot;num_solutions&quot;: ...,  # how many solutions were sampled</span>
<a id="__codelineno-0-2803" name="__codelineno-0-2803"></a><span class="sd">                &quot;mean_eval&quot;: ...,      # Mean of all evaluations</span>
<a id="__codelineno-0-2804" name="__codelineno-0-2804"></a><span class="sd">            }</span>
<a id="__codelineno-0-2805" name="__codelineno-0-2805"></a>
<a id="__codelineno-0-2806" name="__codelineno-0-2806"></a><span class="sd">        If the problem is parallelized, then the gradient computation will</span>
<a id="__codelineno-0-2807" name="__codelineno-0-2807"></a><span class="sd">        be distributed among the remote actors. In more details, each actor</span>
<a id="__codelineno-0-2808" name="__codelineno-0-2808"></a><span class="sd">        will sample its own solutions (such that the total population size</span>
<a id="__codelineno-0-2809" name="__codelineno-0-2809"></a><span class="sd">        across all remote actors will be near the provided `popsize`)</span>
<a id="__codelineno-0-2810" name="__codelineno-0-2810"></a><span class="sd">        and will compute its own gradients, and will produce its own</span>
<a id="__codelineno-0-2811" name="__codelineno-0-2811"></a><span class="sd">        additional stats (if `with_stats` is given as True).</span>
<a id="__codelineno-0-2812" name="__codelineno-0-2812"></a><span class="sd">        These remote results will then be collected by the main process,</span>
<a id="__codelineno-0-2813" name="__codelineno-0-2813"></a><span class="sd">        and the final result of this method will be a list of dictionaries,</span>
<a id="__codelineno-0-2814" name="__codelineno-0-2814"></a><span class="sd">        each dictionary being the result of a remote gradient computation.</span>
<a id="__codelineno-0-2815" name="__codelineno-0-2815"></a>
<a id="__codelineno-0-2816" name="__codelineno-0-2816"></a><span class="sd">        The sampled solutions are temporary, and will not be kept</span>
<a id="__codelineno-0-2817" name="__codelineno-0-2817"></a><span class="sd">        (and will not be returned).</span>
<a id="__codelineno-0-2818" name="__codelineno-0-2818"></a>
<a id="__codelineno-0-2819" name="__codelineno-0-2819"></a><span class="sd">        To customize how solutions are sampled and how gradients are</span>
<a id="__codelineno-0-2820" name="__codelineno-0-2820"></a><span class="sd">        computed, one is encouraged to override</span>
<a id="__codelineno-0-2821" name="__codelineno-0-2821"></a><span class="sd">        `_sample_and_compute_gradients(...)` (instead of overriding this</span>
<a id="__codelineno-0-2822" name="__codelineno-0-2822"></a><span class="sd">        method directly.</span>
<a id="__codelineno-0-2823" name="__codelineno-0-2823"></a>
<a id="__codelineno-0-2824" name="__codelineno-0-2824"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-2825" name="__codelineno-0-2825"></a><span class="sd">            distribution: The search distribution from which the solutions</span>
<a id="__codelineno-0-2826" name="__codelineno-0-2826"></a><span class="sd">                will be sampled, and according to which the gradients will</span>
<a id="__codelineno-0-2827" name="__codelineno-0-2827"></a><span class="sd">                be computed.</span>
<a id="__codelineno-0-2828" name="__codelineno-0-2828"></a><span class="sd">            popsize: The number of solutions which will be sampled.</span>
<a id="__codelineno-0-2829" name="__codelineno-0-2829"></a><span class="sd">            num_interactions: Number of simulator interactions that must</span>
<a id="__codelineno-0-2830" name="__codelineno-0-2830"></a><span class="sd">                be completed (more solutions will be sampled until this</span>
<a id="__codelineno-0-2831" name="__codelineno-0-2831"></a><span class="sd">                threshold is reached). This argument is to be used when</span>
<a id="__codelineno-0-2832" name="__codelineno-0-2832"></a><span class="sd">                the problem has characteristics similar to reinforcement</span>
<a id="__codelineno-0-2833" name="__codelineno-0-2833"></a><span class="sd">                learning, and an adaptive population size, depending on</span>
<a id="__codelineno-0-2834" name="__codelineno-0-2834"></a><span class="sd">                the interactions made, is desired.</span>
<a id="__codelineno-0-2835" name="__codelineno-0-2835"></a><span class="sd">                Otherwise, one can leave this argument as None, in which</span>
<a id="__codelineno-0-2836" name="__codelineno-0-2836"></a><span class="sd">                case, there will not be any threshold based on number</span>
<a id="__codelineno-0-2837" name="__codelineno-0-2837"></a><span class="sd">                of interactions.</span>
<a id="__codelineno-0-2838" name="__codelineno-0-2838"></a><span class="sd">            popsize_max: To be used when `num_interactions` is provided,</span>
<a id="__codelineno-0-2839" name="__codelineno-0-2839"></a><span class="sd">                as an additional criterion for ending the solution sampling</span>
<a id="__codelineno-0-2840" name="__codelineno-0-2840"></a><span class="sd">                phase. This argument can be used to prevent the population</span>
<a id="__codelineno-0-2841" name="__codelineno-0-2841"></a><span class="sd">                size from growing too much while trying to satisfy the</span>
<a id="__codelineno-0-2842" name="__codelineno-0-2842"></a><span class="sd">                `num_interactions`. If not needed, `popsize_max` can be left</span>
<a id="__codelineno-0-2843" name="__codelineno-0-2843"></a><span class="sd">                as None.</span>
<a id="__codelineno-0-2844" name="__codelineno-0-2844"></a><span class="sd">            obj_index: Index of the objective according to which the gradients</span>
<a id="__codelineno-0-2845" name="__codelineno-0-2845"></a><span class="sd">                will be computed. Can be left as None if the problem has only</span>
<a id="__codelineno-0-2846" name="__codelineno-0-2846"></a><span class="sd">                one objective.</span>
<a id="__codelineno-0-2847" name="__codelineno-0-2847"></a><span class="sd">            ranking_method: The solution ranking method to be used when</span>
<a id="__codelineno-0-2848" name="__codelineno-0-2848"></a><span class="sd">                computing the gradients.</span>
<a id="__codelineno-0-2849" name="__codelineno-0-2849"></a><span class="sd">                If not specified, the raw fitnesses will be used.</span>
<a id="__codelineno-0-2850" name="__codelineno-0-2850"></a><span class="sd">            with_stats: If given as False, then the results dictionary will</span>
<a id="__codelineno-0-2851" name="__codelineno-0-2851"></a><span class="sd">                only contain the gradients information. If given as True,</span>
<a id="__codelineno-0-2852" name="__codelineno-0-2852"></a><span class="sd">                then the results dictionary will contain within itself</span>
<a id="__codelineno-0-2853" name="__codelineno-0-2853"></a><span class="sd">                the gradients dictionary, and also additional elements for</span>
<a id="__codelineno-0-2854" name="__codelineno-0-2854"></a><span class="sd">                providing further information.</span>
<a id="__codelineno-0-2855" name="__codelineno-0-2855"></a><span class="sd">                The default is True.</span>
<a id="__codelineno-0-2856" name="__codelineno-0-2856"></a><span class="sd">            ensure_even_popsize: If `ensure_even_popsize` is True and the</span>
<a id="__codelineno-0-2857" name="__codelineno-0-2857"></a><span class="sd">                problem is not parallelized, then a `popsize` given as an odd</span>
<a id="__codelineno-0-2858" name="__codelineno-0-2858"></a><span class="sd">                number will cause an error. If `ensure_even_popsize` is True</span>
<a id="__codelineno-0-2859" name="__codelineno-0-2859"></a><span class="sd">                and the problem is parallelized, then the remote actors will</span>
<a id="__codelineno-0-2860" name="__codelineno-0-2860"></a><span class="sd">                sample their own sub-populations in such a way that their</span>
<a id="__codelineno-0-2861" name="__codelineno-0-2861"></a><span class="sd">                sizes are even.</span>
<a id="__codelineno-0-2862" name="__codelineno-0-2862"></a><span class="sd">                If `ensure_even_popsize` is False, whether or not the</span>
<a id="__codelineno-0-2863" name="__codelineno-0-2863"></a><span class="sd">                `popsize` is even will not be checked.</span>
<a id="__codelineno-0-2864" name="__codelineno-0-2864"></a><span class="sd">                When the provided `distribution` is a symmetric (or</span>
<a id="__codelineno-0-2865" name="__codelineno-0-2865"></a><span class="sd">                &quot;mirrored&quot;, or &quot;antithetic&quot;), then this argument must be</span>
<a id="__codelineno-0-2866" name="__codelineno-0-2866"></a><span class="sd">                given as True.</span>
<a id="__codelineno-0-2867" name="__codelineno-0-2867"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-2868" name="__codelineno-0-2868"></a><span class="sd">            A results dictionary when the problem is not parallelized,</span>
<a id="__codelineno-0-2869" name="__codelineno-0-2869"></a><span class="sd">            or list of results dictionaries when the problem is parallelized.</span>
<a id="__codelineno-0-2870" name="__codelineno-0-2870"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2871" name="__codelineno-0-2871"></a>
<a id="__codelineno-0-2872" name="__codelineno-0-2872"></a>        <span class="c1"># For problems which are configured for parallelization, make sure that the actors are created.</span>
<a id="__codelineno-0-2873" name="__codelineno-0-2873"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_parallelize</span><span class="p">()</span>
<a id="__codelineno-0-2874" name="__codelineno-0-2874"></a>
<a id="__codelineno-0-2875" name="__codelineno-0-2875"></a>        <span class="c1"># Below we check if there is an inconsistency in arguments.</span>
<a id="__codelineno-0-2876" name="__codelineno-0-2876"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">num_interactions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">popsize_max</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-2877" name="__codelineno-0-2877"></a>            <span class="c1"># If `num_interactions` is None, then we assume that the user does not wish an adaptive population size.</span>
<a id="__codelineno-0-2878" name="__codelineno-0-2878"></a>            <span class="c1"># However, at the same time, if `popsize_max` is not None, then there is an inconsistency,</span>
<a id="__codelineno-0-2879" name="__codelineno-0-2879"></a>            <span class="c1"># because, `popsize_max` without `num_interactions` (therefore without adaptive population size)</span>
<a id="__codelineno-0-2880" name="__codelineno-0-2880"></a>            <span class="c1"># does not make sense.</span>
<a id="__codelineno-0-2881" name="__codelineno-0-2881"></a>            <span class="c1"># This is probably a configuration error, so, we inform the user by raising an error.</span>
<a id="__codelineno-0-2882" name="__codelineno-0-2882"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-2883" name="__codelineno-0-2883"></a>                <span class="sa">f</span><span class="s2">&quot;`popsize_max` was expected as None, because `num_interactions` is None.&quot;</span>
<a id="__codelineno-0-2884" name="__codelineno-0-2884"></a>                <span class="sa">f</span><span class="s2">&quot; However, `popsize_max` was found as </span><span class="si">{</span><span class="n">popsize_max</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-2885" name="__codelineno-0-2885"></a>            <span class="p">)</span>
<a id="__codelineno-0-2886" name="__codelineno-0-2886"></a>
<a id="__codelineno-0-2887" name="__codelineno-0-2887"></a>        <span class="c1"># The problem instance in the main process should trigger the `before_grad_hook`.</span>
<a id="__codelineno-0-2888" name="__codelineno-0-2888"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_main</span><span class="p">:</span>
<a id="__codelineno-0-2889" name="__codelineno-0-2889"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_before_grad_hook</span><span class="p">()</span>
<a id="__codelineno-0-2890" name="__codelineno-0-2890"></a>
<a id="__codelineno-0-2891" name="__codelineno-0-2891"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_main</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_actors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_actors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
<a id="__codelineno-0-2892" name="__codelineno-0-2892"></a>            <span class="c1"># If this is the main process and the problem is parallelized, then we need to split the request</span>
<a id="__codelineno-0-2893" name="__codelineno-0-2893"></a>            <span class="c1"># into multiple tasks, and then execute those tasks in parallel using the problem&#39;s actor pool.</span>
<a id="__codelineno-0-2894" name="__codelineno-0-2894"></a>
<a id="__codelineno-0-2895" name="__codelineno-0-2895"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subbatch_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2896" name="__codelineno-0-2896"></a>                <span class="c1"># If `subbatch_size` is provided, then we first make sure that `popsize` is divisible by</span>
<a id="__codelineno-0-2897" name="__codelineno-0-2897"></a>                <span class="c1"># `subbatch_size`</span>
<a id="__codelineno-0-2898" name="__codelineno-0-2898"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">popsize</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subbatch_size</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-2899" name="__codelineno-0-2899"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-2900" name="__codelineno-0-2900"></a>                        <span class="sa">f</span><span class="s2">&quot;This Problem was created with `subbatch_size` as </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_subbatch_size</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-2901" name="__codelineno-0-2901"></a>                        <span class="sa">f</span><span class="s2">&quot; When doing remote gradient computation, the requested population size must be divisible by&quot;</span>
<a id="__codelineno-0-2902" name="__codelineno-0-2902"></a>                        <span class="sa">f</span><span class="s2">&quot; the `subbatch_size`.&quot;</span>
<a id="__codelineno-0-2903" name="__codelineno-0-2903"></a>                        <span class="sa">f</span><span class="s2">&quot; However, the requested population size is </span><span class="si">{</span><span class="n">popsize</span><span class="si">}</span><span class="s2">, and the remainder after dividing it&quot;</span>
<a id="__codelineno-0-2904" name="__codelineno-0-2904"></a>                        <span class="sa">f</span><span class="s2">&quot; by `subbatch_size` is not 0 (it is </span><span class="si">{</span><span class="n">popsize</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">_subbatch_size</span><span class="si">}</span><span class="s2">).&quot;</span>
<a id="__codelineno-0-2905" name="__codelineno-0-2905"></a>                    <span class="p">)</span>
<a id="__codelineno-0-2906" name="__codelineno-0-2906"></a>                <span class="c1"># After making sure that `popsize` and `subbatch_size` configurations are compatible, we declare that</span>
<a id="__codelineno-0-2907" name="__codelineno-0-2907"></a>                <span class="c1"># we are going to have n tasks, each task imposing a sample size of `subbatch_size`.</span>
<a id="__codelineno-0-2908" name="__codelineno-0-2908"></a>                <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">popsize</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subbatch_size</span><span class="p">)</span>
<a id="__codelineno-0-2909" name="__codelineno-0-2909"></a>                <span class="n">popsize_per_task</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_subbatch_size</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
<a id="__codelineno-0-2910" name="__codelineno-0-2910"></a>            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_subbatches</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2911" name="__codelineno-0-2911"></a>                <span class="c1"># If `num_subbatches` is provided, then we are going to have n tasks where n is equal to the given</span>
<a id="__codelineno-0-2912" name="__codelineno-0-2912"></a>                <span class="c1"># `num_subbatches`.</span>
<a id="__codelineno-0-2913" name="__codelineno-0-2913"></a>                <span class="n">popsize_per_task</span> <span class="o">=</span> <span class="n">split_workload</span><span class="p">(</span><span class="n">popsize</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_subbatches</span><span class="p">)</span>
<a id="__codelineno-0-2914" name="__codelineno-0-2914"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2915" name="__codelineno-0-2915"></a>                <span class="c1"># If neither `subbatch_size` nor `num_subbatches` is given, then we will split the workload in such</span>
<a id="__codelineno-0-2916" name="__codelineno-0-2916"></a>                <span class="c1"># a way that each actor will have its share.</span>
<a id="__codelineno-0-2917" name="__codelineno-0-2917"></a>                <span class="n">popsize_per_task</span> <span class="o">=</span> <span class="n">split_workload</span><span class="p">(</span><span class="n">popsize</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_actors</span><span class="p">))</span>
<a id="__codelineno-0-2918" name="__codelineno-0-2918"></a>
<a id="__codelineno-0-2919" name="__codelineno-0-2919"></a>            <span class="k">if</span> <span class="n">ensure_even_popsize</span><span class="p">:</span>
<a id="__codelineno-0-2920" name="__codelineno-0-2920"></a>                <span class="c1"># If `ensure_even_popsize` argument is True, then we need to make sure that each tasks&#39;s popsize is</span>
<a id="__codelineno-0-2921" name="__codelineno-0-2921"></a>                <span class="c1"># an even number.</span>
<a id="__codelineno-0-2922" name="__codelineno-0-2922"></a>                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">popsize_per_task</span><span class="p">)):</span>
<a id="__codelineno-0-2923" name="__codelineno-0-2923"></a>                    <span class="k">if</span> <span class="p">(</span><span class="n">popsize_per_task</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-2924" name="__codelineno-0-2924"></a>                        <span class="c1"># If the i-th actor&#39;s assigned popsize is not even, increase its assigned popsize by 1.</span>
<a id="__codelineno-0-2925" name="__codelineno-0-2925"></a>                        <span class="n">popsize_per_task</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-0-2926" name="__codelineno-0-2926"></a>
<a id="__codelineno-0-2927" name="__codelineno-0-2927"></a>            <span class="c1"># The number of tasks is finally determined by the length of `popsize_per_task` list we created above.</span>
<a id="__codelineno-0-2928" name="__codelineno-0-2928"></a>            <span class="n">num_tasks</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">popsize_per_task</span><span class="p">)</span>
<a id="__codelineno-0-2929" name="__codelineno-0-2929"></a>
<a id="__codelineno-0-2930" name="__codelineno-0-2930"></a>            <span class="k">if</span> <span class="n">num_interactions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2931" name="__codelineno-0-2931"></a>                <span class="c1"># If the argument `num_interactions` is not given, then, for each task, we declare that</span>
<a id="__codelineno-0-2932" name="__codelineno-0-2932"></a>                <span class="c1"># `num_interactions` is None.</span>
<a id="__codelineno-0-2933" name="__codelineno-0-2933"></a>                <span class="n">num_inter_per_task</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_tasks</span><span class="p">)]</span>
<a id="__codelineno-0-2934" name="__codelineno-0-2934"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2935" name="__codelineno-0-2935"></a>                <span class="c1"># If the argument `num_interactions` is given, then we compute each task&#39;s target number of</span>
<a id="__codelineno-0-2936" name="__codelineno-0-2936"></a>                <span class="c1"># interactions from its sample size.</span>
<a id="__codelineno-0-2937" name="__codelineno-0-2937"></a>                <span class="n">num_inter_per_task</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-2938" name="__codelineno-0-2938"></a>                    <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">((</span><span class="n">popsize_per_task</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="n">popsize</span><span class="p">)</span> <span class="o">*</span> <span class="n">num_interactions</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_tasks</span><span class="p">)</span>
<a id="__codelineno-0-2939" name="__codelineno-0-2939"></a>                <span class="p">]</span>
<a id="__codelineno-0-2940" name="__codelineno-0-2940"></a>
<a id="__codelineno-0-2941" name="__codelineno-0-2941"></a>            <span class="k">if</span> <span class="n">popsize_max</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2942" name="__codelineno-0-2942"></a>                <span class="c1"># If the argument `popsize_max` is not given, then, for each task, we declare that</span>
<a id="__codelineno-0-2943" name="__codelineno-0-2943"></a>                <span class="c1"># `popsize_max` is None.</span>
<a id="__codelineno-0-2944" name="__codelineno-0-2944"></a>                <span class="n">popsize_max_per_task</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_tasks</span><span class="p">)]</span>
<a id="__codelineno-0-2945" name="__codelineno-0-2945"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2946" name="__codelineno-0-2946"></a>                <span class="c1"># If the argument `popsize_max` is given, then we compute each task&#39;s target maximum population size</span>
<a id="__codelineno-0-2947" name="__codelineno-0-2947"></a>                <span class="c1"># from its sample size.</span>
<a id="__codelineno-0-2948" name="__codelineno-0-2948"></a>                <span class="n">popsize_max_per_task</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-2949" name="__codelineno-0-2949"></a>                    <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">((</span><span class="n">popsize_per_task</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="n">popsize</span><span class="p">)</span> <span class="o">*</span> <span class="n">popsize_max</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_tasks</span><span class="p">)</span>
<a id="__codelineno-0-2950" name="__codelineno-0-2950"></a>                <span class="p">]</span>
<a id="__codelineno-0-2951" name="__codelineno-0-2951"></a>
<a id="__codelineno-0-2952" name="__codelineno-0-2952"></a>            <span class="c1"># We trigger the synchronization between the main process and the remote actors.</span>
<a id="__codelineno-0-2953" name="__codelineno-0-2953"></a>            <span class="c1"># If this problem instance has nothing to synchronize, then `must_sync_after` will be False.</span>
<a id="__codelineno-0-2954" name="__codelineno-0-2954"></a>            <span class="n">must_sync_after</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sync_before</span><span class="p">()</span>
<a id="__codelineno-0-2955" name="__codelineno-0-2955"></a>
<a id="__codelineno-0-2956" name="__codelineno-0-2956"></a>            <span class="c1"># Because we want to send the distribution to remote actors, we first copy the distribution to cpu</span>
<a id="__codelineno-0-2957" name="__codelineno-0-2957"></a>            <span class="c1"># (unless it is already on cpu)</span>
<a id="__codelineno-0-2958" name="__codelineno-0-2958"></a>            <span class="n">dist_on_cpu</span> <span class="o">=</span> <span class="n">distribution</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s2">&quot;cpu&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2959" name="__codelineno-0-2959"></a>
<a id="__codelineno-0-2960" name="__codelineno-0-2960"></a>            <span class="c1"># Here, we use our actor pool to execute our tasks in parallel.</span>
<a id="__codelineno-0-2961" name="__codelineno-0-2961"></a>            <span class="n">result</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
<a id="__codelineno-0-2962" name="__codelineno-0-2962"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_actor_pool</span><span class="o">.</span><span class="n">map_unordered</span><span class="p">(</span>
<a id="__codelineno-0-2963" name="__codelineno-0-2963"></a>                    <span class="p">(</span>
<a id="__codelineno-0-2964" name="__codelineno-0-2964"></a>                        <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">a</span><span class="o">.</span><span class="n">call</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span>
<a id="__codelineno-0-2965" name="__codelineno-0-2965"></a>                            <span class="s2">&quot;_sample_and_compute_gradients&quot;</span><span class="p">,</span>
<a id="__codelineno-0-2966" name="__codelineno-0-2966"></a>                            <span class="p">[</span><span class="n">dist_on_cpu</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
<a id="__codelineno-0-2967" name="__codelineno-0-2967"></a>                            <span class="p">{</span>
<a id="__codelineno-0-2968" name="__codelineno-0-2968"></a>                                <span class="s2">&quot;obj_index&quot;</span><span class="p">:</span> <span class="n">obj_index</span><span class="p">,</span>
<a id="__codelineno-0-2969" name="__codelineno-0-2969"></a>                                <span class="s2">&quot;num_interactions&quot;</span><span class="p">:</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<a id="__codelineno-0-2970" name="__codelineno-0-2970"></a>                                <span class="s2">&quot;popsize_max&quot;</span><span class="p">:</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
<a id="__codelineno-0-2971" name="__codelineno-0-2971"></a>                                <span class="s2">&quot;ranking_method&quot;</span><span class="p">:</span> <span class="n">ranking_method</span><span class="p">,</span>
<a id="__codelineno-0-2972" name="__codelineno-0-2972"></a>                            <span class="p">},</span>
<a id="__codelineno-0-2973" name="__codelineno-0-2973"></a>                        <span class="p">)</span>
<a id="__codelineno-0-2974" name="__codelineno-0-2974"></a>                    <span class="p">),</span>
<a id="__codelineno-0-2975" name="__codelineno-0-2975"></a>                    <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">popsize_per_task</span><span class="p">,</span> <span class="n">num_inter_per_task</span><span class="p">,</span> <span class="n">popsize_max_per_task</span><span class="p">)),</span>
<a id="__codelineno-0-2976" name="__codelineno-0-2976"></a>                <span class="p">)</span>
<a id="__codelineno-0-2977" name="__codelineno-0-2977"></a>            <span class="p">)</span>
<a id="__codelineno-0-2978" name="__codelineno-0-2978"></a>
<a id="__codelineno-0-2979" name="__codelineno-0-2979"></a>            <span class="c1"># At this point, all the tensors within our collected results are on the CPU.</span>
<a id="__codelineno-0-2980" name="__codelineno-0-2980"></a>
<a id="__codelineno-0-2981" name="__codelineno-0-2981"></a>            <span class="k">if</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span> <span class="o">!=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cpu&quot;</span><span class="p">):</span>
<a id="__codelineno-0-2982" name="__codelineno-0-2982"></a>                <span class="c1"># If the main device of this problem instance is not CPU, then we move the tensors to the main device.</span>
<a id="__codelineno-0-2983" name="__codelineno-0-2983"></a>                <span class="n">result</span> <span class="o">=</span> <span class="n">cast_tensors_in_container</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-2984" name="__codelineno-0-2984"></a>
<a id="__codelineno-0-2985" name="__codelineno-0-2985"></a>            <span class="k">if</span> <span class="n">must_sync_after</span><span class="p">:</span>
<a id="__codelineno-0-2986" name="__codelineno-0-2986"></a>                <span class="c1"># If a post-gradient synchronization is required, we trigger the synchronization operations.</span>
<a id="__codelineno-0-2987" name="__codelineno-0-2987"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_sync_after</span><span class="p">()</span>
<a id="__codelineno-0-2988" name="__codelineno-0-2988"></a>
<a id="__codelineno-0-2989" name="__codelineno-0-2989"></a>            <span class="c1"># ####################################################</span>
<a id="__codelineno-0-2990" name="__codelineno-0-2990"></a>            <span class="c1"># # If this is the main process and the problem is parallelized, then we need to split the workload among</span>
<a id="__codelineno-0-2991" name="__codelineno-0-2991"></a>            <span class="c1"># # the remote actors, and then request each of them to compute their gradients.</span>
<a id="__codelineno-0-2992" name="__codelineno-0-2992"></a>            <span class="c1">#</span>
<a id="__codelineno-0-2993" name="__codelineno-0-2993"></a>            <span class="c1"># # We begin by getting the number of actors, and computing the `popsize` for each actor.</span>
<a id="__codelineno-0-2994" name="__codelineno-0-2994"></a>            <span class="c1"># num_actors = len(self._actors)</span>
<a id="__codelineno-0-2995" name="__codelineno-0-2995"></a>            <span class="c1"># popsize_per_actor = split_workload(popsize, num_actors)</span>
<a id="__codelineno-0-2996" name="__codelineno-0-2996"></a>            <span class="c1">#</span>
<a id="__codelineno-0-2997" name="__codelineno-0-2997"></a>            <span class="c1"># if ensure_even_popsize:</span>
<a id="__codelineno-0-2998" name="__codelineno-0-2998"></a>            <span class="c1">#     # If `ensure_even_popsize` argument is True, then we need to make sure that each actor&#39;s popsize is</span>
<a id="__codelineno-0-2999" name="__codelineno-0-2999"></a>            <span class="c1">#     # an even number.</span>
<a id="__codelineno-0-3000" name="__codelineno-0-3000"></a>            <span class="c1">#     for i in range(len(popsize_per_actor)):</span>
<a id="__codelineno-0-3001" name="__codelineno-0-3001"></a>            <span class="c1">#         if (popsize_per_actor[i] % 2) != 0:</span>
<a id="__codelineno-0-3002" name="__codelineno-0-3002"></a>            <span class="c1">#             # If the i-th actor&#39;s assigned popsize is not even, increase its assigned popsize by 1.</span>
<a id="__codelineno-0-3003" name="__codelineno-0-3003"></a>            <span class="c1">#             popsize_per_actor[i] += 1</span>
<a id="__codelineno-0-3004" name="__codelineno-0-3004"></a>            <span class="c1">#</span>
<a id="__codelineno-0-3005" name="__codelineno-0-3005"></a>            <span class="c1"># if num_interactions is None:</span>
<a id="__codelineno-0-3006" name="__codelineno-0-3006"></a>            <span class="c1">#     # If `num_interactions` is None, then the `num_interactions` argument for each actor must also be</span>
<a id="__codelineno-0-3007" name="__codelineno-0-3007"></a>            <span class="c1">#     # passed as None.</span>
<a id="__codelineno-0-3008" name="__codelineno-0-3008"></a>            <span class="c1">#     num_int_per_actor = [None] * num_actors</span>
<a id="__codelineno-0-3009" name="__codelineno-0-3009"></a>            <span class="c1"># else:</span>
<a id="__codelineno-0-3010" name="__codelineno-0-3010"></a>            <span class="c1">#     # If `num_interactions` is not None, then we split the `num_interactions` workload among the actors.</span>
<a id="__codelineno-0-3011" name="__codelineno-0-3011"></a>            <span class="c1">#     num_int_per_actor = split_workload(num_interactions, num_actors)</span>
<a id="__codelineno-0-3012" name="__codelineno-0-3012"></a>            <span class="c1">#</span>
<a id="__codelineno-0-3013" name="__codelineno-0-3013"></a>            <span class="c1"># if popsize_max is None:</span>
<a id="__codelineno-0-3014" name="__codelineno-0-3014"></a>            <span class="c1">#     # If `popsize_max` is None, then the `popsize_max` argument for each actor must also be None.</span>
<a id="__codelineno-0-3015" name="__codelineno-0-3015"></a>            <span class="c1">#     popsize_max_per_actor = [None] * num_actors</span>
<a id="__codelineno-0-3016" name="__codelineno-0-3016"></a>            <span class="c1"># else:</span>
<a id="__codelineno-0-3017" name="__codelineno-0-3017"></a>            <span class="c1">#     # If `popsize_max` is not None, then we split the `popsize_max` workload among the actors.</span>
<a id="__codelineno-0-3018" name="__codelineno-0-3018"></a>            <span class="c1">#     popsize_max_per_actor = split_workload(popsize_max, num_actors)</span>
<a id="__codelineno-0-3019" name="__codelineno-0-3019"></a>            <span class="c1">#</span>
<a id="__codelineno-0-3020" name="__codelineno-0-3020"></a>            <span class="c1"># # We trigger the synchronization between the main process and the remote actors.</span>
<a id="__codelineno-0-3021" name="__codelineno-0-3021"></a>            <span class="c1"># # If this problem instance has nothing to synchronize, then `must_sync_after` will be False.</span>
<a id="__codelineno-0-3022" name="__codelineno-0-3022"></a>            <span class="c1"># must_sync_after = self._sync_before()</span>
<a id="__codelineno-0-3023" name="__codelineno-0-3023"></a>            <span class="c1">#</span>
<a id="__codelineno-0-3024" name="__codelineno-0-3024"></a>            <span class="c1"># # Because we want to send the distribution to remote actors, we first copy the distribution to cpu</span>
<a id="__codelineno-0-3025" name="__codelineno-0-3025"></a>            <span class="c1"># # (unless it is already on cpu)</span>
<a id="__codelineno-0-3026" name="__codelineno-0-3026"></a>            <span class="c1"># dist_on_cpu = distribution.to(&quot;cpu&quot;)</span>
<a id="__codelineno-0-3027" name="__codelineno-0-3027"></a>            <span class="c1">#</span>
<a id="__codelineno-0-3028" name="__codelineno-0-3028"></a>            <span class="c1"># # To each actor, we send the request of computing the gradients, and then collect the results</span>
<a id="__codelineno-0-3029" name="__codelineno-0-3029"></a>            <span class="c1"># result = ray.get(</span>
<a id="__codelineno-0-3030" name="__codelineno-0-3030"></a>            <span class="c1">#     [</span>
<a id="__codelineno-0-3031" name="__codelineno-0-3031"></a>            <span class="c1">#         self._actors[i].call.remote(</span>
<a id="__codelineno-0-3032" name="__codelineno-0-3032"></a>            <span class="c1">#             &quot;_gradient_computation_helper&quot;,</span>
<a id="__codelineno-0-3033" name="__codelineno-0-3033"></a>            <span class="c1">#             [dist_on_cpu, popsize_per_actor[i]],</span>
<a id="__codelineno-0-3034" name="__codelineno-0-3034"></a>            <span class="c1">#             dict(</span>
<a id="__codelineno-0-3035" name="__codelineno-0-3035"></a>            <span class="c1">#                 num_interactions=num_int_per_actor[i],</span>
<a id="__codelineno-0-3036" name="__codelineno-0-3036"></a>            <span class="c1">#                 popsize_max=popsize_max_per_actor[i],</span>
<a id="__codelineno-0-3037" name="__codelineno-0-3037"></a>            <span class="c1">#                 obj_index=obj_index,</span>
<a id="__codelineno-0-3038" name="__codelineno-0-3038"></a>            <span class="c1">#                 ranking_method=ranking_method,</span>
<a id="__codelineno-0-3039" name="__codelineno-0-3039"></a>            <span class="c1">#                 with_stats=with_stats,</span>
<a id="__codelineno-0-3040" name="__codelineno-0-3040"></a>            <span class="c1">#                 move_results_to_device=&quot;cpu&quot;,</span>
<a id="__codelineno-0-3041" name="__codelineno-0-3041"></a>            <span class="c1">#             ),</span>
<a id="__codelineno-0-3042" name="__codelineno-0-3042"></a>            <span class="c1">#         )</span>
<a id="__codelineno-0-3043" name="__codelineno-0-3043"></a>            <span class="c1">#         for i in range(num_actors)</span>
<a id="__codelineno-0-3044" name="__codelineno-0-3044"></a>            <span class="c1">#     ]</span>
<a id="__codelineno-0-3045" name="__codelineno-0-3045"></a>            <span class="c1"># )</span>
<a id="__codelineno-0-3046" name="__codelineno-0-3046"></a>            <span class="c1">#</span>
<a id="__codelineno-0-3047" name="__codelineno-0-3047"></a>            <span class="c1"># # At this point, all the tensors within our collected results are on the CPU.</span>
<a id="__codelineno-0-3048" name="__codelineno-0-3048"></a>            <span class="c1">#</span>
<a id="__codelineno-0-3049" name="__codelineno-0-3049"></a>            <span class="c1"># if torch.device(self.device) != torch.device(&quot;cpu&quot;):</span>
<a id="__codelineno-0-3050" name="__codelineno-0-3050"></a>            <span class="c1">#     # If the main device of this problem instance is not CPU, then we move the tensors to the main device.</span>
<a id="__codelineno-0-3051" name="__codelineno-0-3051"></a>            <span class="c1">#     result = cast_tensors_in_container(result, device=device)</span>
<a id="__codelineno-0-3052" name="__codelineno-0-3052"></a>            <span class="c1">#</span>
<a id="__codelineno-0-3053" name="__codelineno-0-3053"></a>            <span class="c1"># if must_sync_after:</span>
<a id="__codelineno-0-3054" name="__codelineno-0-3054"></a>            <span class="c1">#     # If a post-gradient synchronization is required, we trigger the synchronization operations.</span>
<a id="__codelineno-0-3055" name="__codelineno-0-3055"></a>            <span class="c1">#     self._sync_after()</span>
<a id="__codelineno-0-3056" name="__codelineno-0-3056"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3057" name="__codelineno-0-3057"></a>            <span class="c1"># If the problem is not parallelized, then we request this instance itself to compute the gradients.</span>
<a id="__codelineno-0-3058" name="__codelineno-0-3058"></a>            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gradient_computation_helper</span><span class="p">(</span>
<a id="__codelineno-0-3059" name="__codelineno-0-3059"></a>                <span class="n">distribution</span><span class="p">,</span>
<a id="__codelineno-0-3060" name="__codelineno-0-3060"></a>                <span class="n">popsize</span><span class="p">,</span>
<a id="__codelineno-0-3061" name="__codelineno-0-3061"></a>                <span class="n">popsize_max</span><span class="o">=</span><span class="n">popsize_max</span><span class="p">,</span>
<a id="__codelineno-0-3062" name="__codelineno-0-3062"></a>                <span class="n">obj_index</span><span class="o">=</span><span class="n">obj_index</span><span class="p">,</span>
<a id="__codelineno-0-3063" name="__codelineno-0-3063"></a>                <span class="n">ranking_method</span><span class="o">=</span><span class="n">ranking_method</span><span class="p">,</span>
<a id="__codelineno-0-3064" name="__codelineno-0-3064"></a>                <span class="n">num_interactions</span><span class="o">=</span><span class="n">num_interactions</span><span class="p">,</span>
<a id="__codelineno-0-3065" name="__codelineno-0-3065"></a>                <span class="n">with_stats</span><span class="o">=</span><span class="n">with_stats</span><span class="p">,</span>
<a id="__codelineno-0-3066" name="__codelineno-0-3066"></a>            <span class="p">)</span>
<a id="__codelineno-0-3067" name="__codelineno-0-3067"></a>
<a id="__codelineno-0-3068" name="__codelineno-0-3068"></a>        <span class="c1"># The problem instance in the main process should trigger the `after_grad_hook`.</span>
<a id="__codelineno-0-3069" name="__codelineno-0-3069"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_main</span><span class="p">:</span>
<a id="__codelineno-0-3070" name="__codelineno-0-3070"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_after_eval_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_after_grad_hook</span><span class="o">.</span><span class="n">accumulate_dict</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<a id="__codelineno-0-3071" name="__codelineno-0-3071"></a>
<a id="__codelineno-0-3072" name="__codelineno-0-3072"></a>        <span class="c1"># We finally return the results</span>
<a id="__codelineno-0-3073" name="__codelineno-0-3073"></a>        <span class="k">return</span> <span class="n">result</span>
<a id="__codelineno-0-3074" name="__codelineno-0-3074"></a>
<a id="__codelineno-0-3075" name="__codelineno-0-3075"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_gradient_computation_helper</span><span class="p">(</span>
<a id="__codelineno-0-3076" name="__codelineno-0-3076"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-3077" name="__codelineno-0-3077"></a>        <span class="n">distribution</span><span class="p">,</span>
<a id="__codelineno-0-3078" name="__codelineno-0-3078"></a>        <span class="n">popsize</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-3079" name="__codelineno-0-3079"></a>        <span class="o">*</span><span class="p">,</span>
<a id="__codelineno-0-3080" name="__codelineno-0-3080"></a>        <span class="n">num_interactions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3081" name="__codelineno-0-3081"></a>        <span class="n">popsize_max</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3082" name="__codelineno-0-3082"></a>        <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3083" name="__codelineno-0-3083"></a>        <span class="n">ranking_method</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3084" name="__codelineno-0-3084"></a>        <span class="n">with_stats</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-3085" name="__codelineno-0-3085"></a>        <span class="n">move_results_to_device</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Device</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3086" name="__codelineno-0-3086"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-3087" name="__codelineno-0-3087"></a>        <span class="c1"># This is a helper method which makes sure that the provided distribution is in the correct dtype and device.</span>
<a id="__codelineno-0-3088" name="__codelineno-0-3088"></a>        <span class="c1"># This method also makes sure that the results are moved to the desired device.</span>
<a id="__codelineno-0-3089" name="__codelineno-0-3089"></a>
<a id="__codelineno-0-3090" name="__codelineno-0-3090"></a>        <span class="c1"># At first, we make sure that the objective index is normalized</span>
<a id="__codelineno-0-3091" name="__codelineno-0-3091"></a>        <span class="c1"># (for example, the objective -1 is converted to the index of the last objective).</span>
<a id="__codelineno-0-3092" name="__codelineno-0-3092"></a>        <span class="n">obj_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">normalize_obj_index</span><span class="p">(</span><span class="n">obj_index</span><span class="p">)</span>
<a id="__codelineno-0-3093" name="__codelineno-0-3093"></a>
<a id="__codelineno-0-3094" name="__codelineno-0-3094"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">distribution</span><span class="o">.</span><span class="n">dtype</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">distribution</span><span class="o">.</span><span class="n">device</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">):</span>
<a id="__codelineno-0-3095" name="__codelineno-0-3095"></a>            <span class="c1"># Make sure that the distribution is in the correct dtype and device</span>
<a id="__codelineno-0-3096" name="__codelineno-0-3096"></a>            <span class="n">distribution</span> <span class="o">=</span> <span class="n">distribution</span><span class="o">.</span><span class="n">modified_copy</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-3097" name="__codelineno-0-3097"></a>
<a id="__codelineno-0-3098" name="__codelineno-0-3098"></a>        <span class="c1"># Call the protected method responsible for sampling solutions and computing the gradients</span>
<a id="__codelineno-0-3099" name="__codelineno-0-3099"></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sample_and_compute_gradients</span><span class="p">(</span>
<a id="__codelineno-0-3100" name="__codelineno-0-3100"></a>            <span class="n">distribution</span><span class="p">,</span>
<a id="__codelineno-0-3101" name="__codelineno-0-3101"></a>            <span class="n">popsize</span><span class="p">,</span>
<a id="__codelineno-0-3102" name="__codelineno-0-3102"></a>            <span class="n">popsize_max</span><span class="o">=</span><span class="n">popsize_max</span><span class="p">,</span>
<a id="__codelineno-0-3103" name="__codelineno-0-3103"></a>            <span class="n">obj_index</span><span class="o">=</span><span class="n">obj_index</span><span class="p">,</span>
<a id="__codelineno-0-3104" name="__codelineno-0-3104"></a>            <span class="n">num_interactions</span><span class="o">=</span><span class="n">num_interactions</span><span class="p">,</span>
<a id="__codelineno-0-3105" name="__codelineno-0-3105"></a>            <span class="n">ranking_method</span><span class="o">=</span><span class="n">ranking_method</span><span class="p">,</span>
<a id="__codelineno-0-3106" name="__codelineno-0-3106"></a>        <span class="p">)</span>
<a id="__codelineno-0-3107" name="__codelineno-0-3107"></a>
<a id="__codelineno-0-3108" name="__codelineno-0-3108"></a>        <span class="k">if</span> <span class="n">move_results_to_device</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3109" name="__codelineno-0-3109"></a>            <span class="c1"># If `move_results_to_device` is provided, move the results to the desired device</span>
<a id="__codelineno-0-3110" name="__codelineno-0-3110"></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">cast_tensors_in_container</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">move_results_to_device</span><span class="p">)</span>
<a id="__codelineno-0-3111" name="__codelineno-0-3111"></a>
<a id="__codelineno-0-3112" name="__codelineno-0-3112"></a>        <span class="c1"># Finally, return the result</span>
<a id="__codelineno-0-3113" name="__codelineno-0-3113"></a>        <span class="k">if</span> <span class="n">with_stats</span><span class="p">:</span>
<a id="__codelineno-0-3114" name="__codelineno-0-3114"></a>            <span class="k">return</span> <span class="n">result</span>
<a id="__codelineno-0-3115" name="__codelineno-0-3115"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3116" name="__codelineno-0-3116"></a>            <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;gradients&quot;</span><span class="p">]</span>
<a id="__codelineno-0-3117" name="__codelineno-0-3117"></a>
<a id="__codelineno-0-3118" name="__codelineno-0-3118"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-3119" name="__codelineno-0-3119"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_grad_device</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Device</span><span class="p">:</span>
<a id="__codelineno-0-3120" name="__codelineno-0-3120"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-3121" name="__codelineno-0-3121"></a><span class="sd">        Get the device in which new solutions will be made in distributed mode.</span>
<a id="__codelineno-0-3122" name="__codelineno-0-3122"></a>
<a id="__codelineno-0-3123" name="__codelineno-0-3123"></a><span class="sd">        In more details, in distributed mode, each actor creates its own</span>
<a id="__codelineno-0-3124" name="__codelineno-0-3124"></a><span class="sd">        sub-populations, evaluates them, and computes its own gradient</span>
<a id="__codelineno-0-3125" name="__codelineno-0-3125"></a><span class="sd">        (all such actor gradients eventually being collected by the</span>
<a id="__codelineno-0-3126" name="__codelineno-0-3126"></a><span class="sd">        distribution-based search algorithm in the main process).</span>
<a id="__codelineno-0-3127" name="__codelineno-0-3127"></a><span class="sd">        For some problem types, it can make sense for the remote actors to</span>
<a id="__codelineno-0-3128" name="__codelineno-0-3128"></a><span class="sd">        create their temporary sub-populations on another device</span>
<a id="__codelineno-0-3129" name="__codelineno-0-3129"></a><span class="sd">        (e.g. on the GPU that is allocated specifically for them).</span>
<a id="__codelineno-0-3130" name="__codelineno-0-3130"></a><span class="sd">        For such situations, one is encouraged to override this property</span>
<a id="__codelineno-0-3131" name="__codelineno-0-3131"></a><span class="sd">        and make it return whatever device is to be used.</span>
<a id="__codelineno-0-3132" name="__codelineno-0-3132"></a>
<a id="__codelineno-0-3133" name="__codelineno-0-3133"></a><span class="sd">        Note that this property is used by the default implementation of the</span>
<a id="__codelineno-0-3134" name="__codelineno-0-3134"></a><span class="sd">        method named `_sample_and_compute_grad(...)`. If the method named</span>
<a id="__codelineno-0-3135" name="__codelineno-0-3135"></a><span class="sd">        `_sample_and_compute_grad(...)` is overriden, this property might not</span>
<a id="__codelineno-0-3136" name="__codelineno-0-3136"></a><span class="sd">        be called at all.</span>
<a id="__codelineno-0-3137" name="__codelineno-0-3137"></a>
<a id="__codelineno-0-3138" name="__codelineno-0-3138"></a><span class="sd">        This is the default (i.e. not-yet-overriden) implementation in the</span>
<a id="__codelineno-0-3139" name="__codelineno-0-3139"></a><span class="sd">        Problem class, and performs the following operations to decide the</span>
<a id="__codelineno-0-3140" name="__codelineno-0-3140"></a><span class="sd">        device:</span>
<a id="__codelineno-0-3141" name="__codelineno-0-3141"></a><span class="sd">        (i) if the Problem object was given an external fitness function that</span>
<a id="__codelineno-0-3142" name="__codelineno-0-3142"></a><span class="sd">        is decorated by @[on_device][evotorch.decorators.on_device],</span>
<a id="__codelineno-0-3143" name="__codelineno-0-3143"></a><span class="sd">        or by @[on_aux_device][evotorch.decorators.on_aux_device],</span>
<a id="__codelineno-0-3144" name="__codelineno-0-3144"></a><span class="sd">        or has a `device` attribute, then return the device requested by that</span>
<a id="__codelineno-0-3145" name="__codelineno-0-3145"></a><span class="sd">        function; otherwise</span>
<a id="__codelineno-0-3146" name="__codelineno-0-3146"></a><span class="sd">        (ii) if either one of the methods `_evaluate_batch`, and `_evaluate`</span>
<a id="__codelineno-0-3147" name="__codelineno-0-3147"></a><span class="sd">        was decorated by @[on_device][evotorch.decorators.on_device]</span>
<a id="__codelineno-0-3148" name="__codelineno-0-3148"></a><span class="sd">        or by @[on_aux_device][evotorch.decorators.on_aux_device],</span>
<a id="__codelineno-0-3149" name="__codelineno-0-3149"></a><span class="sd">        or has a `device` attribute, then return the device requested by that</span>
<a id="__codelineno-0-3150" name="__codelineno-0-3150"></a><span class="sd">        method; otherwise</span>
<a id="__codelineno-0-3151" name="__codelineno-0-3151"></a><span class="sd">        (iii) return the main device of the Problem object.</span>
<a id="__codelineno-0-3152" name="__codelineno-0-3152"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-3153" name="__codelineno-0-3153"></a>        <span class="n">fitness_device</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_device_of_fitness_function</span><span class="p">()</span>
<a id="__codelineno-0-3154" name="__codelineno-0-3154"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span> <span class="k">if</span> <span class="n">fitness_device</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">fitness_device</span>
<a id="__codelineno-0-3155" name="__codelineno-0-3155"></a>
<a id="__codelineno-0-3156" name="__codelineno-0-3156"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_sample_and_compute_gradients</span><span class="p">(</span>
<a id="__codelineno-0-3157" name="__codelineno-0-3157"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-3158" name="__codelineno-0-3158"></a>        <span class="n">distribution</span><span class="p">,</span>
<a id="__codelineno-0-3159" name="__codelineno-0-3159"></a>        <span class="n">popsize</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-3160" name="__codelineno-0-3160"></a>        <span class="o">*</span><span class="p">,</span>
<a id="__codelineno-0-3161" name="__codelineno-0-3161"></a>        <span class="n">obj_index</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-3162" name="__codelineno-0-3162"></a>        <span class="n">num_interactions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3163" name="__codelineno-0-3163"></a>        <span class="n">popsize_max</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3164" name="__codelineno-0-3164"></a>        <span class="n">ranking_method</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3165" name="__codelineno-0-3165"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-3166" name="__codelineno-0-3166"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-3167" name="__codelineno-0-3167"></a><span class="sd">        This method contains the description of how the solutions are sampled</span>
<a id="__codelineno-0-3168" name="__codelineno-0-3168"></a><span class="sd">        and the gradients are computed according to the given distribution.</span>
<a id="__codelineno-0-3169" name="__codelineno-0-3169"></a>
<a id="__codelineno-0-3170" name="__codelineno-0-3170"></a><span class="sd">        One might override this method for customizing the procedure of</span>
<a id="__codelineno-0-3171" name="__codelineno-0-3171"></a><span class="sd">        sampling solutions and the gradient computation, but this method does</span>
<a id="__codelineno-0-3172" name="__codelineno-0-3172"></a><span class="sd">        have a default implementation.</span>
<a id="__codelineno-0-3173" name="__codelineno-0-3173"></a>
<a id="__codelineno-0-3174" name="__codelineno-0-3174"></a><span class="sd">        This returns a dictionary which contains the gradients for the given</span>
<a id="__codelineno-0-3175" name="__codelineno-0-3175"></a><span class="sd">        distribution, and also further information. For example, considering</span>
<a id="__codelineno-0-3176" name="__codelineno-0-3176"></a><span class="sd">        a Gaussian distribution with parameters &#39;mu&#39; and &#39;sigma&#39;, the result</span>
<a id="__codelineno-0-3177" name="__codelineno-0-3177"></a><span class="sd">        is expected to look like this:</span>
<a id="__codelineno-0-3178" name="__codelineno-0-3178"></a>
<a id="__codelineno-0-3179" name="__codelineno-0-3179"></a><span class="sd">            {</span>
<a id="__codelineno-0-3180" name="__codelineno-0-3180"></a><span class="sd">                &quot;gradients&quot;: {</span>
<a id="__codelineno-0-3181" name="__codelineno-0-3181"></a><span class="sd">                    &quot;mu&quot;: ...,     # the gradient for the mean (tensor)</span>
<a id="__codelineno-0-3182" name="__codelineno-0-3182"></a><span class="sd">                    &quot;sigma&quot;: ...,  # the gradient for the std.dev. (tensor)</span>
<a id="__codelineno-0-3183" name="__codelineno-0-3183"></a><span class="sd">                },</span>
<a id="__codelineno-0-3184" name="__codelineno-0-3184"></a><span class="sd">                &quot;num_solutions&quot;: ...,  # how many solutions were sampled (int)</span>
<a id="__codelineno-0-3185" name="__codelineno-0-3185"></a><span class="sd">                &quot;mean_eval&quot;: ...,      # Mean of all evaluations (float)</span>
<a id="__codelineno-0-3186" name="__codelineno-0-3186"></a><span class="sd">            }</span>
<a id="__codelineno-0-3187" name="__codelineno-0-3187"></a>
<a id="__codelineno-0-3188" name="__codelineno-0-3188"></a><span class="sd">        A customized version of this method can add more items to the outer</span>
<a id="__codelineno-0-3189" name="__codelineno-0-3189"></a><span class="sd">        dictionary.</span>
<a id="__codelineno-0-3190" name="__codelineno-0-3190"></a>
<a id="__codelineno-0-3191" name="__codelineno-0-3191"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-3192" name="__codelineno-0-3192"></a><span class="sd">            distribution: The search distribution from which the solutions</span>
<a id="__codelineno-0-3193" name="__codelineno-0-3193"></a><span class="sd">                will be sampled and according to which the gradients will</span>
<a id="__codelineno-0-3194" name="__codelineno-0-3194"></a><span class="sd">                be computed. This method assumes that `distribution` is</span>
<a id="__codelineno-0-3195" name="__codelineno-0-3195"></a><span class="sd">                given with this problem instance&#39;s dtype, and in this problem</span>
<a id="__codelineno-0-3196" name="__codelineno-0-3196"></a><span class="sd">                instance&#39;s device.</span>
<a id="__codelineno-0-3197" name="__codelineno-0-3197"></a><span class="sd">            popsize: Number of solutions to sample.</span>
<a id="__codelineno-0-3198" name="__codelineno-0-3198"></a><span class="sd">            obj_index: Objective index, expected as an integer.</span>
<a id="__codelineno-0-3199" name="__codelineno-0-3199"></a><span class="sd">            num_interactions: Number of simulator interactions that must be</span>
<a id="__codelineno-0-3200" name="__codelineno-0-3200"></a><span class="sd">                reached before computing the gradients.</span>
<a id="__codelineno-0-3201" name="__codelineno-0-3201"></a><span class="sd">                Having this argument as an integer implies that adaptive</span>
<a id="__codelineno-0-3202" name="__codelineno-0-3202"></a><span class="sd">                population is requested: more solutions are to be sampled</span>
<a id="__codelineno-0-3203" name="__codelineno-0-3203"></a><span class="sd">                until this number of simulator interactions are made.</span>
<a id="__codelineno-0-3204" name="__codelineno-0-3204"></a><span class="sd">                Can also be None if this threshold is not needed.</span>
<a id="__codelineno-0-3205" name="__codelineno-0-3205"></a><span class="sd">            popsize_max: Maximum population size for when the population</span>
<a id="__codelineno-0-3206" name="__codelineno-0-3206"></a><span class="sd">                size is adaptive (where the adaptiveness is enabled when</span>
<a id="__codelineno-0-3207" name="__codelineno-0-3207"></a><span class="sd">                `num_interactions` is not None).</span>
<a id="__codelineno-0-3208" name="__codelineno-0-3208"></a><span class="sd">                Can be left as None if a maximum population size limit</span>
<a id="__codelineno-0-3209" name="__codelineno-0-3209"></a><span class="sd">                is not needed.</span>
<a id="__codelineno-0-3210" name="__codelineno-0-3210"></a><span class="sd">            ranking_method: Ranking method to be used when computing the</span>
<a id="__codelineno-0-3211" name="__codelineno-0-3211"></a><span class="sd">                gradients. Can be left as None, in which case the raw</span>
<a id="__codelineno-0-3212" name="__codelineno-0-3212"></a><span class="sd">                fitnesses will be used.</span>
<a id="__codelineno-0-3213" name="__codelineno-0-3213"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-3214" name="__codelineno-0-3214"></a><span class="sd">            A dictionary which contains the gradients, number of solutions,</span>
<a id="__codelineno-0-3215" name="__codelineno-0-3215"></a><span class="sd">            mean of all the evaluation results, and optionally further</span>
<a id="__codelineno-0-3216" name="__codelineno-0-3216"></a><span class="sd">            items (if customized to do so).</span>
<a id="__codelineno-0-3217" name="__codelineno-0-3217"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-3218" name="__codelineno-0-3218"></a>
<a id="__codelineno-0-3219" name="__codelineno-0-3219"></a>        <span class="c1"># Annotate the variable which will store the temporary SolutionBatch for computing the local gradient.</span>
<a id="__codelineno-0-3220" name="__codelineno-0-3220"></a>        <span class="n">resulting_batch</span><span class="p">:</span> <span class="n">SolutionBatch</span>
<a id="__codelineno-0-3221" name="__codelineno-0-3221"></a>
<a id="__codelineno-0-3222" name="__codelineno-0-3222"></a>        <span class="c1"># Get the device in which the new solutions will be made.</span>
<a id="__codelineno-0-3223" name="__codelineno-0-3223"></a>        <span class="n">grad_device</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_grad_device</span><span class="p">)</span>
<a id="__codelineno-0-3224" name="__codelineno-0-3224"></a>        <span class="n">distribution</span> <span class="o">=</span> <span class="n">distribution</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">grad_device</span><span class="p">)</span>
<a id="__codelineno-0-3225" name="__codelineno-0-3225"></a>
<a id="__codelineno-0-3226" name="__codelineno-0-3226"></a>        <span class="c1"># Below we define an inner utility function which samples and evaluates a new SolutionBatch.</span>
<a id="__codelineno-0-3227" name="__codelineno-0-3227"></a>        <span class="c1"># This newly evaluated SolutionBatch is returned.</span>
<a id="__codelineno-0-3228" name="__codelineno-0-3228"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">sample_evaluated_batch</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">SolutionBatch</span><span class="p">:</span>
<a id="__codelineno-0-3229" name="__codelineno-0-3229"></a>            <span class="n">batch</span> <span class="o">=</span> <span class="n">SolutionBatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">popsize</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">grad_device</span><span class="p">)</span>
<a id="__codelineno-0-3230" name="__codelineno-0-3230"></a>            <span class="n">distribution</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">out</span><span class="o">=</span><span class="n">batch</span><span class="o">.</span><span class="n">access_values</span><span class="p">(),</span> <span class="n">generator</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">generator</span><span class="p">)</span>
<a id="__codelineno-0-3231" name="__codelineno-0-3231"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
<a id="__codelineno-0-3232" name="__codelineno-0-3232"></a>            <span class="k">return</span> <span class="n">batch</span>
<a id="__codelineno-0-3233" name="__codelineno-0-3233"></a>
<a id="__codelineno-0-3234" name="__codelineno-0-3234"></a>        <span class="k">if</span> <span class="n">num_interactions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3235" name="__codelineno-0-3235"></a>            <span class="c1"># If a `num_interactions` threshold is not given (i.e. is left as None), then we assume that an adaptive</span>
<a id="__codelineno-0-3236" name="__codelineno-0-3236"></a>            <span class="c1"># population is not desired.</span>
<a id="__codelineno-0-3237" name="__codelineno-0-3237"></a>            <span class="c1"># We therefore simply sample and evaluate a single SolutionBatch, and declare it as our main batch.</span>
<a id="__codelineno-0-3238" name="__codelineno-0-3238"></a>            <span class="n">resulting_batch</span> <span class="o">=</span> <span class="n">sample_evaluated_batch</span><span class="p">()</span>
<a id="__codelineno-0-3239" name="__codelineno-0-3239"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3240" name="__codelineno-0-3240"></a>            <span class="c1"># If we have a `num_interactions` threshold, then we might have to sample more than one SolutionBatch</span>
<a id="__codelineno-0-3241" name="__codelineno-0-3241"></a>            <span class="c1"># (until `num_interactions` is reached).</span>
<a id="__codelineno-0-3242" name="__codelineno-0-3242"></a>            <span class="c1"># We start by defining a list (`batches`) which is to store all the batches we will sample.</span>
<a id="__codelineno-0-3243" name="__codelineno-0-3243"></a>            <span class="n">batches</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-3244" name="__codelineno-0-3244"></a>
<a id="__codelineno-0-3245" name="__codelineno-0-3245"></a>            <span class="c1"># We will have to count the number of all simulator interactions that we have encountered during the</span>
<a id="__codelineno-0-3246" name="__codelineno-0-3246"></a>            <span class="c1"># execution of this method. So, to count it correctly, we first get the interaction count that we already</span>
<a id="__codelineno-0-3247" name="__codelineno-0-3247"></a>            <span class="c1"># have before sampling and evaluating our new solutions.</span>
<a id="__codelineno-0-3248" name="__codelineno-0-3248"></a>            <span class="n">interaction_count_at_first</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_local_interaction_count</span><span class="p">()</span>
<a id="__codelineno-0-3249" name="__codelineno-0-3249"></a>
<a id="__codelineno-0-3250" name="__codelineno-0-3250"></a>            <span class="c1"># Below is an inner function which returns how many simulator interactions we have done so far.</span>
<a id="__codelineno-0-3251" name="__codelineno-0-3251"></a>            <span class="c1"># It makes use of the variable `interaction_count_at_first` defined above.</span>
<a id="__codelineno-0-3252" name="__codelineno-0-3252"></a>            <span class="k">def</span><span class="w"> </span><span class="nf">current_num_interactions</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-3253" name="__codelineno-0-3253"></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_local_interaction_count</span><span class="p">()</span> <span class="o">-</span> <span class="n">interaction_count_at_first</span>
<a id="__codelineno-0-3254" name="__codelineno-0-3254"></a>
<a id="__codelineno-0-3255" name="__codelineno-0-3255"></a>            <span class="c1"># We also keep track of the total number of solutions.</span>
<a id="__codelineno-0-3256" name="__codelineno-0-3256"></a>            <span class="c1"># We might need this if there is a `popsize_max` threshold.</span>
<a id="__codelineno-0-3257" name="__codelineno-0-3257"></a>            <span class="n">current_popsize</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-3258" name="__codelineno-0-3258"></a>
<a id="__codelineno-0-3259" name="__codelineno-0-3259"></a>            <span class="c1"># The main loop of the adaptive sampling.</span>
<a id="__codelineno-0-3260" name="__codelineno-0-3260"></a>            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-0-3261" name="__codelineno-0-3261"></a>                <span class="c1"># Sample and evaluate a new SolutionBatch, and add it to our batches list.</span>
<a id="__codelineno-0-3262" name="__codelineno-0-3262"></a>                <span class="n">batches</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sample_evaluated_batch</span><span class="p">())</span>
<a id="__codelineno-0-3263" name="__codelineno-0-3263"></a>
<a id="__codelineno-0-3264" name="__codelineno-0-3264"></a>                <span class="c1"># Increase our total population size by the size of the most recent batch.</span>
<a id="__codelineno-0-3265" name="__codelineno-0-3265"></a>                <span class="n">current_popsize</span> <span class="o">+=</span> <span class="n">popsize</span>
<a id="__codelineno-0-3266" name="__codelineno-0-3266"></a>
<a id="__codelineno-0-3267" name="__codelineno-0-3267"></a>                <span class="k">if</span> <span class="n">current_num_interactions</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">num_interactions</span><span class="p">:</span>
<a id="__codelineno-0-3268" name="__codelineno-0-3268"></a>                    <span class="c1"># If the number of interactions has reached or exceeded the `num_interactions` threshold,</span>
<a id="__codelineno-0-3269" name="__codelineno-0-3269"></a>                    <span class="c1"># we exit the loop.</span>
<a id="__codelineno-0-3270" name="__codelineno-0-3270"></a>                    <span class="k">break</span>
<a id="__codelineno-0-3271" name="__codelineno-0-3271"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">popsize_max</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">current_popsize</span> <span class="o">&gt;=</span> <span class="n">popsize_max</span><span class="p">):</span>
<a id="__codelineno-0-3272" name="__codelineno-0-3272"></a>                    <span class="c1"># If we have `popsize_max` threshold and our total population size have reached or exceeded</span>
<a id="__codelineno-0-3273" name="__codelineno-0-3273"></a>                    <span class="c1"># the `popsize_max` threshold, we exit the loop.</span>
<a id="__codelineno-0-3274" name="__codelineno-0-3274"></a>                    <span class="k">break</span>
<a id="__codelineno-0-3275" name="__codelineno-0-3275"></a>
<a id="__codelineno-0-3276" name="__codelineno-0-3276"></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">batches</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-3277" name="__codelineno-0-3277"></a>                <span class="c1"># If we have only one batch in our batches list, that batch can be declared as our main batch.</span>
<a id="__codelineno-0-3278" name="__codelineno-0-3278"></a>                <span class="n">resulting_batch</span> <span class="o">=</span> <span class="n">batches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-3279" name="__codelineno-0-3279"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3280" name="__codelineno-0-3280"></a>                <span class="c1"># If we have multiple batches in our batches list, we concatenate all those batches and</span>
<a id="__codelineno-0-3281" name="__codelineno-0-3281"></a>                <span class="c1"># declare the result of the concatenation as our main batch.</span>
<a id="__codelineno-0-3282" name="__codelineno-0-3282"></a>                <span class="n">resulting_batch</span> <span class="o">=</span> <span class="n">SolutionBatch</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="n">batches</span><span class="p">)</span>
<a id="__codelineno-0-3283" name="__codelineno-0-3283"></a>
<a id="__codelineno-0-3284" name="__codelineno-0-3284"></a>        <span class="c1"># We take the solutions (`samples`) and the fitnesses from our main batch.</span>
<a id="__codelineno-0-3285" name="__codelineno-0-3285"></a>        <span class="n">samples</span> <span class="o">=</span> <span class="n">resulting_batch</span><span class="o">.</span><span class="n">access_values</span><span class="p">(</span><span class="n">keep_evals</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-3286" name="__codelineno-0-3286"></a>        <span class="n">fitnesses</span> <span class="o">=</span> <span class="n">resulting_batch</span><span class="o">.</span><span class="n">access_evals</span><span class="p">(</span><span class="n">obj_index</span><span class="p">)</span>
<a id="__codelineno-0-3287" name="__codelineno-0-3287"></a>
<a id="__codelineno-0-3288" name="__codelineno-0-3288"></a>        <span class="c1"># With the help of `samples` and `fitnesses`, we now compute our gradients.</span>
<a id="__codelineno-0-3289" name="__codelineno-0-3289"></a>        <span class="n">grads</span> <span class="o">=</span> <span class="n">distribution</span><span class="o">.</span><span class="n">compute_gradients</span><span class="p">(</span>
<a id="__codelineno-0-3290" name="__codelineno-0-3290"></a>            <span class="n">samples</span><span class="p">,</span> <span class="n">fitnesses</span><span class="p">,</span> <span class="n">objective_sense</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">senses</span><span class="p">[</span><span class="n">obj_index</span><span class="p">],</span> <span class="n">ranking_method</span><span class="o">=</span><span class="n">ranking_method</span>
<a id="__codelineno-0-3291" name="__codelineno-0-3291"></a>        <span class="p">)</span>
<a id="__codelineno-0-3292" name="__codelineno-0-3292"></a>
<a id="__codelineno-0-3293" name="__codelineno-0-3293"></a>        <span class="k">if</span> <span class="n">grad_device</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">:</span>
<a id="__codelineno-0-3294" name="__codelineno-0-3294"></a>            <span class="n">grads</span> <span class="o">=</span> <span class="n">cast_tensors_in_container</span><span class="p">(</span><span class="n">grads</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-3295" name="__codelineno-0-3295"></a>
<a id="__codelineno-0-3296" name="__codelineno-0-3296"></a>        <span class="c1"># Finally, we return the result, which is a dictionary containing the gradients and further information.</span>
<a id="__codelineno-0-3297" name="__codelineno-0-3297"></a>        <span class="k">return</span> <span class="p">{</span>
<a id="__codelineno-0-3298" name="__codelineno-0-3298"></a>            <span class="s2">&quot;gradients&quot;</span><span class="p">:</span> <span class="n">grads</span><span class="p">,</span>
<a id="__codelineno-0-3299" name="__codelineno-0-3299"></a>            <span class="s2">&quot;num_solutions&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">resulting_batch</span><span class="p">),</span>
<a id="__codelineno-0-3300" name="__codelineno-0-3300"></a>            <span class="s2">&quot;mean_eval&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">resulting_batch</span><span class="o">.</span><span class="n">access_evals</span><span class="p">(</span><span class="n">obj_index</span><span class="p">))),</span>
<a id="__codelineno-0-3301" name="__codelineno-0-3301"></a>        <span class="p">}</span>
<a id="__codelineno-0-3302" name="__codelineno-0-3302"></a>
<a id="__codelineno-0-3303" name="__codelineno-0-3303"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_on_cpu</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-3304" name="__codelineno-0-3304"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-3305" name="__codelineno-0-3305"></a><span class="sd">        Whether or not the Problem object has its device set as &quot;cpu&quot;.</span>
<a id="__codelineno-0-3306" name="__codelineno-0-3306"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-3307" name="__codelineno-0-3307"></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;cpu&quot;</span>
<a id="__codelineno-0-3308" name="__codelineno-0-3308"></a>
<a id="__codelineno-0-3309" name="__codelineno-0-3309"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">make_callable_evaluator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ProblemBoundEvaluator&quot;</span><span class="p">:</span>
<a id="__codelineno-0-3310" name="__codelineno-0-3310"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-3311" name="__codelineno-0-3311"></a><span class="sd">        Get a callable evaluator for evaluating the given solutions.</span>
<a id="__codelineno-0-3312" name="__codelineno-0-3312"></a>
<a id="__codelineno-0-3313" name="__codelineno-0-3313"></a><span class="sd">        Let us assume that we have a [Problem][evotorch.core.Problem]</span>
<a id="__codelineno-0-3314" name="__codelineno-0-3314"></a><span class="sd">        declared like this:</span>
<a id="__codelineno-0-3315" name="__codelineno-0-3315"></a>
<a id="__codelineno-0-3316" name="__codelineno-0-3316"></a><span class="sd">        ```python</span>
<a id="__codelineno-0-3317" name="__codelineno-0-3317"></a><span class="sd">        from evotorch import Problem</span>
<a id="__codelineno-0-3318" name="__codelineno-0-3318"></a>
<a id="__codelineno-0-3319" name="__codelineno-0-3319"></a><span class="sd">        my_problem = Problem(</span>
<a id="__codelineno-0-3320" name="__codelineno-0-3320"></a><span class="sd">            &quot;min&quot;,</span>
<a id="__codelineno-0-3321" name="__codelineno-0-3321"></a><span class="sd">            fitness_function_goes_here,</span>
<a id="__codelineno-0-3322" name="__codelineno-0-3322"></a><span class="sd">            ...,</span>
<a id="__codelineno-0-3323" name="__codelineno-0-3323"></a><span class="sd">        )</span>
<a id="__codelineno-0-3324" name="__codelineno-0-3324"></a><span class="sd">        ```</span>
<a id="__codelineno-0-3325" name="__codelineno-0-3325"></a>
<a id="__codelineno-0-3326" name="__codelineno-0-3326"></a><span class="sd">        Using the regular API of EvoTorch, one has to generate solutions for this</span>
<a id="__codelineno-0-3327" name="__codelineno-0-3327"></a><span class="sd">        problem as follows:</span>
<a id="__codelineno-0-3328" name="__codelineno-0-3328"></a>
<a id="__codelineno-0-3329" name="__codelineno-0-3329"></a><span class="sd">        ```python</span>
<a id="__codelineno-0-3330" name="__codelineno-0-3330"></a><span class="sd">        population_size = ...</span>
<a id="__codelineno-0-3331" name="__codelineno-0-3331"></a><span class="sd">        my_solutions = my_problem.generate_batch(population_size)</span>
<a id="__codelineno-0-3332" name="__codelineno-0-3332"></a><span class="sd">        ```</span>
<a id="__codelineno-0-3333" name="__codelineno-0-3333"></a>
<a id="__codelineno-0-3334" name="__codelineno-0-3334"></a><span class="sd">        For editing the decision values within the</span>
<a id="__codelineno-0-3335" name="__codelineno-0-3335"></a><span class="sd">        [SolutionBatch][evotorch.core.SolutionBatch] `my_solutions`, one has to</span>
<a id="__codelineno-0-3336" name="__codelineno-0-3336"></a><span class="sd">        do the following:</span>
<a id="__codelineno-0-3337" name="__codelineno-0-3337"></a>
<a id="__codelineno-0-3338" name="__codelineno-0-3338"></a><span class="sd">        ```python</span>
<a id="__codelineno-0-3339" name="__codelineno-0-3339"></a><span class="sd">        new_decision_values = ...</span>
<a id="__codelineno-0-3340" name="__codelineno-0-3340"></a><span class="sd">        my_solutions.set_values(new_decision_values)</span>
<a id="__codelineno-0-3341" name="__codelineno-0-3341"></a><span class="sd">        ```</span>
<a id="__codelineno-0-3342" name="__codelineno-0-3342"></a>
<a id="__codelineno-0-3343" name="__codelineno-0-3343"></a><span class="sd">        Finally, to evaluate `my_solutions`, one would have to do these:</span>
<a id="__codelineno-0-3344" name="__codelineno-0-3344"></a>
<a id="__codelineno-0-3345" name="__codelineno-0-3345"></a><span class="sd">        ```python</span>
<a id="__codelineno-0-3346" name="__codelineno-0-3346"></a><span class="sd">        my_problem.evaluate(my_solutions)</span>
<a id="__codelineno-0-3347" name="__codelineno-0-3347"></a><span class="sd">        fitnesses = my_problem.evals</span>
<a id="__codelineno-0-3348" name="__codelineno-0-3348"></a><span class="sd">        ```</span>
<a id="__codelineno-0-3349" name="__codelineno-0-3349"></a>
<a id="__codelineno-0-3350" name="__codelineno-0-3350"></a><span class="sd">        One could desire a different interface which is more compatible with</span>
<a id="__codelineno-0-3351" name="__codelineno-0-3351"></a><span class="sd">        functional programming paradigm, especially when planning to use the</span>
<a id="__codelineno-0-3352" name="__codelineno-0-3352"></a><span class="sd">        functional algorithms (such as, for example, the functional</span>
<a id="__codelineno-0-3353" name="__codelineno-0-3353"></a><span class="sd">        [cem][evotorch.algorithms.functional.funccem.cem]).</span>
<a id="__codelineno-0-3354" name="__codelineno-0-3354"></a><span class="sd">        To achieve this, one can do the following:</span>
<a id="__codelineno-0-3355" name="__codelineno-0-3355"></a>
<a id="__codelineno-0-3356" name="__codelineno-0-3356"></a><span class="sd">        ```python</span>
<a id="__codelineno-0-3357" name="__codelineno-0-3357"></a><span class="sd">        f = my_problem.make_callable_evaluator()</span>
<a id="__codelineno-0-3358" name="__codelineno-0-3358"></a><span class="sd">        ```</span>
<a id="__codelineno-0-3359" name="__codelineno-0-3359"></a>
<a id="__codelineno-0-3360" name="__codelineno-0-3360"></a><span class="sd">        Now, we have a new object `f`, which behaves like a function.</span>
<a id="__codelineno-0-3361" name="__codelineno-0-3361"></a><span class="sd">        This function-like object expects a tensor of decision values, and</span>
<a id="__codelineno-0-3362" name="__codelineno-0-3362"></a><span class="sd">        returns fitnesses, as shown below:</span>
<a id="__codelineno-0-3363" name="__codelineno-0-3363"></a>
<a id="__codelineno-0-3364" name="__codelineno-0-3364"></a><span class="sd">        ```python</span>
<a id="__codelineno-0-3365" name="__codelineno-0-3365"></a><span class="sd">        random_decision_values = torch.randn(</span>
<a id="__codelineno-0-3366" name="__codelineno-0-3366"></a><span class="sd">            population_size,</span>
<a id="__codelineno-0-3367" name="__codelineno-0-3367"></a><span class="sd">            my_problem.solution_length,</span>
<a id="__codelineno-0-3368" name="__codelineno-0-3368"></a><span class="sd">            dtype=my_problem.dtype,</span>
<a id="__codelineno-0-3369" name="__codelineno-0-3369"></a><span class="sd">        )</span>
<a id="__codelineno-0-3370" name="__codelineno-0-3370"></a>
<a id="__codelineno-0-3371" name="__codelineno-0-3371"></a><span class="sd">        fitnesses = f(random_decision_values)</span>
<a id="__codelineno-0-3372" name="__codelineno-0-3372"></a><span class="sd">        ```</span>
<a id="__codelineno-0-3373" name="__codelineno-0-3373"></a>
<a id="__codelineno-0-3374" name="__codelineno-0-3374"></a><span class="sd">        **Parallelized fitness evaluation.**</span>
<a id="__codelineno-0-3375" name="__codelineno-0-3375"></a><span class="sd">        If a `Problem` object is configured to use parallelized evaluation with</span>
<a id="__codelineno-0-3376" name="__codelineno-0-3376"></a><span class="sd">        the help of multiple actors, a callable evaluator made out of that</span>
<a id="__codelineno-0-3377" name="__codelineno-0-3377"></a><span class="sd">        `Problem` object will also make use of those multiple actors.</span>
<a id="__codelineno-0-3378" name="__codelineno-0-3378"></a>
<a id="__codelineno-0-3379" name="__codelineno-0-3379"></a><span class="sd">        **Additional batch dimensions.**</span>
<a id="__codelineno-0-3380" name="__codelineno-0-3380"></a><span class="sd">        If a callable evaluator receives a tensor with 3 or more dimensions,</span>
<a id="__codelineno-0-3381" name="__codelineno-0-3381"></a><span class="sd">        those extra leftmost dimensions will be considered as batch</span>
<a id="__codelineno-0-3382" name="__codelineno-0-3382"></a><span class="sd">        dimensions. The returned fitness tensor will also preserve those batch</span>
<a id="__codelineno-0-3383" name="__codelineno-0-3383"></a><span class="sd">        dimensions. Please note, however, that if the `dtype` of the problem</span>
<a id="__codelineno-0-3384" name="__codelineno-0-3384"></a><span class="sd">        is `object`, additional batch dimensions are not supported.</span>
<a id="__codelineno-0-3385" name="__codelineno-0-3385"></a>
<a id="__codelineno-0-3386" name="__codelineno-0-3386"></a><span class="sd">        **Notes on vmap.**</span>
<a id="__codelineno-0-3387" name="__codelineno-0-3387"></a><span class="sd">        `ProblemBoundEvaluator` is a shallow wrapper around a `Problem` object.</span>
<a id="__codelineno-0-3388" name="__codelineno-0-3388"></a><span class="sd">        It does NOT transform the underlying problem object to its stateless</span>
<a id="__codelineno-0-3389" name="__codelineno-0-3389"></a><span class="sd">        counterpart, and therefore it does NOT conform to pure functional</span>
<a id="__codelineno-0-3390" name="__codelineno-0-3390"></a><span class="sd">        programming paradigm. Being stateful, it will NOT work correctly with</span>
<a id="__codelineno-0-3391" name="__codelineno-0-3391"></a><span class="sd">        `vmap`. For batched evaluations, it is recommended to use extra batch</span>
<a id="__codelineno-0-3392" name="__codelineno-0-3392"></a><span class="sd">        dimensions, instead of using `vmap`.</span>
<a id="__codelineno-0-3393" name="__codelineno-0-3393"></a>
<a id="__codelineno-0-3394" name="__codelineno-0-3394"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-3395" name="__codelineno-0-3395"></a><span class="sd">            obj_index: The index of the objective according to which the</span>
<a id="__codelineno-0-3396" name="__codelineno-0-3396"></a><span class="sd">                evaluations will be done. If the problem is single-objective,</span>
<a id="__codelineno-0-3397" name="__codelineno-0-3397"></a><span class="sd">                `obj_index` can be omitted. If the problem is multi-objective</span>
<a id="__codelineno-0-3398" name="__codelineno-0-3398"></a><span class="sd">                and `obj_index` is omitted, the callable evaluator will return</span>
<a id="__codelineno-0-3399" name="__codelineno-0-3399"></a><span class="sd">                multi-dimensional tensors that express the fitnesses for all</span>
<a id="__codelineno-0-3400" name="__codelineno-0-3400"></a><span class="sd">                objectives (where the rightmost dimension size is equal to</span>
<a id="__codelineno-0-3401" name="__codelineno-0-3401"></a><span class="sd">                the number of objectives). If the problem is multi-objective</span>
<a id="__codelineno-0-3402" name="__codelineno-0-3402"></a><span class="sd">                and `obj_index` is given, the callable evaluator will return</span>
<a id="__codelineno-0-3403" name="__codelineno-0-3403"></a><span class="sd">                tensors that express the fitnesses of the specified objective.</span>
<a id="__codelineno-0-3404" name="__codelineno-0-3404"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-3405" name="__codelineno-0-3405"></a><span class="sd">            A callable fitness evaluator, bound to this problem object.</span>
<a id="__codelineno-0-3406" name="__codelineno-0-3406"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-3407" name="__codelineno-0-3407"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="nb">object</span><span class="p">:</span>
<a id="__codelineno-0-3408" name="__codelineno-0-3408"></a>            <span class="k">return</span> <span class="n">ObjectTypedProblemBoundEvaluator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_index</span><span class="o">=</span><span class="n">obj_index</span><span class="p">)</span>
<a id="__codelineno-0-3409" name="__codelineno-0-3409"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3410" name="__codelineno-0-3410"></a>            <span class="k">return</span> <span class="n">ProblemBoundEvaluator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_index</span><span class="o">=</span><span class="n">obj_index</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.actor_index" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">actor_index</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.actor_index" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return the actor index if this is a remote worker.
If this is not a remote worker, return None.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.actors" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">actors</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.actors" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the ray actors, if the Problem object is distributed.
If the Problem object is not distributed and therefore
has no actors, then, the result will be None.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.after_eval_hook" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">after_eval_hook</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.after_eval_hook" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the Hook which stores the functions to call just after
evaluating a SolutionBatch.</p>
<p>The functions to be stored in this hook are expected to
accept one argument, that one argument being the SolutionBatch
whose evaluation has just been completed.</p>
<p>The dictionaries returned by the functions in this hook
are accumulated, and reported in the status dictionary of this
problem object.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.after_grad_hook" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">after_grad_hook</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.after_grad_hook" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the Hook which stores the functions to call just after
its <code>sample_and_compute_gradients(...)</code> operation.</p>
<p>The functions to be stored in this hook are expected to
accept one argument, that one argument being the gradients
dictionary (which was produced by the Problem object,
but not yet followed by the search algorithm).</p>
<p>The dictionaries returned by the functions in this hook
are accumulated, and reported in the status dictionary of this
problem object.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.aux_device" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">aux_device</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.aux_device" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Auxiliary device to help with the computations, most commonly for
speeding up the solution evaluations.</p>
<p>An auxiliary device is different than the main device of the Problem
object (the main device being expressed by the <code>device</code> property).
While the main device of the Problem object determines where the
solutions and the populations are stored (and also using which device
should a SearchAlgorithm instance communicate with the problem),
an auxiliary device is a device that might be used by the Problem
instance itself for its own computations (e.g. computations defined
within the methods <code>_evaluate(...)</code> or <code>_evaluate_batch(...)</code>).</p>
<p>If the problem's main device is something other than "cpu", that main
device is also seen as the auxiliary device, and therefore returned
by this property.</p>
<p>If the problem's main device is "cpu", then the auxiliary device
is decided as follows. If <code>num_gpus_per_actor</code> of the Problem object
was set as "all" and if this instance is a remote instance, then the
auxiliary device is guessed as "cuda:N" where N is the actor index.
In all other cases, the auxiliary device is "cuda" if cuda is
available, and "cpu" otherwise.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.before_eval_hook" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">before_eval_hook</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.before_eval_hook" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the Hook which stores the functions to call just before
evaluating a SolutionBatch.</p>
<p>The functions to be stored in this hook are expected to
accept one positional argument, that one argument being the
SolutionBatch which is about to be evaluated.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.before_grad_hook" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">before_grad_hook</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.before_grad_hook" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the Hook which stores the functions to call just before
its <code>sample_and_compute_gradients(...)</code> operation.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.device" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">device</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.device" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>device of the Problem object.</p>
<p>New solutions and populations will be generated in this device.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.dtype" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">dtype</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.dtype" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>dtype of the Problem object.</p>
<p>The decision variables of the optimization problem are of this dtype.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.eval_data_length" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">eval_data_length</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.eval_data_length" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Length of the extra evaluation data vector for each solution.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.eval_dtype" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">eval_dtype</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.eval_dtype" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>evaluation dtype of the Problem object.</p>
<p>The evaluation results of the solutions are stored according to this
dtype.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.generator" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generator</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.generator" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Random generator used by this Problem object.</p>
<p>Can also be None, which means that the Problem object will use the
global random generator of PyTorch.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.has_own_generator" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">has_own_generator</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.has_own_generator" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Whether or not the Problem object has its own random generator.</p>
<p>If this is True, then the Problem object will use its own
random generator when creating random values or tensors.
If this is False, then the Problem object will use the global
random generator when creating random values or tensors.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.initial_lower_bounds" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">initial_lower_bounds</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.initial_lower_bounds" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initial lower bounds, for when initializing a new solution.</p>
<p>If such a bound was declared during the initialization phase,
the returned value is a torch tensor (in the form of a vector
or in the form of a scalar).
If no such bound was declared, the returned value is None.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.initial_upper_bounds" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">initial_upper_bounds</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.initial_upper_bounds" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initial upper bounds, for when initializing a new solution.</p>
<p>If such a bound was declared during the initialization phase,
the returned value is a torch tensor (in the form of a vector
or in the form of a scalar).
If no such bound was declared, the returned value is None.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.is_main" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_main</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.is_main" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Returns True if this problem object lives in the main process
and not in a remote actor.
Otherwise, returns False.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.is_multi_objective" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_multi_objective</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.is_multi_objective" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Whether or not the problem is multi-objective</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.is_remote" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_remote</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.is_remote" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Returns True if this problem object lives in a remote ray actor.
Otherwise, returns False.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.is_single_objective" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_single_objective</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.is_single_objective" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Whether or not the problem is single-objective</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.lower_bounds" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">lower_bounds</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.lower_bounds" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Lower bounds for the allowed values of a solution.</p>
<p>If such a bound was declared during the initialization phase,
the returned value is a torch tensor (in the form of a vector
or in the form of a scalar).
If no such bound was declared, the returned value is None.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.num_actors" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">num_actors</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.num_actors" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Number of actors (to be) used for parallelization.
If the problem is configured for no parallelization,
the result will be 0.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.objective_sense" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">objective_sense</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.objective_sense" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the objective sense.</p>
<p>If the problem is single-objective, then a single string is returned.
If the problem is multi-objective, then the objective senses will be
returned in a list.</p>
<p>The returned string in the single-objective case, or each returned
string in the multi-objective case, is "min" or "max".</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.remote_hook" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remote_hook</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.remote_hook" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the Hook which stores the functions to call when this
Problem object is (re)created on a remote actor.</p>
<p>The functions in this hook should expect one positional
argument, that is the Problem object itself.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.senses" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">senses</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.senses" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the objective senses.</p>
<p>The return value is a list of strings, each string being
"min" or "max".</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.solution_length" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">solution_length</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.solution_length" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the solution length.</p>
<p>Problems with <code>dtype=None</code> do not have solution lengths.
For such problems, this property returns None.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.status" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">status</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.status" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Status dictionary of the problem object, updated after the last
evaluation operation.</p>
<p>The dictionaries returned by the functions in <code>after_eval_hook</code>
are accumulated, and reported in this status dictionary.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.stores_solution_stats" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stores_solution_stats</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.stores_solution_stats" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Whether or not the best and worst solutions are kept.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Problem.upper_bounds" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">upper_bounds</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Problem.upper_bounds" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Upper bounds for the allowed values of a solution.</p>
<p>If such a bound was declared during the initialization phase,
the returned value is a torch tensor (in the form of a vector
or in the form of a scalar).
If no such bound was declared, the returned value is None.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="evotorch.Problem.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">objective_sense</span><span class="p">,</span> <span class="n">objective_func</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">initial_bounds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">solution_length</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">eval_dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">eval_data_length</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">num_actors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">actor_config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">num_gpus_per_actor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">num_subbatches</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">subbatch_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">store_solution_stats</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vectorized</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#evotorch.Problem.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p><code>__init__(...)</code>: Initialize the Problem object.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>objective_sense</code>
            </td>
            <td>
                  <code><span title="evotorch.core.ObjectiveSense">ObjectiveSense</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A string, or a sequence of strings.
For a single-objective problem, a single string
("min" or "max", for minimization or maximization)
is enough.
For a problem with <code>n</code> objectives, a sequence
of strings (e.g. a list of strings) of length <code>n</code> is
required, each string in the sequence being "min" or
"max". This argument specifies the goal of the
optimization.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>initial_bounds</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="evotorch.core.BoundsPairLike">BoundsPairLike</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>In which interval will the values of a
new solution will be initialized.
Expected as a tuple, each element being either a
scalar, or a vector of length <code>n</code>, <code>n</code> being the
length of a solution.
If a manual solution initialization is preferred
(instead of an interval-based initialization),
one can leave <code>initial_bounds</code> as None, and override
the <code>_fill(...)</code> method in the inheriting subclass.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bounds</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="evotorch.core.BoundsPairLike">BoundsPairLike</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Interval in which all the solutions must always
reside.
Expected as a tuple, each element being either a
scalar, or a vector of length <code>n</code>, <code>n</code> being the
length of a solution.
This argument is optional, and can be left as None
if one does not wish to declare hard bounds on the
decision values of the problem.
If <code>bounds</code> is specified, <code>initial_bounds</code> is missing,
and <code>_fill(...)</code> is not overriden, then <code>bounds</code> will
also serve as the <code>initial_bounds</code>.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>solution_length</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Length of a solution.
Required for all fixed-length numeric optimization
problems.
For variable-length problems (which might or might not
be numeric), one is expected to leave <code>solution_length</code>
as None, and declare <code>dtype</code> as <code>object</code>.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dtype</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="evotorch.tools.DType">DType</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dtype (data type) of the data stored by a solution.
Can be given as a string (e.g. "float32"),
or as a numpy dtype (e.g. <code>numpy.dtype("float32")</code>),
or as a PyTorch dtype (e.g. <code>torch.float32</code>).
Alternatively, if the problem is variable-length
and/or non-numeric, one is expected to declare <code>dtype</code>
as <code>object</code>.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>eval_dtype</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="evotorch.tools.DType">DType</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dtype to be used for storing the evaluations
(or fitnesses, or scores, or costs, or losses)
of the solutions.
Can be given as a string (e.g. "float32"),
or as a numpy dtype (e.g. <code>numpy.dtype("float32")</code>),
or as a PyTorch dtype (e.g. <code>torch.float32</code>).
<code>eval_dtype</code> must always refer to a "float" data type,
therefore, <code>object</code> is not accepted as a valid <code>eval_dtype</code>.
If <code>eval_dtype</code> is not specified (i.e. left as None),
then the following actions are taken to determine the
<code>eval_dtype</code>:
if <code>dtype</code> is "float16", <code>eval_dtype</code> becomes "float16";
if <code>dtype</code> is "bfloat16", <code>eval_dtype</code> becomes "bfloat16";
if <code>dtype</code> is "float32", <code>eval_dtype</code> becomes "float32";
if <code>dtype</code> is "float64", <code>eval_dtype</code> becomes "float64";
and for any other <code>dtype</code>, <code>eval_dtype</code> becomes "float32".</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>device</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="evotorch.tools.Device">Device</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Default device in which a new population will be
generated. For non-numeric problems, this must be "cpu".
For numeric problems, this can be any device supported
by PyTorch (e.g. "cuda").
Note that, if the number of actors of the problem is configured
to be more than 1, <code>device</code> has to be "cpu" (or, equivalently,
left as None).</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>eval_data_length</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>In addition to evaluation results
(which are (un)fitnesses, or scores, or costs, or losses),
each solution can store extra evaluation data.
If storage of such extra evaluation data is required,
one can set this argument to an integer bigger than 0.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>seed</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Random seed to be used by the random number generator
attached to the problem object.
If left as None, no random number generator will be
attached, and the global random number generator of
PyTorch will be used instead.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>num_actors</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="int">int</span>, <span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of actors to create for parallelized
evaluation of the solutions.
Certain string values are also accepted.
When given as "max" or as "num_cpus", the number of actors
will be equal to the number of all available CPUs in the ray
cluster.
When given as "num_gpus", the number of actors will be
equal to the number of all available GPUs in the ray
cluster, and each actor will be assigned a GPU.
There is also an option, "num_devices", which means that
both the numbers of CPUs and GPUs will be analyzed, and
new actors and GPUs for them will be allocated,
in a one-to-one mapping manner, if possible.
In more details, with <code>num_actors="num_devices"</code>, if
<code>device</code> is given as a GPU device, then it will be inferred
that the user wishes to put everything (including the
population) on a single GPU, and therefore there won't be
any allocation of actors nor GPUs.
With <code>num_actors="num_devices"</code> and with <code>device</code> set as
"cpu" (or as left as None), if there are multiple CPUs
and multiple GPUs, then <code>n</code> actors will be allocated
where <code>n</code> is the minimum among the number of CPUs
and the number of GPUs, so that there can be one-to-one
mapping between CPUs and GPUs (i.e. such that each actor
can be assigned an entire GPU).
If <code>num_actors</code> is given as "num_gpus" or "num_devices",
the argument <code>num_gpus_per_actor</code> must not be used,
and the <code>actor_config</code> dictionary must not contain the
key "num_gpus".
If <code>num_actors</code> is given as something other than "num_gpus"
or "num_devices", and if you wish to assign GPUs to each
actor, then please see the argument <code>num_gpus_per_actor</code>.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>actor_config</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="dict">dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary, representing the keyword arguments
to be passed to the options(...) used when creating the
ray actor objects. To be used for explicitly allocating
resources per each actor.
For example, for declaring that each actor is to use a GPU,
one can pass <code>actor_config=dict(num_gpus=1)</code>.
Can also be given as None (which is the default),
if no such options are to be passed.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>num_gpus_per_actor</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="int">int</span>, <span title="float">float</span>, <span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of GPUs to be allocated by each
remote actor.
The default behavior is to NOT allocate any GPU at all
(which is the default behavior of the ray library as well).
When given as a number <code>n</code>, each actor will be given
<code>n</code> GPUs (where <code>n</code> can be an integer, or can be a <code>float</code>
for fractional allocation).
When given as a string "max", then the available GPUs
across the entire ray cluster (or within the local computer
in the simplest cases) will be equally distributed among
the actors.
When given as a string "all", then each actor will have
access to all the GPUs (this will be achieved by suppressing
the environment variable <code>CUDA_VISIBLE_DEVICES</code> for each
actor).
When the problem is not distributed (i.e. when there are
no actors), this argument is expected to be left as None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>num_subbatches</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>num_subbatches</code> is None (assuming that
<code>subbatch_size</code> is also None), then, when evaluating a
population, the population will be split into n pieces, <code>n</code>
being the number of actors, and each actor will evaluate
its assigned piece. If <code>num_subbatches</code> is an integer <code>m</code>,
then the population will be split into <code>m</code> pieces,
and actors will continually accept the next unevaluated
piece as they finish their current tasks.
The arguments <code>num_subbatches</code> and <code>subbatch_size</code> cannot
be given values other than None at the same time.
While using a distributed algorithm, this argument determines
how many sub-batches will be generated, and therefore,
how many gradients will be computed by the remote actors.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>subbatch_size</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>subbatch_size</code> is None (assuming that
<code>num_subbatches</code> is also None), then, when evaluating a
population, the population will be split into <code>n</code> pieces, <code>n</code>
being the number of actors, and each actor will evaluate its
assigned piece. If <code>subbatch_size</code> is an integer <code>m</code>,
then the population will be split into pieces of size <code>m</code>,
and actors will continually accept the next unevaluated
piece as they finish their current tasks.
When there can be significant difference across the solutions
in terms of computational requirements, specifying a
<code>subbatch_size</code> can be beneficial, because, while one
actor is busy with a subbatch containing computationally
challenging solutions, other actors can accept more
tasks and save time.
The arguments <code>num_subbatches</code> and <code>subbatch_size</code> cannot
be given values other than None at the same time.
While using a distributed algorithm, this argument determines
the size of a sub-batch (or sub-population) sampled by a
remote actor for computing a gradient.
In distributed mode, it is expected that the population size
is divisible by <code>subbatch_size</code>.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>store_solution_stats</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether or not the problem object should
keep track of the best and worst solutions.
Can also be left as None (which is the default behavior),
in which case, it will store the best and worst solutions
only when the first solution batch it encounters is on the
cpu. This default behavior is to ensure that there is no
transfer between the cpu and a foreign computation device
(like the gpu) just for the sake of keeping the best and
the worst solutions.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>vectorized</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Set this to True if the provided fitness function
is vectorized but is not decorated via <code>@vectorized</code>.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-797"> 797</a></span>
<span class="normal"><a href="#__codelineno-0-798"> 798</a></span>
<span class="normal"><a href="#__codelineno-0-799"> 799</a></span>
<span class="normal"><a href="#__codelineno-0-800"> 800</a></span>
<span class="normal"><a href="#__codelineno-0-801"> 801</a></span>
<span class="normal"><a href="#__codelineno-0-802"> 802</a></span>
<span class="normal"><a href="#__codelineno-0-803"> 803</a></span>
<span class="normal"><a href="#__codelineno-0-804"> 804</a></span>
<span class="normal"><a href="#__codelineno-0-805"> 805</a></span>
<span class="normal"><a href="#__codelineno-0-806"> 806</a></span>
<span class="normal"><a href="#__codelineno-0-807"> 807</a></span>
<span class="normal"><a href="#__codelineno-0-808"> 808</a></span>
<span class="normal"><a href="#__codelineno-0-809"> 809</a></span>
<span class="normal"><a href="#__codelineno-0-810"> 810</a></span>
<span class="normal"><a href="#__codelineno-0-811"> 811</a></span>
<span class="normal"><a href="#__codelineno-0-812"> 812</a></span>
<span class="normal"><a href="#__codelineno-0-813"> 813</a></span>
<span class="normal"><a href="#__codelineno-0-814"> 814</a></span>
<span class="normal"><a href="#__codelineno-0-815"> 815</a></span>
<span class="normal"><a href="#__codelineno-0-816"> 816</a></span>
<span class="normal"><a href="#__codelineno-0-817"> 817</a></span>
<span class="normal"><a href="#__codelineno-0-818"> 818</a></span>
<span class="normal"><a href="#__codelineno-0-819"> 819</a></span>
<span class="normal"><a href="#__codelineno-0-820"> 820</a></span>
<span class="normal"><a href="#__codelineno-0-821"> 821</a></span>
<span class="normal"><a href="#__codelineno-0-822"> 822</a></span>
<span class="normal"><a href="#__codelineno-0-823"> 823</a></span>
<span class="normal"><a href="#__codelineno-0-824"> 824</a></span>
<span class="normal"><a href="#__codelineno-0-825"> 825</a></span>
<span class="normal"><a href="#__codelineno-0-826"> 826</a></span>
<span class="normal"><a href="#__codelineno-0-827"> 827</a></span>
<span class="normal"><a href="#__codelineno-0-828"> 828</a></span>
<span class="normal"><a href="#__codelineno-0-829"> 829</a></span>
<span class="normal"><a href="#__codelineno-0-830"> 830</a></span>
<span class="normal"><a href="#__codelineno-0-831"> 831</a></span>
<span class="normal"><a href="#__codelineno-0-832"> 832</a></span>
<span class="normal"><a href="#__codelineno-0-833"> 833</a></span>
<span class="normal"><a href="#__codelineno-0-834"> 834</a></span>
<span class="normal"><a href="#__codelineno-0-835"> 835</a></span>
<span class="normal"><a href="#__codelineno-0-836"> 836</a></span>
<span class="normal"><a href="#__codelineno-0-837"> 837</a></span>
<span class="normal"><a href="#__codelineno-0-838"> 838</a></span>
<span class="normal"><a href="#__codelineno-0-839"> 839</a></span>
<span class="normal"><a href="#__codelineno-0-840"> 840</a></span>
<span class="normal"><a href="#__codelineno-0-841"> 841</a></span>
<span class="normal"><a href="#__codelineno-0-842"> 842</a></span>
<span class="normal"><a href="#__codelineno-0-843"> 843</a></span>
<span class="normal"><a href="#__codelineno-0-844"> 844</a></span>
<span class="normal"><a href="#__codelineno-0-845"> 845</a></span>
<span class="normal"><a href="#__codelineno-0-846"> 846</a></span>
<span class="normal"><a href="#__codelineno-0-847"> 847</a></span>
<span class="normal"><a href="#__codelineno-0-848"> 848</a></span>
<span class="normal"><a href="#__codelineno-0-849"> 849</a></span>
<span class="normal"><a href="#__codelineno-0-850"> 850</a></span>
<span class="normal"><a href="#__codelineno-0-851"> 851</a></span>
<span class="normal"><a href="#__codelineno-0-852"> 852</a></span>
<span class="normal"><a href="#__codelineno-0-853"> 853</a></span>
<span class="normal"><a href="#__codelineno-0-854"> 854</a></span>
<span class="normal"><a href="#__codelineno-0-855"> 855</a></span>
<span class="normal"><a href="#__codelineno-0-856"> 856</a></span>
<span class="normal"><a href="#__codelineno-0-857"> 857</a></span>
<span class="normal"><a href="#__codelineno-0-858"> 858</a></span>
<span class="normal"><a href="#__codelineno-0-859"> 859</a></span>
<span class="normal"><a href="#__codelineno-0-860"> 860</a></span>
<span class="normal"><a href="#__codelineno-0-861"> 861</a></span>
<span class="normal"><a href="#__codelineno-0-862"> 862</a></span>
<span class="normal"><a href="#__codelineno-0-863"> 863</a></span>
<span class="normal"><a href="#__codelineno-0-864"> 864</a></span>
<span class="normal"><a href="#__codelineno-0-865"> 865</a></span>
<span class="normal"><a href="#__codelineno-0-866"> 866</a></span>
<span class="normal"><a href="#__codelineno-0-867"> 867</a></span>
<span class="normal"><a href="#__codelineno-0-868"> 868</a></span>
<span class="normal"><a href="#__codelineno-0-869"> 869</a></span>
<span class="normal"><a href="#__codelineno-0-870"> 870</a></span>
<span class="normal"><a href="#__codelineno-0-871"> 871</a></span>
<span class="normal"><a href="#__codelineno-0-872"> 872</a></span>
<span class="normal"><a href="#__codelineno-0-873"> 873</a></span>
<span class="normal"><a href="#__codelineno-0-874"> 874</a></span>
<span class="normal"><a href="#__codelineno-0-875"> 875</a></span>
<span class="normal"><a href="#__codelineno-0-876"> 876</a></span>
<span class="normal"><a href="#__codelineno-0-877"> 877</a></span>
<span class="normal"><a href="#__codelineno-0-878"> 878</a></span>
<span class="normal"><a href="#__codelineno-0-879"> 879</a></span>
<span class="normal"><a href="#__codelineno-0-880"> 880</a></span>
<span class="normal"><a href="#__codelineno-0-881"> 881</a></span>
<span class="normal"><a href="#__codelineno-0-882"> 882</a></span>
<span class="normal"><a href="#__codelineno-0-883"> 883</a></span>
<span class="normal"><a href="#__codelineno-0-884"> 884</a></span>
<span class="normal"><a href="#__codelineno-0-885"> 885</a></span>
<span class="normal"><a href="#__codelineno-0-886"> 886</a></span>
<span class="normal"><a href="#__codelineno-0-887"> 887</a></span>
<span class="normal"><a href="#__codelineno-0-888"> 888</a></span>
<span class="normal"><a href="#__codelineno-0-889"> 889</a></span>
<span class="normal"><a href="#__codelineno-0-890"> 890</a></span>
<span class="normal"><a href="#__codelineno-0-891"> 891</a></span>
<span class="normal"><a href="#__codelineno-0-892"> 892</a></span>
<span class="normal"><a href="#__codelineno-0-893"> 893</a></span>
<span class="normal"><a href="#__codelineno-0-894"> 894</a></span>
<span class="normal"><a href="#__codelineno-0-895"> 895</a></span>
<span class="normal"><a href="#__codelineno-0-896"> 896</a></span>
<span class="normal"><a href="#__codelineno-0-897"> 897</a></span>
<span class="normal"><a href="#__codelineno-0-898"> 898</a></span>
<span class="normal"><a href="#__codelineno-0-899"> 899</a></span>
<span class="normal"><a href="#__codelineno-0-900"> 900</a></span>
<span class="normal"><a href="#__codelineno-0-901"> 901</a></span>
<span class="normal"><a href="#__codelineno-0-902"> 902</a></span>
<span class="normal"><a href="#__codelineno-0-903"> 903</a></span>
<span class="normal"><a href="#__codelineno-0-904"> 904</a></span>
<span class="normal"><a href="#__codelineno-0-905"> 905</a></span>
<span class="normal"><a href="#__codelineno-0-906"> 906</a></span>
<span class="normal"><a href="#__codelineno-0-907"> 907</a></span>
<span class="normal"><a href="#__codelineno-0-908"> 908</a></span>
<span class="normal"><a href="#__codelineno-0-909"> 909</a></span>
<span class="normal"><a href="#__codelineno-0-910"> 910</a></span>
<span class="normal"><a href="#__codelineno-0-911"> 911</a></span>
<span class="normal"><a href="#__codelineno-0-912"> 912</a></span>
<span class="normal"><a href="#__codelineno-0-913"> 913</a></span>
<span class="normal"><a href="#__codelineno-0-914"> 914</a></span>
<span class="normal"><a href="#__codelineno-0-915"> 915</a></span>
<span class="normal"><a href="#__codelineno-0-916"> 916</a></span>
<span class="normal"><a href="#__codelineno-0-917"> 917</a></span>
<span class="normal"><a href="#__codelineno-0-918"> 918</a></span>
<span class="normal"><a href="#__codelineno-0-919"> 919</a></span>
<span class="normal"><a href="#__codelineno-0-920"> 920</a></span>
<span class="normal"><a href="#__codelineno-0-921"> 921</a></span>
<span class="normal"><a href="#__codelineno-0-922"> 922</a></span>
<span class="normal"><a href="#__codelineno-0-923"> 923</a></span>
<span class="normal"><a href="#__codelineno-0-924"> 924</a></span>
<span class="normal"><a href="#__codelineno-0-925"> 925</a></span>
<span class="normal"><a href="#__codelineno-0-926"> 926</a></span>
<span class="normal"><a href="#__codelineno-0-927"> 927</a></span>
<span class="normal"><a href="#__codelineno-0-928"> 928</a></span>
<span class="normal"><a href="#__codelineno-0-929"> 929</a></span>
<span class="normal"><a href="#__codelineno-0-930"> 930</a></span>
<span class="normal"><a href="#__codelineno-0-931"> 931</a></span>
<span class="normal"><a href="#__codelineno-0-932"> 932</a></span>
<span class="normal"><a href="#__codelineno-0-933"> 933</a></span>
<span class="normal"><a href="#__codelineno-0-934"> 934</a></span>
<span class="normal"><a href="#__codelineno-0-935"> 935</a></span>
<span class="normal"><a href="#__codelineno-0-936"> 936</a></span>
<span class="normal"><a href="#__codelineno-0-937"> 937</a></span>
<span class="normal"><a href="#__codelineno-0-938"> 938</a></span>
<span class="normal"><a href="#__codelineno-0-939"> 939</a></span>
<span class="normal"><a href="#__codelineno-0-940"> 940</a></span>
<span class="normal"><a href="#__codelineno-0-941"> 941</a></span>
<span class="normal"><a href="#__codelineno-0-942"> 942</a></span>
<span class="normal"><a href="#__codelineno-0-943"> 943</a></span>
<span class="normal"><a href="#__codelineno-0-944"> 944</a></span>
<span class="normal"><a href="#__codelineno-0-945"> 945</a></span>
<span class="normal"><a href="#__codelineno-0-946"> 946</a></span>
<span class="normal"><a href="#__codelineno-0-947"> 947</a></span>
<span class="normal"><a href="#__codelineno-0-948"> 948</a></span>
<span class="normal"><a href="#__codelineno-0-949"> 949</a></span>
<span class="normal"><a href="#__codelineno-0-950"> 950</a></span>
<span class="normal"><a href="#__codelineno-0-951"> 951</a></span>
<span class="normal"><a href="#__codelineno-0-952"> 952</a></span>
<span class="normal"><a href="#__codelineno-0-953"> 953</a></span>
<span class="normal"><a href="#__codelineno-0-954"> 954</a></span>
<span class="normal"><a href="#__codelineno-0-955"> 955</a></span>
<span class="normal"><a href="#__codelineno-0-956"> 956</a></span>
<span class="normal"><a href="#__codelineno-0-957"> 957</a></span>
<span class="normal"><a href="#__codelineno-0-958"> 958</a></span>
<span class="normal"><a href="#__codelineno-0-959"> 959</a></span>
<span class="normal"><a href="#__codelineno-0-960"> 960</a></span>
<span class="normal"><a href="#__codelineno-0-961"> 961</a></span>
<span class="normal"><a href="#__codelineno-0-962"> 962</a></span>
<span class="normal"><a href="#__codelineno-0-963"> 963</a></span>
<span class="normal"><a href="#__codelineno-0-964"> 964</a></span>
<span class="normal"><a href="#__codelineno-0-965"> 965</a></span>
<span class="normal"><a href="#__codelineno-0-966"> 966</a></span>
<span class="normal"><a href="#__codelineno-0-967"> 967</a></span>
<span class="normal"><a href="#__codelineno-0-968"> 968</a></span>
<span class="normal"><a href="#__codelineno-0-969"> 969</a></span>
<span class="normal"><a href="#__codelineno-0-970"> 970</a></span>
<span class="normal"><a href="#__codelineno-0-971"> 971</a></span>
<span class="normal"><a href="#__codelineno-0-972"> 972</a></span>
<span class="normal"><a href="#__codelineno-0-973"> 973</a></span>
<span class="normal"><a href="#__codelineno-0-974"> 974</a></span>
<span class="normal"><a href="#__codelineno-0-975"> 975</a></span>
<span class="normal"><a href="#__codelineno-0-976"> 976</a></span>
<span class="normal"><a href="#__codelineno-0-977"> 977</a></span>
<span class="normal"><a href="#__codelineno-0-978"> 978</a></span>
<span class="normal"><a href="#__codelineno-0-979"> 979</a></span>
<span class="normal"><a href="#__codelineno-0-980"> 980</a></span>
<span class="normal"><a href="#__codelineno-0-981"> 981</a></span>
<span class="normal"><a href="#__codelineno-0-982"> 982</a></span>
<span class="normal"><a href="#__codelineno-0-983"> 983</a></span>
<span class="normal"><a href="#__codelineno-0-984"> 984</a></span>
<span class="normal"><a href="#__codelineno-0-985"> 985</a></span>
<span class="normal"><a href="#__codelineno-0-986"> 986</a></span>
<span class="normal"><a href="#__codelineno-0-987"> 987</a></span>
<span class="normal"><a href="#__codelineno-0-988"> 988</a></span>
<span class="normal"><a href="#__codelineno-0-989"> 989</a></span>
<span class="normal"><a href="#__codelineno-0-990"> 990</a></span>
<span class="normal"><a href="#__codelineno-0-991"> 991</a></span>
<span class="normal"><a href="#__codelineno-0-992"> 992</a></span>
<span class="normal"><a href="#__codelineno-0-993"> 993</a></span>
<span class="normal"><a href="#__codelineno-0-994"> 994</a></span>
<span class="normal"><a href="#__codelineno-0-995"> 995</a></span>
<span class="normal"><a href="#__codelineno-0-996"> 996</a></span>
<span class="normal"><a href="#__codelineno-0-997"> 997</a></span>
<span class="normal"><a href="#__codelineno-0-998"> 998</a></span>
<span class="normal"><a href="#__codelineno-0-999"> 999</a></span>
<span class="normal"><a href="#__codelineno-0-1000">1000</a></span>
<span class="normal"><a href="#__codelineno-0-1001">1001</a></span>
<span class="normal"><a href="#__codelineno-0-1002">1002</a></span>
<span class="normal"><a href="#__codelineno-0-1003">1003</a></span>
<span class="normal"><a href="#__codelineno-0-1004">1004</a></span>
<span class="normal"><a href="#__codelineno-0-1005">1005</a></span>
<span class="normal"><a href="#__codelineno-0-1006">1006</a></span>
<span class="normal"><a href="#__codelineno-0-1007">1007</a></span>
<span class="normal"><a href="#__codelineno-0-1008">1008</a></span>
<span class="normal"><a href="#__codelineno-0-1009">1009</a></span>
<span class="normal"><a href="#__codelineno-0-1010">1010</a></span>
<span class="normal"><a href="#__codelineno-0-1011">1011</a></span>
<span class="normal"><a href="#__codelineno-0-1012">1012</a></span>
<span class="normal"><a href="#__codelineno-0-1013">1013</a></span>
<span class="normal"><a href="#__codelineno-0-1014">1014</a></span>
<span class="normal"><a href="#__codelineno-0-1015">1015</a></span>
<span class="normal"><a href="#__codelineno-0-1016">1016</a></span>
<span class="normal"><a href="#__codelineno-0-1017">1017</a></span>
<span class="normal"><a href="#__codelineno-0-1018">1018</a></span>
<span class="normal"><a href="#__codelineno-0-1019">1019</a></span>
<span class="normal"><a href="#__codelineno-0-1020">1020</a></span>
<span class="normal"><a href="#__codelineno-0-1021">1021</a></span>
<span class="normal"><a href="#__codelineno-0-1022">1022</a></span>
<span class="normal"><a href="#__codelineno-0-1023">1023</a></span>
<span class="normal"><a href="#__codelineno-0-1024">1024</a></span>
<span class="normal"><a href="#__codelineno-0-1025">1025</a></span>
<span class="normal"><a href="#__codelineno-0-1026">1026</a></span>
<span class="normal"><a href="#__codelineno-0-1027">1027</a></span>
<span class="normal"><a href="#__codelineno-0-1028">1028</a></span>
<span class="normal"><a href="#__codelineno-0-1029">1029</a></span>
<span class="normal"><a href="#__codelineno-0-1030">1030</a></span>
<span class="normal"><a href="#__codelineno-0-1031">1031</a></span>
<span class="normal"><a href="#__codelineno-0-1032">1032</a></span>
<span class="normal"><a href="#__codelineno-0-1033">1033</a></span>
<span class="normal"><a href="#__codelineno-0-1034">1034</a></span>
<span class="normal"><a href="#__codelineno-0-1035">1035</a></span>
<span class="normal"><a href="#__codelineno-0-1036">1036</a></span>
<span class="normal"><a href="#__codelineno-0-1037">1037</a></span>
<span class="normal"><a href="#__codelineno-0-1038">1038</a></span>
<span class="normal"><a href="#__codelineno-0-1039">1039</a></span>
<span class="normal"><a href="#__codelineno-0-1040">1040</a></span>
<span class="normal"><a href="#__codelineno-0-1041">1041</a></span>
<span class="normal"><a href="#__codelineno-0-1042">1042</a></span>
<span class="normal"><a href="#__codelineno-0-1043">1043</a></span>
<span class="normal"><a href="#__codelineno-0-1044">1044</a></span>
<span class="normal"><a href="#__codelineno-0-1045">1045</a></span>
<span class="normal"><a href="#__codelineno-0-1046">1046</a></span>
<span class="normal"><a href="#__codelineno-0-1047">1047</a></span>
<span class="normal"><a href="#__codelineno-0-1048">1048</a></span>
<span class="normal"><a href="#__codelineno-0-1049">1049</a></span>
<span class="normal"><a href="#__codelineno-0-1050">1050</a></span>
<span class="normal"><a href="#__codelineno-0-1051">1051</a></span>
<span class="normal"><a href="#__codelineno-0-1052">1052</a></span>
<span class="normal"><a href="#__codelineno-0-1053">1053</a></span>
<span class="normal"><a href="#__codelineno-0-1054">1054</a></span>
<span class="normal"><a href="#__codelineno-0-1055">1055</a></span>
<span class="normal"><a href="#__codelineno-0-1056">1056</a></span>
<span class="normal"><a href="#__codelineno-0-1057">1057</a></span>
<span class="normal"><a href="#__codelineno-0-1058">1058</a></span>
<span class="normal"><a href="#__codelineno-0-1059">1059</a></span>
<span class="normal"><a href="#__codelineno-0-1060">1060</a></span>
<span class="normal"><a href="#__codelineno-0-1061">1061</a></span>
<span class="normal"><a href="#__codelineno-0-1062">1062</a></span>
<span class="normal"><a href="#__codelineno-0-1063">1063</a></span>
<span class="normal"><a href="#__codelineno-0-1064">1064</a></span>
<span class="normal"><a href="#__codelineno-0-1065">1065</a></span>
<span class="normal"><a href="#__codelineno-0-1066">1066</a></span>
<span class="normal"><a href="#__codelineno-0-1067">1067</a></span>
<span class="normal"><a href="#__codelineno-0-1068">1068</a></span>
<span class="normal"><a href="#__codelineno-0-1069">1069</a></span>
<span class="normal"><a href="#__codelineno-0-1070">1070</a></span>
<span class="normal"><a href="#__codelineno-0-1071">1071</a></span>
<span class="normal"><a href="#__codelineno-0-1072">1072</a></span>
<span class="normal"><a href="#__codelineno-0-1073">1073</a></span>
<span class="normal"><a href="#__codelineno-0-1074">1074</a></span>
<span class="normal"><a href="#__codelineno-0-1075">1075</a></span>
<span class="normal"><a href="#__codelineno-0-1076">1076</a></span>
<span class="normal"><a href="#__codelineno-0-1077">1077</a></span>
<span class="normal"><a href="#__codelineno-0-1078">1078</a></span>
<span class="normal"><a href="#__codelineno-0-1079">1079</a></span>
<span class="normal"><a href="#__codelineno-0-1080">1080</a></span>
<span class="normal"><a href="#__codelineno-0-1081">1081</a></span>
<span class="normal"><a href="#__codelineno-0-1082">1082</a></span>
<span class="normal"><a href="#__codelineno-0-1083">1083</a></span>
<span class="normal"><a href="#__codelineno-0-1084">1084</a></span>
<span class="normal"><a href="#__codelineno-0-1085">1085</a></span>
<span class="normal"><a href="#__codelineno-0-1086">1086</a></span>
<span class="normal"><a href="#__codelineno-0-1087">1087</a></span>
<span class="normal"><a href="#__codelineno-0-1088">1088</a></span>
<span class="normal"><a href="#__codelineno-0-1089">1089</a></span>
<span class="normal"><a href="#__codelineno-0-1090">1090</a></span>
<span class="normal"><a href="#__codelineno-0-1091">1091</a></span>
<span class="normal"><a href="#__codelineno-0-1092">1092</a></span>
<span class="normal"><a href="#__codelineno-0-1093">1093</a></span>
<span class="normal"><a href="#__codelineno-0-1094">1094</a></span>
<span class="normal"><a href="#__codelineno-0-1095">1095</a></span>
<span class="normal"><a href="#__codelineno-0-1096">1096</a></span>
<span class="normal"><a href="#__codelineno-0-1097">1097</a></span>
<span class="normal"><a href="#__codelineno-0-1098">1098</a></span>
<span class="normal"><a href="#__codelineno-0-1099">1099</a></span>
<span class="normal"><a href="#__codelineno-0-1100">1100</a></span>
<span class="normal"><a href="#__codelineno-0-1101">1101</a></span>
<span class="normal"><a href="#__codelineno-0-1102">1102</a></span>
<span class="normal"><a href="#__codelineno-0-1103">1103</a></span>
<span class="normal"><a href="#__codelineno-0-1104">1104</a></span>
<span class="normal"><a href="#__codelineno-0-1105">1105</a></span>
<span class="normal"><a href="#__codelineno-0-1106">1106</a></span>
<span class="normal"><a href="#__codelineno-0-1107">1107</a></span>
<span class="normal"><a href="#__codelineno-0-1108">1108</a></span>
<span class="normal"><a href="#__codelineno-0-1109">1109</a></span>
<span class="normal"><a href="#__codelineno-0-1110">1110</a></span>
<span class="normal"><a href="#__codelineno-0-1111">1111</a></span>
<span class="normal"><a href="#__codelineno-0-1112">1112</a></span>
<span class="normal"><a href="#__codelineno-0-1113">1113</a></span>
<span class="normal"><a href="#__codelineno-0-1114">1114</a></span>
<span class="normal"><a href="#__codelineno-0-1115">1115</a></span>
<span class="normal"><a href="#__codelineno-0-1116">1116</a></span>
<span class="normal"><a href="#__codelineno-0-1117">1117</a></span>
<span class="normal"><a href="#__codelineno-0-1118">1118</a></span>
<span class="normal"><a href="#__codelineno-0-1119">1119</a></span>
<span class="normal"><a href="#__codelineno-0-1120">1120</a></span>
<span class="normal"><a href="#__codelineno-0-1121">1121</a></span>
<span class="normal"><a href="#__codelineno-0-1122">1122</a></span>
<span class="normal"><a href="#__codelineno-0-1123">1123</a></span>
<span class="normal"><a href="#__codelineno-0-1124">1124</a></span>
<span class="normal"><a href="#__codelineno-0-1125">1125</a></span>
<span class="normal"><a href="#__codelineno-0-1126">1126</a></span>
<span class="normal"><a href="#__codelineno-0-1127">1127</a></span>
<span class="normal"><a href="#__codelineno-0-1128">1128</a></span>
<span class="normal"><a href="#__codelineno-0-1129">1129</a></span>
<span class="normal"><a href="#__codelineno-0-1130">1130</a></span>
<span class="normal"><a href="#__codelineno-0-1131">1131</a></span>
<span class="normal"><a href="#__codelineno-0-1132">1132</a></span>
<span class="normal"><a href="#__codelineno-0-1133">1133</a></span>
<span class="normal"><a href="#__codelineno-0-1134">1134</a></span>
<span class="normal"><a href="#__codelineno-0-1135">1135</a></span>
<span class="normal"><a href="#__codelineno-0-1136">1136</a></span>
<span class="normal"><a href="#__codelineno-0-1137">1137</a></span>
<span class="normal"><a href="#__codelineno-0-1138">1138</a></span>
<span class="normal"><a href="#__codelineno-0-1139">1139</a></span>
<span class="normal"><a href="#__codelineno-0-1140">1140</a></span>
<span class="normal"><a href="#__codelineno-0-1141">1141</a></span>
<span class="normal"><a href="#__codelineno-0-1142">1142</a></span>
<span class="normal"><a href="#__codelineno-0-1143">1143</a></span>
<span class="normal"><a href="#__codelineno-0-1144">1144</a></span>
<span class="normal"><a href="#__codelineno-0-1145">1145</a></span>
<span class="normal"><a href="#__codelineno-0-1146">1146</a></span>
<span class="normal"><a href="#__codelineno-0-1147">1147</a></span>
<span class="normal"><a href="#__codelineno-0-1148">1148</a></span>
<span class="normal"><a href="#__codelineno-0-1149">1149</a></span>
<span class="normal"><a href="#__codelineno-0-1150">1150</a></span>
<span class="normal"><a href="#__codelineno-0-1151">1151</a></span>
<span class="normal"><a href="#__codelineno-0-1152">1152</a></span>
<span class="normal"><a href="#__codelineno-0-1153">1153</a></span>
<span class="normal"><a href="#__codelineno-0-1154">1154</a></span>
<span class="normal"><a href="#__codelineno-0-1155">1155</a></span>
<span class="normal"><a href="#__codelineno-0-1156">1156</a></span>
<span class="normal"><a href="#__codelineno-0-1157">1157</a></span>
<span class="normal"><a href="#__codelineno-0-1158">1158</a></span>
<span class="normal"><a href="#__codelineno-0-1159">1159</a></span>
<span class="normal"><a href="#__codelineno-0-1160">1160</a></span>
<span class="normal"><a href="#__codelineno-0-1161">1161</a></span>
<span class="normal"><a href="#__codelineno-0-1162">1162</a></span>
<span class="normal"><a href="#__codelineno-0-1163">1163</a></span>
<span class="normal"><a href="#__codelineno-0-1164">1164</a></span>
<span class="normal"><a href="#__codelineno-0-1165">1165</a></span>
<span class="normal"><a href="#__codelineno-0-1166">1166</a></span>
<span class="normal"><a href="#__codelineno-0-1167">1167</a></span>
<span class="normal"><a href="#__codelineno-0-1168">1168</a></span>
<span class="normal"><a href="#__codelineno-0-1169">1169</a></span>
<span class="normal"><a href="#__codelineno-0-1170">1170</a></span>
<span class="normal"><a href="#__codelineno-0-1171">1171</a></span>
<span class="normal"><a href="#__codelineno-0-1172">1172</a></span>
<span class="normal"><a href="#__codelineno-0-1173">1173</a></span>
<span class="normal"><a href="#__codelineno-0-1174">1174</a></span>
<span class="normal"><a href="#__codelineno-0-1175">1175</a></span>
<span class="normal"><a href="#__codelineno-0-1176">1176</a></span>
<span class="normal"><a href="#__codelineno-0-1177">1177</a></span>
<span class="normal"><a href="#__codelineno-0-1178">1178</a></span>
<span class="normal"><a href="#__codelineno-0-1179">1179</a></span>
<span class="normal"><a href="#__codelineno-0-1180">1180</a></span>
<span class="normal"><a href="#__codelineno-0-1181">1181</a></span>
<span class="normal"><a href="#__codelineno-0-1182">1182</a></span>
<span class="normal"><a href="#__codelineno-0-1183">1183</a></span>
<span class="normal"><a href="#__codelineno-0-1184">1184</a></span>
<span class="normal"><a href="#__codelineno-0-1185">1185</a></span>
<span class="normal"><a href="#__codelineno-0-1186">1186</a></span>
<span class="normal"><a href="#__codelineno-0-1187">1187</a></span>
<span class="normal"><a href="#__codelineno-0-1188">1188</a></span>
<span class="normal"><a href="#__codelineno-0-1189">1189</a></span>
<span class="normal"><a href="#__codelineno-0-1190">1190</a></span>
<span class="normal"><a href="#__codelineno-0-1191">1191</a></span>
<span class="normal"><a href="#__codelineno-0-1192">1192</a></span>
<span class="normal"><a href="#__codelineno-0-1193">1193</a></span>
<span class="normal"><a href="#__codelineno-0-1194">1194</a></span>
<span class="normal"><a href="#__codelineno-0-1195">1195</a></span>
<span class="normal"><a href="#__codelineno-0-1196">1196</a></span>
<span class="normal"><a href="#__codelineno-0-1197">1197</a></span>
<span class="normal"><a href="#__codelineno-0-1198">1198</a></span>
<span class="normal"><a href="#__codelineno-0-1199">1199</a></span>
<span class="normal"><a href="#__codelineno-0-1200">1200</a></span>
<span class="normal"><a href="#__codelineno-0-1201">1201</a></span>
<span class="normal"><a href="#__codelineno-0-1202">1202</a></span>
<span class="normal"><a href="#__codelineno-0-1203">1203</a></span>
<span class="normal"><a href="#__codelineno-0-1204">1204</a></span>
<span class="normal"><a href="#__codelineno-0-1205">1205</a></span>
<span class="normal"><a href="#__codelineno-0-1206">1206</a></span>
<span class="normal"><a href="#__codelineno-0-1207">1207</a></span>
<span class="normal"><a href="#__codelineno-0-1208">1208</a></span>
<span class="normal"><a href="#__codelineno-0-1209">1209</a></span>
<span class="normal"><a href="#__codelineno-0-1210">1210</a></span>
<span class="normal"><a href="#__codelineno-0-1211">1211</a></span>
<span class="normal"><a href="#__codelineno-0-1212">1212</a></span>
<span class="normal"><a href="#__codelineno-0-1213">1213</a></span>
<span class="normal"><a href="#__codelineno-0-1214">1214</a></span>
<span class="normal"><a href="#__codelineno-0-1215">1215</a></span>
<span class="normal"><a href="#__codelineno-0-1216">1216</a></span>
<span class="normal"><a href="#__codelineno-0-1217">1217</a></span>
<span class="normal"><a href="#__codelineno-0-1218">1218</a></span>
<span class="normal"><a href="#__codelineno-0-1219">1219</a></span>
<span class="normal"><a href="#__codelineno-0-1220">1220</a></span>
<span class="normal"><a href="#__codelineno-0-1221">1221</a></span>
<span class="normal"><a href="#__codelineno-0-1222">1222</a></span>
<span class="normal"><a href="#__codelineno-0-1223">1223</a></span>
<span class="normal"><a href="#__codelineno-0-1224">1224</a></span>
<span class="normal"><a href="#__codelineno-0-1225">1225</a></span>
<span class="normal"><a href="#__codelineno-0-1226">1226</a></span>
<span class="normal"><a href="#__codelineno-0-1227">1227</a></span>
<span class="normal"><a href="#__codelineno-0-1228">1228</a></span>
<span class="normal"><a href="#__codelineno-0-1229">1229</a></span>
<span class="normal"><a href="#__codelineno-0-1230">1230</a></span>
<span class="normal"><a href="#__codelineno-0-1231">1231</a></span>
<span class="normal"><a href="#__codelineno-0-1232">1232</a></span>
<span class="normal"><a href="#__codelineno-0-1233">1233</a></span>
<span class="normal"><a href="#__codelineno-0-1234">1234</a></span>
<span class="normal"><a href="#__codelineno-0-1235">1235</a></span>
<span class="normal"><a href="#__codelineno-0-1236">1236</a></span>
<span class="normal"><a href="#__codelineno-0-1237">1237</a></span>
<span class="normal"><a href="#__codelineno-0-1238">1238</a></span>
<span class="normal"><a href="#__codelineno-0-1239">1239</a></span>
<span class="normal"><a href="#__codelineno-0-1240">1240</a></span>
<span class="normal"><a href="#__codelineno-0-1241">1241</a></span>
<span class="normal"><a href="#__codelineno-0-1242">1242</a></span>
<span class="normal"><a href="#__codelineno-0-1243">1243</a></span>
<span class="normal"><a href="#__codelineno-0-1244">1244</a></span>
<span class="normal"><a href="#__codelineno-0-1245">1245</a></span>
<span class="normal"><a href="#__codelineno-0-1246">1246</a></span>
<span class="normal"><a href="#__codelineno-0-1247">1247</a></span>
<span class="normal"><a href="#__codelineno-0-1248">1248</a></span>
<span class="normal"><a href="#__codelineno-0-1249">1249</a></span>
<span class="normal"><a href="#__codelineno-0-1250">1250</a></span>
<span class="normal"><a href="#__codelineno-0-1251">1251</a></span>
<span class="normal"><a href="#__codelineno-0-1252">1252</a></span>
<span class="normal"><a href="#__codelineno-0-1253">1253</a></span>
<span class="normal"><a href="#__codelineno-0-1254">1254</a></span>
<span class="normal"><a href="#__codelineno-0-1255">1255</a></span>
<span class="normal"><a href="#__codelineno-0-1256">1256</a></span>
<span class="normal"><a href="#__codelineno-0-1257">1257</a></span>
<span class="normal"><a href="#__codelineno-0-1258">1258</a></span>
<span class="normal"><a href="#__codelineno-0-1259">1259</a></span>
<span class="normal"><a href="#__codelineno-0-1260">1260</a></span>
<span class="normal"><a href="#__codelineno-0-1261">1261</a></span>
<span class="normal"><a href="#__codelineno-0-1262">1262</a></span>
<span class="normal"><a href="#__codelineno-0-1263">1263</a></span>
<span class="normal"><a href="#__codelineno-0-1264">1264</a></span>
<span class="normal"><a href="#__codelineno-0-1265">1265</a></span>
<span class="normal"><a href="#__codelineno-0-1266">1266</a></span>
<span class="normal"><a href="#__codelineno-0-1267">1267</a></span>
<span class="normal"><a href="#__codelineno-0-1268">1268</a></span>
<span class="normal"><a href="#__codelineno-0-1269">1269</a></span>
<span class="normal"><a href="#__codelineno-0-1270">1270</a></span>
<span class="normal"><a href="#__codelineno-0-1271">1271</a></span>
<span class="normal"><a href="#__codelineno-0-1272">1272</a></span>
<span class="normal"><a href="#__codelineno-0-1273">1273</a></span>
<span class="normal"><a href="#__codelineno-0-1274">1274</a></span>
<span class="normal"><a href="#__codelineno-0-1275">1275</a></span>
<span class="normal"><a href="#__codelineno-0-1276">1276</a></span>
<span class="normal"><a href="#__codelineno-0-1277">1277</a></span>
<span class="normal"><a href="#__codelineno-0-1278">1278</a></span>
<span class="normal"><a href="#__codelineno-0-1279">1279</a></span>
<span class="normal"><a href="#__codelineno-0-1280">1280</a></span>
<span class="normal"><a href="#__codelineno-0-1281">1281</a></span>
<span class="normal"><a href="#__codelineno-0-1282">1282</a></span>
<span class="normal"><a href="#__codelineno-0-1283">1283</a></span>
<span class="normal"><a href="#__codelineno-0-1284">1284</a></span>
<span class="normal"><a href="#__codelineno-0-1285">1285</a></span>
<span class="normal"><a href="#__codelineno-0-1286">1286</a></span>
<span class="normal"><a href="#__codelineno-0-1287">1287</a></span>
<span class="normal"><a href="#__codelineno-0-1288">1288</a></span>
<span class="normal"><a href="#__codelineno-0-1289">1289</a></span>
<span class="normal"><a href="#__codelineno-0-1290">1290</a></span>
<span class="normal"><a href="#__codelineno-0-1291">1291</a></span>
<span class="normal"><a href="#__codelineno-0-1292">1292</a></span>
<span class="normal"><a href="#__codelineno-0-1293">1293</a></span>
<span class="normal"><a href="#__codelineno-0-1294">1294</a></span>
<span class="normal"><a href="#__codelineno-0-1295">1295</a></span>
<span class="normal"><a href="#__codelineno-0-1296">1296</a></span>
<span class="normal"><a href="#__codelineno-0-1297">1297</a></span>
<span class="normal"><a href="#__codelineno-0-1298">1298</a></span>
<span class="normal"><a href="#__codelineno-0-1299">1299</a></span>
<span class="normal"><a href="#__codelineno-0-1300">1300</a></span>
<span class="normal"><a href="#__codelineno-0-1301">1301</a></span>
<span class="normal"><a href="#__codelineno-0-1302">1302</a></span>
<span class="normal"><a href="#__codelineno-0-1303">1303</a></span>
<span class="normal"><a href="#__codelineno-0-1304">1304</a></span>
<span class="normal"><a href="#__codelineno-0-1305">1305</a></span>
<span class="normal"><a href="#__codelineno-0-1306">1306</a></span>
<span class="normal"><a href="#__codelineno-0-1307">1307</a></span>
<span class="normal"><a href="#__codelineno-0-1308">1308</a></span>
<span class="normal"><a href="#__codelineno-0-1309">1309</a></span>
<span class="normal"><a href="#__codelineno-0-1310">1310</a></span>
<span class="normal"><a href="#__codelineno-0-1311">1311</a></span>
<span class="normal"><a href="#__codelineno-0-1312">1312</a></span>
<span class="normal"><a href="#__codelineno-0-1313">1313</a></span>
<span class="normal"><a href="#__codelineno-0-1314">1314</a></span>
<span class="normal"><a href="#__codelineno-0-1315">1315</a></span>
<span class="normal"><a href="#__codelineno-0-1316">1316</a></span>
<span class="normal"><a href="#__codelineno-0-1317">1317</a></span>
<span class="normal"><a href="#__codelineno-0-1318">1318</a></span>
<span class="normal"><a href="#__codelineno-0-1319">1319</a></span>
<span class="normal"><a href="#__codelineno-0-1320">1320</a></span>
<span class="normal"><a href="#__codelineno-0-1321">1321</a></span>
<span class="normal"><a href="#__codelineno-0-1322">1322</a></span>
<span class="normal"><a href="#__codelineno-0-1323">1323</a></span>
<span class="normal"><a href="#__codelineno-0-1324">1324</a></span>
<span class="normal"><a href="#__codelineno-0-1325">1325</a></span>
<span class="normal"><a href="#__codelineno-0-1326">1326</a></span>
<span class="normal"><a href="#__codelineno-0-1327">1327</a></span>
<span class="normal"><a href="#__codelineno-0-1328">1328</a></span>
<span class="normal"><a href="#__codelineno-0-1329">1329</a></span>
<span class="normal"><a href="#__codelineno-0-1330">1330</a></span>
<span class="normal"><a href="#__codelineno-0-1331">1331</a></span>
<span class="normal"><a href="#__codelineno-0-1332">1332</a></span>
<span class="normal"><a href="#__codelineno-0-1333">1333</a></span>
<span class="normal"><a href="#__codelineno-0-1334">1334</a></span>
<span class="normal"><a href="#__codelineno-0-1335">1335</a></span>
<span class="normal"><a href="#__codelineno-0-1336">1336</a></span>
<span class="normal"><a href="#__codelineno-0-1337">1337</a></span>
<span class="normal"><a href="#__codelineno-0-1338">1338</a></span>
<span class="normal"><a href="#__codelineno-0-1339">1339</a></span>
<span class="normal"><a href="#__codelineno-0-1340">1340</a></span>
<span class="normal"><a href="#__codelineno-0-1341">1341</a></span>
<span class="normal"><a href="#__codelineno-0-1342">1342</a></span>
<span class="normal"><a href="#__codelineno-0-1343">1343</a></span>
<span class="normal"><a href="#__codelineno-0-1344">1344</a></span>
<span class="normal"><a href="#__codelineno-0-1345">1345</a></span>
<span class="normal"><a href="#__codelineno-0-1346">1346</a></span>
<span class="normal"><a href="#__codelineno-0-1347">1347</a></span>
<span class="normal"><a href="#__codelineno-0-1348">1348</a></span>
<span class="normal"><a href="#__codelineno-0-1349">1349</a></span>
<span class="normal"><a href="#__codelineno-0-1350">1350</a></span>
<span class="normal"><a href="#__codelineno-0-1351">1351</a></span>
<span class="normal"><a href="#__codelineno-0-1352">1352</a></span>
<span class="normal"><a href="#__codelineno-0-1353">1353</a></span>
<span class="normal"><a href="#__codelineno-0-1354">1354</a></span>
<span class="normal"><a href="#__codelineno-0-1355">1355</a></span>
<span class="normal"><a href="#__codelineno-0-1356">1356</a></span>
<span class="normal"><a href="#__codelineno-0-1357">1357</a></span>
<span class="normal"><a href="#__codelineno-0-1358">1358</a></span>
<span class="normal"><a href="#__codelineno-0-1359">1359</a></span>
<span class="normal"><a href="#__codelineno-0-1360">1360</a></span>
<span class="normal"><a href="#__codelineno-0-1361">1361</a></span>
<span class="normal"><a href="#__codelineno-0-1362">1362</a></span>
<span class="normal"><a href="#__codelineno-0-1363">1363</a></span>
<span class="normal"><a href="#__codelineno-0-1364">1364</a></span>
<span class="normal"><a href="#__codelineno-0-1365">1365</a></span>
<span class="normal"><a href="#__codelineno-0-1366">1366</a></span>
<span class="normal"><a href="#__codelineno-0-1367">1367</a></span>
<span class="normal"><a href="#__codelineno-0-1368">1368</a></span>
<span class="normal"><a href="#__codelineno-0-1369">1369</a></span>
<span class="normal"><a href="#__codelineno-0-1370">1370</a></span>
<span class="normal"><a href="#__codelineno-0-1371">1371</a></span>
<span class="normal"><a href="#__codelineno-0-1372">1372</a></span>
<span class="normal"><a href="#__codelineno-0-1373">1373</a></span>
<span class="normal"><a href="#__codelineno-0-1374">1374</a></span>
<span class="normal"><a href="#__codelineno-0-1375">1375</a></span>
<span class="normal"><a href="#__codelineno-0-1376">1376</a></span>
<span class="normal"><a href="#__codelineno-0-1377">1377</a></span>
<span class="normal"><a href="#__codelineno-0-1378">1378</a></span>
<span class="normal"><a href="#__codelineno-0-1379">1379</a></span>
<span class="normal"><a href="#__codelineno-0-1380">1380</a></span>
<span class="normal"><a href="#__codelineno-0-1381">1381</a></span>
<span class="normal"><a href="#__codelineno-0-1382">1382</a></span>
<span class="normal"><a href="#__codelineno-0-1383">1383</a></span>
<span class="normal"><a href="#__codelineno-0-1384">1384</a></span>
<span class="normal"><a href="#__codelineno-0-1385">1385</a></span>
<span class="normal"><a href="#__codelineno-0-1386">1386</a></span>
<span class="normal"><a href="#__codelineno-0-1387">1387</a></span>
<span class="normal"><a href="#__codelineno-0-1388">1388</a></span>
<span class="normal"><a href="#__codelineno-0-1389">1389</a></span>
<span class="normal"><a href="#__codelineno-0-1390">1390</a></span>
<span class="normal"><a href="#__codelineno-0-1391">1391</a></span>
<span class="normal"><a href="#__codelineno-0-1392">1392</a></span>
<span class="normal"><a href="#__codelineno-0-1393">1393</a></span>
<span class="normal"><a href="#__codelineno-0-1394">1394</a></span>
<span class="normal"><a href="#__codelineno-0-1395">1395</a></span>
<span class="normal"><a href="#__codelineno-0-1396">1396</a></span>
<span class="normal"><a href="#__codelineno-0-1397">1397</a></span>
<span class="normal"><a href="#__codelineno-0-1398">1398</a></span>
<span class="normal"><a href="#__codelineno-0-1399">1399</a></span>
<span class="normal"><a href="#__codelineno-0-1400">1400</a></span>
<span class="normal"><a href="#__codelineno-0-1401">1401</a></span>
<span class="normal"><a href="#__codelineno-0-1402">1402</a></span>
<span class="normal"><a href="#__codelineno-0-1403">1403</a></span>
<span class="normal"><a href="#__codelineno-0-1404">1404</a></span>
<span class="normal"><a href="#__codelineno-0-1405">1405</a></span>
<span class="normal"><a href="#__codelineno-0-1406">1406</a></span>
<span class="normal"><a href="#__codelineno-0-1407">1407</a></span>
<span class="normal"><a href="#__codelineno-0-1408">1408</a></span>
<span class="normal"><a href="#__codelineno-0-1409">1409</a></span>
<span class="normal"><a href="#__codelineno-0-1410">1410</a></span>
<span class="normal"><a href="#__codelineno-0-1411">1411</a></span>
<span class="normal"><a href="#__codelineno-0-1412">1412</a></span>
<span class="normal"><a href="#__codelineno-0-1413">1413</a></span>
<span class="normal"><a href="#__codelineno-0-1414">1414</a></span>
<span class="normal"><a href="#__codelineno-0-1415">1415</a></span>
<span class="normal"><a href="#__codelineno-0-1416">1416</a></span>
<span class="normal"><a href="#__codelineno-0-1417">1417</a></span>
<span class="normal"><a href="#__codelineno-0-1418">1418</a></span>
<span class="normal"><a href="#__codelineno-0-1419">1419</a></span>
<span class="normal"><a href="#__codelineno-0-1420">1420</a></span>
<span class="normal"><a href="#__codelineno-0-1421">1421</a></span>
<span class="normal"><a href="#__codelineno-0-1422">1422</a></span>
<span class="normal"><a href="#__codelineno-0-1423">1423</a></span>
<span class="normal"><a href="#__codelineno-0-1424">1424</a></span>
<span class="normal"><a href="#__codelineno-0-1425">1425</a></span>
<span class="normal"><a href="#__codelineno-0-1426">1426</a></span>
<span class="normal"><a href="#__codelineno-0-1427">1427</a></span>
<span class="normal"><a href="#__codelineno-0-1428">1428</a></span>
<span class="normal"><a href="#__codelineno-0-1429">1429</a></span>
<span class="normal"><a href="#__codelineno-0-1430">1430</a></span>
<span class="normal"><a href="#__codelineno-0-1431">1431</a></span>
<span class="normal"><a href="#__codelineno-0-1432">1432</a></span>
<span class="normal"><a href="#__codelineno-0-1433">1433</a></span>
<span class="normal"><a href="#__codelineno-0-1434">1434</a></span>
<span class="normal"><a href="#__codelineno-0-1435">1435</a></span>
<span class="normal"><a href="#__codelineno-0-1436">1436</a></span>
<span class="normal"><a href="#__codelineno-0-1437">1437</a></span>
<span class="normal"><a href="#__codelineno-0-1438">1438</a></span>
<span class="normal"><a href="#__codelineno-0-1439">1439</a></span>
<span class="normal"><a href="#__codelineno-0-1440">1440</a></span>
<span class="normal"><a href="#__codelineno-0-1441">1441</a></span>
<span class="normal"><a href="#__codelineno-0-1442">1442</a></span>
<span class="normal"><a href="#__codelineno-0-1443">1443</a></span>
<span class="normal"><a href="#__codelineno-0-1444">1444</a></span>
<span class="normal"><a href="#__codelineno-0-1445">1445</a></span>
<span class="normal"><a href="#__codelineno-0-1446">1446</a></span>
<span class="normal"><a href="#__codelineno-0-1447">1447</a></span>
<span class="normal"><a href="#__codelineno-0-1448">1448</a></span>
<span class="normal"><a href="#__codelineno-0-1449">1449</a></span>
<span class="normal"><a href="#__codelineno-0-1450">1450</a></span>
<span class="normal"><a href="#__codelineno-0-1451">1451</a></span>
<span class="normal"><a href="#__codelineno-0-1452">1452</a></span>
<span class="normal"><a href="#__codelineno-0-1453">1453</a></span>
<span class="normal"><a href="#__codelineno-0-1454">1454</a></span>
<span class="normal"><a href="#__codelineno-0-1455">1455</a></span>
<span class="normal"><a href="#__codelineno-0-1456">1456</a></span>
<span class="normal"><a href="#__codelineno-0-1457">1457</a></span>
<span class="normal"><a href="#__codelineno-0-1458">1458</a></span>
<span class="normal"><a href="#__codelineno-0-1459">1459</a></span>
<span class="normal"><a href="#__codelineno-0-1460">1460</a></span>
<span class="normal"><a href="#__codelineno-0-1461">1461</a></span>
<span class="normal"><a href="#__codelineno-0-1462">1462</a></span>
<span class="normal"><a href="#__codelineno-0-1463">1463</a></span>
<span class="normal"><a href="#__codelineno-0-1464">1464</a></span>
<span class="normal"><a href="#__codelineno-0-1465">1465</a></span>
<span class="normal"><a href="#__codelineno-0-1466">1466</a></span>
<span class="normal"><a href="#__codelineno-0-1467">1467</a></span>
<span class="normal"><a href="#__codelineno-0-1468">1468</a></span>
<span class="normal"><a href="#__codelineno-0-1469">1469</a></span>
<span class="normal"><a href="#__codelineno-0-1470">1470</a></span>
<span class="normal"><a href="#__codelineno-0-1471">1471</a></span>
<span class="normal"><a href="#__codelineno-0-1472">1472</a></span>
<span class="normal"><a href="#__codelineno-0-1473">1473</a></span>
<span class="normal"><a href="#__codelineno-0-1474">1474</a></span>
<span class="normal"><a href="#__codelineno-0-1475">1475</a></span>
<span class="normal"><a href="#__codelineno-0-1476">1476</a></span>
<span class="normal"><a href="#__codelineno-0-1477">1477</a></span>
<span class="normal"><a href="#__codelineno-0-1478">1478</a></span>
<span class="normal"><a href="#__codelineno-0-1479">1479</a></span>
<span class="normal"><a href="#__codelineno-0-1480">1480</a></span>
<span class="normal"><a href="#__codelineno-0-1481">1481</a></span>
<span class="normal"><a href="#__codelineno-0-1482">1482</a></span>
<span class="normal"><a href="#__codelineno-0-1483">1483</a></span>
<span class="normal"><a href="#__codelineno-0-1484">1484</a></span>
<span class="normal"><a href="#__codelineno-0-1485">1485</a></span>
<span class="normal"><a href="#__codelineno-0-1486">1486</a></span>
<span class="normal"><a href="#__codelineno-0-1487">1487</a></span>
<span class="normal"><a href="#__codelineno-0-1488">1488</a></span>
<span class="normal"><a href="#__codelineno-0-1489">1489</a></span>
<span class="normal"><a href="#__codelineno-0-1490">1490</a></span>
<span class="normal"><a href="#__codelineno-0-1491">1491</a></span>
<span class="normal"><a href="#__codelineno-0-1492">1492</a></span>
<span class="normal"><a href="#__codelineno-0-1493">1493</a></span>
<span class="normal"><a href="#__codelineno-0-1494">1494</a></span>
<span class="normal"><a href="#__codelineno-0-1495">1495</a></span>
<span class="normal"><a href="#__codelineno-0-1496">1496</a></span>
<span class="normal"><a href="#__codelineno-0-1497">1497</a></span>
<span class="normal"><a href="#__codelineno-0-1498">1498</a></span>
<span class="normal"><a href="#__codelineno-0-1499">1499</a></span>
<span class="normal"><a href="#__codelineno-0-1500">1500</a></span>
<span class="normal"><a href="#__codelineno-0-1501">1501</a></span>
<span class="normal"><a href="#__codelineno-0-1502">1502</a></span>
<span class="normal"><a href="#__codelineno-0-1503">1503</a></span>
<span class="normal"><a href="#__codelineno-0-1504">1504</a></span>
<span class="normal"><a href="#__codelineno-0-1505">1505</a></span>
<span class="normal"><a href="#__codelineno-0-1506">1506</a></span>
<span class="normal"><a href="#__codelineno-0-1507">1507</a></span>
<span class="normal"><a href="#__codelineno-0-1508">1508</a></span>
<span class="normal"><a href="#__codelineno-0-1509">1509</a></span>
<span class="normal"><a href="#__codelineno-0-1510">1510</a></span>
<span class="normal"><a href="#__codelineno-0-1511">1511</a></span>
<span class="normal"><a href="#__codelineno-0-1512">1512</a></span>
<span class="normal"><a href="#__codelineno-0-1513">1513</a></span>
<span class="normal"><a href="#__codelineno-0-1514">1514</a></span>
<span class="normal"><a href="#__codelineno-0-1515">1515</a></span>
<span class="normal"><a href="#__codelineno-0-1516">1516</a></span>
<span class="normal"><a href="#__codelineno-0-1517">1517</a></span>
<span class="normal"><a href="#__codelineno-0-1518">1518</a></span>
<span class="normal"><a href="#__codelineno-0-1519">1519</a></span>
<span class="normal"><a href="#__codelineno-0-1520">1520</a></span>
<span class="normal"><a href="#__codelineno-0-1521">1521</a></span>
<span class="normal"><a href="#__codelineno-0-1522">1522</a></span>
<span class="normal"><a href="#__codelineno-0-1523">1523</a></span>
<span class="normal"><a href="#__codelineno-0-1524">1524</a></span>
<span class="normal"><a href="#__codelineno-0-1525">1525</a></span>
<span class="normal"><a href="#__codelineno-0-1526">1526</a></span>
<span class="normal"><a href="#__codelineno-0-1527">1527</a></span>
<span class="normal"><a href="#__codelineno-0-1528">1528</a></span>
<span class="normal"><a href="#__codelineno-0-1529">1529</a></span>
<span class="normal"><a href="#__codelineno-0-1530">1530</a></span>
<span class="normal"><a href="#__codelineno-0-1531">1531</a></span>
<span class="normal"><a href="#__codelineno-0-1532">1532</a></span>
<span class="normal"><a href="#__codelineno-0-1533">1533</a></span>
<span class="normal"><a href="#__codelineno-0-1534">1534</a></span>
<span class="normal"><a href="#__codelineno-0-1535">1535</a></span>
<span class="normal"><a href="#__codelineno-0-1536">1536</a></span>
<span class="normal"><a href="#__codelineno-0-1537">1537</a></span>
<span class="normal"><a href="#__codelineno-0-1538">1538</a></span>
<span class="normal"><a href="#__codelineno-0-1539">1539</a></span>
<span class="normal"><a href="#__codelineno-0-1540">1540</a></span>
<span class="normal"><a href="#__codelineno-0-1541">1541</a></span>
<span class="normal"><a href="#__codelineno-0-1542">1542</a></span>
<span class="normal"><a href="#__codelineno-0-1543">1543</a></span>
<span class="normal"><a href="#__codelineno-0-1544">1544</a></span>
<span class="normal"><a href="#__codelineno-0-1545">1545</a></span>
<span class="normal"><a href="#__codelineno-0-1546">1546</a></span>
<span class="normal"><a href="#__codelineno-0-1547">1547</a></span>
<span class="normal"><a href="#__codelineno-0-1548">1548</a></span>
<span class="normal"><a href="#__codelineno-0-1549">1549</a></span>
<span class="normal"><a href="#__codelineno-0-1550">1550</a></span>
<span class="normal"><a href="#__codelineno-0-1551">1551</a></span>
<span class="normal"><a href="#__codelineno-0-1552">1552</a></span>
<span class="normal"><a href="#__codelineno-0-1553">1553</a></span>
<span class="normal"><a href="#__codelineno-0-1554">1554</a></span>
<span class="normal"><a href="#__codelineno-0-1555">1555</a></span>
<span class="normal"><a href="#__codelineno-0-1556">1556</a></span>
<span class="normal"><a href="#__codelineno-0-1557">1557</a></span>
<span class="normal"><a href="#__codelineno-0-1558">1558</a></span>
<span class="normal"><a href="#__codelineno-0-1559">1559</a></span>
<span class="normal"><a href="#__codelineno-0-1560">1560</a></span>
<span class="normal"><a href="#__codelineno-0-1561">1561</a></span>
<span class="normal"><a href="#__codelineno-0-1562">1562</a></span>
<span class="normal"><a href="#__codelineno-0-1563">1563</a></span>
<span class="normal"><a href="#__codelineno-0-1564">1564</a></span>
<span class="normal"><a href="#__codelineno-0-1565">1565</a></span>
<span class="normal"><a href="#__codelineno-0-1566">1566</a></span>
<span class="normal"><a href="#__codelineno-0-1567">1567</a></span>
<span class="normal"><a href="#__codelineno-0-1568">1568</a></span>
<span class="normal"><a href="#__codelineno-0-1569">1569</a></span>
<span class="normal"><a href="#__codelineno-0-1570">1570</a></span>
<span class="normal"><a href="#__codelineno-0-1571">1571</a></span>
<span class="normal"><a href="#__codelineno-0-1572">1572</a></span>
<span class="normal"><a href="#__codelineno-0-1573">1573</a></span>
<span class="normal"><a href="#__codelineno-0-1574">1574</a></span>
<span class="normal"><a href="#__codelineno-0-1575">1575</a></span>
<span class="normal"><a href="#__codelineno-0-1576">1576</a></span>
<span class="normal"><a href="#__codelineno-0-1577">1577</a></span>
<span class="normal"><a href="#__codelineno-0-1578">1578</a></span>
<span class="normal"><a href="#__codelineno-0-1579">1579</a></span>
<span class="normal"><a href="#__codelineno-0-1580">1580</a></span>
<span class="normal"><a href="#__codelineno-0-1581">1581</a></span>
<span class="normal"><a href="#__codelineno-0-1582">1582</a></span>
<span class="normal"><a href="#__codelineno-0-1583">1583</a></span>
<span class="normal"><a href="#__codelineno-0-1584">1584</a></span>
<span class="normal"><a href="#__codelineno-0-1585">1585</a></span>
<span class="normal"><a href="#__codelineno-0-1586">1586</a></span>
<span class="normal"><a href="#__codelineno-0-1587">1587</a></span>
<span class="normal"><a href="#__codelineno-0-1588">1588</a></span>
<span class="normal"><a href="#__codelineno-0-1589">1589</a></span>
<span class="normal"><a href="#__codelineno-0-1590">1590</a></span>
<span class="normal"><a href="#__codelineno-0-1591">1591</a></span>
<span class="normal"><a href="#__codelineno-0-1592">1592</a></span>
<span class="normal"><a href="#__codelineno-0-1593">1593</a></span>
<span class="normal"><a href="#__codelineno-0-1594">1594</a></span>
<span class="normal"><a href="#__codelineno-0-1595">1595</a></span>
<span class="normal"><a href="#__codelineno-0-1596">1596</a></span>
<span class="normal"><a href="#__codelineno-0-1597">1597</a></span>
<span class="normal"><a href="#__codelineno-0-1598">1598</a></span>
<span class="normal"><a href="#__codelineno-0-1599">1599</a></span>
<span class="normal"><a href="#__codelineno-0-1600">1600</a></span>
<span class="normal"><a href="#__codelineno-0-1601">1601</a></span>
<span class="normal"><a href="#__codelineno-0-1602">1602</a></span>
<span class="normal"><a href="#__codelineno-0-1603">1603</a></span>
<span class="normal"><a href="#__codelineno-0-1604">1604</a></span>
<span class="normal"><a href="#__codelineno-0-1605">1605</a></span>
<span class="normal"><a href="#__codelineno-0-1606">1606</a></span>
<span class="normal"><a href="#__codelineno-0-1607">1607</a></span>
<span class="normal"><a href="#__codelineno-0-1608">1608</a></span>
<span class="normal"><a href="#__codelineno-0-1609">1609</a></span>
<span class="normal"><a href="#__codelineno-0-1610">1610</a></span>
<span class="normal"><a href="#__codelineno-0-1611">1611</a></span>
<span class="normal"><a href="#__codelineno-0-1612">1612</a></span>
<span class="normal"><a href="#__codelineno-0-1613">1613</a></span>
<span class="normal"><a href="#__codelineno-0-1614">1614</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-797" name="__codelineno-0-797"></a><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-0-798" name="__codelineno-0-798"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-799" name="__codelineno-0-799"></a>    <span class="n">objective_sense</span><span class="p">:</span> <span class="n">ObjectiveSense</span><span class="p">,</span>
<a id="__codelineno-0-800" name="__codelineno-0-800"></a>    <span class="n">objective_func</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-801" name="__codelineno-0-801"></a>    <span class="o">*</span><span class="p">,</span>
<a id="__codelineno-0-802" name="__codelineno-0-802"></a>    <span class="n">initial_bounds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">BoundsPairLike</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-803" name="__codelineno-0-803"></a>    <span class="n">bounds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">BoundsPairLike</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-804" name="__codelineno-0-804"></a>    <span class="n">solution_length</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-805" name="__codelineno-0-805"></a>    <span class="n">dtype</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">DType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-806" name="__codelineno-0-806"></a>    <span class="n">eval_dtype</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">DType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-807" name="__codelineno-0-807"></a>    <span class="n">device</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Device</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-808" name="__codelineno-0-808"></a>    <span class="n">eval_data_length</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-809" name="__codelineno-0-809"></a>    <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-810" name="__codelineno-0-810"></a>    <span class="n">num_actors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-811" name="__codelineno-0-811"></a>    <span class="n">actor_config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-812" name="__codelineno-0-812"></a>    <span class="n">num_gpus_per_actor</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-813" name="__codelineno-0-813"></a>    <span class="n">num_subbatches</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-814" name="__codelineno-0-814"></a>    <span class="n">subbatch_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-815" name="__codelineno-0-815"></a>    <span class="n">store_solution_stats</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-816" name="__codelineno-0-816"></a>    <span class="n">vectorized</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-817" name="__codelineno-0-817"></a><span class="p">):</span>
<a id="__codelineno-0-818" name="__codelineno-0-818"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-819" name="__codelineno-0-819"></a><span class="sd">    `__init__(...)`: Initialize the Problem object.</span>
<a id="__codelineno-0-820" name="__codelineno-0-820"></a>
<a id="__codelineno-0-821" name="__codelineno-0-821"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-822" name="__codelineno-0-822"></a><span class="sd">        objective_sense: A string, or a sequence of strings.</span>
<a id="__codelineno-0-823" name="__codelineno-0-823"></a><span class="sd">            For a single-objective problem, a single string</span>
<a id="__codelineno-0-824" name="__codelineno-0-824"></a><span class="sd">            (&quot;min&quot; or &quot;max&quot;, for minimization or maximization)</span>
<a id="__codelineno-0-825" name="__codelineno-0-825"></a><span class="sd">            is enough.</span>
<a id="__codelineno-0-826" name="__codelineno-0-826"></a><span class="sd">            For a problem with `n` objectives, a sequence</span>
<a id="__codelineno-0-827" name="__codelineno-0-827"></a><span class="sd">            of strings (e.g. a list of strings) of length `n` is</span>
<a id="__codelineno-0-828" name="__codelineno-0-828"></a><span class="sd">            required, each string in the sequence being &quot;min&quot; or</span>
<a id="__codelineno-0-829" name="__codelineno-0-829"></a><span class="sd">            &quot;max&quot;. This argument specifies the goal of the</span>
<a id="__codelineno-0-830" name="__codelineno-0-830"></a><span class="sd">            optimization.</span>
<a id="__codelineno-0-831" name="__codelineno-0-831"></a><span class="sd">        initial_bounds: In which interval will the values of a</span>
<a id="__codelineno-0-832" name="__codelineno-0-832"></a><span class="sd">            new solution will be initialized.</span>
<a id="__codelineno-0-833" name="__codelineno-0-833"></a><span class="sd">            Expected as a tuple, each element being either a</span>
<a id="__codelineno-0-834" name="__codelineno-0-834"></a><span class="sd">            scalar, or a vector of length `n`, `n` being the</span>
<a id="__codelineno-0-835" name="__codelineno-0-835"></a><span class="sd">            length of a solution.</span>
<a id="__codelineno-0-836" name="__codelineno-0-836"></a><span class="sd">            If a manual solution initialization is preferred</span>
<a id="__codelineno-0-837" name="__codelineno-0-837"></a><span class="sd">            (instead of an interval-based initialization),</span>
<a id="__codelineno-0-838" name="__codelineno-0-838"></a><span class="sd">            one can leave `initial_bounds` as None, and override</span>
<a id="__codelineno-0-839" name="__codelineno-0-839"></a><span class="sd">            the `_fill(...)` method in the inheriting subclass.</span>
<a id="__codelineno-0-840" name="__codelineno-0-840"></a><span class="sd">        bounds: Interval in which all the solutions must always</span>
<a id="__codelineno-0-841" name="__codelineno-0-841"></a><span class="sd">            reside.</span>
<a id="__codelineno-0-842" name="__codelineno-0-842"></a><span class="sd">            Expected as a tuple, each element being either a</span>
<a id="__codelineno-0-843" name="__codelineno-0-843"></a><span class="sd">            scalar, or a vector of length `n`, `n` being the</span>
<a id="__codelineno-0-844" name="__codelineno-0-844"></a><span class="sd">            length of a solution.</span>
<a id="__codelineno-0-845" name="__codelineno-0-845"></a><span class="sd">            This argument is optional, and can be left as None</span>
<a id="__codelineno-0-846" name="__codelineno-0-846"></a><span class="sd">            if one does not wish to declare hard bounds on the</span>
<a id="__codelineno-0-847" name="__codelineno-0-847"></a><span class="sd">            decision values of the problem.</span>
<a id="__codelineno-0-848" name="__codelineno-0-848"></a><span class="sd">            If `bounds` is specified, `initial_bounds` is missing,</span>
<a id="__codelineno-0-849" name="__codelineno-0-849"></a><span class="sd">            and `_fill(...)` is not overriden, then `bounds` will</span>
<a id="__codelineno-0-850" name="__codelineno-0-850"></a><span class="sd">            also serve as the `initial_bounds`.</span>
<a id="__codelineno-0-851" name="__codelineno-0-851"></a><span class="sd">        solution_length: Length of a solution.</span>
<a id="__codelineno-0-852" name="__codelineno-0-852"></a><span class="sd">            Required for all fixed-length numeric optimization</span>
<a id="__codelineno-0-853" name="__codelineno-0-853"></a><span class="sd">            problems.</span>
<a id="__codelineno-0-854" name="__codelineno-0-854"></a><span class="sd">            For variable-length problems (which might or might not</span>
<a id="__codelineno-0-855" name="__codelineno-0-855"></a><span class="sd">            be numeric), one is expected to leave `solution_length`</span>
<a id="__codelineno-0-856" name="__codelineno-0-856"></a><span class="sd">            as None, and declare `dtype` as `object`.</span>
<a id="__codelineno-0-857" name="__codelineno-0-857"></a><span class="sd">        dtype: dtype (data type) of the data stored by a solution.</span>
<a id="__codelineno-0-858" name="__codelineno-0-858"></a><span class="sd">            Can be given as a string (e.g. &quot;float32&quot;),</span>
<a id="__codelineno-0-859" name="__codelineno-0-859"></a><span class="sd">            or as a numpy dtype (e.g. `numpy.dtype(&quot;float32&quot;)`),</span>
<a id="__codelineno-0-860" name="__codelineno-0-860"></a><span class="sd">            or as a PyTorch dtype (e.g. `torch.float32`).</span>
<a id="__codelineno-0-861" name="__codelineno-0-861"></a><span class="sd">            Alternatively, if the problem is variable-length</span>
<a id="__codelineno-0-862" name="__codelineno-0-862"></a><span class="sd">            and/or non-numeric, one is expected to declare `dtype`</span>
<a id="__codelineno-0-863" name="__codelineno-0-863"></a><span class="sd">            as `object`.</span>
<a id="__codelineno-0-864" name="__codelineno-0-864"></a><span class="sd">        eval_dtype: dtype to be used for storing the evaluations</span>
<a id="__codelineno-0-865" name="__codelineno-0-865"></a><span class="sd">            (or fitnesses, or scores, or costs, or losses)</span>
<a id="__codelineno-0-866" name="__codelineno-0-866"></a><span class="sd">            of the solutions.</span>
<a id="__codelineno-0-867" name="__codelineno-0-867"></a><span class="sd">            Can be given as a string (e.g. &quot;float32&quot;),</span>
<a id="__codelineno-0-868" name="__codelineno-0-868"></a><span class="sd">            or as a numpy dtype (e.g. `numpy.dtype(&quot;float32&quot;)`),</span>
<a id="__codelineno-0-869" name="__codelineno-0-869"></a><span class="sd">            or as a PyTorch dtype (e.g. `torch.float32`).</span>
<a id="__codelineno-0-870" name="__codelineno-0-870"></a><span class="sd">            `eval_dtype` must always refer to a &quot;float&quot; data type,</span>
<a id="__codelineno-0-871" name="__codelineno-0-871"></a><span class="sd">            therefore, `object` is not accepted as a valid `eval_dtype`.</span>
<a id="__codelineno-0-872" name="__codelineno-0-872"></a><span class="sd">            If `eval_dtype` is not specified (i.e. left as None),</span>
<a id="__codelineno-0-873" name="__codelineno-0-873"></a><span class="sd">            then the following actions are taken to determine the</span>
<a id="__codelineno-0-874" name="__codelineno-0-874"></a><span class="sd">            `eval_dtype`:</span>
<a id="__codelineno-0-875" name="__codelineno-0-875"></a><span class="sd">            if `dtype` is &quot;float16&quot;, `eval_dtype` becomes &quot;float16&quot;;</span>
<a id="__codelineno-0-876" name="__codelineno-0-876"></a><span class="sd">            if `dtype` is &quot;bfloat16&quot;, `eval_dtype` becomes &quot;bfloat16&quot;;</span>
<a id="__codelineno-0-877" name="__codelineno-0-877"></a><span class="sd">            if `dtype` is &quot;float32&quot;, `eval_dtype` becomes &quot;float32&quot;;</span>
<a id="__codelineno-0-878" name="__codelineno-0-878"></a><span class="sd">            if `dtype` is &quot;float64&quot;, `eval_dtype` becomes &quot;float64&quot;;</span>
<a id="__codelineno-0-879" name="__codelineno-0-879"></a><span class="sd">            and for any other `dtype`, `eval_dtype` becomes &quot;float32&quot;.</span>
<a id="__codelineno-0-880" name="__codelineno-0-880"></a><span class="sd">        device: Default device in which a new population will be</span>
<a id="__codelineno-0-881" name="__codelineno-0-881"></a><span class="sd">            generated. For non-numeric problems, this must be &quot;cpu&quot;.</span>
<a id="__codelineno-0-882" name="__codelineno-0-882"></a><span class="sd">            For numeric problems, this can be any device supported</span>
<a id="__codelineno-0-883" name="__codelineno-0-883"></a><span class="sd">            by PyTorch (e.g. &quot;cuda&quot;).</span>
<a id="__codelineno-0-884" name="__codelineno-0-884"></a><span class="sd">            Note that, if the number of actors of the problem is configured</span>
<a id="__codelineno-0-885" name="__codelineno-0-885"></a><span class="sd">            to be more than 1, `device` has to be &quot;cpu&quot; (or, equivalently,</span>
<a id="__codelineno-0-886" name="__codelineno-0-886"></a><span class="sd">            left as None).</span>
<a id="__codelineno-0-887" name="__codelineno-0-887"></a><span class="sd">        eval_data_length: In addition to evaluation results</span>
<a id="__codelineno-0-888" name="__codelineno-0-888"></a><span class="sd">            (which are (un)fitnesses, or scores, or costs, or losses),</span>
<a id="__codelineno-0-889" name="__codelineno-0-889"></a><span class="sd">            each solution can store extra evaluation data.</span>
<a id="__codelineno-0-890" name="__codelineno-0-890"></a><span class="sd">            If storage of such extra evaluation data is required,</span>
<a id="__codelineno-0-891" name="__codelineno-0-891"></a><span class="sd">            one can set this argument to an integer bigger than 0.</span>
<a id="__codelineno-0-892" name="__codelineno-0-892"></a><span class="sd">        seed: Random seed to be used by the random number generator</span>
<a id="__codelineno-0-893" name="__codelineno-0-893"></a><span class="sd">            attached to the problem object.</span>
<a id="__codelineno-0-894" name="__codelineno-0-894"></a><span class="sd">            If left as None, no random number generator will be</span>
<a id="__codelineno-0-895" name="__codelineno-0-895"></a><span class="sd">            attached, and the global random number generator of</span>
<a id="__codelineno-0-896" name="__codelineno-0-896"></a><span class="sd">            PyTorch will be used instead.</span>
<a id="__codelineno-0-897" name="__codelineno-0-897"></a><span class="sd">        num_actors: Number of actors to create for parallelized</span>
<a id="__codelineno-0-898" name="__codelineno-0-898"></a><span class="sd">            evaluation of the solutions.</span>
<a id="__codelineno-0-899" name="__codelineno-0-899"></a><span class="sd">            Certain string values are also accepted.</span>
<a id="__codelineno-0-900" name="__codelineno-0-900"></a><span class="sd">            When given as &quot;max&quot; or as &quot;num_cpus&quot;, the number of actors</span>
<a id="__codelineno-0-901" name="__codelineno-0-901"></a><span class="sd">            will be equal to the number of all available CPUs in the ray</span>
<a id="__codelineno-0-902" name="__codelineno-0-902"></a><span class="sd">            cluster.</span>
<a id="__codelineno-0-903" name="__codelineno-0-903"></a><span class="sd">            When given as &quot;num_gpus&quot;, the number of actors will be</span>
<a id="__codelineno-0-904" name="__codelineno-0-904"></a><span class="sd">            equal to the number of all available GPUs in the ray</span>
<a id="__codelineno-0-905" name="__codelineno-0-905"></a><span class="sd">            cluster, and each actor will be assigned a GPU.</span>
<a id="__codelineno-0-906" name="__codelineno-0-906"></a><span class="sd">            There is also an option, &quot;num_devices&quot;, which means that</span>
<a id="__codelineno-0-907" name="__codelineno-0-907"></a><span class="sd">            both the numbers of CPUs and GPUs will be analyzed, and</span>
<a id="__codelineno-0-908" name="__codelineno-0-908"></a><span class="sd">            new actors and GPUs for them will be allocated,</span>
<a id="__codelineno-0-909" name="__codelineno-0-909"></a><span class="sd">            in a one-to-one mapping manner, if possible.</span>
<a id="__codelineno-0-910" name="__codelineno-0-910"></a><span class="sd">            In more details, with `num_actors=&quot;num_devices&quot;`, if</span>
<a id="__codelineno-0-911" name="__codelineno-0-911"></a><span class="sd">            `device` is given as a GPU device, then it will be inferred</span>
<a id="__codelineno-0-912" name="__codelineno-0-912"></a><span class="sd">            that the user wishes to put everything (including the</span>
<a id="__codelineno-0-913" name="__codelineno-0-913"></a><span class="sd">            population) on a single GPU, and therefore there won&#39;t be</span>
<a id="__codelineno-0-914" name="__codelineno-0-914"></a><span class="sd">            any allocation of actors nor GPUs.</span>
<a id="__codelineno-0-915" name="__codelineno-0-915"></a><span class="sd">            With `num_actors=&quot;num_devices&quot;` and with `device` set as</span>
<a id="__codelineno-0-916" name="__codelineno-0-916"></a><span class="sd">            &quot;cpu&quot; (or as left as None), if there are multiple CPUs</span>
<a id="__codelineno-0-917" name="__codelineno-0-917"></a><span class="sd">            and multiple GPUs, then `n` actors will be allocated</span>
<a id="__codelineno-0-918" name="__codelineno-0-918"></a><span class="sd">            where `n` is the minimum among the number of CPUs</span>
<a id="__codelineno-0-919" name="__codelineno-0-919"></a><span class="sd">            and the number of GPUs, so that there can be one-to-one</span>
<a id="__codelineno-0-920" name="__codelineno-0-920"></a><span class="sd">            mapping between CPUs and GPUs (i.e. such that each actor</span>
<a id="__codelineno-0-921" name="__codelineno-0-921"></a><span class="sd">            can be assigned an entire GPU).</span>
<a id="__codelineno-0-922" name="__codelineno-0-922"></a><span class="sd">            If `num_actors` is given as &quot;num_gpus&quot; or &quot;num_devices&quot;,</span>
<a id="__codelineno-0-923" name="__codelineno-0-923"></a><span class="sd">            the argument `num_gpus_per_actor` must not be used,</span>
<a id="__codelineno-0-924" name="__codelineno-0-924"></a><span class="sd">            and the `actor_config` dictionary must not contain the</span>
<a id="__codelineno-0-925" name="__codelineno-0-925"></a><span class="sd">            key &quot;num_gpus&quot;.</span>
<a id="__codelineno-0-926" name="__codelineno-0-926"></a><span class="sd">            If `num_actors` is given as something other than &quot;num_gpus&quot;</span>
<a id="__codelineno-0-927" name="__codelineno-0-927"></a><span class="sd">            or &quot;num_devices&quot;, and if you wish to assign GPUs to each</span>
<a id="__codelineno-0-928" name="__codelineno-0-928"></a><span class="sd">            actor, then please see the argument `num_gpus_per_actor`.</span>
<a id="__codelineno-0-929" name="__codelineno-0-929"></a><span class="sd">        actor_config: A dictionary, representing the keyword arguments</span>
<a id="__codelineno-0-930" name="__codelineno-0-930"></a><span class="sd">            to be passed to the options(...) used when creating the</span>
<a id="__codelineno-0-931" name="__codelineno-0-931"></a><span class="sd">            ray actor objects. To be used for explicitly allocating</span>
<a id="__codelineno-0-932" name="__codelineno-0-932"></a><span class="sd">            resources per each actor.</span>
<a id="__codelineno-0-933" name="__codelineno-0-933"></a><span class="sd">            For example, for declaring that each actor is to use a GPU,</span>
<a id="__codelineno-0-934" name="__codelineno-0-934"></a><span class="sd">            one can pass `actor_config=dict(num_gpus=1)`.</span>
<a id="__codelineno-0-935" name="__codelineno-0-935"></a><span class="sd">            Can also be given as None (which is the default),</span>
<a id="__codelineno-0-936" name="__codelineno-0-936"></a><span class="sd">            if no such options are to be passed.</span>
<a id="__codelineno-0-937" name="__codelineno-0-937"></a><span class="sd">        num_gpus_per_actor: Number of GPUs to be allocated by each</span>
<a id="__codelineno-0-938" name="__codelineno-0-938"></a><span class="sd">            remote actor.</span>
<a id="__codelineno-0-939" name="__codelineno-0-939"></a><span class="sd">            The default behavior is to NOT allocate any GPU at all</span>
<a id="__codelineno-0-940" name="__codelineno-0-940"></a><span class="sd">            (which is the default behavior of the ray library as well).</span>
<a id="__codelineno-0-941" name="__codelineno-0-941"></a><span class="sd">            When given as a number `n`, each actor will be given</span>
<a id="__codelineno-0-942" name="__codelineno-0-942"></a><span class="sd">            `n` GPUs (where `n` can be an integer, or can be a `float`</span>
<a id="__codelineno-0-943" name="__codelineno-0-943"></a><span class="sd">            for fractional allocation).</span>
<a id="__codelineno-0-944" name="__codelineno-0-944"></a><span class="sd">            When given as a string &quot;max&quot;, then the available GPUs</span>
<a id="__codelineno-0-945" name="__codelineno-0-945"></a><span class="sd">            across the entire ray cluster (or within the local computer</span>
<a id="__codelineno-0-946" name="__codelineno-0-946"></a><span class="sd">            in the simplest cases) will be equally distributed among</span>
<a id="__codelineno-0-947" name="__codelineno-0-947"></a><span class="sd">            the actors.</span>
<a id="__codelineno-0-948" name="__codelineno-0-948"></a><span class="sd">            When given as a string &quot;all&quot;, then each actor will have</span>
<a id="__codelineno-0-949" name="__codelineno-0-949"></a><span class="sd">            access to all the GPUs (this will be achieved by suppressing</span>
<a id="__codelineno-0-950" name="__codelineno-0-950"></a><span class="sd">            the environment variable `CUDA_VISIBLE_DEVICES` for each</span>
<a id="__codelineno-0-951" name="__codelineno-0-951"></a><span class="sd">            actor).</span>
<a id="__codelineno-0-952" name="__codelineno-0-952"></a><span class="sd">            When the problem is not distributed (i.e. when there are</span>
<a id="__codelineno-0-953" name="__codelineno-0-953"></a><span class="sd">            no actors), this argument is expected to be left as None.</span>
<a id="__codelineno-0-954" name="__codelineno-0-954"></a><span class="sd">        num_subbatches: If `num_subbatches` is None (assuming that</span>
<a id="__codelineno-0-955" name="__codelineno-0-955"></a><span class="sd">            `subbatch_size` is also None), then, when evaluating a</span>
<a id="__codelineno-0-956" name="__codelineno-0-956"></a><span class="sd">            population, the population will be split into n pieces, `n`</span>
<a id="__codelineno-0-957" name="__codelineno-0-957"></a><span class="sd">            being the number of actors, and each actor will evaluate</span>
<a id="__codelineno-0-958" name="__codelineno-0-958"></a><span class="sd">            its assigned piece. If `num_subbatches` is an integer `m`,</span>
<a id="__codelineno-0-959" name="__codelineno-0-959"></a><span class="sd">            then the population will be split into `m` pieces,</span>
<a id="__codelineno-0-960" name="__codelineno-0-960"></a><span class="sd">            and actors will continually accept the next unevaluated</span>
<a id="__codelineno-0-961" name="__codelineno-0-961"></a><span class="sd">            piece as they finish their current tasks.</span>
<a id="__codelineno-0-962" name="__codelineno-0-962"></a><span class="sd">            The arguments `num_subbatches` and `subbatch_size` cannot</span>
<a id="__codelineno-0-963" name="__codelineno-0-963"></a><span class="sd">            be given values other than None at the same time.</span>
<a id="__codelineno-0-964" name="__codelineno-0-964"></a><span class="sd">            While using a distributed algorithm, this argument determines</span>
<a id="__codelineno-0-965" name="__codelineno-0-965"></a><span class="sd">            how many sub-batches will be generated, and therefore,</span>
<a id="__codelineno-0-966" name="__codelineno-0-966"></a><span class="sd">            how many gradients will be computed by the remote actors.</span>
<a id="__codelineno-0-967" name="__codelineno-0-967"></a><span class="sd">        subbatch_size: If `subbatch_size` is None (assuming that</span>
<a id="__codelineno-0-968" name="__codelineno-0-968"></a><span class="sd">            `num_subbatches` is also None), then, when evaluating a</span>
<a id="__codelineno-0-969" name="__codelineno-0-969"></a><span class="sd">            population, the population will be split into `n` pieces, `n`</span>
<a id="__codelineno-0-970" name="__codelineno-0-970"></a><span class="sd">            being the number of actors, and each actor will evaluate its</span>
<a id="__codelineno-0-971" name="__codelineno-0-971"></a><span class="sd">            assigned piece. If `subbatch_size` is an integer `m`,</span>
<a id="__codelineno-0-972" name="__codelineno-0-972"></a><span class="sd">            then the population will be split into pieces of size `m`,</span>
<a id="__codelineno-0-973" name="__codelineno-0-973"></a><span class="sd">            and actors will continually accept the next unevaluated</span>
<a id="__codelineno-0-974" name="__codelineno-0-974"></a><span class="sd">            piece as they finish their current tasks.</span>
<a id="__codelineno-0-975" name="__codelineno-0-975"></a><span class="sd">            When there can be significant difference across the solutions</span>
<a id="__codelineno-0-976" name="__codelineno-0-976"></a><span class="sd">            in terms of computational requirements, specifying a</span>
<a id="__codelineno-0-977" name="__codelineno-0-977"></a><span class="sd">            `subbatch_size` can be beneficial, because, while one</span>
<a id="__codelineno-0-978" name="__codelineno-0-978"></a><span class="sd">            actor is busy with a subbatch containing computationally</span>
<a id="__codelineno-0-979" name="__codelineno-0-979"></a><span class="sd">            challenging solutions, other actors can accept more</span>
<a id="__codelineno-0-980" name="__codelineno-0-980"></a><span class="sd">            tasks and save time.</span>
<a id="__codelineno-0-981" name="__codelineno-0-981"></a><span class="sd">            The arguments `num_subbatches` and `subbatch_size` cannot</span>
<a id="__codelineno-0-982" name="__codelineno-0-982"></a><span class="sd">            be given values other than None at the same time.</span>
<a id="__codelineno-0-983" name="__codelineno-0-983"></a><span class="sd">            While using a distributed algorithm, this argument determines</span>
<a id="__codelineno-0-984" name="__codelineno-0-984"></a><span class="sd">            the size of a sub-batch (or sub-population) sampled by a</span>
<a id="__codelineno-0-985" name="__codelineno-0-985"></a><span class="sd">            remote actor for computing a gradient.</span>
<a id="__codelineno-0-986" name="__codelineno-0-986"></a><span class="sd">            In distributed mode, it is expected that the population size</span>
<a id="__codelineno-0-987" name="__codelineno-0-987"></a><span class="sd">            is divisible by `subbatch_size`.</span>
<a id="__codelineno-0-988" name="__codelineno-0-988"></a><span class="sd">        store_solution_stats: Whether or not the problem object should</span>
<a id="__codelineno-0-989" name="__codelineno-0-989"></a><span class="sd">            keep track of the best and worst solutions.</span>
<a id="__codelineno-0-990" name="__codelineno-0-990"></a><span class="sd">            Can also be left as None (which is the default behavior),</span>
<a id="__codelineno-0-991" name="__codelineno-0-991"></a><span class="sd">            in which case, it will store the best and worst solutions</span>
<a id="__codelineno-0-992" name="__codelineno-0-992"></a><span class="sd">            only when the first solution batch it encounters is on the</span>
<a id="__codelineno-0-993" name="__codelineno-0-993"></a><span class="sd">            cpu. This default behavior is to ensure that there is no</span>
<a id="__codelineno-0-994" name="__codelineno-0-994"></a><span class="sd">            transfer between the cpu and a foreign computation device</span>
<a id="__codelineno-0-995" name="__codelineno-0-995"></a><span class="sd">            (like the gpu) just for the sake of keeping the best and</span>
<a id="__codelineno-0-996" name="__codelineno-0-996"></a><span class="sd">            the worst solutions.</span>
<a id="__codelineno-0-997" name="__codelineno-0-997"></a><span class="sd">        vectorized: Set this to True if the provided fitness function</span>
<a id="__codelineno-0-998" name="__codelineno-0-998"></a><span class="sd">            is vectorized but is not decorated via `@vectorized`.</span>
<a id="__codelineno-0-999" name="__codelineno-0-999"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1000" name="__codelineno-0-1000"></a>
<a id="__codelineno-0-1001" name="__codelineno-0-1001"></a>    <span class="c1"># Set the dtype for the decision variables of the Problem</span>
<a id="__codelineno-0-1002" name="__codelineno-0-1002"></a>    <span class="k">if</span> <span class="n">dtype</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1003" name="__codelineno-0-1003"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dtype</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">float32</span>
<a id="__codelineno-0-1004" name="__codelineno-0-1004"></a>    <span class="k">elif</span> <span class="n">is_dtype_object</span><span class="p">(</span><span class="n">dtype</span><span class="p">):</span>
<a id="__codelineno-0-1005" name="__codelineno-0-1005"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dtype</span> <span class="o">=</span> <span class="nb">object</span>
<a id="__codelineno-0-1006" name="__codelineno-0-1006"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1007" name="__codelineno-0-1007"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dtype</span> <span class="o">=</span> <span class="n">to_torch_dtype</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span>
<a id="__codelineno-0-1008" name="__codelineno-0-1008"></a>
<a id="__codelineno-0-1009" name="__codelineno-0-1009"></a>    <span class="n">_evolog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">message_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;The `dtype` for the problem&#39;s decision variables is set as </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_dtype</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
<a id="__codelineno-0-1010" name="__codelineno-0-1010"></a>
<a id="__codelineno-0-1011" name="__codelineno-0-1011"></a>    <span class="c1"># Set the dtype for the solution evaluations (i.e. fitnesses and evaluation data)</span>
<a id="__codelineno-0-1012" name="__codelineno-0-1012"></a>    <span class="k">if</span> <span class="n">eval_dtype</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1013" name="__codelineno-0-1013"></a>        <span class="c1"># If an `eval_dtype` is explicitly stated, then accept it as the `_eval_dtype` of the Problem</span>
<a id="__codelineno-0-1014" name="__codelineno-0-1014"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_eval_dtype</span> <span class="o">=</span> <span class="n">to_torch_dtype</span><span class="p">(</span><span class="n">eval_dtype</span><span class="p">)</span>
<a id="__codelineno-0-1015" name="__codelineno-0-1015"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1016" name="__codelineno-0-1016"></a>        <span class="c1"># This is the case where an `eval_dtype` is not explicitly stated by the user.</span>
<a id="__codelineno-0-1017" name="__codelineno-0-1017"></a>        <span class="c1"># We need to choose a default.</span>
<a id="__codelineno-0-1018" name="__codelineno-0-1018"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dtype</span> <span class="ow">in</span> <span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">float16</span><span class="p">,</span> <span class="n">torch</span><span class="o">.</span><span class="n">bfloat16</span><span class="p">,</span> <span class="n">torch</span><span class="o">.</span><span class="n">float64</span><span class="p">):</span>
<a id="__codelineno-0-1019" name="__codelineno-0-1019"></a>            <span class="c1"># If the `dtype` of the problem is a non-32-bit float type (i.e. float16, bfloat16, float64)</span>
<a id="__codelineno-0-1020" name="__codelineno-0-1020"></a>            <span class="c1"># then we use that as our `_eval_dtype` as well.</span>
<a id="__codelineno-0-1021" name="__codelineno-0-1021"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_eval_dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dtype</span>
<a id="__codelineno-0-1022" name="__codelineno-0-1022"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1023" name="__codelineno-0-1023"></a>            <span class="c1"># For any other `dtype`, we use float32 as our `_eval_dtype`.</span>
<a id="__codelineno-0-1024" name="__codelineno-0-1024"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_eval_dtype</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">float32</span>
<a id="__codelineno-0-1025" name="__codelineno-0-1025"></a>
<a id="__codelineno-0-1026" name="__codelineno-0-1026"></a>        <span class="n">_evolog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
<a id="__codelineno-0-1027" name="__codelineno-0-1027"></a>            <span class="n">message_from</span><span class="p">(</span>
<a id="__codelineno-0-1028" name="__codelineno-0-1028"></a>                <span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;`eval_dtype` (the dtype of the fitnesses and evaluation data) is set as </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_eval_dtype</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1029" name="__codelineno-0-1029"></a>            <span class="p">)</span>
<a id="__codelineno-0-1030" name="__codelineno-0-1030"></a>        <span class="p">)</span>
<a id="__codelineno-0-1031" name="__codelineno-0-1031"></a>
<a id="__codelineno-0-1032" name="__codelineno-0-1032"></a>    <span class="c1"># Set the main device of the Problem object</span>
<a id="__codelineno-0-1033" name="__codelineno-0-1033"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_device</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cpu&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">device</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-1034" name="__codelineno-0-1034"></a>    <span class="n">_evolog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">message_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;The `device` of the problem is set as </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_device</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
<a id="__codelineno-0-1035" name="__codelineno-0-1035"></a>
<a id="__codelineno-0-1036" name="__codelineno-0-1036"></a>    <span class="c1"># Declare the internal variable that might store the random number generator</span>
<a id="__codelineno-0-1037" name="__codelineno-0-1037"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_generator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Generator</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1038" name="__codelineno-0-1038"></a>
<a id="__codelineno-0-1039" name="__codelineno-0-1039"></a>    <span class="c1"># Set the seed of the Problem object, if a seed is provided</span>
<a id="__codelineno-0-1040" name="__codelineno-0-1040"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">manual_seed</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>
<a id="__codelineno-0-1041" name="__codelineno-0-1041"></a>
<a id="__codelineno-0-1042" name="__codelineno-0-1042"></a>    <span class="c1"># Declare the internal variables that will store the bounds and the solution length</span>
<a id="__codelineno-0-1043" name="__codelineno-0-1043"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_initial_lower_bounds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1044" name="__codelineno-0-1044"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_initial_upper_bounds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1045" name="__codelineno-0-1045"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_lower_bounds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1046" name="__codelineno-0-1046"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_upper_bounds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1047" name="__codelineno-0-1047"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_solution_length</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1048" name="__codelineno-0-1048"></a>
<a id="__codelineno-0-1049" name="__codelineno-0-1049"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dtype</span> <span class="ow">is</span> <span class="nb">object</span><span class="p">:</span>
<a id="__codelineno-0-1050" name="__codelineno-0-1050"></a>        <span class="c1"># If dtype is given as `object`, then there are some runtime sanity checks to perform</span>
<a id="__codelineno-0-1051" name="__codelineno-0-1051"></a>        <span class="k">if</span> <span class="n">bounds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">initial_bounds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1052" name="__codelineno-0-1052"></a>            <span class="c1"># With dtype as object, if bounds are given then we raise an error.</span>
<a id="__codelineno-0-1053" name="__codelineno-0-1053"></a>            <span class="c1"># This is because the `object` dtype implies that the decision values are not necessarily numeric,</span>
<a id="__codelineno-0-1054" name="__codelineno-0-1054"></a>            <span class="c1"># and therefore, we cannot have the guarantee of satisfying numeric bounds.</span>
<a id="__codelineno-0-1055" name="__codelineno-0-1055"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1056" name="__codelineno-0-1056"></a>                <span class="sa">f</span><span class="s2">&quot;With dtype as </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span><span class="si">}</span><span class="s2">, expected to receive `initial_bounds` and/or `bounds` as None.&quot;</span>
<a id="__codelineno-0-1057" name="__codelineno-0-1057"></a>                <span class="sa">f</span><span class="s2">&quot; However, one or both of them is/are set as value(s) other than None.&quot;</span>
<a id="__codelineno-0-1058" name="__codelineno-0-1058"></a>            <span class="p">)</span>
<a id="__codelineno-0-1059" name="__codelineno-0-1059"></a>        <span class="k">if</span> <span class="n">solution_length</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1060" name="__codelineno-0-1060"></a>            <span class="c1"># With dtype as object, if `solution_length` is provided, then we raise an error.</span>
<a id="__codelineno-0-1061" name="__codelineno-0-1061"></a>            <span class="c1"># This is because the `object` dtype implies that the solutions can be expressed via various</span>
<a id="__codelineno-0-1062" name="__codelineno-0-1062"></a>            <span class="c1"># containers, each with its own length, and therefore, a fixed solution length cannot be guaranteed.</span>
<a id="__codelineno-0-1063" name="__codelineno-0-1063"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1064" name="__codelineno-0-1064"></a>                <span class="sa">f</span><span class="s2">&quot;With dtype as </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span><span class="si">}</span><span class="s2">, expected to receive `solution_length` as None.&quot;</span>
<a id="__codelineno-0-1065" name="__codelineno-0-1065"></a>                <span class="sa">f</span><span class="s2">&quot; However, received `solution_length` as </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">solution_length</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1066" name="__codelineno-0-1066"></a>            <span class="p">)</span>
<a id="__codelineno-0-1067" name="__codelineno-0-1067"></a>        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_device</span><span class="p">)</span> <span class="o">!=</span> <span class="s2">&quot;cpu&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1068" name="__codelineno-0-1068"></a>            <span class="c1"># With dtype as object, if `device` is something other than &quot;cpu&quot;, then we raise an error.</span>
<a id="__codelineno-0-1069" name="__codelineno-0-1069"></a>            <span class="c1"># This is because the `object` dtype implies that the decision values are stored by an ObjectArray,</span>
<a id="__codelineno-0-1070" name="__codelineno-0-1070"></a>            <span class="c1"># whose device is always &quot;cpu&quot;.</span>
<a id="__codelineno-0-1071" name="__codelineno-0-1071"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1072" name="__codelineno-0-1072"></a>                <span class="sa">f</span><span class="s2">&quot;With dtype as </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span><span class="si">}</span><span class="s2">, expected to receive `device` as &#39;cpu&#39;.&quot;</span>
<a id="__codelineno-0-1073" name="__codelineno-0-1073"></a>                <span class="sa">f</span><span class="s2">&quot; However, received `device` as </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">device</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1074" name="__codelineno-0-1074"></a>            <span class="p">)</span>
<a id="__codelineno-0-1075" name="__codelineno-0-1075"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1076" name="__codelineno-0-1076"></a>        <span class="c1"># If dtype is something other than `object`, then we need to make sure that we have a valid length for</span>
<a id="__codelineno-0-1077" name="__codelineno-0-1077"></a>        <span class="c1"># solutions, and also properly store the given numeric bounds.</span>
<a id="__codelineno-0-1078" name="__codelineno-0-1078"></a>
<a id="__codelineno-0-1079" name="__codelineno-0-1079"></a>        <span class="k">if</span> <span class="n">solution_length</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1080" name="__codelineno-0-1080"></a>            <span class="c1"># With a numeric dtype, if solution length is missing, then we raise an error.</span>
<a id="__codelineno-0-1081" name="__codelineno-0-1081"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1082" name="__codelineno-0-1082"></a>                <span class="sa">f</span><span class="s2">&quot;Together with a numeric dtype (</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span><span class="si">}</span><span class="s2">),&quot;</span>
<a id="__codelineno-0-1083" name="__codelineno-0-1083"></a>                <span class="sa">f</span><span class="s2">&quot; expected to receive `solution_length` as an integer.&quot;</span>
<a id="__codelineno-0-1084" name="__codelineno-0-1084"></a>                <span class="sa">f</span><span class="s2">&quot; However, `solution_length` is None.&quot;</span>
<a id="__codelineno-0-1085" name="__codelineno-0-1085"></a>            <span class="p">)</span>
<a id="__codelineno-0-1086" name="__codelineno-0-1086"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1087" name="__codelineno-0-1087"></a>            <span class="c1"># With a numeric dtype, if a solution length is provided, we make sure that it is integer.</span>
<a id="__codelineno-0-1088" name="__codelineno-0-1088"></a>            <span class="n">solution_length</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">solution_length</span><span class="p">)</span>
<a id="__codelineno-0-1089" name="__codelineno-0-1089"></a>
<a id="__codelineno-0-1090" name="__codelineno-0-1090"></a>        <span class="c1"># Store the solution length</span>
<a id="__codelineno-0-1091" name="__codelineno-0-1091"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_solution_length</span> <span class="o">=</span> <span class="n">solution_length</span>
<a id="__codelineno-0-1092" name="__codelineno-0-1092"></a>
<a id="__codelineno-0-1093" name="__codelineno-0-1093"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">bounds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">initial_bounds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-1094" name="__codelineno-0-1094"></a>            <span class="c1"># This is the case where we have a dtype other than `object`, and either `bounds` or `initial_bounds`</span>
<a id="__codelineno-0-1095" name="__codelineno-0-1095"></a>            <span class="c1"># was provided.</span>
<a id="__codelineno-0-1096" name="__codelineno-0-1096"></a>            <span class="n">initbnd_tuple_name</span> <span class="o">=</span> <span class="s2">&quot;initial_bounds&quot;</span>
<a id="__codelineno-0-1097" name="__codelineno-0-1097"></a>            <span class="n">bnd_tuple_name</span> <span class="o">=</span> <span class="s2">&quot;bounds&quot;</span>
<a id="__codelineno-0-1098" name="__codelineno-0-1098"></a>
<a id="__codelineno-0-1099" name="__codelineno-0-1099"></a>            <span class="k">if</span> <span class="p">(</span><span class="n">bounds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">initial_bounds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-1100" name="__codelineno-0-1100"></a>                <span class="c1"># With a numeric dtype, if strict bounds are given but initial bounds are not given, then we assume</span>
<a id="__codelineno-0-1101" name="__codelineno-0-1101"></a>                <span class="c1"># that the strict bounds also serve as the initial bounds.</span>
<a id="__codelineno-0-1102" name="__codelineno-0-1102"></a>                <span class="c1"># Therefore, we take clones of the strict bounds and use this clones as the initial bounds.</span>
<a id="__codelineno-0-1103" name="__codelineno-0-1103"></a>                <span class="n">initial_bounds</span> <span class="o">=</span> <span class="n">clone</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>
<a id="__codelineno-0-1104" name="__codelineno-0-1104"></a>                <span class="n">initbnd_tuple_name</span> <span class="o">=</span> <span class="s2">&quot;bounds&quot;</span>
<a id="__codelineno-0-1105" name="__codelineno-0-1105"></a>
<a id="__codelineno-0-1106" name="__codelineno-0-1106"></a>            <span class="c1"># Below is an internal helper function for some common operations for the (strict) bounds</span>
<a id="__codelineno-0-1107" name="__codelineno-0-1107"></a>            <span class="c1"># and for the initial bounds.</span>
<a id="__codelineno-0-1108" name="__codelineno-0-1108"></a>            <span class="k">def</span><span class="w"> </span><span class="nf">process_bounds</span><span class="p">(</span><span class="n">bounds_tuple</span><span class="p">:</span> <span class="n">BoundsPairLike</span><span class="p">,</span> <span class="n">tuple_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BoundsPair</span><span class="p">:</span>
<a id="__codelineno-0-1109" name="__codelineno-0-1109"></a>                <span class="c1"># This function receives the bounds_tuple (a tuple containing lower and upper bounds),</span>
<a id="__codelineno-0-1110" name="__codelineno-0-1110"></a>                <span class="c1"># and the string name of the bounds argument (&quot;bounds&quot; or &quot;initial_bounds&quot;).</span>
<a id="__codelineno-0-1111" name="__codelineno-0-1111"></a>                <span class="c1"># What is returned is the bounds expressed as PyTorch tensors in the correct dtype and device.</span>
<a id="__codelineno-0-1112" name="__codelineno-0-1112"></a>
<a id="__codelineno-0-1113" name="__codelineno-0-1113"></a>                <span class="k">nonlocal</span> <span class="n">solution_length</span>
<a id="__codelineno-0-1114" name="__codelineno-0-1114"></a>
<a id="__codelineno-0-1115" name="__codelineno-0-1115"></a>                <span class="c1"># Extract the lower and upper bounds from the received bounds tuple.</span>
<a id="__codelineno-0-1116" name="__codelineno-0-1116"></a>                <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span> <span class="o">=</span> <span class="n">bounds_tuple</span>
<a id="__codelineno-0-1117" name="__codelineno-0-1117"></a>
<a id="__codelineno-0-1118" name="__codelineno-0-1118"></a>                <span class="c1"># Make sure that the lower and upper bounds are expressed as tensors of correct dtype and device.</span>
<a id="__codelineno-0-1119" name="__codelineno-0-1119"></a>                <span class="n">lb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_tensor</span><span class="p">(</span><span class="n">lb</span><span class="p">)</span>
<a id="__codelineno-0-1120" name="__codelineno-0-1120"></a>                <span class="n">ub</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_tensor</span><span class="p">(</span><span class="n">ub</span><span class="p">)</span>
<a id="__codelineno-0-1121" name="__codelineno-0-1121"></a>
<a id="__codelineno-0-1122" name="__codelineno-0-1122"></a>                <span class="k">for</span> <span class="n">bound_array</span> <span class="ow">in</span> <span class="p">(</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">):</span>  <span class="c1"># For each boundary tensor (lb and ub)</span>
<a id="__codelineno-0-1123" name="__codelineno-0-1123"></a>                    <span class="k">if</span> <span class="n">bound_array</span><span class="o">.</span><span class="n">ndim</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
<a id="__codelineno-0-1124" name="__codelineno-0-1124"></a>                        <span class="c1"># If the boundary tensor is not as scalar and is not a 1-dimensional vector, then raise an</span>
<a id="__codelineno-0-1125" name="__codelineno-0-1125"></a>                        <span class="c1"># error.</span>
<a id="__codelineno-0-1126" name="__codelineno-0-1126"></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1127" name="__codelineno-0-1127"></a>                            <span class="sa">f</span><span class="s2">&quot;Lower and upper bounds are expected as scalars or as 1-dimensional vectors.&quot;</span>
<a id="__codelineno-0-1128" name="__codelineno-0-1128"></a>                            <span class="sa">f</span><span class="s2">&quot; However, these given boundaries have incompatible shape:&quot;</span>
<a id="__codelineno-0-1129" name="__codelineno-0-1129"></a>                            <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">bound_array</span><span class="si">}</span><span class="s2"> (of shape </span><span class="si">{</span><span class="n">bound_array</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">).&quot;</span>
<a id="__codelineno-0-1130" name="__codelineno-0-1130"></a>                        <span class="p">)</span>
<a id="__codelineno-0-1131" name="__codelineno-0-1131"></a>                    <span class="k">if</span> <span class="n">bound_array</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-1132" name="__codelineno-0-1132"></a>                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bound_array</span><span class="p">)</span> <span class="o">!=</span> <span class="n">solution_length</span><span class="p">:</span>
<a id="__codelineno-0-1133" name="__codelineno-0-1133"></a>                            <span class="c1"># In the case where the boundary tensor is a 1-dimensional vector, if this vector&#39;s length</span>
<a id="__codelineno-0-1134" name="__codelineno-0-1134"></a>                            <span class="c1"># is not equal to the solution length, then we raise an error.</span>
<a id="__codelineno-0-1135" name="__codelineno-0-1135"></a>                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1136" name="__codelineno-0-1136"></a>                                <span class="sa">f</span><span class="s2">&quot;When boundaries are expressed as 1-dimensional vectors, their length are&quot;</span>
<a id="__codelineno-0-1137" name="__codelineno-0-1137"></a>                                <span class="sa">f</span><span class="s2">&quot; expected as the solution length of the Problem object.&quot;</span>
<a id="__codelineno-0-1138" name="__codelineno-0-1138"></a>                                <span class="sa">f</span><span class="s2">&quot; However, while the problem&#39;s solution length is </span><span class="si">{</span><span class="n">solution_length</span><span class="si">}</span><span class="s2">,&quot;</span>
<a id="__codelineno-0-1139" name="__codelineno-0-1139"></a>                                <span class="sa">f</span><span class="s2">&quot; these given boundaries have incompatible length:&quot;</span>
<a id="__codelineno-0-1140" name="__codelineno-0-1140"></a>                                <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">bound_array</span><span class="si">}</span><span class="s2"> (of length </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">bound_array</span><span class="p">)</span><span class="si">}</span><span class="s2">).&quot;</span>
<a id="__codelineno-0-1141" name="__codelineno-0-1141"></a>                            <span class="p">)</span>
<a id="__codelineno-0-1142" name="__codelineno-0-1142"></a>
<a id="__codelineno-0-1143" name="__codelineno-0-1143"></a>                <span class="c1"># Return the processed forms of the lower and upper boundary tensors.</span>
<a id="__codelineno-0-1144" name="__codelineno-0-1144"></a>                <span class="k">return</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span>
<a id="__codelineno-0-1145" name="__codelineno-0-1145"></a>
<a id="__codelineno-0-1146" name="__codelineno-0-1146"></a>            <span class="c1"># Process the initial bounds with the help of the internal function `process_bounds(...)`</span>
<a id="__codelineno-0-1147" name="__codelineno-0-1147"></a>            <span class="n">init_lb</span><span class="p">,</span> <span class="n">init_ub</span> <span class="o">=</span> <span class="n">process_bounds</span><span class="p">(</span><span class="n">initial_bounds</span><span class="p">,</span> <span class="n">initbnd_tuple_name</span><span class="p">)</span>
<a id="__codelineno-0-1148" name="__codelineno-0-1148"></a>
<a id="__codelineno-0-1149" name="__codelineno-0-1149"></a>            <span class="c1"># Store the processed initial bounds</span>
<a id="__codelineno-0-1150" name="__codelineno-0-1150"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_initial_lower_bounds</span> <span class="o">=</span> <span class="n">init_lb</span>
<a id="__codelineno-0-1151" name="__codelineno-0-1151"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_initial_upper_bounds</span> <span class="o">=</span> <span class="n">init_ub</span>
<a id="__codelineno-0-1152" name="__codelineno-0-1152"></a>
<a id="__codelineno-0-1153" name="__codelineno-0-1153"></a>            <span class="k">if</span> <span class="n">bounds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1154" name="__codelineno-0-1154"></a>                <span class="c1"># If there are strict bounds, then process those bounds with the help of `process_bounds(...)`.</span>
<a id="__codelineno-0-1155" name="__codelineno-0-1155"></a>                <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span> <span class="o">=</span> <span class="n">process_bounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="n">bnd_tuple_name</span><span class="p">)</span>
<a id="__codelineno-0-1156" name="__codelineno-0-1156"></a>                <span class="c1"># Store the processed bounds</span>
<a id="__codelineno-0-1157" name="__codelineno-0-1157"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_lower_bounds</span> <span class="o">=</span> <span class="n">lb</span>
<a id="__codelineno-0-1158" name="__codelineno-0-1158"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_upper_bounds</span> <span class="o">=</span> <span class="n">ub</span>
<a id="__codelineno-0-1159" name="__codelineno-0-1159"></a>
<a id="__codelineno-0-1160" name="__codelineno-0-1160"></a>    <span class="c1"># Annotate the variable that will store the objective sense(s) of the problem</span>
<a id="__codelineno-0-1161" name="__codelineno-0-1161"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_objective_sense</span><span class="p">:</span> <span class="n">ObjectiveSense</span>
<a id="__codelineno-0-1162" name="__codelineno-0-1162"></a>
<a id="__codelineno-0-1163" name="__codelineno-0-1163"></a>    <span class="c1"># Below is an internal function which makes sure that a provided objective sense has a valid value</span>
<a id="__codelineno-0-1164" name="__codelineno-0-1164"></a>    <span class="c1"># (where valid values are &quot;min&quot; or &quot;max&quot;)</span>
<a id="__codelineno-0-1165" name="__codelineno-0-1165"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">validate_sense</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-1166" name="__codelineno-0-1166"></a>        <span class="k">if</span> <span class="n">s</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">):</span>
<a id="__codelineno-0-1167" name="__codelineno-0-1167"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1168" name="__codelineno-0-1168"></a>                <span class="sa">f</span><span class="s2">&quot;Invalid objective sense: </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1169" name="__codelineno-0-1169"></a>                <span class="s2">&quot; Instead, please provide the objective sense as &#39;min&#39; or &#39;max&#39;.&quot;</span>
<a id="__codelineno-0-1170" name="__codelineno-0-1170"></a>            <span class="p">)</span>
<a id="__codelineno-0-1171" name="__codelineno-0-1171"></a>
<a id="__codelineno-0-1172" name="__codelineno-0-1172"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_sequence</span><span class="p">(</span><span class="n">objective_sense</span><span class="p">):</span>
<a id="__codelineno-0-1173" name="__codelineno-0-1173"></a>        <span class="c1"># If the provided objective sense is not a sequence, then convert it to a single-element list</span>
<a id="__codelineno-0-1174" name="__codelineno-0-1174"></a>        <span class="n">senses</span> <span class="o">=</span> <span class="p">[</span><span class="n">objective_sense</span><span class="p">]</span>
<a id="__codelineno-0-1175" name="__codelineno-0-1175"></a>        <span class="n">num_senses</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-1176" name="__codelineno-0-1176"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1177" name="__codelineno-0-1177"></a>        <span class="c1"># If the provided objective sense is a sequence, then take a list copy of it</span>
<a id="__codelineno-0-1178" name="__codelineno-0-1178"></a>        <span class="n">senses</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">objective_sense</span><span class="p">)</span>
<a id="__codelineno-0-1179" name="__codelineno-0-1179"></a>        <span class="n">num_senses</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">objective_sense</span><span class="p">)</span>
<a id="__codelineno-0-1180" name="__codelineno-0-1180"></a>
<a id="__codelineno-0-1181" name="__codelineno-0-1181"></a>        <span class="c1"># Ensure that each provided objective sense is valid</span>
<a id="__codelineno-0-1182" name="__codelineno-0-1182"></a>        <span class="k">for</span> <span class="n">sense</span> <span class="ow">in</span> <span class="n">senses</span><span class="p">:</span>
<a id="__codelineno-0-1183" name="__codelineno-0-1183"></a>            <span class="n">validate_sense</span><span class="p">(</span><span class="n">sense</span><span class="p">)</span>
<a id="__codelineno-0-1184" name="__codelineno-0-1184"></a>
<a id="__codelineno-0-1185" name="__codelineno-0-1185"></a>        <span class="k">if</span> <span class="n">num_senses</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-1186" name="__codelineno-0-1186"></a>            <span class="c1"># If the given sequence of objective senses is empty, then we raise an error.</span>
<a id="__codelineno-0-1187" name="__codelineno-0-1187"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1188" name="__codelineno-0-1188"></a>                <span class="s2">&quot;Encountered an empty sequence via `objective_sense`.&quot;</span>
<a id="__codelineno-0-1189" name="__codelineno-0-1189"></a>                <span class="s2">&quot; For a single-objective problem, please set `objective_sense` as &#39;min&#39; or &#39;max&#39;.&quot;</span>
<a id="__codelineno-0-1190" name="__codelineno-0-1190"></a>                <span class="s2">&quot; For a multi-objective problem, please set `objective_sense` as a sequence,&quot;</span>
<a id="__codelineno-0-1191" name="__codelineno-0-1191"></a>                <span class="s2">&quot; each element being &#39;min&#39; or &#39;max&#39;.&quot;</span>
<a id="__codelineno-0-1192" name="__codelineno-0-1192"></a>            <span class="p">)</span>
<a id="__codelineno-0-1193" name="__codelineno-0-1193"></a>
<a id="__codelineno-0-1194" name="__codelineno-0-1194"></a>    <span class="c1"># Store the objective senses</span>
<a id="__codelineno-0-1195" name="__codelineno-0-1195"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_senses</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">senses</span>
<a id="__codelineno-0-1196" name="__codelineno-0-1196"></a>
<a id="__codelineno-0-1197" name="__codelineno-0-1197"></a>    <span class="c1"># Store the provided objective function (which can be None)</span>
<a id="__codelineno-0-1198" name="__codelineno-0-1198"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_objective_func</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="n">objective_func</span>
<a id="__codelineno-0-1199" name="__codelineno-0-1199"></a>
<a id="__codelineno-0-1200" name="__codelineno-0-1200"></a>    <span class="c1"># Declare the instance variable that will store whether or not the external fitness function is</span>
<a id="__codelineno-0-1201" name="__codelineno-0-1201"></a>    <span class="c1"># vectorized, if such an external fitness function is given.</span>
<a id="__codelineno-0-1202" name="__codelineno-0-1202"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_vectorized</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span>
<a id="__codelineno-0-1203" name="__codelineno-0-1203"></a>
<a id="__codelineno-0-1204" name="__codelineno-0-1204"></a>    <span class="c1"># Store the information which indicates whether or not the given objective function is vectorized</span>
<a id="__codelineno-0-1205" name="__codelineno-0-1205"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_func</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1206" name="__codelineno-0-1206"></a>        <span class="c1"># This is the case where an external fitness function is not given.</span>
<a id="__codelineno-0-1207" name="__codelineno-0-1207"></a>        <span class="c1"># In this case, we expect the keyword argument `vectorized` to be left as None.</span>
<a id="__codelineno-0-1208" name="__codelineno-0-1208"></a>
<a id="__codelineno-0-1209" name="__codelineno-0-1209"></a>        <span class="k">if</span> <span class="n">vectorized</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1210" name="__codelineno-0-1210"></a>            <span class="c1"># If the keyword argument `vectorized` is something other than None, then we raise an error</span>
<a id="__codelineno-0-1211" name="__codelineno-0-1211"></a>            <span class="c1"># to let the user know.</span>
<a id="__codelineno-0-1212" name="__codelineno-0-1212"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1213" name="__codelineno-0-1213"></a>                <span class="sa">f</span><span class="s2">&quot;This problem object received no external fitness function.&quot;</span>
<a id="__codelineno-0-1214" name="__codelineno-0-1214"></a>                <span class="sa">f</span><span class="s2">&quot; When not using an external fitness function, the keyword argument `vectorized`&quot;</span>
<a id="__codelineno-0-1215" name="__codelineno-0-1215"></a>                <span class="sa">f</span><span class="s2">&quot; is expected to be left as None.&quot;</span>
<a id="__codelineno-0-1216" name="__codelineno-0-1216"></a>                <span class="sa">f</span><span class="s2">&quot; However, the value of the keyword argument `vectorized` is </span><span class="si">{</span><span class="n">vectorized</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1217" name="__codelineno-0-1217"></a>            <span class="p">)</span>
<a id="__codelineno-0-1218" name="__codelineno-0-1218"></a>
<a id="__codelineno-0-1219" name="__codelineno-0-1219"></a>        <span class="c1"># At this point, we know that we do not have an external fitness function.</span>
<a id="__codelineno-0-1220" name="__codelineno-0-1220"></a>        <span class="c1"># The variable which is supposed to tell us whether or not the external fitness function is vectorized</span>
<a id="__codelineno-0-1221" name="__codelineno-0-1221"></a>        <span class="c1"># is therefore irrelevant. We just set it as None.</span>
<a id="__codelineno-0-1222" name="__codelineno-0-1222"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_vectorized</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1223" name="__codelineno-0-1223"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1224" name="__codelineno-0-1224"></a>        <span class="c1"># This is the case where an external fitness function is given.</span>
<a id="__codelineno-0-1225" name="__codelineno-0-1225"></a>
<a id="__codelineno-0-1226" name="__codelineno-0-1226"></a>        <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-1227" name="__codelineno-0-1227"></a>            <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_objective_func</span><span class="p">,</span> <span class="s2">&quot;__evotorch_vectorized__&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1228" name="__codelineno-0-1228"></a>            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective_func</span><span class="o">.</span><span class="n">__evotorch_vectorized__</span>
<a id="__codelineno-0-1229" name="__codelineno-0-1229"></a>        <span class="p">):</span>
<a id="__codelineno-0-1230" name="__codelineno-0-1230"></a>            <span class="c1"># If the external fitness function has an attribute `__evotorch_vectorized__`, and the value of this</span>
<a id="__codelineno-0-1231" name="__codelineno-0-1231"></a>            <span class="c1"># attribute evaluates to True, then this is an indication that the fitness function was decorated</span>
<a id="__codelineno-0-1232" name="__codelineno-0-1232"></a>            <span class="c1"># with `@vectorized`.</span>
<a id="__codelineno-0-1233" name="__codelineno-0-1233"></a>
<a id="__codelineno-0-1234" name="__codelineno-0-1234"></a>            <span class="k">if</span> <span class="n">vectorized</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1235" name="__codelineno-0-1235"></a>                <span class="c1"># At this point, we know (or at least have the assumption) that the fitness function was decorated</span>
<a id="__codelineno-0-1236" name="__codelineno-0-1236"></a>                <span class="c1"># with `@vectorized`. Any boolean value given via the keyword argument `vectorized` would therefore</span>
<a id="__codelineno-0-1237" name="__codelineno-0-1237"></a>                <span class="c1"># be either redundant or conflicting.</span>
<a id="__codelineno-0-1238" name="__codelineno-0-1238"></a>                <span class="c1"># Therefore, in this case, if the keyword argument `vectorized` is anything other than None, we</span>
<a id="__codelineno-0-1239" name="__codelineno-0-1239"></a>                <span class="c1"># raise an error to inform the user.</span>
<a id="__codelineno-0-1240" name="__codelineno-0-1240"></a>
<a id="__codelineno-0-1241" name="__codelineno-0-1241"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1242" name="__codelineno-0-1242"></a>                    <span class="sa">f</span><span class="s2">&quot;Received a fitness function that was decorated via @vectorized.&quot;</span>
<a id="__codelineno-0-1243" name="__codelineno-0-1243"></a>                    <span class="sa">f</span><span class="s2">&quot; When using such a fitness function, the keyword argument `vectorized`&quot;</span>
<a id="__codelineno-0-1244" name="__codelineno-0-1244"></a>                    <span class="sa">f</span><span class="s2">&quot; is expected to be left as None.&quot;</span>
<a id="__codelineno-0-1245" name="__codelineno-0-1245"></a>                    <span class="sa">f</span><span class="s2">&quot; However, the value of the keyword argument `vectorized` is </span><span class="si">{</span><span class="n">vectorized</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1246" name="__codelineno-0-1246"></a>                <span class="p">)</span>
<a id="__codelineno-0-1247" name="__codelineno-0-1247"></a>
<a id="__codelineno-0-1248" name="__codelineno-0-1248"></a>            <span class="c1"># Since we know that our fitness function declares itself as vectorized, we set the instance variable</span>
<a id="__codelineno-0-1249" name="__codelineno-0-1249"></a>            <span class="c1"># _vectorized as True.</span>
<a id="__codelineno-0-1250" name="__codelineno-0-1250"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_vectorized</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-1251" name="__codelineno-0-1251"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1252" name="__codelineno-0-1252"></a>            <span class="c1"># This is the case in which the fitness function does not appear to be decorated via `@vectorized`.</span>
<a id="__codelineno-0-1253" name="__codelineno-0-1253"></a>            <span class="c1"># In this case, if the keyword argument `vectorized` has a value that is equivalent to True,</span>
<a id="__codelineno-0-1254" name="__codelineno-0-1254"></a>            <span class="c1"># then the value of `_vectorized` becomes True. On the other hand, if the keyword argument `vectorized`</span>
<a id="__codelineno-0-1255" name="__codelineno-0-1255"></a>            <span class="c1"># was left as None or if it has a value that is equivalent to False, `_vectorized` becomes False.</span>
<a id="__codelineno-0-1256" name="__codelineno-0-1256"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_vectorized</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">vectorized</span><span class="p">)</span>
<a id="__codelineno-0-1257" name="__codelineno-0-1257"></a>
<a id="__codelineno-0-1258" name="__codelineno-0-1258"></a>    <span class="c1"># If the evaluation data length is explicitly stated, then convert it to an integer and store it.</span>
<a id="__codelineno-0-1259" name="__codelineno-0-1259"></a>    <span class="c1"># Otherwise, store the evaluation data length as 0.</span>
<a id="__codelineno-0-1260" name="__codelineno-0-1260"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_eval_data_length</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">eval_data_length</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">eval_data_length</span><span class="p">)</span>
<a id="__codelineno-0-1261" name="__codelineno-0-1261"></a>
<a id="__codelineno-0-1262" name="__codelineno-0-1262"></a>    <span class="c1"># Initialize the actor index.</span>
<a id="__codelineno-0-1263" name="__codelineno-0-1263"></a>    <span class="c1"># If the problem is configured to be parallelized and the parallelization is triggered, then each remote</span>
<a id="__codelineno-0-1264" name="__codelineno-0-1264"></a>    <span class="c1"># copy will have a different integer value for `_actor_index`.</span>
<a id="__codelineno-0-1265" name="__codelineno-0-1265"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_actor_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1266" name="__codelineno-0-1266"></a>
<a id="__codelineno-0-1267" name="__codelineno-0-1267"></a>    <span class="c1"># Initialize the variable that might store the list of actors as None.</span>
<a id="__codelineno-0-1268" name="__codelineno-0-1268"></a>    <span class="c1"># If the problem is configured to be parallelized and the parallelization is triggered, then this variable</span>
<a id="__codelineno-0-1269" name="__codelineno-0-1269"></a>    <span class="c1"># will store references to the remote actors (each remote actor storing its own copy of this Problem</span>
<a id="__codelineno-0-1270" name="__codelineno-0-1270"></a>    <span class="c1"># instance).</span>
<a id="__codelineno-0-1271" name="__codelineno-0-1271"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_actors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1272" name="__codelineno-0-1272"></a>
<a id="__codelineno-0-1273" name="__codelineno-0-1273"></a>    <span class="c1"># Initialize the variable that might store the ray ActorPool.</span>
<a id="__codelineno-0-1274" name="__codelineno-0-1274"></a>    <span class="c1"># If the problem is configured to be parallelized and the parallelization is triggered, then this variable</span>
<a id="__codelineno-0-1275" name="__codelineno-0-1275"></a>    <span class="c1"># will store the ray ActorPool that is generated out of the remote actors.</span>
<a id="__codelineno-0-1276" name="__codelineno-0-1276"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_actor_pool</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ActorPool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1277" name="__codelineno-0-1277"></a>
<a id="__codelineno-0-1278" name="__codelineno-0-1278"></a>    <span class="c1"># Store the ray actor configuration dictionary provided by the user (if any).</span>
<a id="__codelineno-0-1279" name="__codelineno-0-1279"></a>    <span class="c1"># When (or if) the parallelization is triggered, each actor will be created with this given configuration.</span>
<a id="__codelineno-0-1280" name="__codelineno-0-1280"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_actor_config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">actor_config</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">deepcopy</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">actor_config</span><span class="p">))</span>
<a id="__codelineno-0-1281" name="__codelineno-0-1281"></a>
<a id="__codelineno-0-1282" name="__codelineno-0-1282"></a>    <span class="c1"># If given, store the sub-batch size or number of sub-batches.</span>
<a id="__codelineno-0-1283" name="__codelineno-0-1283"></a>    <span class="c1"># When the problem is parallelized, a sub-batch size determines the maximum size for a SolutionBatch</span>
<a id="__codelineno-0-1284" name="__codelineno-0-1284"></a>    <span class="c1"># that will be sent to a remote actor for parallel solution evaluation.</span>
<a id="__codelineno-0-1285" name="__codelineno-0-1285"></a>    <span class="c1"># Alternatively, num_subbatches determines into how many pieces will a SolutionBatch be split</span>
<a id="__codelineno-0-1286" name="__codelineno-0-1286"></a>    <span class="c1"># for parallelization.</span>
<a id="__codelineno-0-1287" name="__codelineno-0-1287"></a>    <span class="c1"># If both are None, then the main SolutionBatch will be split among the actors.</span>
<a id="__codelineno-0-1288" name="__codelineno-0-1288"></a>    <span class="k">if</span> <span class="p">(</span><span class="n">num_subbatches</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">subbatch_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-1289" name="__codelineno-0-1289"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1290" name="__codelineno-0-1290"></a>            <span class="sa">f</span><span class="s2">&quot;Encountered both `num_subbatches` and `subbatch_size` as values other than None.&quot;</span>
<a id="__codelineno-0-1291" name="__codelineno-0-1291"></a>            <span class="sa">f</span><span class="s2">&quot; num_subbatches=</span><span class="si">{</span><span class="n">num_subbatches</span><span class="si">}</span><span class="s2">, subbatch_size=</span><span class="si">{</span><span class="n">subbatch_size</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1292" name="__codelineno-0-1292"></a>            <span class="sa">f</span><span class="s2">&quot; Having both of them as values other than None cannot be accepted.&quot;</span>
<a id="__codelineno-0-1293" name="__codelineno-0-1293"></a>        <span class="p">)</span>
<a id="__codelineno-0-1294" name="__codelineno-0-1294"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_num_subbatches</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">num_subbatches</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_subbatches</span><span class="p">)</span>
<a id="__codelineno-0-1295" name="__codelineno-0-1295"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_subbatch_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">subbatch_size</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">subbatch_size</span><span class="p">)</span>
<a id="__codelineno-0-1296" name="__codelineno-0-1296"></a>
<a id="__codelineno-0-1297" name="__codelineno-0-1297"></a>    <span class="c1"># Initialize the additional states to be loaded by the remote actor as None.</span>
<a id="__codelineno-0-1298" name="__codelineno-0-1298"></a>    <span class="c1"># If there are such additional states for remote actors, the inheriting class can fill this as a list</span>
<a id="__codelineno-0-1299" name="__codelineno-0-1299"></a>    <span class="c1"># of dictionaries.</span>
<a id="__codelineno-0-1300" name="__codelineno-0-1300"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_remote_states</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">dict</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1301" name="__codelineno-0-1301"></a>
<a id="__codelineno-0-1302" name="__codelineno-0-1302"></a>    <span class="c1"># Initialize a temporary internal variable which stores the resources available in the ray cluster.</span>
<a id="__codelineno-0-1303" name="__codelineno-0-1303"></a>    <span class="c1"># Most probably, we are interested in the resources &quot;CPU&quot; and &quot;GPU&quot;.</span>
<a id="__codelineno-0-1304" name="__codelineno-0-1304"></a>    <span class="n">ray_resources</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1305" name="__codelineno-0-1305"></a>
<a id="__codelineno-0-1306" name="__codelineno-0-1306"></a>    <span class="c1"># The following is an internal helper function which returns the amount of availability for a given</span>
<a id="__codelineno-0-1307" name="__codelineno-0-1307"></a>    <span class="c1"># resource in the ray cluster.</span>
<a id="__codelineno-0-1308" name="__codelineno-0-1308"></a>    <span class="c1"># If the requested resource is not available at all, None will be returned.</span>
<a id="__codelineno-0-1309" name="__codelineno-0-1309"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_ray_resource</span><span class="p">(</span><span class="n">resource_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<a id="__codelineno-0-1310" name="__codelineno-0-1310"></a>        <span class="c1"># Ensure that the ray cluster is initialized</span>
<a id="__codelineno-0-1311" name="__codelineno-0-1311"></a>        <span class="n">ensure_ray</span><span class="p">()</span>
<a id="__codelineno-0-1312" name="__codelineno-0-1312"></a>        <span class="k">nonlocal</span> <span class="n">ray_resources</span>
<a id="__codelineno-0-1313" name="__codelineno-0-1313"></a>        <span class="k">if</span> <span class="n">ray_resources</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1314" name="__codelineno-0-1314"></a>            <span class="c1"># If the ray resource information was not fetched, then fetch them and store them.</span>
<a id="__codelineno-0-1315" name="__codelineno-0-1315"></a>            <span class="n">ray_resources</span> <span class="o">=</span> <span class="n">ray</span><span class="o">.</span><span class="n">available_resources</span><span class="p">()</span>
<a id="__codelineno-0-1316" name="__codelineno-0-1316"></a>        <span class="c1"># Return the information regarding the requested resource from the fetched resource information.</span>
<a id="__codelineno-0-1317" name="__codelineno-0-1317"></a>        <span class="c1"># If it turns out that the requested resource is not available at all, the result will be None.</span>
<a id="__codelineno-0-1318" name="__codelineno-0-1318"></a>        <span class="k">return</span> <span class="n">ray_resources</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">resource_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-1319" name="__codelineno-0-1319"></a>
<a id="__codelineno-0-1320" name="__codelineno-0-1320"></a>    <span class="c1"># Annotate the variable that will store the number of actors (to be created when the parallelization</span>
<a id="__codelineno-0-1321" name="__codelineno-0-1321"></a>    <span class="c1"># is triggered).</span>
<a id="__codelineno-0-1322" name="__codelineno-0-1322"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span><span class="p">:</span> <span class="nb">int</span>
<a id="__codelineno-0-1323" name="__codelineno-0-1323"></a>
<a id="__codelineno-0-1324" name="__codelineno-0-1324"></a>    <span class="k">if</span> <span class="n">num_actors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1325" name="__codelineno-0-1325"></a>        <span class="c1"># If the argument `num_actors` is left as None, then we set `_num_actors` as 0, which means that</span>
<a id="__codelineno-0-1326" name="__codelineno-0-1326"></a>        <span class="c1"># there will be no parallelization.</span>
<a id="__codelineno-0-1327" name="__codelineno-0-1327"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-1328" name="__codelineno-0-1328"></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">num_actors</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-1329" name="__codelineno-0-1329"></a>        <span class="c1"># This is the case where `num_actors` has a string value</span>
<a id="__codelineno-0-1330" name="__codelineno-0-1330"></a>        <span class="k">if</span> <span class="n">num_actors</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;max&quot;</span><span class="p">,</span> <span class="s2">&quot;num_cpus&quot;</span><span class="p">):</span>
<a id="__codelineno-0-1331" name="__codelineno-0-1331"></a>            <span class="c1"># If the `num_actors` argument was given as &quot;max&quot; or as &quot;num_cpus&quot;, then we first read how many CPUs</span>
<a id="__codelineno-0-1332" name="__codelineno-0-1332"></a>            <span class="c1"># are available in the ray cluster, then convert it to integer (via computing its ceil value), and</span>
<a id="__codelineno-0-1333" name="__codelineno-0-1333"></a>            <span class="c1"># finally set `_num_actors` as this integer.</span>
<a id="__codelineno-0-1334" name="__codelineno-0-1334"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">get_ray_resource</span><span class="p">(</span><span class="s2">&quot;CPU&quot;</span><span class="p">))</span>
<a id="__codelineno-0-1335" name="__codelineno-0-1335"></a>        <span class="k">elif</span> <span class="n">num_actors</span> <span class="o">==</span> <span class="s2">&quot;num_gpus&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1336" name="__codelineno-0-1336"></a>            <span class="c1"># If the `num_actors` argument was given as &quot;num_gpus&quot;, then we first read how many GPUs are</span>
<a id="__codelineno-0-1337" name="__codelineno-0-1337"></a>            <span class="c1"># available in the ray cluster.</span>
<a id="__codelineno-0-1338" name="__codelineno-0-1338"></a>            <span class="n">num_gpus</span> <span class="o">=</span> <span class="n">get_ray_resource</span><span class="p">(</span><span class="s2">&quot;GPU&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1339" name="__codelineno-0-1339"></a>            <span class="k">if</span> <span class="n">num_gpus</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1340" name="__codelineno-0-1340"></a>                <span class="c1"># If there are no GPUs at all, then we raise an error</span>
<a id="__codelineno-0-1341" name="__codelineno-0-1341"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1342" name="__codelineno-0-1342"></a>                    <span class="s2">&quot;The argument `num_actors` was encountered as &#39;num_gpus&#39;.&quot;</span>
<a id="__codelineno-0-1343" name="__codelineno-0-1343"></a>                    <span class="s2">&quot; However, there does not seem to be any GPU available.&quot;</span>
<a id="__codelineno-0-1344" name="__codelineno-0-1344"></a>                <span class="p">)</span>
<a id="__codelineno-0-1345" name="__codelineno-0-1345"></a>            <span class="k">if</span> <span class="n">num_gpus</span> <span class="o">&lt;</span> <span class="mf">1e-4</span><span class="p">:</span>
<a id="__codelineno-0-1346" name="__codelineno-0-1346"></a>                <span class="c1"># If the number of available GPUs are 0 or close to 0, then we raise an error</span>
<a id="__codelineno-0-1347" name="__codelineno-0-1347"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1348" name="__codelineno-0-1348"></a>                    <span class="sa">f</span><span class="s2">&quot;The argument `num_actors` was encountered as &#39;num_gpus&#39;.&quot;</span>
<a id="__codelineno-0-1349" name="__codelineno-0-1349"></a>                    <span class="sa">f</span><span class="s2">&quot; However, the number of available GPUs are either 0 or close to 0 (= </span><span class="si">{</span><span class="n">num_gpus</span><span class="si">}</span><span class="s2">).&quot;</span>
<a id="__codelineno-0-1350" name="__codelineno-0-1350"></a>                <span class="p">)</span>
<a id="__codelineno-0-1351" name="__codelineno-0-1351"></a>            <span class="k">if</span> <span class="p">(</span><span class="n">actor_config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;num_gpus&quot;</span> <span class="ow">in</span> <span class="n">actor_config</span><span class="p">):</span>
<a id="__codelineno-0-1352" name="__codelineno-0-1352"></a>                <span class="c1"># With `num_actors` argument given as &quot;num_gpus&quot;, we will also allocate each GPU to an actor.</span>
<a id="__codelineno-0-1353" name="__codelineno-0-1353"></a>                <span class="c1"># If `actor_config` contains an item with key &quot;num_gpus&quot;, then that configuration item would</span>
<a id="__codelineno-0-1354" name="__codelineno-0-1354"></a>                <span class="c1"># conflict with the GPU allocation we are about to do here.</span>
<a id="__codelineno-0-1355" name="__codelineno-0-1355"></a>                <span class="c1"># So, we raise an error.</span>
<a id="__codelineno-0-1356" name="__codelineno-0-1356"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1357" name="__codelineno-0-1357"></a>                    <span class="s2">&quot;The argument `num_actors` was encountered as &#39;num_gpus&#39;.&quot;</span>
<a id="__codelineno-0-1358" name="__codelineno-0-1358"></a>                    <span class="s2">&quot; With this configuration, the number of GPUs assigned to an actor is automatically determined.&quot;</span>
<a id="__codelineno-0-1359" name="__codelineno-0-1359"></a>                    <span class="s2">&quot; However, at the same time, the `actor_config` argument was received with the key &#39;num_gpus&#39;,&quot;</span>
<a id="__codelineno-0-1360" name="__codelineno-0-1360"></a>                    <span class="s2">&quot; which causes a conflict.&quot;</span>
<a id="__codelineno-0-1361" name="__codelineno-0-1361"></a>                <span class="p">)</span>
<a id="__codelineno-0-1362" name="__codelineno-0-1362"></a>            <span class="k">if</span> <span class="n">num_gpus_per_actor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1363" name="__codelineno-0-1363"></a>                <span class="c1"># With `num_actors` argument given as &quot;num_gpus&quot;, we will also allocate each GPU to an actor.</span>
<a id="__codelineno-0-1364" name="__codelineno-0-1364"></a>                <span class="c1"># If the argument `num_gpus_per_actor` is also stated, then such a configuration item would</span>
<a id="__codelineno-0-1365" name="__codelineno-0-1365"></a>                <span class="c1"># conflict with the GPU allocation we are about to do here.</span>
<a id="__codelineno-0-1366" name="__codelineno-0-1366"></a>                <span class="c1"># So, we raise an error.</span>
<a id="__codelineno-0-1367" name="__codelineno-0-1367"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1368" name="__codelineno-0-1368"></a>                    <span class="sa">f</span><span class="s2">&quot;The argument `num_actors` was encountered as &#39;num_gpus&#39;.&quot;</span>
<a id="__codelineno-0-1369" name="__codelineno-0-1369"></a>                    <span class="sa">f</span><span class="s2">&quot; With this configuration, the number of GPUs assigned to an actor is automatically determined.&quot;</span>
<a id="__codelineno-0-1370" name="__codelineno-0-1370"></a>                    <span class="sa">f</span><span class="s2">&quot; However, at the same time, the `num_gpus_per_actor` argument was received with a value other&quot;</span>
<a id="__codelineno-0-1371" name="__codelineno-0-1371"></a>                    <span class="sa">f</span><span class="s2">&quot; than None (</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">num_gpus_per_actor</span><span class="p">)</span><span class="si">}</span><span class="s2">), which causes a conflict.&quot;</span>
<a id="__codelineno-0-1372" name="__codelineno-0-1372"></a>                <span class="p">)</span>
<a id="__codelineno-0-1373" name="__codelineno-0-1373"></a>            <span class="c1"># Set the number of actors as the ceiled integer counterpart of the number of available GPUs</span>
<a id="__codelineno-0-1374" name="__codelineno-0-1374"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">num_gpus</span><span class="p">)</span>
<a id="__codelineno-0-1375" name="__codelineno-0-1375"></a>            <span class="c1"># We assign a GPU for each actor (by overriding the value for the argument `num_gpus_per_actor`).</span>
<a id="__codelineno-0-1376" name="__codelineno-0-1376"></a>            <span class="n">num_gpus_per_actor</span> <span class="o">=</span> <span class="n">num_gpus</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span>
<a id="__codelineno-0-1377" name="__codelineno-0-1377"></a>        <span class="k">elif</span> <span class="n">num_actors</span> <span class="o">==</span> <span class="s2">&quot;num_devices&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1378" name="__codelineno-0-1378"></a>            <span class="c1"># This is the case where `num_actors` has the string value &quot;num_devices&quot;.</span>
<a id="__codelineno-0-1379" name="__codelineno-0-1379"></a>
<a id="__codelineno-0-1380" name="__codelineno-0-1380"></a>            <span class="c1"># With `num_actors` set as &quot;num_devices&quot;, if there are any GPUs, the behavior is to assign a GPU</span>
<a id="__codelineno-0-1381" name="__codelineno-0-1381"></a>            <span class="c1"># to each actor. If there are conflicting configurations regarding how many GPUs are to be assigned</span>
<a id="__codelineno-0-1382" name="__codelineno-0-1382"></a>            <span class="c1"># to each actor, then we raise an error.</span>
<a id="__codelineno-0-1383" name="__codelineno-0-1383"></a>            <span class="k">if</span> <span class="p">(</span><span class="n">actor_config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;num_gpus&quot;</span> <span class="ow">in</span> <span class="n">actor_config</span><span class="p">):</span>
<a id="__codelineno-0-1384" name="__codelineno-0-1384"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1385" name="__codelineno-0-1385"></a>                    <span class="s2">&quot;The argument `num_actors` was encountered as &#39;num_devices&#39;.&quot;</span>
<a id="__codelineno-0-1386" name="__codelineno-0-1386"></a>                    <span class="s2">&quot; With this configuration, the number of GPUs assigned to an actor is automatically determined.&quot;</span>
<a id="__codelineno-0-1387" name="__codelineno-0-1387"></a>                    <span class="s2">&quot; However, at the same time, the `actor_config` argument was received with the key &#39;num_gpus&#39;,&quot;</span>
<a id="__codelineno-0-1388" name="__codelineno-0-1388"></a>                    <span class="s2">&quot; which causes a conflict.&quot;</span>
<a id="__codelineno-0-1389" name="__codelineno-0-1389"></a>                <span class="p">)</span>
<a id="__codelineno-0-1390" name="__codelineno-0-1390"></a>            <span class="k">if</span> <span class="n">num_gpus_per_actor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1391" name="__codelineno-0-1391"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1392" name="__codelineno-0-1392"></a>                    <span class="sa">f</span><span class="s2">&quot;The argument `num_actors` was encountered as &#39;num_devices&#39;.&quot;</span>
<a id="__codelineno-0-1393" name="__codelineno-0-1393"></a>                    <span class="sa">f</span><span class="s2">&quot; With this configuration, the number of GPUs assigned to an actor is automatically determined.&quot;</span>
<a id="__codelineno-0-1394" name="__codelineno-0-1394"></a>                    <span class="sa">f</span><span class="s2">&quot; However, at the same time, the `num_gpus_per_actor` argument was received with a value other&quot;</span>
<a id="__codelineno-0-1395" name="__codelineno-0-1395"></a>                    <span class="sa">f</span><span class="s2">&quot; than None (</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">num_gpus_per_actor</span><span class="p">)</span><span class="si">}</span><span class="s2">), which causes a conflict.&quot;</span>
<a id="__codelineno-0-1396" name="__codelineno-0-1396"></a>                <span class="p">)</span>
<a id="__codelineno-0-1397" name="__codelineno-0-1397"></a>
<a id="__codelineno-0-1398" name="__codelineno-0-1398"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_device</span> <span class="o">!=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cpu&quot;</span><span class="p">):</span>
<a id="__codelineno-0-1399" name="__codelineno-0-1399"></a>                <span class="c1"># If the main device is not CPU, then the user most probably wishes to put all the</span>
<a id="__codelineno-0-1400" name="__codelineno-0-1400"></a>                <span class="c1"># computations (both evaluations and the population) on the GPU, without allocating</span>
<a id="__codelineno-0-1401" name="__codelineno-0-1401"></a>                <span class="c1"># any actor.</span>
<a id="__codelineno-0-1402" name="__codelineno-0-1402"></a>                <span class="c1"># So, we set `_num_actors` as None, and overwrite `num_gpus_per_actor` with None.</span>
<a id="__codelineno-0-1403" name="__codelineno-0-1403"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1404" name="__codelineno-0-1404"></a>                <span class="n">num_gpus_per_actor</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1405" name="__codelineno-0-1405"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1406" name="__codelineno-0-1406"></a>                <span class="c1"># If the device argument is &quot;cpu&quot; or left as None, then we assume that actor allocations</span>
<a id="__codelineno-0-1407" name="__codelineno-0-1407"></a>                <span class="c1"># might be desired.</span>
<a id="__codelineno-0-1408" name="__codelineno-0-1408"></a>
<a id="__codelineno-0-1409" name="__codelineno-0-1409"></a>                <span class="c1"># Read how many CPUs and GPUs are available in the ray cluster.</span>
<a id="__codelineno-0-1410" name="__codelineno-0-1410"></a>                <span class="n">num_cpus</span> <span class="o">=</span> <span class="n">get_ray_resource</span><span class="p">(</span><span class="s2">&quot;CPU&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1411" name="__codelineno-0-1411"></a>                <span class="n">num_gpus</span> <span class="o">=</span> <span class="n">get_ray_resource</span><span class="p">(</span><span class="s2">&quot;GPU&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1412" name="__codelineno-0-1412"></a>
<a id="__codelineno-0-1413" name="__codelineno-0-1413"></a>                <span class="c1"># If we have multiple CPUs, then we continue with the actor allocation procedures.</span>
<a id="__codelineno-0-1414" name="__codelineno-0-1414"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">num_gpus</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">num_gpus</span> <span class="o">&lt;</span> <span class="mf">1e-4</span><span class="p">):</span>
<a id="__codelineno-0-1415" name="__codelineno-0-1415"></a>                    <span class="c1"># If there are no GPUs, then we set the number of actors as the number of CPUs, and we</span>
<a id="__codelineno-0-1416" name="__codelineno-0-1416"></a>                    <span class="c1"># set the number of GPUs per actor as None (which means that there will be no GPU</span>
<a id="__codelineno-0-1417" name="__codelineno-0-1417"></a>                    <span class="c1"># assignment)</span>
<a id="__codelineno-0-1418" name="__codelineno-0-1418"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">num_cpus</span><span class="p">)</span>
<a id="__codelineno-0-1419" name="__codelineno-0-1419"></a>                    <span class="n">num_gpus_per_actor</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1420" name="__codelineno-0-1420"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1421" name="__codelineno-0-1421"></a>                    <span class="c1"># If there are GPUs available, then we compute the minimum among the number of CPUs and</span>
<a id="__codelineno-0-1422" name="__codelineno-0-1422"></a>                    <span class="c1"># GPUs, and this minimum value becomes the number of actors (so that there can be</span>
<a id="__codelineno-0-1423" name="__codelineno-0-1423"></a>                    <span class="c1"># one-to-one mapping between actors and GPUs).</span>
<a id="__codelineno-0-1424" name="__codelineno-0-1424"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">num_cpus</span><span class="p">,</span> <span class="n">num_gpus</span><span class="p">))</span>
<a id="__codelineno-0-1425" name="__codelineno-0-1425"></a>
<a id="__codelineno-0-1426" name="__codelineno-0-1426"></a>                    <span class="c1"># We assign a GPU for each actor (by overriding the value for the argument</span>
<a id="__codelineno-0-1427" name="__codelineno-0-1427"></a>                    <span class="c1"># `num_gpus_per_actor`).</span>
<a id="__codelineno-0-1428" name="__codelineno-0-1428"></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">&lt;=</span> <span class="n">num_gpus</span><span class="p">:</span>
<a id="__codelineno-0-1429" name="__codelineno-0-1429"></a>                        <span class="n">num_gpus_per_actor</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-1430" name="__codelineno-0-1430"></a>                    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1431" name="__codelineno-0-1431"></a>                        <span class="n">num_gpus_per_actor</span> <span class="o">=</span> <span class="n">num_gpus</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span>
<a id="__codelineno-0-1432" name="__codelineno-0-1432"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1433" name="__codelineno-0-1433"></a>            <span class="c1"># This is the case where `num_actors` is given as an unexpected string. We raise an error here.</span>
<a id="__codelineno-0-1434" name="__codelineno-0-1434"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1435" name="__codelineno-0-1435"></a>                <span class="sa">f</span><span class="s2">&quot;Invalid string value for `num_actors`: </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">num_actors</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1436" name="__codelineno-0-1436"></a>                <span class="sa">f</span><span class="s2">&quot; The acceptable string values for `num_actors` are &#39;max&#39;, &#39;num_cpus&#39;, &#39;num_gpus&#39;, &#39;num_devices&#39;.&quot;</span>
<a id="__codelineno-0-1437" name="__codelineno-0-1437"></a>            <span class="p">)</span>
<a id="__codelineno-0-1438" name="__codelineno-0-1438"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1439" name="__codelineno-0-1439"></a>        <span class="c1"># This is the case where `num_actors` has a value which is not a string.</span>
<a id="__codelineno-0-1440" name="__codelineno-0-1440"></a>        <span class="c1"># In this case, we make sure that the given value is an integer, and then use this integer as our</span>
<a id="__codelineno-0-1441" name="__codelineno-0-1441"></a>        <span class="c1"># number of actors.</span>
<a id="__codelineno-0-1442" name="__codelineno-0-1442"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_actors</span><span class="p">)</span>
<a id="__codelineno-0-1443" name="__codelineno-0-1443"></a>
<a id="__codelineno-0-1444" name="__codelineno-0-1444"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-1445" name="__codelineno-0-1445"></a>        <span class="n">_evolog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
<a id="__codelineno-0-1446" name="__codelineno-0-1446"></a>            <span class="n">message_from</span><span class="p">(</span>
<a id="__codelineno-0-1447" name="__codelineno-0-1447"></a>                <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-1448" name="__codelineno-0-1448"></a>                <span class="p">(</span>
<a id="__codelineno-0-1449" name="__codelineno-0-1449"></a>                    <span class="s2">&quot;The number of actors that will be allocated for parallelized evaluation was encountered as 1.&quot;</span>
<a id="__codelineno-0-1450" name="__codelineno-0-1450"></a>                    <span class="s2">&quot; This number is automatically dropped to 0,&quot;</span>
<a id="__codelineno-0-1451" name="__codelineno-0-1451"></a>                    <span class="s2">&quot; because having only 1 actor does not bring any benefit in terms of parallelization.&quot;</span>
<a id="__codelineno-0-1452" name="__codelineno-0-1452"></a>                <span class="p">),</span>
<a id="__codelineno-0-1453" name="__codelineno-0-1453"></a>            <span class="p">)</span>
<a id="__codelineno-0-1454" name="__codelineno-0-1454"></a>        <span class="p">)</span>
<a id="__codelineno-0-1455" name="__codelineno-0-1455"></a>        <span class="c1"># Creating a single actor does not bring any benefit of parallelization.</span>
<a id="__codelineno-0-1456" name="__codelineno-0-1456"></a>        <span class="c1"># Therefore, at the end of all the computations above regarding the number of actors, if it turns out</span>
<a id="__codelineno-0-1457" name="__codelineno-0-1457"></a>        <span class="c1"># that the target number of actors is 1, we reduce it to 0 (meaning that no actor will be initialized).</span>
<a id="__codelineno-0-1458" name="__codelineno-0-1458"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-1459" name="__codelineno-0-1459"></a>
<a id="__codelineno-0-1460" name="__codelineno-0-1460"></a>        <span class="c1"># Since we are to allocate no actor, the value of the argument `num_gpus_per_actor` is meaningless.</span>
<a id="__codelineno-0-1461" name="__codelineno-0-1461"></a>        <span class="c1"># We therefore overwrite the value of that argument with None.</span>
<a id="__codelineno-0-1462" name="__codelineno-0-1462"></a>        <span class="n">num_gpus_per_actor</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1463" name="__codelineno-0-1463"></a>
<a id="__codelineno-0-1464" name="__codelineno-0-1464"></a>    <span class="n">_evolog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
<a id="__codelineno-0-1465" name="__codelineno-0-1465"></a>        <span class="n">message_from</span><span class="p">(</span>
<a id="__codelineno-0-1466" name="__codelineno-0-1466"></a>            <span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;The number of actors that will be allocated for parallelized evaluation is </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1467" name="__codelineno-0-1467"></a>        <span class="p">)</span>
<a id="__codelineno-0-1468" name="__codelineno-0-1468"></a>    <span class="p">)</span>
<a id="__codelineno-0-1469" name="__codelineno-0-1469"></a>
<a id="__codelineno-0-1470" name="__codelineno-0-1470"></a>    <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_device</span> <span class="o">!=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cpu&quot;</span><span class="p">)):</span>
<a id="__codelineno-0-1471" name="__codelineno-0-1471"></a>        <span class="n">detailed_error_msg</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-1472" name="__codelineno-0-1472"></a>            <span class="sa">f</span><span class="s2">&quot;The number of actors that will be allocated for parallelized evaluation is </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1473" name="__codelineno-0-1473"></a>            <span class="s2">&quot; When the number of actors is at least 2,&quot;</span>
<a id="__codelineno-0-1474" name="__codelineno-0-1474"></a>            <span class="s1">&#39; the only supported value for the `device` argument is &quot;cpu&quot;.&#39;</span>
<a id="__codelineno-0-1475" name="__codelineno-0-1475"></a>            <span class="sa">f</span><span class="s2">&quot; However, `device` was received as </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_device</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1476" name="__codelineno-0-1476"></a>            <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">---- Possible ways to fix the error: ----&quot;</span>
<a id="__codelineno-0-1477" name="__codelineno-0-1477"></a>            <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1478" name="__codelineno-0-1478"></a>            <span class="s2">&quot;(1)&quot;</span>
<a id="__codelineno-0-1479" name="__codelineno-0-1479"></a>            <span class="s2">&quot; If both the population and the fitness evaluation operations can fit into the same device,&quot;</span>
<a id="__codelineno-0-1480" name="__codelineno-0-1480"></a>            <span class="sa">f</span><span class="s2">&quot; try setting `device=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_device</span><span class="si">}</span><span class="s2">` and `num_actors=0`.&quot;</span>
<a id="__codelineno-0-1481" name="__codelineno-0-1481"></a>            <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1482" name="__codelineno-0-1482"></a>            <span class="s2">&quot;(2)&quot;</span>
<a id="__codelineno-0-1483" name="__codelineno-0-1483"></a>            <span class="s2">&quot; If you would like to use N number of GPUs in parallel for fitness evaluation (where N&gt;1),&quot;</span>
<a id="__codelineno-0-1484" name="__codelineno-0-1484"></a>            <span class="s1">&#39; set `device=&quot;cpu&quot;` (so that the main process will keep the population on the cpu), set&#39;</span>
<a id="__codelineno-0-1485" name="__codelineno-0-1485"></a>            <span class="s2">&quot; `num_actors=N` and `num_gpus_per_actor=1` (to allocate an actor for each of the `N` GPUs),&quot;</span>
<a id="__codelineno-0-1486" name="__codelineno-0-1486"></a>            <span class="s2">&quot; and then, decorate your fitness function using `evotorch.decorators.on_cuda`&quot;</span>
<a id="__codelineno-0-1487" name="__codelineno-0-1487"></a>            <span class="s2">&quot; so that the fitness evaluation will be performed on the cuda device assigned to the actor.&quot;</span>
<a id="__codelineno-0-1488" name="__codelineno-0-1488"></a>            <span class="s2">&quot; The code for achieving this can look like this:&quot;</span>
<a id="__codelineno-0-1489" name="__codelineno-0-1489"></a>            <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1490" name="__codelineno-0-1490"></a>            <span class="s2">&quot;    from evotorch import Problem</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1491" name="__codelineno-0-1491"></a>            <span class="s2">&quot;    from evotorch.decorators import on_cuda, vectorized</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1492" name="__codelineno-0-1492"></a>            <span class="s2">&quot;    import torch</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1493" name="__codelineno-0-1493"></a>            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1494" name="__codelineno-0-1494"></a>            <span class="s2">&quot;    @on_cuda</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1495" name="__codelineno-0-1495"></a>            <span class="s2">&quot;    @vectorized</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1496" name="__codelineno-0-1496"></a>            <span class="s2">&quot;    def f(x: torch.Tensor) -&gt; torch.Tensor:</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1497" name="__codelineno-0-1497"></a>            <span class="s2">&quot;        ...</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1498" name="__codelineno-0-1498"></a>            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1499" name="__codelineno-0-1499"></a>            <span class="s1">&#39;    problem = Problem(&quot;min&quot;, f, device=&quot;cpu&quot;, num_actors=N, num_gpus_per_actor=1)</span><span class="se">\n</span><span class="s1">&#39;</span>
<a id="__codelineno-0-1500" name="__codelineno-0-1500"></a>            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1501" name="__codelineno-0-1501"></a>            <span class="s2">&quot;Or, it can look like this:</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1502" name="__codelineno-0-1502"></a>            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1503" name="__codelineno-0-1503"></a>            <span class="s2">&quot;    from evotorch import Problem, SolutionBatch</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1504" name="__codelineno-0-1504"></a>            <span class="s2">&quot;    from evotorch.decorators import on_cuda</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1505" name="__codelineno-0-1505"></a>            <span class="s2">&quot;    import torch</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1506" name="__codelineno-0-1506"></a>            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1507" name="__codelineno-0-1507"></a>            <span class="s2">&quot;    class MyProblem(Problem):</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1508" name="__codelineno-0-1508"></a>            <span class="s2">&quot;        def __init__(self, ...):</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1509" name="__codelineno-0-1509"></a>            <span class="s2">&quot;            super().__init__(</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1510" name="__codelineno-0-1510"></a>            <span class="s1">&#39;                objective_sense=&quot;min&quot;, device=&quot;cpu&quot;, num_actors=N, num_gpus_per_actor=1, ...</span><span class="se">\n</span><span class="s1">&#39;</span>
<a id="__codelineno-0-1511" name="__codelineno-0-1511"></a>            <span class="s2">&quot;            )</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1512" name="__codelineno-0-1512"></a>            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1513" name="__codelineno-0-1513"></a>            <span class="s2">&quot;        @on_cuda</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1514" name="__codelineno-0-1514"></a>            <span class="s2">&quot;        def _evaluate_batch(self, batch: SolutionBatch):</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1515" name="__codelineno-0-1515"></a>            <span class="s2">&quot;            ...</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1516" name="__codelineno-0-1516"></a>            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1517" name="__codelineno-0-1517"></a>            <span class="s2">&quot;    problem = MyProblem(...)</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1518" name="__codelineno-0-1518"></a>            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1519" name="__codelineno-0-1519"></a>            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1520" name="__codelineno-0-1520"></a>            <span class="s2">&quot;(3)&quot;</span>
<a id="__codelineno-0-1521" name="__codelineno-0-1521"></a>            <span class="s2">&quot; Similarly to option (2), for when you wish to use N number of GPUs for fitness evaluation,&quot;</span>
<a id="__codelineno-0-1522" name="__codelineno-0-1522"></a>            <span class="s1">&#39; set `device=&quot;cpu&quot;`, set `num_actors=N` and `num_gpus_per_actor=1`, then, within the evaluation&#39;</span>
<a id="__codelineno-0-1523" name="__codelineno-0-1523"></a>            <span class="s1">&#39; function, manually use the device `&quot;cuda&quot;` to accelerate the computation.&#39;</span>
<a id="__codelineno-0-1524" name="__codelineno-0-1524"></a>            <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1525" name="__codelineno-0-1525"></a>            <span class="s2">&quot;--------------</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1526" name="__codelineno-0-1526"></a>            <span class="s2">&quot;Note for cases (2) and (3): if you are on a computer or on a ray cluster with multiple GPUs, you&quot;</span>
<a id="__codelineno-0-1527" name="__codelineno-0-1527"></a>            <span class="s1">&#39; might prefer to set `num_actors` as the string &quot;num_gpus&quot; instead of an integer N,&#39;</span>
<a id="__codelineno-0-1528" name="__codelineno-0-1528"></a>            <span class="s2">&quot; which will cause the number of available GPUs to be counted, and the number of actors to be&quot;</span>
<a id="__codelineno-0-1529" name="__codelineno-0-1529"></a>            <span class="s2">&quot; configured as that count.&quot;</span>
<a id="__codelineno-0-1530" name="__codelineno-0-1530"></a>        <span class="p">)</span>
<a id="__codelineno-0-1531" name="__codelineno-0-1531"></a>
<a id="__codelineno-0-1532" name="__codelineno-0-1532"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">detailed_error_msg</span><span class="p">)</span>
<a id="__codelineno-0-1533" name="__codelineno-0-1533"></a>
<a id="__codelineno-0-1534" name="__codelineno-0-1534"></a>    <span class="c1"># Annotate the variable which will determine how many GPUs are to be assigned to each actor.</span>
<a id="__codelineno-0-1535" name="__codelineno-0-1535"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_num_gpus_per_actor</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span>
<a id="__codelineno-0-1536" name="__codelineno-0-1536"></a>
<a id="__codelineno-0-1537" name="__codelineno-0-1537"></a>    <span class="k">if</span> <span class="p">(</span><span class="n">actor_config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;num_gpus&quot;</span> <span class="ow">in</span> <span class="n">actor_config</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">num_gpus_per_actor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-1538" name="__codelineno-0-1538"></a>        <span class="c1"># If `actor_config` dictionary has the item &quot;num_gpus&quot; and also `num_gpus_per_actor` is not None,</span>
<a id="__codelineno-0-1539" name="__codelineno-0-1539"></a>        <span class="c1"># then there is a conflicting (or redundant) configuration. We raise an error here.</span>
<a id="__codelineno-0-1540" name="__codelineno-0-1540"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1541" name="__codelineno-0-1541"></a>            <span class="s1">&#39;The `actor_config` dictionary contains the key &quot;num_gpus&quot;.&#39;</span>
<a id="__codelineno-0-1542" name="__codelineno-0-1542"></a>            <span class="s2">&quot; At the same time, `num_gpus_per_actor` has a value other than None.&quot;</span>
<a id="__codelineno-0-1543" name="__codelineno-0-1543"></a>            <span class="s2">&quot; These two configurations are conflicting.&quot;</span>
<a id="__codelineno-0-1544" name="__codelineno-0-1544"></a>            <span class="s2">&quot; Please specify the number of GPUs per actor either via the `actor_config` dictionary,&quot;</span>
<a id="__codelineno-0-1545" name="__codelineno-0-1545"></a>            <span class="s2">&quot; or via the `num_gpus_per_actor` argument, but not via both.&quot;</span>
<a id="__codelineno-0-1546" name="__codelineno-0-1546"></a>        <span class="p">)</span>
<a id="__codelineno-0-1547" name="__codelineno-0-1547"></a>
<a id="__codelineno-0-1548" name="__codelineno-0-1548"></a>    <span class="k">if</span> <span class="n">num_gpus_per_actor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1549" name="__codelineno-0-1549"></a>        <span class="c1"># If the argument `num_gpus_per_actor` is not specified, then we set the attribute</span>
<a id="__codelineno-0-1550" name="__codelineno-0-1550"></a>        <span class="c1"># `_num_gpus_per_actor` as None, which means that no GPUs will be assigned to the actors.</span>
<a id="__codelineno-0-1551" name="__codelineno-0-1551"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_num_gpus_per_actor</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1552" name="__codelineno-0-1552"></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">num_gpus_per_actor</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-1553" name="__codelineno-0-1553"></a>        <span class="c1"># This is the case where `num_gpus_per_actor` is given as a string.</span>
<a id="__codelineno-0-1554" name="__codelineno-0-1554"></a>        <span class="k">if</span> <span class="n">num_gpus_per_actor</span> <span class="o">==</span> <span class="s2">&quot;max&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1555" name="__codelineno-0-1555"></a>            <span class="c1"># This is the case where `num_gpus_per_actor` is given as &quot;max&quot;.</span>
<a id="__codelineno-0-1556" name="__codelineno-0-1556"></a>            <span class="n">num_gpus</span> <span class="o">=</span> <span class="n">get_ray_resource</span><span class="p">(</span><span class="s2">&quot;GPU&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1557" name="__codelineno-0-1557"></a>            <span class="k">if</span> <span class="n">num_gpus</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1558" name="__codelineno-0-1558"></a>                <span class="c1"># With `num_gpus_per_actor` as &quot;max&quot;, if there is no GPU available, then we set the attribute</span>
<a id="__codelineno-0-1559" name="__codelineno-0-1559"></a>                <span class="c1"># `_num_gpus_per_actor` as None, which means there will be no GPU assignment to the actors.</span>
<a id="__codelineno-0-1560" name="__codelineno-0-1560"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_num_gpus_per_actor</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1561" name="__codelineno-0-1561"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1562" name="__codelineno-0-1562"></a>                <span class="c1"># With `num_gpus_per_actor` as &quot;max&quot;, if there are GPUs available, then the available GPUs will</span>
<a id="__codelineno-0-1563" name="__codelineno-0-1563"></a>                <span class="c1"># be shared among the actors.</span>
<a id="__codelineno-0-1564" name="__codelineno-0-1564"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_num_gpus_per_actor</span> <span class="o">=</span> <span class="n">num_gpus</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span>
<a id="__codelineno-0-1565" name="__codelineno-0-1565"></a>        <span class="k">elif</span> <span class="n">num_gpus_per_actor</span> <span class="o">==</span> <span class="s2">&quot;all&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1566" name="__codelineno-0-1566"></a>            <span class="c1"># When `num_gpus_per_actor` is &quot;all&quot;, we also set the attribute `_num_gpus_per_actor` as &quot;all&quot;.</span>
<a id="__codelineno-0-1567" name="__codelineno-0-1567"></a>            <span class="c1"># When a remote actor is initialized, the remote actor will see that the Problem instance has its</span>
<a id="__codelineno-0-1568" name="__codelineno-0-1568"></a>            <span class="c1"># `_num_gpus_per_actor` set as &quot;all&quot;, and it will remove the environment variable named</span>
<a id="__codelineno-0-1569" name="__codelineno-0-1569"></a>            <span class="c1"># &quot;CUDA_VISIBLE_DEVICES&quot; in its own environment.</span>
<a id="__codelineno-0-1570" name="__codelineno-0-1570"></a>            <span class="c1"># With &quot;CUDA_VISIBLE_DEVICES&quot; removed, an actor will see all the GPUs available in its own</span>
<a id="__codelineno-0-1571" name="__codelineno-0-1571"></a>            <span class="c1"># environment.</span>
<a id="__codelineno-0-1572" name="__codelineno-0-1572"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_num_gpus_per_actor</span> <span class="o">=</span> <span class="s2">&quot;all&quot;</span>
<a id="__codelineno-0-1573" name="__codelineno-0-1573"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1574" name="__codelineno-0-1574"></a>            <span class="c1"># This is the case where `num_gpus_per_actor` argument has an unexpected string value.</span>
<a id="__codelineno-0-1575" name="__codelineno-0-1575"></a>            <span class="c1"># We raise an error.</span>
<a id="__codelineno-0-1576" name="__codelineno-0-1576"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1577" name="__codelineno-0-1577"></a>                <span class="sa">f</span><span class="s2">&quot;Invalid string value for `num_gpus_per_actor`: </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">num_gpus_per_actor</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1578" name="__codelineno-0-1578"></a>                <span class="sa">f</span><span class="s1">&#39; Acceptable string values for `num_gpus_per_actor` are: &quot;max&quot;, &quot;all&quot;.&#39;</span>
<a id="__codelineno-0-1579" name="__codelineno-0-1579"></a>            <span class="p">)</span>
<a id="__codelineno-0-1580" name="__codelineno-0-1580"></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">num_gpus_per_actor</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
<a id="__codelineno-0-1581" name="__codelineno-0-1581"></a>        <span class="c1"># When the argument `num_gpus_per_actor` is set as an integer we just set the attribute</span>
<a id="__codelineno-0-1582" name="__codelineno-0-1582"></a>        <span class="c1"># `_num_gpus_per_actor` as this integer.</span>
<a id="__codelineno-0-1583" name="__codelineno-0-1583"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_num_gpus_per_actor</span> <span class="o">=</span> <span class="n">num_gpus_per_actor</span>
<a id="__codelineno-0-1584" name="__codelineno-0-1584"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1585" name="__codelineno-0-1585"></a>        <span class="c1"># For anything else, we assume that `num_gpus_per_actor` is an object that is convertible to float.</span>
<a id="__codelineno-0-1586" name="__codelineno-0-1586"></a>        <span class="c1"># Therefore, we convert it to float and store it in the attribute `_num_gpus_per_actor`.</span>
<a id="__codelineno-0-1587" name="__codelineno-0-1587"></a>        <span class="c1"># Also, remember that, when `num_actors` is given as &quot;num_gpus&quot; or as &quot;num_devices&quot;,</span>
<a id="__codelineno-0-1588" name="__codelineno-0-1588"></a>        <span class="c1"># the code above overrides the value for the argument `num_gpus_per_actor`, which means,</span>
<a id="__codelineno-0-1589" name="__codelineno-0-1589"></a>        <span class="c1"># this is the case that is activated when `num_actors` is &quot;num_gpus&quot; or &quot;num_devices&quot;.</span>
<a id="__codelineno-0-1590" name="__codelineno-0-1590"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_num_gpus_per_actor</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">num_gpus_per_actor</span><span class="p">)</span>
<a id="__codelineno-0-1591" name="__codelineno-0-1591"></a>
<a id="__codelineno-0-1592" name="__codelineno-0-1592"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_actors</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-1593" name="__codelineno-0-1593"></a>        <span class="n">_evolog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
<a id="__codelineno-0-1594" name="__codelineno-0-1594"></a>            <span class="n">message_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Number of GPUs that will be allocated per actor is </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_gpus_per_actor</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1595" name="__codelineno-0-1595"></a>        <span class="p">)</span>
<a id="__codelineno-0-1596" name="__codelineno-0-1596"></a>
<a id="__codelineno-0-1597" name="__codelineno-0-1597"></a>    <span class="c1"># Initialize the Hook instances (and the related status dictionary for the `_after_eval_hook`)</span>
<a id="__codelineno-0-1598" name="__codelineno-0-1598"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_before_eval_hook</span><span class="p">:</span> <span class="n">Hook</span> <span class="o">=</span> <span class="n">Hook</span><span class="p">()</span>
<a id="__codelineno-0-1599" name="__codelineno-0-1599"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_after_eval_hook</span><span class="p">:</span> <span class="n">Hook</span> <span class="o">=</span> <span class="n">Hook</span><span class="p">()</span>
<a id="__codelineno-0-1600" name="__codelineno-0-1600"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_after_eval_status</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-1601" name="__codelineno-0-1601"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_remote_hook</span><span class="p">:</span> <span class="n">Hook</span> <span class="o">=</span> <span class="n">Hook</span><span class="p">()</span>
<a id="__codelineno-0-1602" name="__codelineno-0-1602"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_before_grad_hook</span><span class="p">:</span> <span class="n">Hook</span> <span class="o">=</span> <span class="n">Hook</span><span class="p">()</span>
<a id="__codelineno-0-1603" name="__codelineno-0-1603"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_after_grad_hook</span><span class="p">:</span> <span class="n">Hook</span> <span class="o">=</span> <span class="n">Hook</span><span class="p">()</span>
<a id="__codelineno-0-1604" name="__codelineno-0-1604"></a>
<a id="__codelineno-0-1605" name="__codelineno-0-1605"></a>    <span class="c1"># Initialize various stats regarding the solutions encountered by this Problem instance.</span>
<a id="__codelineno-0-1606" name="__codelineno-0-1606"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_store_solution_stats</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">store_solution_stats</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">bool</span><span class="p">(</span><span class="n">store_solution_stats</span><span class="p">)</span>
<a id="__codelineno-0-1607" name="__codelineno-0-1607"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_best</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1608" name="__codelineno-0-1608"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_worst</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1609" name="__codelineno-0-1609"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_best_evals</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1610" name="__codelineno-0-1610"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_worst_evals</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1611" name="__codelineno-0-1611"></a>
<a id="__codelineno-0-1612" name="__codelineno-0-1612"></a>    <span class="c1"># Initialize the boolean attribute which indicates whether or not this Problem instance (which can be</span>
<a id="__codelineno-0-1613" name="__codelineno-0-1613"></a>    <span class="c1"># the main instance or a remote instance on an actor) is &quot;prepared&quot; via the `_prepare` method.</span>
<a id="__codelineno-0-1614" name="__codelineno-0-1614"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_prepared</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Problem.all_remote_envs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">all_remote_envs</span><span class="p">()</span></code>

<a href="#evotorch.Problem.all_remote_envs" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get an accessor which is used for running a method
on all remote reinforcement learning environments.</p>
<p>This method can only be used on parallelized Problem
objects which have their <code>get_env()</code> methods defined.
For example, one can use this feature on a parallelized
GymProblem.</p>
<p>As an example, let us consider a parallelized GymProblem
object named <code>my_problem</code>. Given that <code>my_problem</code> has
<code>n</code> remote actors, a method <code>f()</code> can be executed
on all remote reinforcement learning environments as
follows:</p>
<div class="highlight"><pre><span></span><code>results = my_problem.all_remote_envs().f()
</code></pre></div>
<p>The variable <code>results</code> is a list of length <code>n</code>, the i-th
item of the list belonging to the method f's result
from the i-th actor.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="AllRemoteEnvs (evotorch.core.AllRemoteEnvs)" href="core/#evotorch.core.AllRemoteEnvs">AllRemoteEnvs</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A method accessor for all the remote reinforcement</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="AllRemoteEnvs (evotorch.core.AllRemoteEnvs)" href="core/#evotorch.core.AllRemoteEnvs">AllRemoteEnvs</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>learning environments.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2082">2082</a></span>
<span class="normal"><a href="#__codelineno-0-2083">2083</a></span>
<span class="normal"><a href="#__codelineno-0-2084">2084</a></span>
<span class="normal"><a href="#__codelineno-0-2085">2085</a></span>
<span class="normal"><a href="#__codelineno-0-2086">2086</a></span>
<span class="normal"><a href="#__codelineno-0-2087">2087</a></span>
<span class="normal"><a href="#__codelineno-0-2088">2088</a></span>
<span class="normal"><a href="#__codelineno-0-2089">2089</a></span>
<span class="normal"><a href="#__codelineno-0-2090">2090</a></span>
<span class="normal"><a href="#__codelineno-0-2091">2091</a></span>
<span class="normal"><a href="#__codelineno-0-2092">2092</a></span>
<span class="normal"><a href="#__codelineno-0-2093">2093</a></span>
<span class="normal"><a href="#__codelineno-0-2094">2094</a></span>
<span class="normal"><a href="#__codelineno-0-2095">2095</a></span>
<span class="normal"><a href="#__codelineno-0-2096">2096</a></span>
<span class="normal"><a href="#__codelineno-0-2097">2097</a></span>
<span class="normal"><a href="#__codelineno-0-2098">2098</a></span>
<span class="normal"><a href="#__codelineno-0-2099">2099</a></span>
<span class="normal"><a href="#__codelineno-0-2100">2100</a></span>
<span class="normal"><a href="#__codelineno-0-2101">2101</a></span>
<span class="normal"><a href="#__codelineno-0-2102">2102</a></span>
<span class="normal"><a href="#__codelineno-0-2103">2103</a></span>
<span class="normal"><a href="#__codelineno-0-2104">2104</a></span>
<span class="normal"><a href="#__codelineno-0-2105">2105</a></span>
<span class="normal"><a href="#__codelineno-0-2106">2106</a></span>
<span class="normal"><a href="#__codelineno-0-2107">2107</a></span>
<span class="normal"><a href="#__codelineno-0-2108">2108</a></span>
<span class="normal"><a href="#__codelineno-0-2109">2109</a></span>
<span class="normal"><a href="#__codelineno-0-2110">2110</a></span>
<span class="normal"><a href="#__codelineno-0-2111">2111</a></span>
<span class="normal"><a href="#__codelineno-0-2112">2112</a></span>
<span class="normal"><a href="#__codelineno-0-2113">2113</a></span>
<span class="normal"><a href="#__codelineno-0-2114">2114</a></span>
<span class="normal"><a href="#__codelineno-0-2115">2115</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-2082" name="__codelineno-0-2082"></a><span class="k">def</span><span class="w"> </span><span class="nf">all_remote_envs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AllRemoteEnvs</span><span class="p">:</span>
<a id="__codelineno-0-2083" name="__codelineno-0-2083"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2084" name="__codelineno-0-2084"></a><span class="sd">    Get an accessor which is used for running a method</span>
<a id="__codelineno-0-2085" name="__codelineno-0-2085"></a><span class="sd">    on all remote reinforcement learning environments.</span>
<a id="__codelineno-0-2086" name="__codelineno-0-2086"></a>
<a id="__codelineno-0-2087" name="__codelineno-0-2087"></a><span class="sd">    This method can only be used on parallelized Problem</span>
<a id="__codelineno-0-2088" name="__codelineno-0-2088"></a><span class="sd">    objects which have their `get_env()` methods defined.</span>
<a id="__codelineno-0-2089" name="__codelineno-0-2089"></a><span class="sd">    For example, one can use this feature on a parallelized</span>
<a id="__codelineno-0-2090" name="__codelineno-0-2090"></a><span class="sd">    GymProblem.</span>
<a id="__codelineno-0-2091" name="__codelineno-0-2091"></a>
<a id="__codelineno-0-2092" name="__codelineno-0-2092"></a><span class="sd">    As an example, let us consider a parallelized GymProblem</span>
<a id="__codelineno-0-2093" name="__codelineno-0-2093"></a><span class="sd">    object named `my_problem`. Given that `my_problem` has</span>
<a id="__codelineno-0-2094" name="__codelineno-0-2094"></a><span class="sd">    `n` remote actors, a method `f()` can be executed</span>
<a id="__codelineno-0-2095" name="__codelineno-0-2095"></a><span class="sd">    on all remote reinforcement learning environments as</span>
<a id="__codelineno-0-2096" name="__codelineno-0-2096"></a><span class="sd">    follows:</span>
<a id="__codelineno-0-2097" name="__codelineno-0-2097"></a>
<a id="__codelineno-0-2098" name="__codelineno-0-2098"></a><span class="sd">        results = my_problem.all_remote_envs().f()</span>
<a id="__codelineno-0-2099" name="__codelineno-0-2099"></a>
<a id="__codelineno-0-2100" name="__codelineno-0-2100"></a><span class="sd">    The variable `results` is a list of length `n`, the i-th</span>
<a id="__codelineno-0-2101" name="__codelineno-0-2101"></a><span class="sd">    item of the list belonging to the method f&#39;s result</span>
<a id="__codelineno-0-2102" name="__codelineno-0-2102"></a><span class="sd">    from the i-th actor.</span>
<a id="__codelineno-0-2103" name="__codelineno-0-2103"></a>
<a id="__codelineno-0-2104" name="__codelineno-0-2104"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-2105" name="__codelineno-0-2105"></a><span class="sd">        A method accessor for all the remote reinforcement</span>
<a id="__codelineno-0-2106" name="__codelineno-0-2106"></a><span class="sd">        learning environments.</span>
<a id="__codelineno-0-2107" name="__codelineno-0-2107"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2108" name="__codelineno-0-2108"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_parallelize</span><span class="p">()</span>
<a id="__codelineno-0-2109" name="__codelineno-0-2109"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_remote</span><span class="p">:</span>
<a id="__codelineno-0-2110" name="__codelineno-0-2110"></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
<a id="__codelineno-0-2111" name="__codelineno-0-2111"></a>            <span class="s2">&quot;The method `all_remote_envs()` can only be used on the main (i.e. non-remote)&quot;</span>
<a id="__codelineno-0-2112" name="__codelineno-0-2112"></a>            <span class="s2">&quot; Problem instance.&quot;</span>
<a id="__codelineno-0-2113" name="__codelineno-0-2113"></a>            <span class="s2">&quot; However, this Problem instance is on a remote actor.&quot;</span>
<a id="__codelineno-0-2114" name="__codelineno-0-2114"></a>        <span class="p">)</span>
<a id="__codelineno-0-2115" name="__codelineno-0-2115"></a>    <span class="k">return</span> <span class="n">AllRemoteEnvs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_actors</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Problem.all_remote_problems" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">all_remote_problems</span><span class="p">()</span></code>

<a href="#evotorch.Problem.all_remote_problems" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get an accessor which is used for running a method
on all remote clones of this Problem object.</p>
<p>For example, given a Problem object named <code>my_problem</code>,
also assuming that this Problem object is parallelized,
and therefore has <code>n</code> remote actors, a method <code>f()</code>
can be executed on all the remote instances as follows:</p>
<div class="highlight"><pre><span></span><code>results = my_problem.all_remote_problems().f()
</code></pre></div>
<p>The variable <code>results</code> is a list of length <code>n</code>, the i-th
item of the list belonging to the method f's result
from the i-th actor.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="AllRemoteProblems (evotorch.core.AllRemoteProblems)" href="core/#evotorch.core.AllRemoteProblems">AllRemoteProblems</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A method accessor for all the remote Problem objects.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2054">2054</a></span>
<span class="normal"><a href="#__codelineno-0-2055">2055</a></span>
<span class="normal"><a href="#__codelineno-0-2056">2056</a></span>
<span class="normal"><a href="#__codelineno-0-2057">2057</a></span>
<span class="normal"><a href="#__codelineno-0-2058">2058</a></span>
<span class="normal"><a href="#__codelineno-0-2059">2059</a></span>
<span class="normal"><a href="#__codelineno-0-2060">2060</a></span>
<span class="normal"><a href="#__codelineno-0-2061">2061</a></span>
<span class="normal"><a href="#__codelineno-0-2062">2062</a></span>
<span class="normal"><a href="#__codelineno-0-2063">2063</a></span>
<span class="normal"><a href="#__codelineno-0-2064">2064</a></span>
<span class="normal"><a href="#__codelineno-0-2065">2065</a></span>
<span class="normal"><a href="#__codelineno-0-2066">2066</a></span>
<span class="normal"><a href="#__codelineno-0-2067">2067</a></span>
<span class="normal"><a href="#__codelineno-0-2068">2068</a></span>
<span class="normal"><a href="#__codelineno-0-2069">2069</a></span>
<span class="normal"><a href="#__codelineno-0-2070">2070</a></span>
<span class="normal"><a href="#__codelineno-0-2071">2071</a></span>
<span class="normal"><a href="#__codelineno-0-2072">2072</a></span>
<span class="normal"><a href="#__codelineno-0-2073">2073</a></span>
<span class="normal"><a href="#__codelineno-0-2074">2074</a></span>
<span class="normal"><a href="#__codelineno-0-2075">2075</a></span>
<span class="normal"><a href="#__codelineno-0-2076">2076</a></span>
<span class="normal"><a href="#__codelineno-0-2077">2077</a></span>
<span class="normal"><a href="#__codelineno-0-2078">2078</a></span>
<span class="normal"><a href="#__codelineno-0-2079">2079</a></span>
<span class="normal"><a href="#__codelineno-0-2080">2080</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-2054" name="__codelineno-0-2054"></a><span class="k">def</span><span class="w"> </span><span class="nf">all_remote_problems</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AllRemoteProblems</span><span class="p">:</span>
<a id="__codelineno-0-2055" name="__codelineno-0-2055"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2056" name="__codelineno-0-2056"></a><span class="sd">    Get an accessor which is used for running a method</span>
<a id="__codelineno-0-2057" name="__codelineno-0-2057"></a><span class="sd">    on all remote clones of this Problem object.</span>
<a id="__codelineno-0-2058" name="__codelineno-0-2058"></a>
<a id="__codelineno-0-2059" name="__codelineno-0-2059"></a><span class="sd">    For example, given a Problem object named `my_problem`,</span>
<a id="__codelineno-0-2060" name="__codelineno-0-2060"></a><span class="sd">    also assuming that this Problem object is parallelized,</span>
<a id="__codelineno-0-2061" name="__codelineno-0-2061"></a><span class="sd">    and therefore has `n` remote actors, a method `f()`</span>
<a id="__codelineno-0-2062" name="__codelineno-0-2062"></a><span class="sd">    can be executed on all the remote instances as follows:</span>
<a id="__codelineno-0-2063" name="__codelineno-0-2063"></a>
<a id="__codelineno-0-2064" name="__codelineno-0-2064"></a><span class="sd">        results = my_problem.all_remote_problems().f()</span>
<a id="__codelineno-0-2065" name="__codelineno-0-2065"></a>
<a id="__codelineno-0-2066" name="__codelineno-0-2066"></a><span class="sd">    The variable `results` is a list of length `n`, the i-th</span>
<a id="__codelineno-0-2067" name="__codelineno-0-2067"></a><span class="sd">    item of the list belonging to the method f&#39;s result</span>
<a id="__codelineno-0-2068" name="__codelineno-0-2068"></a><span class="sd">    from the i-th actor.</span>
<a id="__codelineno-0-2069" name="__codelineno-0-2069"></a>
<a id="__codelineno-0-2070" name="__codelineno-0-2070"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-2071" name="__codelineno-0-2071"></a><span class="sd">        A method accessor for all the remote Problem objects.</span>
<a id="__codelineno-0-2072" name="__codelineno-0-2072"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2073" name="__codelineno-0-2073"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_parallelize</span><span class="p">()</span>
<a id="__codelineno-0-2074" name="__codelineno-0-2074"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_remote</span><span class="p">:</span>
<a id="__codelineno-0-2075" name="__codelineno-0-2075"></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
<a id="__codelineno-0-2076" name="__codelineno-0-2076"></a>            <span class="s2">&quot;The method `all_remote_problems()` can only be used on the main (i.e. non-remote)&quot;</span>
<a id="__codelineno-0-2077" name="__codelineno-0-2077"></a>            <span class="s2">&quot; Problem instance.&quot;</span>
<a id="__codelineno-0-2078" name="__codelineno-0-2078"></a>            <span class="s2">&quot; However, this Problem instance is on a remote actor.&quot;</span>
<a id="__codelineno-0-2079" name="__codelineno-0-2079"></a>        <span class="p">)</span>
<a id="__codelineno-0-2080" name="__codelineno-0-2080"></a>    <span class="k">return</span> <span class="n">AllRemoteProblems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_actors</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Problem.compare_solutions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">compare_solutions</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">obj_index</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#evotorch.Problem.compare_solutions" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Compare two solutions.
It is assumed that both solutions are already evaluated.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>a</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Solution (evotorch.core.Solution)" href="core/#evotorch.core.Solution">Solution</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The first solution.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>b</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Solution (evotorch.core.Solution)" href="core/#evotorch.core.Solution">Solution</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The second solution.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>obj_index</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The objective index according to which the comparison
will be made.
Can be left as None if the problem is single-objective.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2402">2402</a></span>
<span class="normal"><a href="#__codelineno-0-2403">2403</a></span>
<span class="normal"><a href="#__codelineno-0-2404">2404</a></span>
<span class="normal"><a href="#__codelineno-0-2405">2405</a></span>
<span class="normal"><a href="#__codelineno-0-2406">2406</a></span>
<span class="normal"><a href="#__codelineno-0-2407">2407</a></span>
<span class="normal"><a href="#__codelineno-0-2408">2408</a></span>
<span class="normal"><a href="#__codelineno-0-2409">2409</a></span>
<span class="normal"><a href="#__codelineno-0-2410">2410</a></span>
<span class="normal"><a href="#__codelineno-0-2411">2411</a></span>
<span class="normal"><a href="#__codelineno-0-2412">2412</a></span>
<span class="normal"><a href="#__codelineno-0-2413">2413</a></span>
<span class="normal"><a href="#__codelineno-0-2414">2414</a></span>
<span class="normal"><a href="#__codelineno-0-2415">2415</a></span>
<span class="normal"><a href="#__codelineno-0-2416">2416</a></span>
<span class="normal"><a href="#__codelineno-0-2417">2417</a></span>
<span class="normal"><a href="#__codelineno-0-2418">2418</a></span>
<span class="normal"><a href="#__codelineno-0-2419">2419</a></span>
<span class="normal"><a href="#__codelineno-0-2420">2420</a></span>
<span class="normal"><a href="#__codelineno-0-2421">2421</a></span>
<span class="normal"><a href="#__codelineno-0-2422">2422</a></span>
<span class="normal"><a href="#__codelineno-0-2423">2423</a></span>
<span class="normal"><a href="#__codelineno-0-2424">2424</a></span>
<span class="normal"><a href="#__codelineno-0-2425">2425</a></span>
<span class="normal"><a href="#__codelineno-0-2426">2426</a></span>
<span class="normal"><a href="#__codelineno-0-2427">2427</a></span>
<span class="normal"><a href="#__codelineno-0-2428">2428</a></span>
<span class="normal"><a href="#__codelineno-0-2429">2429</a></span>
<span class="normal"><a href="#__codelineno-0-2430">2430</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-2402" name="__codelineno-0-2402"></a><span class="k">def</span><span class="w"> </span><span class="nf">compare_solutions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="s2">&quot;Solution&quot;</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="s2">&quot;Solution&quot;</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<a id="__codelineno-0-2403" name="__codelineno-0-2403"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2404" name="__codelineno-0-2404"></a><span class="sd">    Compare two solutions.</span>
<a id="__codelineno-0-2405" name="__codelineno-0-2405"></a><span class="sd">    It is assumed that both solutions are already evaluated.</span>
<a id="__codelineno-0-2406" name="__codelineno-0-2406"></a>
<a id="__codelineno-0-2407" name="__codelineno-0-2407"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-2408" name="__codelineno-0-2408"></a><span class="sd">        a: The first solution.</span>
<a id="__codelineno-0-2409" name="__codelineno-0-2409"></a><span class="sd">        b: The second solution.</span>
<a id="__codelineno-0-2410" name="__codelineno-0-2410"></a><span class="sd">        obj_index: The objective index according to which the comparison</span>
<a id="__codelineno-0-2411" name="__codelineno-0-2411"></a><span class="sd">            will be made.</span>
<a id="__codelineno-0-2412" name="__codelineno-0-2412"></a><span class="sd">            Can be left as None if the problem is single-objective.</span>
<a id="__codelineno-0-2413" name="__codelineno-0-2413"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-2414" name="__codelineno-0-2414"></a><span class="sd">        A positive number if `a` is better;</span>
<a id="__codelineno-0-2415" name="__codelineno-0-2415"></a><span class="sd">        a negative number if `b` is better;</span>
<a id="__codelineno-0-2416" name="__codelineno-0-2416"></a><span class="sd">        0 if there is a tie.</span>
<a id="__codelineno-0-2417" name="__codelineno-0-2417"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2418" name="__codelineno-0-2418"></a>    <span class="n">senses</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">senses</span>
<a id="__codelineno-0-2419" name="__codelineno-0-2419"></a>    <span class="n">obj_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">normalize_obj_index</span><span class="p">(</span><span class="n">obj_index</span><span class="p">)</span>
<a id="__codelineno-0-2420" name="__codelineno-0-2420"></a>    <span class="n">sense</span> <span class="o">=</span> <span class="n">senses</span><span class="p">[</span><span class="n">obj_index</span><span class="p">]</span>
<a id="__codelineno-0-2421" name="__codelineno-0-2421"></a>
<a id="__codelineno-0-2422" name="__codelineno-0-2422"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">score</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="n">Solution</span><span class="p">):</span>
<a id="__codelineno-0-2423" name="__codelineno-0-2423"></a>        <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="n">evals</span><span class="p">[</span><span class="n">obj_index</span><span class="p">]</span>
<a id="__codelineno-0-2424" name="__codelineno-0-2424"></a>
<a id="__codelineno-0-2425" name="__codelineno-0-2425"></a>    <span class="k">if</span> <span class="n">sense</span> <span class="o">==</span> <span class="s2">&quot;max&quot;</span><span class="p">:</span>
<a id="__codelineno-0-2426" name="__codelineno-0-2426"></a>        <span class="k">return</span> <span class="n">score</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">-</span> <span class="n">score</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<a id="__codelineno-0-2427" name="__codelineno-0-2427"></a>    <span class="k">elif</span> <span class="n">sense</span> <span class="o">==</span> <span class="s2">&quot;min&quot;</span><span class="p">:</span>
<a id="__codelineno-0-2428" name="__codelineno-0-2428"></a>        <span class="k">return</span> <span class="n">score</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">-</span> <span class="n">score</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<a id="__codelineno-0-2429" name="__codelineno-0-2429"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2430" name="__codelineno-0-2430"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unrecognized sense: &quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">sense</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Problem.ensure_numeric" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ensure_numeric</span><span class="p">()</span></code>

<a href="#evotorch.Problem.ensure_numeric" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Ensure that the problem has a numeric dtype.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if the problem has a non-numeric dtype.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2641">2641</a></span>
<span class="normal"><a href="#__codelineno-0-2642">2642</a></span>
<span class="normal"><a href="#__codelineno-0-2643">2643</a></span>
<span class="normal"><a href="#__codelineno-0-2644">2644</a></span>
<span class="normal"><a href="#__codelineno-0-2645">2645</a></span>
<span class="normal"><a href="#__codelineno-0-2646">2646</a></span>
<span class="normal"><a href="#__codelineno-0-2647">2647</a></span>
<span class="normal"><a href="#__codelineno-0-2648">2648</a></span>
<span class="normal"><a href="#__codelineno-0-2649">2649</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-2641" name="__codelineno-0-2641"></a><span class="k">def</span><span class="w"> </span><span class="nf">ensure_numeric</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-2642" name="__codelineno-0-2642"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2643" name="__codelineno-0-2643"></a><span class="sd">    Ensure that the problem has a numeric dtype.</span>
<a id="__codelineno-0-2644" name="__codelineno-0-2644"></a>
<a id="__codelineno-0-2645" name="__codelineno-0-2645"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-2646" name="__codelineno-0-2646"></a><span class="sd">        ValueError: if the problem has a non-numeric dtype.</span>
<a id="__codelineno-0-2647" name="__codelineno-0-2647"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2648" name="__codelineno-0-2648"></a>    <span class="k">if</span> <span class="n">is_dtype_object</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">):</span>
<a id="__codelineno-0-2649" name="__codelineno-0-2649"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected a problem with numeric dtype, but the dtype is object.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Problem.ensure_single_objective" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ensure_single_objective</span><span class="p">()</span></code>

<a href="#evotorch.Problem.ensure_single_objective" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Ensure that the problem has only one objective.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if the problem is multi-objective.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2661">2661</a></span>
<span class="normal"><a href="#__codelineno-0-2662">2662</a></span>
<span class="normal"><a href="#__codelineno-0-2663">2663</a></span>
<span class="normal"><a href="#__codelineno-0-2664">2664</a></span>
<span class="normal"><a href="#__codelineno-0-2665">2665</a></span>
<span class="normal"><a href="#__codelineno-0-2666">2666</a></span>
<span class="normal"><a href="#__codelineno-0-2667">2667</a></span>
<span class="normal"><a href="#__codelineno-0-2668">2668</a></span>
<span class="normal"><a href="#__codelineno-0-2669">2669</a></span>
<span class="normal"><a href="#__codelineno-0-2670">2670</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-2661" name="__codelineno-0-2661"></a><span class="k">def</span><span class="w"> </span><span class="nf">ensure_single_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-2662" name="__codelineno-0-2662"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2663" name="__codelineno-0-2663"></a><span class="sd">    Ensure that the problem has only one objective.</span>
<a id="__codelineno-0-2664" name="__codelineno-0-2664"></a>
<a id="__codelineno-0-2665" name="__codelineno-0-2665"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-2666" name="__codelineno-0-2666"></a><span class="sd">        ValueError: if the problem is multi-objective.</span>
<a id="__codelineno-0-2667" name="__codelineno-0-2667"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2668" name="__codelineno-0-2668"></a>    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">senses</span><span class="p">)</span>
<a id="__codelineno-0-2669" name="__codelineno-0-2669"></a>    <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-2670" name="__codelineno-0-2670"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected a single-objective problem, but this problem has </span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2"> objectives.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Problem.ensure_unbounded" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ensure_unbounded</span><span class="p">()</span></code>

<a href="#evotorch.Problem.ensure_unbounded" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Ensure that the problem has no strict lower and upper bounds.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if the problem has strict lower and upper bounds.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2651">2651</a></span>
<span class="normal"><a href="#__codelineno-0-2652">2652</a></span>
<span class="normal"><a href="#__codelineno-0-2653">2653</a></span>
<span class="normal"><a href="#__codelineno-0-2654">2654</a></span>
<span class="normal"><a href="#__codelineno-0-2655">2655</a></span>
<span class="normal"><a href="#__codelineno-0-2656">2656</a></span>
<span class="normal"><a href="#__codelineno-0-2657">2657</a></span>
<span class="normal"><a href="#__codelineno-0-2658">2658</a></span>
<span class="normal"><a href="#__codelineno-0-2659">2659</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-2651" name="__codelineno-0-2651"></a><span class="k">def</span><span class="w"> </span><span class="nf">ensure_unbounded</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-2652" name="__codelineno-0-2652"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2653" name="__codelineno-0-2653"></a><span class="sd">    Ensure that the problem has no strict lower and upper bounds.</span>
<a id="__codelineno-0-2654" name="__codelineno-0-2654"></a>
<a id="__codelineno-0-2655" name="__codelineno-0-2655"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-2656" name="__codelineno-0-2656"></a><span class="sd">        ValueError: if the problem has strict lower and upper bounds.</span>
<a id="__codelineno-0-2657" name="__codelineno-0-2657"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2658" name="__codelineno-0-2658"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lower_bounds</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">upper_bounds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-2659" name="__codelineno-0-2659"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected an unbounded problem, but this problem has lower and/or upper bounds.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Problem.evaluate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">evaluate</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></code>

<a href="#evotorch.Problem.evaluate" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Evaluate the given Solution or SolutionBatch.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>x</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="SolutionBatch (evotorch.core.SolutionBatch)" href="core/#evotorch.core.SolutionBatch">SolutionBatch</a>, <a class="autorefs autorefs-internal" title="Solution (evotorch.core.Solution)" href="core/#evotorch.core.Solution">Solution</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The SolutionBatch to be evaluated.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2532">2532</a></span>
<span class="normal"><a href="#__codelineno-0-2533">2533</a></span>
<span class="normal"><a href="#__codelineno-0-2534">2534</a></span>
<span class="normal"><a href="#__codelineno-0-2535">2535</a></span>
<span class="normal"><a href="#__codelineno-0-2536">2536</a></span>
<span class="normal"><a href="#__codelineno-0-2537">2537</a></span>
<span class="normal"><a href="#__codelineno-0-2538">2538</a></span>
<span class="normal"><a href="#__codelineno-0-2539">2539</a></span>
<span class="normal"><a href="#__codelineno-0-2540">2540</a></span>
<span class="normal"><a href="#__codelineno-0-2541">2541</a></span>
<span class="normal"><a href="#__codelineno-0-2542">2542</a></span>
<span class="normal"><a href="#__codelineno-0-2543">2543</a></span>
<span class="normal"><a href="#__codelineno-0-2544">2544</a></span>
<span class="normal"><a href="#__codelineno-0-2545">2545</a></span>
<span class="normal"><a href="#__codelineno-0-2546">2546</a></span>
<span class="normal"><a href="#__codelineno-0-2547">2547</a></span>
<span class="normal"><a href="#__codelineno-0-2548">2548</a></span>
<span class="normal"><a href="#__codelineno-0-2549">2549</a></span>
<span class="normal"><a href="#__codelineno-0-2550">2550</a></span>
<span class="normal"><a href="#__codelineno-0-2551">2551</a></span>
<span class="normal"><a href="#__codelineno-0-2552">2552</a></span>
<span class="normal"><a href="#__codelineno-0-2553">2553</a></span>
<span class="normal"><a href="#__codelineno-0-2554">2554</a></span>
<span class="normal"><a href="#__codelineno-0-2555">2555</a></span>
<span class="normal"><a href="#__codelineno-0-2556">2556</a></span>
<span class="normal"><a href="#__codelineno-0-2557">2557</a></span>
<span class="normal"><a href="#__codelineno-0-2558">2558</a></span>
<span class="normal"><a href="#__codelineno-0-2559">2559</a></span>
<span class="normal"><a href="#__codelineno-0-2560">2560</a></span>
<span class="normal"><a href="#__codelineno-0-2561">2561</a></span>
<span class="normal"><a href="#__codelineno-0-2562">2562</a></span>
<span class="normal"><a href="#__codelineno-0-2563">2563</a></span>
<span class="normal"><a href="#__codelineno-0-2564">2564</a></span>
<span class="normal"><a href="#__codelineno-0-2565">2565</a></span>
<span class="normal"><a href="#__codelineno-0-2566">2566</a></span>
<span class="normal"><a href="#__codelineno-0-2567">2567</a></span>
<span class="normal"><a href="#__codelineno-0-2568">2568</a></span>
<span class="normal"><a href="#__codelineno-0-2569">2569</a></span>
<span class="normal"><a href="#__codelineno-0-2570">2570</a></span>
<span class="normal"><a href="#__codelineno-0-2571">2571</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-2532" name="__codelineno-0-2532"></a><span class="k">def</span><span class="w"> </span><span class="nf">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;SolutionBatch&quot;</span><span class="p">,</span> <span class="s2">&quot;Solution&quot;</span><span class="p">]):</span>
<a id="__codelineno-0-2533" name="__codelineno-0-2533"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2534" name="__codelineno-0-2534"></a><span class="sd">    Evaluate the given Solution or SolutionBatch.</span>
<a id="__codelineno-0-2535" name="__codelineno-0-2535"></a>
<a id="__codelineno-0-2536" name="__codelineno-0-2536"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-2537" name="__codelineno-0-2537"></a><span class="sd">        x: The SolutionBatch to be evaluated.</span>
<a id="__codelineno-0-2538" name="__codelineno-0-2538"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2539" name="__codelineno-0-2539"></a>
<a id="__codelineno-0-2540" name="__codelineno-0-2540"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Solution</span><span class="p">):</span>
<a id="__codelineno-0-2541" name="__codelineno-0-2541"></a>        <span class="n">batch</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">to_batch</span><span class="p">()</span>
<a id="__codelineno-0-2542" name="__codelineno-0-2542"></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">SolutionBatch</span><span class="p">):</span>
<a id="__codelineno-0-2543" name="__codelineno-0-2543"></a>        <span class="n">batch</span> <span class="o">=</span> <span class="n">x</span>
<a id="__codelineno-0-2544" name="__codelineno-0-2544"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2545" name="__codelineno-0-2545"></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-2546" name="__codelineno-0-2546"></a>            <span class="sa">f</span><span class="s2">&quot;The method `evaluate(...)` expected a Solution or a SolutionBatch as its argument.&quot;</span>
<a id="__codelineno-0-2547" name="__codelineno-0-2547"></a>            <span class="sa">f</span><span class="s2">&quot; However, the received object is </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="si">}</span><span class="s2">, which is of type </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-2548" name="__codelineno-0-2548"></a>        <span class="p">)</span>
<a id="__codelineno-0-2549" name="__codelineno-0-2549"></a>
<a id="__codelineno-0-2550" name="__codelineno-0-2550"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_parallelize</span><span class="p">()</span>
<a id="__codelineno-0-2551" name="__codelineno-0-2551"></a>
<a id="__codelineno-0-2552" name="__codelineno-0-2552"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_main</span><span class="p">:</span>
<a id="__codelineno-0-2553" name="__codelineno-0-2553"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">before_eval_hook</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
<a id="__codelineno-0-2554" name="__codelineno-0-2554"></a>
<a id="__codelineno-0-2555" name="__codelineno-0-2555"></a>    <span class="n">must_sync_after</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sync_before</span><span class="p">()</span>
<a id="__codelineno-0-2556" name="__codelineno-0-2556"></a>
<a id="__codelineno-0-2557" name="__codelineno-0-2557"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_start_preparations</span><span class="p">()</span>
<a id="__codelineno-0-2558" name="__codelineno-0-2558"></a>
<a id="__codelineno-0-2559" name="__codelineno-0-2559"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_evaluate_all</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
<a id="__codelineno-0-2560" name="__codelineno-0-2560"></a>
<a id="__codelineno-0-2561" name="__codelineno-0-2561"></a>    <span class="k">if</span> <span class="n">must_sync_after</span><span class="p">:</span>
<a id="__codelineno-0-2562" name="__codelineno-0-2562"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sync_after</span><span class="p">()</span>
<a id="__codelineno-0-2563" name="__codelineno-0-2563"></a>
<a id="__codelineno-0-2564" name="__codelineno-0-2564"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_main</span><span class="p">:</span>
<a id="__codelineno-0-2565" name="__codelineno-0-2565"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_after_eval_status</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-2566" name="__codelineno-0-2566"></a>
<a id="__codelineno-0-2567" name="__codelineno-0-2567"></a>        <span class="n">best_and_worst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_best_and_worst</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
<a id="__codelineno-0-2568" name="__codelineno-0-2568"></a>        <span class="k">if</span> <span class="n">best_and_worst</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2569" name="__codelineno-0-2569"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_after_eval_status</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">best_and_worst</span><span class="p">)</span>
<a id="__codelineno-0-2570" name="__codelineno-0-2570"></a>
<a id="__codelineno-0-2571" name="__codelineno-0-2571"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_after_eval_status</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">after_eval_hook</span><span class="o">.</span><span class="n">accumulate_dict</span><span class="p">(</span><span class="n">batch</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Problem.generate_batch" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_batch</span><span class="p">(</span><span class="n">popsize</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">empty</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stdev</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">symmetric</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#evotorch.Problem.generate_batch" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Generate a new SolutionBatch.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>popsize</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of solutions that will be contained in the new
batch.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>empty</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Set this as True if you would like to receive the solutions
un-initialized.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>center</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="evotorch.tools.RealOrVector">RealOrVector</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Center point of the Gaussian distribution from which
the decision values will be sampled, as a scalar or as a
1-dimensional vector.
Can also be left as None.
If <code>center</code> is None and <code>stdev</code> is None, all the decision
values will be sampled from the interval specified by
<code>initial_bounds</code> (or by <code>bounds</code> if <code>initial_bounds</code> was not
specified).
If <code>center</code> is None and <code>stdev</code> is not None, a center point
will be sampled from within the interval specified by
<code>initial_bounds</code> or <code>bounds</code>, and the decision values will be
sampled from a Gaussian distribution around this center point.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stdev</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="evotorch.tools.RealOrVector">RealOrVector</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Can be None (default) if the SolutionBatch is to contain
decision values sampled from the interval specified by
<code>initial_bounds</code> (or by <code>bounds</code> if <code>initial_bounds</code> was not
provided during the initialization phase).
Alternatively, a scalar or a 1-dimensional vector specifying
the standard deviation of the Gaussian distribution from which
the decision values will be sampled.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>symmetric</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>To be used only when <code>stdev</code> is not None.
If <code>symmetric</code> is True, decision values will be sampled from
the Gaussian distribution in a symmetric (i.e. antithetic)
manner.
Otherwise, the decision values will be sampled in the
non-antithetic manner.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1911">1911</a></span>
<span class="normal"><a href="#__codelineno-0-1912">1912</a></span>
<span class="normal"><a href="#__codelineno-0-1913">1913</a></span>
<span class="normal"><a href="#__codelineno-0-1914">1914</a></span>
<span class="normal"><a href="#__codelineno-0-1915">1915</a></span>
<span class="normal"><a href="#__codelineno-0-1916">1916</a></span>
<span class="normal"><a href="#__codelineno-0-1917">1917</a></span>
<span class="normal"><a href="#__codelineno-0-1918">1918</a></span>
<span class="normal"><a href="#__codelineno-0-1919">1919</a></span>
<span class="normal"><a href="#__codelineno-0-1920">1920</a></span>
<span class="normal"><a href="#__codelineno-0-1921">1921</a></span>
<span class="normal"><a href="#__codelineno-0-1922">1922</a></span>
<span class="normal"><a href="#__codelineno-0-1923">1923</a></span>
<span class="normal"><a href="#__codelineno-0-1924">1924</a></span>
<span class="normal"><a href="#__codelineno-0-1925">1925</a></span>
<span class="normal"><a href="#__codelineno-0-1926">1926</a></span>
<span class="normal"><a href="#__codelineno-0-1927">1927</a></span>
<span class="normal"><a href="#__codelineno-0-1928">1928</a></span>
<span class="normal"><a href="#__codelineno-0-1929">1929</a></span>
<span class="normal"><a href="#__codelineno-0-1930">1930</a></span>
<span class="normal"><a href="#__codelineno-0-1931">1931</a></span>
<span class="normal"><a href="#__codelineno-0-1932">1932</a></span>
<span class="normal"><a href="#__codelineno-0-1933">1933</a></span>
<span class="normal"><a href="#__codelineno-0-1934">1934</a></span>
<span class="normal"><a href="#__codelineno-0-1935">1935</a></span>
<span class="normal"><a href="#__codelineno-0-1936">1936</a></span>
<span class="normal"><a href="#__codelineno-0-1937">1937</a></span>
<span class="normal"><a href="#__codelineno-0-1938">1938</a></span>
<span class="normal"><a href="#__codelineno-0-1939">1939</a></span>
<span class="normal"><a href="#__codelineno-0-1940">1940</a></span>
<span class="normal"><a href="#__codelineno-0-1941">1941</a></span>
<span class="normal"><a href="#__codelineno-0-1942">1942</a></span>
<span class="normal"><a href="#__codelineno-0-1943">1943</a></span>
<span class="normal"><a href="#__codelineno-0-1944">1944</a></span>
<span class="normal"><a href="#__codelineno-0-1945">1945</a></span>
<span class="normal"><a href="#__codelineno-0-1946">1946</a></span>
<span class="normal"><a href="#__codelineno-0-1947">1947</a></span>
<span class="normal"><a href="#__codelineno-0-1948">1948</a></span>
<span class="normal"><a href="#__codelineno-0-1949">1949</a></span>
<span class="normal"><a href="#__codelineno-0-1950">1950</a></span>
<span class="normal"><a href="#__codelineno-0-1951">1951</a></span>
<span class="normal"><a href="#__codelineno-0-1952">1952</a></span>
<span class="normal"><a href="#__codelineno-0-1953">1953</a></span>
<span class="normal"><a href="#__codelineno-0-1954">1954</a></span>
<span class="normal"><a href="#__codelineno-0-1955">1955</a></span>
<span class="normal"><a href="#__codelineno-0-1956">1956</a></span>
<span class="normal"><a href="#__codelineno-0-1957">1957</a></span>
<span class="normal"><a href="#__codelineno-0-1958">1958</a></span>
<span class="normal"><a href="#__codelineno-0-1959">1959</a></span>
<span class="normal"><a href="#__codelineno-0-1960">1960</a></span>
<span class="normal"><a href="#__codelineno-0-1961">1961</a></span>
<span class="normal"><a href="#__codelineno-0-1962">1962</a></span>
<span class="normal"><a href="#__codelineno-0-1963">1963</a></span>
<span class="normal"><a href="#__codelineno-0-1964">1964</a></span>
<span class="normal"><a href="#__codelineno-0-1965">1965</a></span>
<span class="normal"><a href="#__codelineno-0-1966">1966</a></span>
<span class="normal"><a href="#__codelineno-0-1967">1967</a></span>
<span class="normal"><a href="#__codelineno-0-1968">1968</a></span>
<span class="normal"><a href="#__codelineno-0-1969">1969</a></span>
<span class="normal"><a href="#__codelineno-0-1970">1970</a></span>
<span class="normal"><a href="#__codelineno-0-1971">1971</a></span>
<span class="normal"><a href="#__codelineno-0-1972">1972</a></span>
<span class="normal"><a href="#__codelineno-0-1973">1973</a></span>
<span class="normal"><a href="#__codelineno-0-1974">1974</a></span>
<span class="normal"><a href="#__codelineno-0-1975">1975</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1911" name="__codelineno-0-1911"></a><span class="k">def</span><span class="w"> </span><span class="nf">generate_batch</span><span class="p">(</span>
<a id="__codelineno-0-1912" name="__codelineno-0-1912"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-1913" name="__codelineno-0-1913"></a>    <span class="n">popsize</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1914" name="__codelineno-0-1914"></a>    <span class="o">*</span><span class="p">,</span>
<a id="__codelineno-0-1915" name="__codelineno-0-1915"></a>    <span class="n">empty</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-1916" name="__codelineno-0-1916"></a>    <span class="n">center</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">RealOrVector</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1917" name="__codelineno-0-1917"></a>    <span class="n">stdev</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">RealOrVector</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1918" name="__codelineno-0-1918"></a>    <span class="n">symmetric</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-1919" name="__codelineno-0-1919"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SolutionBatch&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1920" name="__codelineno-0-1920"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1921" name="__codelineno-0-1921"></a><span class="sd">    Generate a new SolutionBatch.</span>
<a id="__codelineno-0-1922" name="__codelineno-0-1922"></a>
<a id="__codelineno-0-1923" name="__codelineno-0-1923"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1924" name="__codelineno-0-1924"></a><span class="sd">        popsize: Number of solutions that will be contained in the new</span>
<a id="__codelineno-0-1925" name="__codelineno-0-1925"></a><span class="sd">            batch.</span>
<a id="__codelineno-0-1926" name="__codelineno-0-1926"></a><span class="sd">        empty: Set this as True if you would like to receive the solutions</span>
<a id="__codelineno-0-1927" name="__codelineno-0-1927"></a><span class="sd">            un-initialized.</span>
<a id="__codelineno-0-1928" name="__codelineno-0-1928"></a><span class="sd">        center: Center point of the Gaussian distribution from which</span>
<a id="__codelineno-0-1929" name="__codelineno-0-1929"></a><span class="sd">            the decision values will be sampled, as a scalar or as a</span>
<a id="__codelineno-0-1930" name="__codelineno-0-1930"></a><span class="sd">            1-dimensional vector.</span>
<a id="__codelineno-0-1931" name="__codelineno-0-1931"></a><span class="sd">            Can also be left as None.</span>
<a id="__codelineno-0-1932" name="__codelineno-0-1932"></a><span class="sd">            If `center` is None and `stdev` is None, all the decision</span>
<a id="__codelineno-0-1933" name="__codelineno-0-1933"></a><span class="sd">            values will be sampled from the interval specified by</span>
<a id="__codelineno-0-1934" name="__codelineno-0-1934"></a><span class="sd">            `initial_bounds` (or by `bounds` if `initial_bounds` was not</span>
<a id="__codelineno-0-1935" name="__codelineno-0-1935"></a><span class="sd">            specified).</span>
<a id="__codelineno-0-1936" name="__codelineno-0-1936"></a><span class="sd">            If `center` is None and `stdev` is not None, a center point</span>
<a id="__codelineno-0-1937" name="__codelineno-0-1937"></a><span class="sd">            will be sampled from within the interval specified by</span>
<a id="__codelineno-0-1938" name="__codelineno-0-1938"></a><span class="sd">            `initial_bounds` or `bounds`, and the decision values will be</span>
<a id="__codelineno-0-1939" name="__codelineno-0-1939"></a><span class="sd">            sampled from a Gaussian distribution around this center point.</span>
<a id="__codelineno-0-1940" name="__codelineno-0-1940"></a><span class="sd">        stdev: Can be None (default) if the SolutionBatch is to contain</span>
<a id="__codelineno-0-1941" name="__codelineno-0-1941"></a><span class="sd">            decision values sampled from the interval specified by</span>
<a id="__codelineno-0-1942" name="__codelineno-0-1942"></a><span class="sd">            `initial_bounds` (or by `bounds` if `initial_bounds` was not</span>
<a id="__codelineno-0-1943" name="__codelineno-0-1943"></a><span class="sd">            provided during the initialization phase).</span>
<a id="__codelineno-0-1944" name="__codelineno-0-1944"></a><span class="sd">            Alternatively, a scalar or a 1-dimensional vector specifying</span>
<a id="__codelineno-0-1945" name="__codelineno-0-1945"></a><span class="sd">            the standard deviation of the Gaussian distribution from which</span>
<a id="__codelineno-0-1946" name="__codelineno-0-1946"></a><span class="sd">            the decision values will be sampled.</span>
<a id="__codelineno-0-1947" name="__codelineno-0-1947"></a><span class="sd">        symmetric: To be used only when `stdev` is not None.</span>
<a id="__codelineno-0-1948" name="__codelineno-0-1948"></a><span class="sd">            If `symmetric` is True, decision values will be sampled from</span>
<a id="__codelineno-0-1949" name="__codelineno-0-1949"></a><span class="sd">            the Gaussian distribution in a symmetric (i.e. antithetic)</span>
<a id="__codelineno-0-1950" name="__codelineno-0-1950"></a><span class="sd">            manner.</span>
<a id="__codelineno-0-1951" name="__codelineno-0-1951"></a><span class="sd">            Otherwise, the decision values will be sampled in the</span>
<a id="__codelineno-0-1952" name="__codelineno-0-1952"></a><span class="sd">            non-antithetic manner.</span>
<a id="__codelineno-0-1953" name="__codelineno-0-1953"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1954" name="__codelineno-0-1954"></a>    <span class="k">if</span> <span class="p">(</span><span class="n">center</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">stdev</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-1955" name="__codelineno-0-1955"></a>        <span class="k">if</span> <span class="n">symmetric</span><span class="p">:</span>
<a id="__codelineno-0-1956" name="__codelineno-0-1956"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1957" name="__codelineno-0-1957"></a>                <span class="sa">f</span><span class="s2">&quot;The argument `symmetric` can be set as True only when `center` and `stdev` are provided.&quot;</span>
<a id="__codelineno-0-1958" name="__codelineno-0-1958"></a>                <span class="sa">f</span><span class="s2">&quot; Although `center` and `stdev` are None, `symmetric` was received as </span><span class="si">{</span><span class="n">symmetric</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1959" name="__codelineno-0-1959"></a>            <span class="p">)</span>
<a id="__codelineno-0-1960" name="__codelineno-0-1960"></a>        <span class="k">return</span> <span class="n">SolutionBatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">popsize</span><span class="p">,</span> <span class="n">empty</span><span class="o">=</span><span class="n">empty</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-1961" name="__codelineno-0-1961"></a>    <span class="k">elif</span> <span class="p">(</span><span class="n">center</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">stdev</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-1962" name="__codelineno-0-1962"></a>        <span class="k">if</span> <span class="n">empty</span><span class="p">:</span>
<a id="__codelineno-0-1963" name="__codelineno-0-1963"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1964" name="__codelineno-0-1964"></a>                <span class="sa">f</span><span class="s2">&quot;When `center` and `stdev` are provided, the argument `empty` must be False.&quot;</span>
<a id="__codelineno-0-1965" name="__codelineno-0-1965"></a>                <span class="sa">f</span><span class="s2">&quot; However, the received value for `empty` is </span><span class="si">{</span><span class="n">empty</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1966" name="__codelineno-0-1966"></a>            <span class="p">)</span>
<a id="__codelineno-0-1967" name="__codelineno-0-1967"></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">SolutionBatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">popsize</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">,</span> <span class="n">empty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-1968" name="__codelineno-0-1968"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">make_gaussian</span><span class="p">(</span><span class="n">out</span><span class="o">=</span><span class="n">result</span><span class="o">.</span><span class="n">access_values</span><span class="p">(),</span> <span class="n">center</span><span class="o">=</span><span class="n">center</span><span class="p">,</span> <span class="n">stdev</span><span class="o">=</span><span class="n">stdev</span><span class="p">,</span> <span class="n">symmetric</span><span class="o">=</span><span class="n">symmetric</span><span class="p">)</span>
<a id="__codelineno-0-1969" name="__codelineno-0-1969"></a>        <span class="k">return</span> <span class="n">result</span>
<a id="__codelineno-0-1970" name="__codelineno-0-1970"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1971" name="__codelineno-0-1971"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1972" name="__codelineno-0-1972"></a>            <span class="sa">f</span><span class="s2">&quot;The arguments `center` and `stdev` were expected to be None or non-None at the same time.&quot;</span>
<a id="__codelineno-0-1973" name="__codelineno-0-1973"></a>            <span class="sa">f</span><span class="s2">&quot; Received `center`: </span><span class="si">{</span><span class="n">center</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1974" name="__codelineno-0-1974"></a>            <span class="sa">f</span><span class="s2">&quot; Received `stdev`: </span><span class="si">{</span><span class="n">stdev</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-1975" name="__codelineno-0-1975"></a>        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Problem.generate_values" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_values</span><span class="p">(</span><span class="n">num_solutions</span><span class="p">)</span></code>

<a href="#evotorch.Problem.generate_values" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Generate decision values.</p>
<p>This function returns a tensor containing the decision values
for <code>n</code> new solutions, <code>n</code> being the integer passed as the <code>num_rows</code>
argument.</p>
<p>For numeric problems, this function generates the decision values
which respect <code>initial_bounds</code> (or <code>bounds</code>, if <code>initial_bounds</code>
was not provided).
If this type of initialization is not desired, one can override
this function and define a manual initialization scheme in the
inheriting subclass.</p>
<p>For non-numeric problems, it is expected that the inheriting subclass
will override the method <code>_fill(...)</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>num_solutions</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>For how many solutions will new decision values be
generated.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1840">1840</a></span>
<span class="normal"><a href="#__codelineno-0-1841">1841</a></span>
<span class="normal"><a href="#__codelineno-0-1842">1842</a></span>
<span class="normal"><a href="#__codelineno-0-1843">1843</a></span>
<span class="normal"><a href="#__codelineno-0-1844">1844</a></span>
<span class="normal"><a href="#__codelineno-0-1845">1845</a></span>
<span class="normal"><a href="#__codelineno-0-1846">1846</a></span>
<span class="normal"><a href="#__codelineno-0-1847">1847</a></span>
<span class="normal"><a href="#__codelineno-0-1848">1848</a></span>
<span class="normal"><a href="#__codelineno-0-1849">1849</a></span>
<span class="normal"><a href="#__codelineno-0-1850">1850</a></span>
<span class="normal"><a href="#__codelineno-0-1851">1851</a></span>
<span class="normal"><a href="#__codelineno-0-1852">1852</a></span>
<span class="normal"><a href="#__codelineno-0-1853">1853</a></span>
<span class="normal"><a href="#__codelineno-0-1854">1854</a></span>
<span class="normal"><a href="#__codelineno-0-1855">1855</a></span>
<span class="normal"><a href="#__codelineno-0-1856">1856</a></span>
<span class="normal"><a href="#__codelineno-0-1857">1857</a></span>
<span class="normal"><a href="#__codelineno-0-1858">1858</a></span>
<span class="normal"><a href="#__codelineno-0-1859">1859</a></span>
<span class="normal"><a href="#__codelineno-0-1860">1860</a></span>
<span class="normal"><a href="#__codelineno-0-1861">1861</a></span>
<span class="normal"><a href="#__codelineno-0-1862">1862</a></span>
<span class="normal"><a href="#__codelineno-0-1863">1863</a></span>
<span class="normal"><a href="#__codelineno-0-1864">1864</a></span>
<span class="normal"><a href="#__codelineno-0-1865">1865</a></span>
<span class="normal"><a href="#__codelineno-0-1866">1866</a></span>
<span class="normal"><a href="#__codelineno-0-1867">1867</a></span>
<span class="normal"><a href="#__codelineno-0-1868">1868</a></span>
<span class="normal"><a href="#__codelineno-0-1869">1869</a></span>
<span class="normal"><a href="#__codelineno-0-1870">1870</a></span>
<span class="normal"><a href="#__codelineno-0-1871">1871</a></span>
<span class="normal"><a href="#__codelineno-0-1872">1872</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1840" name="__codelineno-0-1840"></a><span class="k">def</span><span class="w"> </span><span class="nf">generate_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_solutions</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">,</span> <span class="n">ObjectArray</span><span class="p">]:</span>
<a id="__codelineno-0-1841" name="__codelineno-0-1841"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1842" name="__codelineno-0-1842"></a><span class="sd">    Generate decision values.</span>
<a id="__codelineno-0-1843" name="__codelineno-0-1843"></a>
<a id="__codelineno-0-1844" name="__codelineno-0-1844"></a><span class="sd">    This function returns a tensor containing the decision values</span>
<a id="__codelineno-0-1845" name="__codelineno-0-1845"></a><span class="sd">    for `n` new solutions, `n` being the integer passed as the `num_rows`</span>
<a id="__codelineno-0-1846" name="__codelineno-0-1846"></a><span class="sd">    argument.</span>
<a id="__codelineno-0-1847" name="__codelineno-0-1847"></a>
<a id="__codelineno-0-1848" name="__codelineno-0-1848"></a><span class="sd">    For numeric problems, this function generates the decision values</span>
<a id="__codelineno-0-1849" name="__codelineno-0-1849"></a><span class="sd">    which respect `initial_bounds` (or `bounds`, if `initial_bounds`</span>
<a id="__codelineno-0-1850" name="__codelineno-0-1850"></a><span class="sd">    was not provided).</span>
<a id="__codelineno-0-1851" name="__codelineno-0-1851"></a><span class="sd">    If this type of initialization is not desired, one can override</span>
<a id="__codelineno-0-1852" name="__codelineno-0-1852"></a><span class="sd">    this function and define a manual initialization scheme in the</span>
<a id="__codelineno-0-1853" name="__codelineno-0-1853"></a><span class="sd">    inheriting subclass.</span>
<a id="__codelineno-0-1854" name="__codelineno-0-1854"></a>
<a id="__codelineno-0-1855" name="__codelineno-0-1855"></a><span class="sd">    For non-numeric problems, it is expected that the inheriting subclass</span>
<a id="__codelineno-0-1856" name="__codelineno-0-1856"></a><span class="sd">    will override the method `_fill(...)`.</span>
<a id="__codelineno-0-1857" name="__codelineno-0-1857"></a>
<a id="__codelineno-0-1858" name="__codelineno-0-1858"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1859" name="__codelineno-0-1859"></a><span class="sd">        num_solutions: For how many solutions will new decision values be</span>
<a id="__codelineno-0-1860" name="__codelineno-0-1860"></a><span class="sd">            generated.</span>
<a id="__codelineno-0-1861" name="__codelineno-0-1861"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1862" name="__codelineno-0-1862"></a><span class="sd">        A PyTorch tensor for numeric problems, an ObjectArray for</span>
<a id="__codelineno-0-1863" name="__codelineno-0-1863"></a><span class="sd">        non-numeric problems.</span>
<a id="__codelineno-0-1864" name="__codelineno-0-1864"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1865" name="__codelineno-0-1865"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="nb">object</span><span class="p">:</span>
<a id="__codelineno-0-1866" name="__codelineno-0-1866"></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_empty</span><span class="p">(</span><span class="n">num_solutions</span><span class="o">=</span><span class="n">num_solutions</span><span class="p">)</span>
<a id="__codelineno-0-1867" name="__codelineno-0-1867"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1868" name="__codelineno-0-1868"></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-1869" name="__codelineno-0-1869"></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="n">num_solutions</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">solution_length</span><span class="p">)</span>
<a id="__codelineno-0-1870" name="__codelineno-0-1870"></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">+</span> <span class="n">make_batched_false_for_vmap</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-1871" name="__codelineno-0-1871"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_fill</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<a id="__codelineno-0-1872" name="__codelineno-0-1872"></a>    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Problem.get_obj_order_descending" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_obj_order_descending</span><span class="p">()</span></code>

<a href="#evotorch.Problem.get_obj_order_descending" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>When sorting the solutions from best to worst according to each objective i, is the ordering descending?</p>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1763">1763</a></span>
<span class="normal"><a href="#__codelineno-0-1764">1764</a></span>
<span class="normal"><a href="#__codelineno-0-1765">1765</a></span>
<span class="normal"><a href="#__codelineno-0-1766">1766</a></span>
<span class="normal"><a href="#__codelineno-0-1767">1767</a></span>
<span class="normal"><a href="#__codelineno-0-1768">1768</a></span>
<span class="normal"><a href="#__codelineno-0-1769">1769</a></span>
<span class="normal"><a href="#__codelineno-0-1770">1770</a></span>
<span class="normal"><a href="#__codelineno-0-1771">1771</a></span>
<span class="normal"><a href="#__codelineno-0-1772">1772</a></span>
<span class="normal"><a href="#__codelineno-0-1773">1773</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1763" name="__codelineno-0-1763"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_obj_order_descending</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">bool</span><span class="p">]:</span>
<a id="__codelineno-0-1764" name="__codelineno-0-1764"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;When sorting the solutions from best to worst according to each objective i, is the ordering descending?&quot;&quot;&quot;</span>
<a id="__codelineno-0-1765" name="__codelineno-0-1765"></a>    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-1766" name="__codelineno-0-1766"></a>    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">senses</span><span class="p">:</span>
<a id="__codelineno-0-1767" name="__codelineno-0-1767"></a>        <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="s2">&quot;min&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1768" name="__codelineno-0-1768"></a>            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-1769" name="__codelineno-0-1769"></a>        <span class="k">elif</span> <span class="n">s</span> <span class="o">==</span> <span class="s2">&quot;max&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1770" name="__codelineno-0-1770"></a>            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-1771" name="__codelineno-0-1771"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1772" name="__codelineno-0-1772"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid sense: </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1773" name="__codelineno-0-1773"></a>    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Problem.is_better" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_better</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">obj_index</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#evotorch.Problem.is_better" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Check whether or not the first solution is better.
It is assumed that both solutions are already evaluated.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>a</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Solution (evotorch.core.Solution)" href="core/#evotorch.core.Solution">Solution</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The first solution.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>b</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Solution (evotorch.core.Solution)" href="core/#evotorch.core.Solution">Solution</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The second solution.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>obj_index</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The objective index according to which the comparison
will be made.
Can be left as None if the problem is single-objective.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2432">2432</a></span>
<span class="normal"><a href="#__codelineno-0-2433">2433</a></span>
<span class="normal"><a href="#__codelineno-0-2434">2434</a></span>
<span class="normal"><a href="#__codelineno-0-2435">2435</a></span>
<span class="normal"><a href="#__codelineno-0-2436">2436</a></span>
<span class="normal"><a href="#__codelineno-0-2437">2437</a></span>
<span class="normal"><a href="#__codelineno-0-2438">2438</a></span>
<span class="normal"><a href="#__codelineno-0-2439">2439</a></span>
<span class="normal"><a href="#__codelineno-0-2440">2440</a></span>
<span class="normal"><a href="#__codelineno-0-2441">2441</a></span>
<span class="normal"><a href="#__codelineno-0-2442">2442</a></span>
<span class="normal"><a href="#__codelineno-0-2443">2443</a></span>
<span class="normal"><a href="#__codelineno-0-2444">2444</a></span>
<span class="normal"><a href="#__codelineno-0-2445">2445</a></span>
<span class="normal"><a href="#__codelineno-0-2446">2446</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-2432" name="__codelineno-0-2432"></a><span class="k">def</span><span class="w"> </span><span class="nf">is_better</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="s2">&quot;Solution&quot;</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="s2">&quot;Solution&quot;</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-2433" name="__codelineno-0-2433"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2434" name="__codelineno-0-2434"></a><span class="sd">    Check whether or not the first solution is better.</span>
<a id="__codelineno-0-2435" name="__codelineno-0-2435"></a><span class="sd">    It is assumed that both solutions are already evaluated.</span>
<a id="__codelineno-0-2436" name="__codelineno-0-2436"></a>
<a id="__codelineno-0-2437" name="__codelineno-0-2437"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-2438" name="__codelineno-0-2438"></a><span class="sd">        a: The first solution.</span>
<a id="__codelineno-0-2439" name="__codelineno-0-2439"></a><span class="sd">        b: The second solution.</span>
<a id="__codelineno-0-2440" name="__codelineno-0-2440"></a><span class="sd">        obj_index: The objective index according to which the comparison</span>
<a id="__codelineno-0-2441" name="__codelineno-0-2441"></a><span class="sd">            will be made.</span>
<a id="__codelineno-0-2442" name="__codelineno-0-2442"></a><span class="sd">            Can be left as None if the problem is single-objective.</span>
<a id="__codelineno-0-2443" name="__codelineno-0-2443"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-2444" name="__codelineno-0-2444"></a><span class="sd">        True if `a` is better; False otherwise.</span>
<a id="__codelineno-0-2445" name="__codelineno-0-2445"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2446" name="__codelineno-0-2446"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare_solutions</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Problem.is_on_cpu" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_on_cpu</span><span class="p">()</span></code>

<a href="#evotorch.Problem.is_on_cpu" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Whether or not the Problem object has its device set as "cpu".</p>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3303">3303</a></span>
<span class="normal"><a href="#__codelineno-0-3304">3304</a></span>
<span class="normal"><a href="#__codelineno-0-3305">3305</a></span>
<span class="normal"><a href="#__codelineno-0-3306">3306</a></span>
<span class="normal"><a href="#__codelineno-0-3307">3307</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-3303" name="__codelineno-0-3303"></a><span class="k">def</span><span class="w"> </span><span class="nf">is_on_cpu</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-3304" name="__codelineno-0-3304"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-3305" name="__codelineno-0-3305"></a><span class="sd">    Whether or not the Problem object has its device set as &quot;cpu&quot;.</span>
<a id="__codelineno-0-3306" name="__codelineno-0-3306"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-3307" name="__codelineno-0-3307"></a>    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;cpu&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Problem.is_worse" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_worse</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">obj_index</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#evotorch.Problem.is_worse" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Check whether or not the first solution is worse.
It is assumed that both solutions are already evaluated.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>a</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Solution (evotorch.core.Solution)" href="core/#evotorch.core.Solution">Solution</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The first solution.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>b</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Solution (evotorch.core.Solution)" href="core/#evotorch.core.Solution">Solution</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The second solution.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>obj_index</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The objective index according to which the comparison
will be made.
Can be left as None if the problem is single-objective.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2448">2448</a></span>
<span class="normal"><a href="#__codelineno-0-2449">2449</a></span>
<span class="normal"><a href="#__codelineno-0-2450">2450</a></span>
<span class="normal"><a href="#__codelineno-0-2451">2451</a></span>
<span class="normal"><a href="#__codelineno-0-2452">2452</a></span>
<span class="normal"><a href="#__codelineno-0-2453">2453</a></span>
<span class="normal"><a href="#__codelineno-0-2454">2454</a></span>
<span class="normal"><a href="#__codelineno-0-2455">2455</a></span>
<span class="normal"><a href="#__codelineno-0-2456">2456</a></span>
<span class="normal"><a href="#__codelineno-0-2457">2457</a></span>
<span class="normal"><a href="#__codelineno-0-2458">2458</a></span>
<span class="normal"><a href="#__codelineno-0-2459">2459</a></span>
<span class="normal"><a href="#__codelineno-0-2460">2460</a></span>
<span class="normal"><a href="#__codelineno-0-2461">2461</a></span>
<span class="normal"><a href="#__codelineno-0-2462">2462</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-2448" name="__codelineno-0-2448"></a><span class="k">def</span><span class="w"> </span><span class="nf">is_worse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="s2">&quot;Solution&quot;</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="s2">&quot;Solution&quot;</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-2449" name="__codelineno-0-2449"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2450" name="__codelineno-0-2450"></a><span class="sd">    Check whether or not the first solution is worse.</span>
<a id="__codelineno-0-2451" name="__codelineno-0-2451"></a><span class="sd">    It is assumed that both solutions are already evaluated.</span>
<a id="__codelineno-0-2452" name="__codelineno-0-2452"></a>
<a id="__codelineno-0-2453" name="__codelineno-0-2453"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-2454" name="__codelineno-0-2454"></a><span class="sd">        a: The first solution.</span>
<a id="__codelineno-0-2455" name="__codelineno-0-2455"></a><span class="sd">        b: The second solution.</span>
<a id="__codelineno-0-2456" name="__codelineno-0-2456"></a><span class="sd">        obj_index: The objective index according to which the comparison</span>
<a id="__codelineno-0-2457" name="__codelineno-0-2457"></a><span class="sd">            will be made.</span>
<a id="__codelineno-0-2458" name="__codelineno-0-2458"></a><span class="sd">            Can be left as None if the problem is single-objective.</span>
<a id="__codelineno-0-2459" name="__codelineno-0-2459"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-2460" name="__codelineno-0-2460"></a><span class="sd">        True if `a` is worse; False otherwise.</span>
<a id="__codelineno-0-2461" name="__codelineno-0-2461"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2462" name="__codelineno-0-2462"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare_solutions</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Problem.kill_actors" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">kill_actors</span><span class="p">()</span></code>

<a href="#evotorch.Problem.kill_actors" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Kill all the remote actors used by the Problem instance.</p>
<p>One might use this method to release the resources used by the
remote actors.</p>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2117">2117</a></span>
<span class="normal"><a href="#__codelineno-0-2118">2118</a></span>
<span class="normal"><a href="#__codelineno-0-2119">2119</a></span>
<span class="normal"><a href="#__codelineno-0-2120">2120</a></span>
<span class="normal"><a href="#__codelineno-0-2121">2121</a></span>
<span class="normal"><a href="#__codelineno-0-2122">2122</a></span>
<span class="normal"><a href="#__codelineno-0-2123">2123</a></span>
<span class="normal"><a href="#__codelineno-0-2124">2124</a></span>
<span class="normal"><a href="#__codelineno-0-2125">2125</a></span>
<span class="normal"><a href="#__codelineno-0-2126">2126</a></span>
<span class="normal"><a href="#__codelineno-0-2127">2127</a></span>
<span class="normal"><a href="#__codelineno-0-2128">2128</a></span>
<span class="normal"><a href="#__codelineno-0-2129">2129</a></span>
<span class="normal"><a href="#__codelineno-0-2130">2130</a></span>
<span class="normal"><a href="#__codelineno-0-2131">2131</a></span>
<span class="normal"><a href="#__codelineno-0-2132">2132</a></span>
<span class="normal"><a href="#__codelineno-0-2133">2133</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-2117" name="__codelineno-0-2117"></a><span class="k">def</span><span class="w"> </span><span class="nf">kill_actors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-2118" name="__codelineno-0-2118"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2119" name="__codelineno-0-2119"></a><span class="sd">    Kill all the remote actors used by the Problem instance.</span>
<a id="__codelineno-0-2120" name="__codelineno-0-2120"></a>
<a id="__codelineno-0-2121" name="__codelineno-0-2121"></a><span class="sd">    One might use this method to release the resources used by the</span>
<a id="__codelineno-0-2122" name="__codelineno-0-2122"></a><span class="sd">    remote actors.</span>
<a id="__codelineno-0-2123" name="__codelineno-0-2123"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2124" name="__codelineno-0-2124"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_main</span><span class="p">:</span>
<a id="__codelineno-0-2125" name="__codelineno-0-2125"></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
<a id="__codelineno-0-2126" name="__codelineno-0-2126"></a>            <span class="s2">&quot;The method `kill_actors()` can only be used on the main (i.e. non-remote)&quot;</span>
<a id="__codelineno-0-2127" name="__codelineno-0-2127"></a>            <span class="s2">&quot; Problem instance.&quot;</span>
<a id="__codelineno-0-2128" name="__codelineno-0-2128"></a>            <span class="s2">&quot; However, this Problem instance is on a remote actor.&quot;</span>
<a id="__codelineno-0-2129" name="__codelineno-0-2129"></a>        <span class="p">)</span>
<a id="__codelineno-0-2130" name="__codelineno-0-2130"></a>    <span class="k">for</span> <span class="n">actor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actors</span><span class="p">:</span>
<a id="__codelineno-0-2131" name="__codelineno-0-2131"></a>        <span class="n">ray</span><span class="o">.</span><span class="n">kill</span><span class="p">(</span><span class="n">actor</span><span class="p">)</span>
<a id="__codelineno-0-2132" name="__codelineno-0-2132"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_actors</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-2133" name="__codelineno-0-2133"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_actor_pool</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Problem.make_callable_evaluator" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">make_callable_evaluator</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">obj_index</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#evotorch.Problem.make_callable_evaluator" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get a callable evaluator for evaluating the given solutions.</p>
<p>Let us assume that we have a <a class="autorefs autorefs-internal" href="core/#evotorch.core.Problem">Problem</a>
declared like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">evotorch</span><span class="w"> </span><span class="kn">import</span> <span class="n">Problem</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">my_problem</span> <span class="o">=</span> <span class="n">Problem</span><span class="p">(</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="s2">&quot;min&quot;</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n">fitness_function_goes_here</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="o">...</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="p">)</span>
</code></pre></div>
<p>Using the regular API of EvoTorch, one has to generate solutions for this
problem as follows:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">population_size</span> <span class="o">=</span> <span class="o">...</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">my_solutions</span> <span class="o">=</span> <span class="n">my_problem</span><span class="o">.</span><span class="n">generate_batch</span><span class="p">(</span><span class="n">population_size</span><span class="p">)</span>
</code></pre></div>
<p>For editing the decision values within the
<a class="autorefs autorefs-internal" href="core/#evotorch.core.SolutionBatch">SolutionBatch</a> <code>my_solutions</code>, one has to
do the following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">new_decision_values</span> <span class="o">=</span> <span class="o">...</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="n">my_solutions</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span><span class="n">new_decision_values</span><span class="p">)</span>
</code></pre></div>
<p>Finally, to evaluate <code>my_solutions</code>, one would have to do these:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">my_problem</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">my_solutions</span><span class="p">)</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">fitnesses</span> <span class="o">=</span> <span class="n">my_problem</span><span class="o">.</span><span class="n">evals</span>
</code></pre></div>
<p>One could desire a different interface which is more compatible with
functional programming paradigm, especially when planning to use the
functional algorithms (such as, for example, the functional
<a class="autorefs autorefs-internal" title="cem(*, center_init, parenthood_ratio, objective_sense, stdev_init=None, radius_init=None, stdev_min=None, stdev_max=None, stdev_max_change=None)" href="algorithms/functional/funccem/#evotorch.algorithms.functional.funccem.cem">cem</a>).
To achieve this, one can do the following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">f</span> <span class="o">=</span> <span class="n">my_problem</span><span class="o">.</span><span class="n">make_callable_evaluator</span><span class="p">()</span>
</code></pre></div>
<p>Now, we have a new object <code>f</code>, which behaves like a function.
This function-like object expects a tensor of decision values, and
returns fitnesses, as shown below:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="n">random_decision_values</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>    <span class="n">population_size</span><span class="p">,</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>    <span class="n">my_problem</span><span class="o">.</span><span class="n">solution_length</span><span class="p">,</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>    <span class="n">dtype</span><span class="o">=</span><span class="n">my_problem</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="p">)</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="n">fitnesses</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">random_decision_values</span><span class="p">)</span>
</code></pre></div>
<p><strong>Parallelized fitness evaluation.</strong>
If a <code>Problem</code> object is configured to use parallelized evaluation with
the help of multiple actors, a callable evaluator made out of that
<code>Problem</code> object will also make use of those multiple actors.</p>
<p><strong>Additional batch dimensions.</strong>
If a callable evaluator receives a tensor with 3 or more dimensions,
those extra leftmost dimensions will be considered as batch
dimensions. The returned fitness tensor will also preserve those batch
dimensions. Please note, however, that if the <code>dtype</code> of the problem
is <code>object</code>, additional batch dimensions are not supported.</p>
<p><strong>Notes on vmap.</strong>
<code>ProblemBoundEvaluator</code> is a shallow wrapper around a <code>Problem</code> object.
It does NOT transform the underlying problem object to its stateless
counterpart, and therefore it does NOT conform to pure functional
programming paradigm. Being stateful, it will NOT work correctly with
<code>vmap</code>. For batched evaluations, it is recommended to use extra batch
dimensions, instead of using <code>vmap</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>obj_index</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The index of the objective according to which the
evaluations will be done. If the problem is single-objective,
<code>obj_index</code> can be omitted. If the problem is multi-objective
and <code>obj_index</code> is omitted, the callable evaluator will return
multi-dimensional tensors that express the fitnesses for all
objectives (where the rightmost dimension size is equal to
the number of objectives). If the problem is multi-objective
and <code>obj_index</code> is given, the callable evaluator will return
tensors that express the fitnesses of the specified objective.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3309">3309</a></span>
<span class="normal"><a href="#__codelineno-0-3310">3310</a></span>
<span class="normal"><a href="#__codelineno-0-3311">3311</a></span>
<span class="normal"><a href="#__codelineno-0-3312">3312</a></span>
<span class="normal"><a href="#__codelineno-0-3313">3313</a></span>
<span class="normal"><a href="#__codelineno-0-3314">3314</a></span>
<span class="normal"><a href="#__codelineno-0-3315">3315</a></span>
<span class="normal"><a href="#__codelineno-0-3316">3316</a></span>
<span class="normal"><a href="#__codelineno-0-3317">3317</a></span>
<span class="normal"><a href="#__codelineno-0-3318">3318</a></span>
<span class="normal"><a href="#__codelineno-0-3319">3319</a></span>
<span class="normal"><a href="#__codelineno-0-3320">3320</a></span>
<span class="normal"><a href="#__codelineno-0-3321">3321</a></span>
<span class="normal"><a href="#__codelineno-0-3322">3322</a></span>
<span class="normal"><a href="#__codelineno-0-3323">3323</a></span>
<span class="normal"><a href="#__codelineno-0-3324">3324</a></span>
<span class="normal"><a href="#__codelineno-0-3325">3325</a></span>
<span class="normal"><a href="#__codelineno-0-3326">3326</a></span>
<span class="normal"><a href="#__codelineno-0-3327">3327</a></span>
<span class="normal"><a href="#__codelineno-0-3328">3328</a></span>
<span class="normal"><a href="#__codelineno-0-3329">3329</a></span>
<span class="normal"><a href="#__codelineno-0-3330">3330</a></span>
<span class="normal"><a href="#__codelineno-0-3331">3331</a></span>
<span class="normal"><a href="#__codelineno-0-3332">3332</a></span>
<span class="normal"><a href="#__codelineno-0-3333">3333</a></span>
<span class="normal"><a href="#__codelineno-0-3334">3334</a></span>
<span class="normal"><a href="#__codelineno-0-3335">3335</a></span>
<span class="normal"><a href="#__codelineno-0-3336">3336</a></span>
<span class="normal"><a href="#__codelineno-0-3337">3337</a></span>
<span class="normal"><a href="#__codelineno-0-3338">3338</a></span>
<span class="normal"><a href="#__codelineno-0-3339">3339</a></span>
<span class="normal"><a href="#__codelineno-0-3340">3340</a></span>
<span class="normal"><a href="#__codelineno-0-3341">3341</a></span>
<span class="normal"><a href="#__codelineno-0-3342">3342</a></span>
<span class="normal"><a href="#__codelineno-0-3343">3343</a></span>
<span class="normal"><a href="#__codelineno-0-3344">3344</a></span>
<span class="normal"><a href="#__codelineno-0-3345">3345</a></span>
<span class="normal"><a href="#__codelineno-0-3346">3346</a></span>
<span class="normal"><a href="#__codelineno-0-3347">3347</a></span>
<span class="normal"><a href="#__codelineno-0-3348">3348</a></span>
<span class="normal"><a href="#__codelineno-0-3349">3349</a></span>
<span class="normal"><a href="#__codelineno-0-3350">3350</a></span>
<span class="normal"><a href="#__codelineno-0-3351">3351</a></span>
<span class="normal"><a href="#__codelineno-0-3352">3352</a></span>
<span class="normal"><a href="#__codelineno-0-3353">3353</a></span>
<span class="normal"><a href="#__codelineno-0-3354">3354</a></span>
<span class="normal"><a href="#__codelineno-0-3355">3355</a></span>
<span class="normal"><a href="#__codelineno-0-3356">3356</a></span>
<span class="normal"><a href="#__codelineno-0-3357">3357</a></span>
<span class="normal"><a href="#__codelineno-0-3358">3358</a></span>
<span class="normal"><a href="#__codelineno-0-3359">3359</a></span>
<span class="normal"><a href="#__codelineno-0-3360">3360</a></span>
<span class="normal"><a href="#__codelineno-0-3361">3361</a></span>
<span class="normal"><a href="#__codelineno-0-3362">3362</a></span>
<span class="normal"><a href="#__codelineno-0-3363">3363</a></span>
<span class="normal"><a href="#__codelineno-0-3364">3364</a></span>
<span class="normal"><a href="#__codelineno-0-3365">3365</a></span>
<span class="normal"><a href="#__codelineno-0-3366">3366</a></span>
<span class="normal"><a href="#__codelineno-0-3367">3367</a></span>
<span class="normal"><a href="#__codelineno-0-3368">3368</a></span>
<span class="normal"><a href="#__codelineno-0-3369">3369</a></span>
<span class="normal"><a href="#__codelineno-0-3370">3370</a></span>
<span class="normal"><a href="#__codelineno-0-3371">3371</a></span>
<span class="normal"><a href="#__codelineno-0-3372">3372</a></span>
<span class="normal"><a href="#__codelineno-0-3373">3373</a></span>
<span class="normal"><a href="#__codelineno-0-3374">3374</a></span>
<span class="normal"><a href="#__codelineno-0-3375">3375</a></span>
<span class="normal"><a href="#__codelineno-0-3376">3376</a></span>
<span class="normal"><a href="#__codelineno-0-3377">3377</a></span>
<span class="normal"><a href="#__codelineno-0-3378">3378</a></span>
<span class="normal"><a href="#__codelineno-0-3379">3379</a></span>
<span class="normal"><a href="#__codelineno-0-3380">3380</a></span>
<span class="normal"><a href="#__codelineno-0-3381">3381</a></span>
<span class="normal"><a href="#__codelineno-0-3382">3382</a></span>
<span class="normal"><a href="#__codelineno-0-3383">3383</a></span>
<span class="normal"><a href="#__codelineno-0-3384">3384</a></span>
<span class="normal"><a href="#__codelineno-0-3385">3385</a></span>
<span class="normal"><a href="#__codelineno-0-3386">3386</a></span>
<span class="normal"><a href="#__codelineno-0-3387">3387</a></span>
<span class="normal"><a href="#__codelineno-0-3388">3388</a></span>
<span class="normal"><a href="#__codelineno-0-3389">3389</a></span>
<span class="normal"><a href="#__codelineno-0-3390">3390</a></span>
<span class="normal"><a href="#__codelineno-0-3391">3391</a></span>
<span class="normal"><a href="#__codelineno-0-3392">3392</a></span>
<span class="normal"><a href="#__codelineno-0-3393">3393</a></span>
<span class="normal"><a href="#__codelineno-0-3394">3394</a></span>
<span class="normal"><a href="#__codelineno-0-3395">3395</a></span>
<span class="normal"><a href="#__codelineno-0-3396">3396</a></span>
<span class="normal"><a href="#__codelineno-0-3397">3397</a></span>
<span class="normal"><a href="#__codelineno-0-3398">3398</a></span>
<span class="normal"><a href="#__codelineno-0-3399">3399</a></span>
<span class="normal"><a href="#__codelineno-0-3400">3400</a></span>
<span class="normal"><a href="#__codelineno-0-3401">3401</a></span>
<span class="normal"><a href="#__codelineno-0-3402">3402</a></span>
<span class="normal"><a href="#__codelineno-0-3403">3403</a></span>
<span class="normal"><a href="#__codelineno-0-3404">3404</a></span>
<span class="normal"><a href="#__codelineno-0-3405">3405</a></span>
<span class="normal"><a href="#__codelineno-0-3406">3406</a></span>
<span class="normal"><a href="#__codelineno-0-3407">3407</a></span>
<span class="normal"><a href="#__codelineno-0-3408">3408</a></span>
<span class="normal"><a href="#__codelineno-0-3409">3409</a></span>
<span class="normal"><a href="#__codelineno-0-3410">3410</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-3309" name="__codelineno-0-3309"></a><span class="k">def</span><span class="w"> </span><span class="nf">make_callable_evaluator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ProblemBoundEvaluator&quot;</span><span class="p">:</span>
<a id="__codelineno-0-3310" name="__codelineno-0-3310"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-3311" name="__codelineno-0-3311"></a><span class="sd">    Get a callable evaluator for evaluating the given solutions.</span>
<a id="__codelineno-0-3312" name="__codelineno-0-3312"></a>
<a id="__codelineno-0-3313" name="__codelineno-0-3313"></a><span class="sd">    Let us assume that we have a [Problem][evotorch.core.Problem]</span>
<a id="__codelineno-0-3314" name="__codelineno-0-3314"></a><span class="sd">    declared like this:</span>
<a id="__codelineno-0-3315" name="__codelineno-0-3315"></a>
<a id="__codelineno-0-3316" name="__codelineno-0-3316"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-3317" name="__codelineno-0-3317"></a><span class="sd">    from evotorch import Problem</span>
<a id="__codelineno-0-3318" name="__codelineno-0-3318"></a>
<a id="__codelineno-0-3319" name="__codelineno-0-3319"></a><span class="sd">    my_problem = Problem(</span>
<a id="__codelineno-0-3320" name="__codelineno-0-3320"></a><span class="sd">        &quot;min&quot;,</span>
<a id="__codelineno-0-3321" name="__codelineno-0-3321"></a><span class="sd">        fitness_function_goes_here,</span>
<a id="__codelineno-0-3322" name="__codelineno-0-3322"></a><span class="sd">        ...,</span>
<a id="__codelineno-0-3323" name="__codelineno-0-3323"></a><span class="sd">    )</span>
<a id="__codelineno-0-3324" name="__codelineno-0-3324"></a><span class="sd">    ```</span>
<a id="__codelineno-0-3325" name="__codelineno-0-3325"></a>
<a id="__codelineno-0-3326" name="__codelineno-0-3326"></a><span class="sd">    Using the regular API of EvoTorch, one has to generate solutions for this</span>
<a id="__codelineno-0-3327" name="__codelineno-0-3327"></a><span class="sd">    problem as follows:</span>
<a id="__codelineno-0-3328" name="__codelineno-0-3328"></a>
<a id="__codelineno-0-3329" name="__codelineno-0-3329"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-3330" name="__codelineno-0-3330"></a><span class="sd">    population_size = ...</span>
<a id="__codelineno-0-3331" name="__codelineno-0-3331"></a><span class="sd">    my_solutions = my_problem.generate_batch(population_size)</span>
<a id="__codelineno-0-3332" name="__codelineno-0-3332"></a><span class="sd">    ```</span>
<a id="__codelineno-0-3333" name="__codelineno-0-3333"></a>
<a id="__codelineno-0-3334" name="__codelineno-0-3334"></a><span class="sd">    For editing the decision values within the</span>
<a id="__codelineno-0-3335" name="__codelineno-0-3335"></a><span class="sd">    [SolutionBatch][evotorch.core.SolutionBatch] `my_solutions`, one has to</span>
<a id="__codelineno-0-3336" name="__codelineno-0-3336"></a><span class="sd">    do the following:</span>
<a id="__codelineno-0-3337" name="__codelineno-0-3337"></a>
<a id="__codelineno-0-3338" name="__codelineno-0-3338"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-3339" name="__codelineno-0-3339"></a><span class="sd">    new_decision_values = ...</span>
<a id="__codelineno-0-3340" name="__codelineno-0-3340"></a><span class="sd">    my_solutions.set_values(new_decision_values)</span>
<a id="__codelineno-0-3341" name="__codelineno-0-3341"></a><span class="sd">    ```</span>
<a id="__codelineno-0-3342" name="__codelineno-0-3342"></a>
<a id="__codelineno-0-3343" name="__codelineno-0-3343"></a><span class="sd">    Finally, to evaluate `my_solutions`, one would have to do these:</span>
<a id="__codelineno-0-3344" name="__codelineno-0-3344"></a>
<a id="__codelineno-0-3345" name="__codelineno-0-3345"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-3346" name="__codelineno-0-3346"></a><span class="sd">    my_problem.evaluate(my_solutions)</span>
<a id="__codelineno-0-3347" name="__codelineno-0-3347"></a><span class="sd">    fitnesses = my_problem.evals</span>
<a id="__codelineno-0-3348" name="__codelineno-0-3348"></a><span class="sd">    ```</span>
<a id="__codelineno-0-3349" name="__codelineno-0-3349"></a>
<a id="__codelineno-0-3350" name="__codelineno-0-3350"></a><span class="sd">    One could desire a different interface which is more compatible with</span>
<a id="__codelineno-0-3351" name="__codelineno-0-3351"></a><span class="sd">    functional programming paradigm, especially when planning to use the</span>
<a id="__codelineno-0-3352" name="__codelineno-0-3352"></a><span class="sd">    functional algorithms (such as, for example, the functional</span>
<a id="__codelineno-0-3353" name="__codelineno-0-3353"></a><span class="sd">    [cem][evotorch.algorithms.functional.funccem.cem]).</span>
<a id="__codelineno-0-3354" name="__codelineno-0-3354"></a><span class="sd">    To achieve this, one can do the following:</span>
<a id="__codelineno-0-3355" name="__codelineno-0-3355"></a>
<a id="__codelineno-0-3356" name="__codelineno-0-3356"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-3357" name="__codelineno-0-3357"></a><span class="sd">    f = my_problem.make_callable_evaluator()</span>
<a id="__codelineno-0-3358" name="__codelineno-0-3358"></a><span class="sd">    ```</span>
<a id="__codelineno-0-3359" name="__codelineno-0-3359"></a>
<a id="__codelineno-0-3360" name="__codelineno-0-3360"></a><span class="sd">    Now, we have a new object `f`, which behaves like a function.</span>
<a id="__codelineno-0-3361" name="__codelineno-0-3361"></a><span class="sd">    This function-like object expects a tensor of decision values, and</span>
<a id="__codelineno-0-3362" name="__codelineno-0-3362"></a><span class="sd">    returns fitnesses, as shown below:</span>
<a id="__codelineno-0-3363" name="__codelineno-0-3363"></a>
<a id="__codelineno-0-3364" name="__codelineno-0-3364"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-3365" name="__codelineno-0-3365"></a><span class="sd">    random_decision_values = torch.randn(</span>
<a id="__codelineno-0-3366" name="__codelineno-0-3366"></a><span class="sd">        population_size,</span>
<a id="__codelineno-0-3367" name="__codelineno-0-3367"></a><span class="sd">        my_problem.solution_length,</span>
<a id="__codelineno-0-3368" name="__codelineno-0-3368"></a><span class="sd">        dtype=my_problem.dtype,</span>
<a id="__codelineno-0-3369" name="__codelineno-0-3369"></a><span class="sd">    )</span>
<a id="__codelineno-0-3370" name="__codelineno-0-3370"></a>
<a id="__codelineno-0-3371" name="__codelineno-0-3371"></a><span class="sd">    fitnesses = f(random_decision_values)</span>
<a id="__codelineno-0-3372" name="__codelineno-0-3372"></a><span class="sd">    ```</span>
<a id="__codelineno-0-3373" name="__codelineno-0-3373"></a>
<a id="__codelineno-0-3374" name="__codelineno-0-3374"></a><span class="sd">    **Parallelized fitness evaluation.**</span>
<a id="__codelineno-0-3375" name="__codelineno-0-3375"></a><span class="sd">    If a `Problem` object is configured to use parallelized evaluation with</span>
<a id="__codelineno-0-3376" name="__codelineno-0-3376"></a><span class="sd">    the help of multiple actors, a callable evaluator made out of that</span>
<a id="__codelineno-0-3377" name="__codelineno-0-3377"></a><span class="sd">    `Problem` object will also make use of those multiple actors.</span>
<a id="__codelineno-0-3378" name="__codelineno-0-3378"></a>
<a id="__codelineno-0-3379" name="__codelineno-0-3379"></a><span class="sd">    **Additional batch dimensions.**</span>
<a id="__codelineno-0-3380" name="__codelineno-0-3380"></a><span class="sd">    If a callable evaluator receives a tensor with 3 or more dimensions,</span>
<a id="__codelineno-0-3381" name="__codelineno-0-3381"></a><span class="sd">    those extra leftmost dimensions will be considered as batch</span>
<a id="__codelineno-0-3382" name="__codelineno-0-3382"></a><span class="sd">    dimensions. The returned fitness tensor will also preserve those batch</span>
<a id="__codelineno-0-3383" name="__codelineno-0-3383"></a><span class="sd">    dimensions. Please note, however, that if the `dtype` of the problem</span>
<a id="__codelineno-0-3384" name="__codelineno-0-3384"></a><span class="sd">    is `object`, additional batch dimensions are not supported.</span>
<a id="__codelineno-0-3385" name="__codelineno-0-3385"></a>
<a id="__codelineno-0-3386" name="__codelineno-0-3386"></a><span class="sd">    **Notes on vmap.**</span>
<a id="__codelineno-0-3387" name="__codelineno-0-3387"></a><span class="sd">    `ProblemBoundEvaluator` is a shallow wrapper around a `Problem` object.</span>
<a id="__codelineno-0-3388" name="__codelineno-0-3388"></a><span class="sd">    It does NOT transform the underlying problem object to its stateless</span>
<a id="__codelineno-0-3389" name="__codelineno-0-3389"></a><span class="sd">    counterpart, and therefore it does NOT conform to pure functional</span>
<a id="__codelineno-0-3390" name="__codelineno-0-3390"></a><span class="sd">    programming paradigm. Being stateful, it will NOT work correctly with</span>
<a id="__codelineno-0-3391" name="__codelineno-0-3391"></a><span class="sd">    `vmap`. For batched evaluations, it is recommended to use extra batch</span>
<a id="__codelineno-0-3392" name="__codelineno-0-3392"></a><span class="sd">    dimensions, instead of using `vmap`.</span>
<a id="__codelineno-0-3393" name="__codelineno-0-3393"></a>
<a id="__codelineno-0-3394" name="__codelineno-0-3394"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-3395" name="__codelineno-0-3395"></a><span class="sd">        obj_index: The index of the objective according to which the</span>
<a id="__codelineno-0-3396" name="__codelineno-0-3396"></a><span class="sd">            evaluations will be done. If the problem is single-objective,</span>
<a id="__codelineno-0-3397" name="__codelineno-0-3397"></a><span class="sd">            `obj_index` can be omitted. If the problem is multi-objective</span>
<a id="__codelineno-0-3398" name="__codelineno-0-3398"></a><span class="sd">            and `obj_index` is omitted, the callable evaluator will return</span>
<a id="__codelineno-0-3399" name="__codelineno-0-3399"></a><span class="sd">            multi-dimensional tensors that express the fitnesses for all</span>
<a id="__codelineno-0-3400" name="__codelineno-0-3400"></a><span class="sd">            objectives (where the rightmost dimension size is equal to</span>
<a id="__codelineno-0-3401" name="__codelineno-0-3401"></a><span class="sd">            the number of objectives). If the problem is multi-objective</span>
<a id="__codelineno-0-3402" name="__codelineno-0-3402"></a><span class="sd">            and `obj_index` is given, the callable evaluator will return</span>
<a id="__codelineno-0-3403" name="__codelineno-0-3403"></a><span class="sd">            tensors that express the fitnesses of the specified objective.</span>
<a id="__codelineno-0-3404" name="__codelineno-0-3404"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-3405" name="__codelineno-0-3405"></a><span class="sd">        A callable fitness evaluator, bound to this problem object.</span>
<a id="__codelineno-0-3406" name="__codelineno-0-3406"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-3407" name="__codelineno-0-3407"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="nb">object</span><span class="p">:</span>
<a id="__codelineno-0-3408" name="__codelineno-0-3408"></a>        <span class="k">return</span> <span class="n">ObjectTypedProblemBoundEvaluator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_index</span><span class="o">=</span><span class="n">obj_index</span><span class="p">)</span>
<a id="__codelineno-0-3409" name="__codelineno-0-3409"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3410" name="__codelineno-0-3410"></a>        <span class="k">return</span> <span class="n">ProblemBoundEvaluator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_index</span><span class="o">=</span><span class="n">obj_index</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Problem.manual_seed" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">manual_seed</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#evotorch.Problem.manual_seed" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Provide a manual seed for the Problem object.</p>
<p>If the given seed is None, then the Problem object will remove
its own stored generator, and start using the global generator
of PyTorch instead.
If the given seed is an integer, then the Problem object will
instantiate its own generator with the given seed.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>seed</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None for using the global PyTorch generator; an integer
for instantiating a new PyTorch generator with this given
integer seed, specific to this Problem object.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1616">1616</a></span>
<span class="normal"><a href="#__codelineno-0-1617">1617</a></span>
<span class="normal"><a href="#__codelineno-0-1618">1618</a></span>
<span class="normal"><a href="#__codelineno-0-1619">1619</a></span>
<span class="normal"><a href="#__codelineno-0-1620">1620</a></span>
<span class="normal"><a href="#__codelineno-0-1621">1621</a></span>
<span class="normal"><a href="#__codelineno-0-1622">1622</a></span>
<span class="normal"><a href="#__codelineno-0-1623">1623</a></span>
<span class="normal"><a href="#__codelineno-0-1624">1624</a></span>
<span class="normal"><a href="#__codelineno-0-1625">1625</a></span>
<span class="normal"><a href="#__codelineno-0-1626">1626</a></span>
<span class="normal"><a href="#__codelineno-0-1627">1627</a></span>
<span class="normal"><a href="#__codelineno-0-1628">1628</a></span>
<span class="normal"><a href="#__codelineno-0-1629">1629</a></span>
<span class="normal"><a href="#__codelineno-0-1630">1630</a></span>
<span class="normal"><a href="#__codelineno-0-1631">1631</a></span>
<span class="normal"><a href="#__codelineno-0-1632">1632</a></span>
<span class="normal"><a href="#__codelineno-0-1633">1633</a></span>
<span class="normal"><a href="#__codelineno-0-1634">1634</a></span>
<span class="normal"><a href="#__codelineno-0-1635">1635</a></span>
<span class="normal"><a href="#__codelineno-0-1636">1636</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1616" name="__codelineno-0-1616"></a><span class="k">def</span><span class="w"> </span><span class="nf">manual_seed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-1617" name="__codelineno-0-1617"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1618" name="__codelineno-0-1618"></a><span class="sd">    Provide a manual seed for the Problem object.</span>
<a id="__codelineno-0-1619" name="__codelineno-0-1619"></a>
<a id="__codelineno-0-1620" name="__codelineno-0-1620"></a><span class="sd">    If the given seed is None, then the Problem object will remove</span>
<a id="__codelineno-0-1621" name="__codelineno-0-1621"></a><span class="sd">    its own stored generator, and start using the global generator</span>
<a id="__codelineno-0-1622" name="__codelineno-0-1622"></a><span class="sd">    of PyTorch instead.</span>
<a id="__codelineno-0-1623" name="__codelineno-0-1623"></a><span class="sd">    If the given seed is an integer, then the Problem object will</span>
<a id="__codelineno-0-1624" name="__codelineno-0-1624"></a><span class="sd">    instantiate its own generator with the given seed.</span>
<a id="__codelineno-0-1625" name="__codelineno-0-1625"></a>
<a id="__codelineno-0-1626" name="__codelineno-0-1626"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1627" name="__codelineno-0-1627"></a><span class="sd">        seed: None for using the global PyTorch generator; an integer</span>
<a id="__codelineno-0-1628" name="__codelineno-0-1628"></a><span class="sd">            for instantiating a new PyTorch generator with this given</span>
<a id="__codelineno-0-1629" name="__codelineno-0-1629"></a><span class="sd">            integer seed, specific to this Problem object.</span>
<a id="__codelineno-0-1630" name="__codelineno-0-1630"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1631" name="__codelineno-0-1631"></a>    <span class="k">if</span> <span class="n">seed</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1632" name="__codelineno-0-1632"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_generator</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1633" name="__codelineno-0-1633"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1634" name="__codelineno-0-1634"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generator</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1635" name="__codelineno-0-1635"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_generator</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">Generator</span><span class="p">(</span><span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-1636" name="__codelineno-0-1636"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_generator</span><span class="o">.</span><span class="n">manual_seed</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Problem.normalize_obj_index" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">normalize_obj_index</span><span class="p">(</span><span class="n">obj_index</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#evotorch.Problem.normalize_obj_index" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Normalize the objective index.</p>
<p>If the provided index is non-negative, it is ensured that the index
is valid.</p>
<p>If the provided index is negative, the objectives are counted in the
reverse order, and the corresponding non-negative index is returned.
For example, -1 is converted to a non-negative integer corresponding to
the last objective.</p>
<p>If the provided index is None and if the problem is single-objective,
the returned value is 0, which represents the only objective.</p>
<p>If the provided index is None and if the problem is multi-objective,
an error is raised.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>obj_index</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The non-normalized objective index.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2672">2672</a></span>
<span class="normal"><a href="#__codelineno-0-2673">2673</a></span>
<span class="normal"><a href="#__codelineno-0-2674">2674</a></span>
<span class="normal"><a href="#__codelineno-0-2675">2675</a></span>
<span class="normal"><a href="#__codelineno-0-2676">2676</a></span>
<span class="normal"><a href="#__codelineno-0-2677">2677</a></span>
<span class="normal"><a href="#__codelineno-0-2678">2678</a></span>
<span class="normal"><a href="#__codelineno-0-2679">2679</a></span>
<span class="normal"><a href="#__codelineno-0-2680">2680</a></span>
<span class="normal"><a href="#__codelineno-0-2681">2681</a></span>
<span class="normal"><a href="#__codelineno-0-2682">2682</a></span>
<span class="normal"><a href="#__codelineno-0-2683">2683</a></span>
<span class="normal"><a href="#__codelineno-0-2684">2684</a></span>
<span class="normal"><a href="#__codelineno-0-2685">2685</a></span>
<span class="normal"><a href="#__codelineno-0-2686">2686</a></span>
<span class="normal"><a href="#__codelineno-0-2687">2687</a></span>
<span class="normal"><a href="#__codelineno-0-2688">2688</a></span>
<span class="normal"><a href="#__codelineno-0-2689">2689</a></span>
<span class="normal"><a href="#__codelineno-0-2690">2690</a></span>
<span class="normal"><a href="#__codelineno-0-2691">2691</a></span>
<span class="normal"><a href="#__codelineno-0-2692">2692</a></span>
<span class="normal"><a href="#__codelineno-0-2693">2693</a></span>
<span class="normal"><a href="#__codelineno-0-2694">2694</a></span>
<span class="normal"><a href="#__codelineno-0-2695">2695</a></span>
<span class="normal"><a href="#__codelineno-0-2696">2696</a></span>
<span class="normal"><a href="#__codelineno-0-2697">2697</a></span>
<span class="normal"><a href="#__codelineno-0-2698">2698</a></span>
<span class="normal"><a href="#__codelineno-0-2699">2699</a></span>
<span class="normal"><a href="#__codelineno-0-2700">2700</a></span>
<span class="normal"><a href="#__codelineno-0-2701">2701</a></span>
<span class="normal"><a href="#__codelineno-0-2702">2702</a></span>
<span class="normal"><a href="#__codelineno-0-2703">2703</a></span>
<span class="normal"><a href="#__codelineno-0-2704">2704</a></span>
<span class="normal"><a href="#__codelineno-0-2705">2705</a></span>
<span class="normal"><a href="#__codelineno-0-2706">2706</a></span>
<span class="normal"><a href="#__codelineno-0-2707">2707</a></span>
<span class="normal"><a href="#__codelineno-0-2708">2708</a></span>
<span class="normal"><a href="#__codelineno-0-2709">2709</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-2672" name="__codelineno-0-2672"></a><span class="k">def</span><span class="w"> </span><span class="nf">normalize_obj_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-2673" name="__codelineno-0-2673"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2674" name="__codelineno-0-2674"></a><span class="sd">    Normalize the objective index.</span>
<a id="__codelineno-0-2675" name="__codelineno-0-2675"></a>
<a id="__codelineno-0-2676" name="__codelineno-0-2676"></a><span class="sd">    If the provided index is non-negative, it is ensured that the index</span>
<a id="__codelineno-0-2677" name="__codelineno-0-2677"></a><span class="sd">    is valid.</span>
<a id="__codelineno-0-2678" name="__codelineno-0-2678"></a>
<a id="__codelineno-0-2679" name="__codelineno-0-2679"></a><span class="sd">    If the provided index is negative, the objectives are counted in the</span>
<a id="__codelineno-0-2680" name="__codelineno-0-2680"></a><span class="sd">    reverse order, and the corresponding non-negative index is returned.</span>
<a id="__codelineno-0-2681" name="__codelineno-0-2681"></a><span class="sd">    For example, -1 is converted to a non-negative integer corresponding to</span>
<a id="__codelineno-0-2682" name="__codelineno-0-2682"></a><span class="sd">    the last objective.</span>
<a id="__codelineno-0-2683" name="__codelineno-0-2683"></a>
<a id="__codelineno-0-2684" name="__codelineno-0-2684"></a><span class="sd">    If the provided index is None and if the problem is single-objective,</span>
<a id="__codelineno-0-2685" name="__codelineno-0-2685"></a><span class="sd">    the returned value is 0, which represents the only objective.</span>
<a id="__codelineno-0-2686" name="__codelineno-0-2686"></a>
<a id="__codelineno-0-2687" name="__codelineno-0-2687"></a><span class="sd">    If the provided index is None and if the problem is multi-objective,</span>
<a id="__codelineno-0-2688" name="__codelineno-0-2688"></a><span class="sd">    an error is raised.</span>
<a id="__codelineno-0-2689" name="__codelineno-0-2689"></a>
<a id="__codelineno-0-2690" name="__codelineno-0-2690"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-2691" name="__codelineno-0-2691"></a><span class="sd">        obj_index: The non-normalized objective index.</span>
<a id="__codelineno-0-2692" name="__codelineno-0-2692"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-2693" name="__codelineno-0-2693"></a><span class="sd">        The normalized objective index, as a non-negative integer.</span>
<a id="__codelineno-0-2694" name="__codelineno-0-2694"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2695" name="__codelineno-0-2695"></a>    <span class="k">if</span> <span class="n">obj_index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2696" name="__codelineno-0-2696"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">senses</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-2697" name="__codelineno-0-2697"></a>            <span class="k">return</span> <span class="mi">0</span>
<a id="__codelineno-0-2698" name="__codelineno-0-2698"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2699" name="__codelineno-0-2699"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-2700" name="__codelineno-0-2700"></a>                <span class="s2">&quot;This problem is multi-objective, therefore, an explicit objective index was expected.&quot;</span>
<a id="__codelineno-0-2701" name="__codelineno-0-2701"></a>                <span class="s2">&quot; However, `obj_index` was found to be None.&quot;</span>
<a id="__codelineno-0-2702" name="__codelineno-0-2702"></a>            <span class="p">)</span>
<a id="__codelineno-0-2703" name="__codelineno-0-2703"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2704" name="__codelineno-0-2704"></a>        <span class="n">obj_index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">obj_index</span><span class="p">)</span>
<a id="__codelineno-0-2705" name="__codelineno-0-2705"></a>        <span class="k">if</span> <span class="n">obj_index</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-2706" name="__codelineno-0-2706"></a>            <span class="n">obj_index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">senses</span><span class="p">)</span> <span class="o">+</span> <span class="n">obj_index</span>
<a id="__codelineno-0-2707" name="__codelineno-0-2707"></a>        <span class="k">if</span> <span class="n">obj_index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">obj_index</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">senses</span><span class="p">):</span>
<a id="__codelineno-0-2708" name="__codelineno-0-2708"></a>            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;Objective index out of range.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2709" name="__codelineno-0-2709"></a>        <span class="k">return</span> <span class="n">obj_index</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Problem.sample_and_compute_gradients" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sample_and_compute_gradients</span><span class="p">(</span><span class="n">distribution</span><span class="p">,</span> <span class="n">popsize</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">num_interactions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">popsize_max</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">obj_index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ranking_method</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">with_stats</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ensure_even_popsize</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#evotorch.Problem.sample_and_compute_gradients" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sample new solutions from the distribution and compute gradients.</p>
<p>The distribution can then be updated according to the computed
gradients.</p>
<p>If the problem is not parallelized, and <code>with_stats</code> is False,
then the result will be a single dictionary of gradients.
For example, in the case of a Gaussian distribution, the returned
gradients dictionary would look like this:</p>
<div class="highlight"><pre><span></span><code>{
    &quot;mu&quot;: ...,     # the gradient for the mean
    &quot;sigma&quot;: ...,  # the gradient for the standard deviation
}
</code></pre></div>
<p>If the problem is not parallelized, and <code>with_stats</code> is True,
then the result will be a dictionary which contains in itself
the gradients dictionary, and additional elements for providing
further information. In the case of a Gaussian distribution,
the returned dictionary with additional stats would look like
this:</p>
<div class="highlight"><pre><span></span><code>{
    &quot;gradients&quot;: {
        &quot;mu&quot;: ...,     # the gradient for the mean
        &quot;sigma&quot;: ...,  # the gradient for the standard deviation
    },
    &quot;num_solutions&quot;: ...,  # how many solutions were sampled
    &quot;mean_eval&quot;: ...,      # Mean of all evaluations
}
</code></pre></div>
<p>If the problem is parallelized, then the gradient computation will
be distributed among the remote actors. In more details, each actor
will sample its own solutions (such that the total population size
across all remote actors will be near the provided <code>popsize</code>)
and will compute its own gradients, and will produce its own
additional stats (if <code>with_stats</code> is given as True).
These remote results will then be collected by the main process,
and the final result of this method will be a list of dictionaries,
each dictionary being the result of a remote gradient computation.</p>
<p>The sampled solutions are temporary, and will not be kept
(and will not be returned).</p>
<p>To customize how solutions are sampled and how gradients are
computed, one is encouraged to override
<code>_sample_and_compute_gradients(...)</code> (instead of overriding this
method directly.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>distribution</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The search distribution from which the solutions
will be sampled, and according to which the gradients will
be computed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>popsize</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of solutions which will be sampled.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>num_interactions</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of simulator interactions that must
be completed (more solutions will be sampled until this
threshold is reached). This argument is to be used when
the problem has characteristics similar to reinforcement
learning, and an adaptive population size, depending on
the interactions made, is desired.
Otherwise, one can leave this argument as None, in which
case, there will not be any threshold based on number
of interactions.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>popsize_max</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>To be used when <code>num_interactions</code> is provided,
as an additional criterion for ending the solution sampling
phase. This argument can be used to prevent the population
size from growing too much while trying to satisfy the
<code>num_interactions</code>. If not needed, <code>popsize_max</code> can be left
as None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>obj_index</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Index of the objective according to which the gradients
will be computed. Can be left as None if the problem has only
one objective.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>ranking_method</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The solution ranking method to be used when
computing the gradients.
If not specified, the raw fitnesses will be used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>with_stats</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If given as False, then the results dictionary will
only contain the gradients information. If given as True,
then the results dictionary will contain within itself
the gradients dictionary, and also additional elements for
providing further information.
The default is True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>ensure_even_popsize</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>ensure_even_popsize</code> is True and the
problem is not parallelized, then a <code>popsize</code> given as an odd
number will cause an error. If <code>ensure_even_popsize</code> is True
and the problem is parallelized, then the remote actors will
sample their own sub-populations in such a way that their
sizes are even.
If <code>ensure_even_popsize</code> is False, whether or not the
<code>popsize</code> is even will not be checked.
When the provided <code>distribution</code> is a symmetric (or
"mirrored", or "antithetic"), then this argument must be
given as True.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2762">2762</a></span>
<span class="normal"><a href="#__codelineno-0-2763">2763</a></span>
<span class="normal"><a href="#__codelineno-0-2764">2764</a></span>
<span class="normal"><a href="#__codelineno-0-2765">2765</a></span>
<span class="normal"><a href="#__codelineno-0-2766">2766</a></span>
<span class="normal"><a href="#__codelineno-0-2767">2767</a></span>
<span class="normal"><a href="#__codelineno-0-2768">2768</a></span>
<span class="normal"><a href="#__codelineno-0-2769">2769</a></span>
<span class="normal"><a href="#__codelineno-0-2770">2770</a></span>
<span class="normal"><a href="#__codelineno-0-2771">2771</a></span>
<span class="normal"><a href="#__codelineno-0-2772">2772</a></span>
<span class="normal"><a href="#__codelineno-0-2773">2773</a></span>
<span class="normal"><a href="#__codelineno-0-2774">2774</a></span>
<span class="normal"><a href="#__codelineno-0-2775">2775</a></span>
<span class="normal"><a href="#__codelineno-0-2776">2776</a></span>
<span class="normal"><a href="#__codelineno-0-2777">2777</a></span>
<span class="normal"><a href="#__codelineno-0-2778">2778</a></span>
<span class="normal"><a href="#__codelineno-0-2779">2779</a></span>
<span class="normal"><a href="#__codelineno-0-2780">2780</a></span>
<span class="normal"><a href="#__codelineno-0-2781">2781</a></span>
<span class="normal"><a href="#__codelineno-0-2782">2782</a></span>
<span class="normal"><a href="#__codelineno-0-2783">2783</a></span>
<span class="normal"><a href="#__codelineno-0-2784">2784</a></span>
<span class="normal"><a href="#__codelineno-0-2785">2785</a></span>
<span class="normal"><a href="#__codelineno-0-2786">2786</a></span>
<span class="normal"><a href="#__codelineno-0-2787">2787</a></span>
<span class="normal"><a href="#__codelineno-0-2788">2788</a></span>
<span class="normal"><a href="#__codelineno-0-2789">2789</a></span>
<span class="normal"><a href="#__codelineno-0-2790">2790</a></span>
<span class="normal"><a href="#__codelineno-0-2791">2791</a></span>
<span class="normal"><a href="#__codelineno-0-2792">2792</a></span>
<span class="normal"><a href="#__codelineno-0-2793">2793</a></span>
<span class="normal"><a href="#__codelineno-0-2794">2794</a></span>
<span class="normal"><a href="#__codelineno-0-2795">2795</a></span>
<span class="normal"><a href="#__codelineno-0-2796">2796</a></span>
<span class="normal"><a href="#__codelineno-0-2797">2797</a></span>
<span class="normal"><a href="#__codelineno-0-2798">2798</a></span>
<span class="normal"><a href="#__codelineno-0-2799">2799</a></span>
<span class="normal"><a href="#__codelineno-0-2800">2800</a></span>
<span class="normal"><a href="#__codelineno-0-2801">2801</a></span>
<span class="normal"><a href="#__codelineno-0-2802">2802</a></span>
<span class="normal"><a href="#__codelineno-0-2803">2803</a></span>
<span class="normal"><a href="#__codelineno-0-2804">2804</a></span>
<span class="normal"><a href="#__codelineno-0-2805">2805</a></span>
<span class="normal"><a href="#__codelineno-0-2806">2806</a></span>
<span class="normal"><a href="#__codelineno-0-2807">2807</a></span>
<span class="normal"><a href="#__codelineno-0-2808">2808</a></span>
<span class="normal"><a href="#__codelineno-0-2809">2809</a></span>
<span class="normal"><a href="#__codelineno-0-2810">2810</a></span>
<span class="normal"><a href="#__codelineno-0-2811">2811</a></span>
<span class="normal"><a href="#__codelineno-0-2812">2812</a></span>
<span class="normal"><a href="#__codelineno-0-2813">2813</a></span>
<span class="normal"><a href="#__codelineno-0-2814">2814</a></span>
<span class="normal"><a href="#__codelineno-0-2815">2815</a></span>
<span class="normal"><a href="#__codelineno-0-2816">2816</a></span>
<span class="normal"><a href="#__codelineno-0-2817">2817</a></span>
<span class="normal"><a href="#__codelineno-0-2818">2818</a></span>
<span class="normal"><a href="#__codelineno-0-2819">2819</a></span>
<span class="normal"><a href="#__codelineno-0-2820">2820</a></span>
<span class="normal"><a href="#__codelineno-0-2821">2821</a></span>
<span class="normal"><a href="#__codelineno-0-2822">2822</a></span>
<span class="normal"><a href="#__codelineno-0-2823">2823</a></span>
<span class="normal"><a href="#__codelineno-0-2824">2824</a></span>
<span class="normal"><a href="#__codelineno-0-2825">2825</a></span>
<span class="normal"><a href="#__codelineno-0-2826">2826</a></span>
<span class="normal"><a href="#__codelineno-0-2827">2827</a></span>
<span class="normal"><a href="#__codelineno-0-2828">2828</a></span>
<span class="normal"><a href="#__codelineno-0-2829">2829</a></span>
<span class="normal"><a href="#__codelineno-0-2830">2830</a></span>
<span class="normal"><a href="#__codelineno-0-2831">2831</a></span>
<span class="normal"><a href="#__codelineno-0-2832">2832</a></span>
<span class="normal"><a href="#__codelineno-0-2833">2833</a></span>
<span class="normal"><a href="#__codelineno-0-2834">2834</a></span>
<span class="normal"><a href="#__codelineno-0-2835">2835</a></span>
<span class="normal"><a href="#__codelineno-0-2836">2836</a></span>
<span class="normal"><a href="#__codelineno-0-2837">2837</a></span>
<span class="normal"><a href="#__codelineno-0-2838">2838</a></span>
<span class="normal"><a href="#__codelineno-0-2839">2839</a></span>
<span class="normal"><a href="#__codelineno-0-2840">2840</a></span>
<span class="normal"><a href="#__codelineno-0-2841">2841</a></span>
<span class="normal"><a href="#__codelineno-0-2842">2842</a></span>
<span class="normal"><a href="#__codelineno-0-2843">2843</a></span>
<span class="normal"><a href="#__codelineno-0-2844">2844</a></span>
<span class="normal"><a href="#__codelineno-0-2845">2845</a></span>
<span class="normal"><a href="#__codelineno-0-2846">2846</a></span>
<span class="normal"><a href="#__codelineno-0-2847">2847</a></span>
<span class="normal"><a href="#__codelineno-0-2848">2848</a></span>
<span class="normal"><a href="#__codelineno-0-2849">2849</a></span>
<span class="normal"><a href="#__codelineno-0-2850">2850</a></span>
<span class="normal"><a href="#__codelineno-0-2851">2851</a></span>
<span class="normal"><a href="#__codelineno-0-2852">2852</a></span>
<span class="normal"><a href="#__codelineno-0-2853">2853</a></span>
<span class="normal"><a href="#__codelineno-0-2854">2854</a></span>
<span class="normal"><a href="#__codelineno-0-2855">2855</a></span>
<span class="normal"><a href="#__codelineno-0-2856">2856</a></span>
<span class="normal"><a href="#__codelineno-0-2857">2857</a></span>
<span class="normal"><a href="#__codelineno-0-2858">2858</a></span>
<span class="normal"><a href="#__codelineno-0-2859">2859</a></span>
<span class="normal"><a href="#__codelineno-0-2860">2860</a></span>
<span class="normal"><a href="#__codelineno-0-2861">2861</a></span>
<span class="normal"><a href="#__codelineno-0-2862">2862</a></span>
<span class="normal"><a href="#__codelineno-0-2863">2863</a></span>
<span class="normal"><a href="#__codelineno-0-2864">2864</a></span>
<span class="normal"><a href="#__codelineno-0-2865">2865</a></span>
<span class="normal"><a href="#__codelineno-0-2866">2866</a></span>
<span class="normal"><a href="#__codelineno-0-2867">2867</a></span>
<span class="normal"><a href="#__codelineno-0-2868">2868</a></span>
<span class="normal"><a href="#__codelineno-0-2869">2869</a></span>
<span class="normal"><a href="#__codelineno-0-2870">2870</a></span>
<span class="normal"><a href="#__codelineno-0-2871">2871</a></span>
<span class="normal"><a href="#__codelineno-0-2872">2872</a></span>
<span class="normal"><a href="#__codelineno-0-2873">2873</a></span>
<span class="normal"><a href="#__codelineno-0-2874">2874</a></span>
<span class="normal"><a href="#__codelineno-0-2875">2875</a></span>
<span class="normal"><a href="#__codelineno-0-2876">2876</a></span>
<span class="normal"><a href="#__codelineno-0-2877">2877</a></span>
<span class="normal"><a href="#__codelineno-0-2878">2878</a></span>
<span class="normal"><a href="#__codelineno-0-2879">2879</a></span>
<span class="normal"><a href="#__codelineno-0-2880">2880</a></span>
<span class="normal"><a href="#__codelineno-0-2881">2881</a></span>
<span class="normal"><a href="#__codelineno-0-2882">2882</a></span>
<span class="normal"><a href="#__codelineno-0-2883">2883</a></span>
<span class="normal"><a href="#__codelineno-0-2884">2884</a></span>
<span class="normal"><a href="#__codelineno-0-2885">2885</a></span>
<span class="normal"><a href="#__codelineno-0-2886">2886</a></span>
<span class="normal"><a href="#__codelineno-0-2887">2887</a></span>
<span class="normal"><a href="#__codelineno-0-2888">2888</a></span>
<span class="normal"><a href="#__codelineno-0-2889">2889</a></span>
<span class="normal"><a href="#__codelineno-0-2890">2890</a></span>
<span class="normal"><a href="#__codelineno-0-2891">2891</a></span>
<span class="normal"><a href="#__codelineno-0-2892">2892</a></span>
<span class="normal"><a href="#__codelineno-0-2893">2893</a></span>
<span class="normal"><a href="#__codelineno-0-2894">2894</a></span>
<span class="normal"><a href="#__codelineno-0-2895">2895</a></span>
<span class="normal"><a href="#__codelineno-0-2896">2896</a></span>
<span class="normal"><a href="#__codelineno-0-2897">2897</a></span>
<span class="normal"><a href="#__codelineno-0-2898">2898</a></span>
<span class="normal"><a href="#__codelineno-0-2899">2899</a></span>
<span class="normal"><a href="#__codelineno-0-2900">2900</a></span>
<span class="normal"><a href="#__codelineno-0-2901">2901</a></span>
<span class="normal"><a href="#__codelineno-0-2902">2902</a></span>
<span class="normal"><a href="#__codelineno-0-2903">2903</a></span>
<span class="normal"><a href="#__codelineno-0-2904">2904</a></span>
<span class="normal"><a href="#__codelineno-0-2905">2905</a></span>
<span class="normal"><a href="#__codelineno-0-2906">2906</a></span>
<span class="normal"><a href="#__codelineno-0-2907">2907</a></span>
<span class="normal"><a href="#__codelineno-0-2908">2908</a></span>
<span class="normal"><a href="#__codelineno-0-2909">2909</a></span>
<span class="normal"><a href="#__codelineno-0-2910">2910</a></span>
<span class="normal"><a href="#__codelineno-0-2911">2911</a></span>
<span class="normal"><a href="#__codelineno-0-2912">2912</a></span>
<span class="normal"><a href="#__codelineno-0-2913">2913</a></span>
<span class="normal"><a href="#__codelineno-0-2914">2914</a></span>
<span class="normal"><a href="#__codelineno-0-2915">2915</a></span>
<span class="normal"><a href="#__codelineno-0-2916">2916</a></span>
<span class="normal"><a href="#__codelineno-0-2917">2917</a></span>
<span class="normal"><a href="#__codelineno-0-2918">2918</a></span>
<span class="normal"><a href="#__codelineno-0-2919">2919</a></span>
<span class="normal"><a href="#__codelineno-0-2920">2920</a></span>
<span class="normal"><a href="#__codelineno-0-2921">2921</a></span>
<span class="normal"><a href="#__codelineno-0-2922">2922</a></span>
<span class="normal"><a href="#__codelineno-0-2923">2923</a></span>
<span class="normal"><a href="#__codelineno-0-2924">2924</a></span>
<span class="normal"><a href="#__codelineno-0-2925">2925</a></span>
<span class="normal"><a href="#__codelineno-0-2926">2926</a></span>
<span class="normal"><a href="#__codelineno-0-2927">2927</a></span>
<span class="normal"><a href="#__codelineno-0-2928">2928</a></span>
<span class="normal"><a href="#__codelineno-0-2929">2929</a></span>
<span class="normal"><a href="#__codelineno-0-2930">2930</a></span>
<span class="normal"><a href="#__codelineno-0-2931">2931</a></span>
<span class="normal"><a href="#__codelineno-0-2932">2932</a></span>
<span class="normal"><a href="#__codelineno-0-2933">2933</a></span>
<span class="normal"><a href="#__codelineno-0-2934">2934</a></span>
<span class="normal"><a href="#__codelineno-0-2935">2935</a></span>
<span class="normal"><a href="#__codelineno-0-2936">2936</a></span>
<span class="normal"><a href="#__codelineno-0-2937">2937</a></span>
<span class="normal"><a href="#__codelineno-0-2938">2938</a></span>
<span class="normal"><a href="#__codelineno-0-2939">2939</a></span>
<span class="normal"><a href="#__codelineno-0-2940">2940</a></span>
<span class="normal"><a href="#__codelineno-0-2941">2941</a></span>
<span class="normal"><a href="#__codelineno-0-2942">2942</a></span>
<span class="normal"><a href="#__codelineno-0-2943">2943</a></span>
<span class="normal"><a href="#__codelineno-0-2944">2944</a></span>
<span class="normal"><a href="#__codelineno-0-2945">2945</a></span>
<span class="normal"><a href="#__codelineno-0-2946">2946</a></span>
<span class="normal"><a href="#__codelineno-0-2947">2947</a></span>
<span class="normal"><a href="#__codelineno-0-2948">2948</a></span>
<span class="normal"><a href="#__codelineno-0-2949">2949</a></span>
<span class="normal"><a href="#__codelineno-0-2950">2950</a></span>
<span class="normal"><a href="#__codelineno-0-2951">2951</a></span>
<span class="normal"><a href="#__codelineno-0-2952">2952</a></span>
<span class="normal"><a href="#__codelineno-0-2953">2953</a></span>
<span class="normal"><a href="#__codelineno-0-2954">2954</a></span>
<span class="normal"><a href="#__codelineno-0-2955">2955</a></span>
<span class="normal"><a href="#__codelineno-0-2956">2956</a></span>
<span class="normal"><a href="#__codelineno-0-2957">2957</a></span>
<span class="normal"><a href="#__codelineno-0-2958">2958</a></span>
<span class="normal"><a href="#__codelineno-0-2959">2959</a></span>
<span class="normal"><a href="#__codelineno-0-2960">2960</a></span>
<span class="normal"><a href="#__codelineno-0-2961">2961</a></span>
<span class="normal"><a href="#__codelineno-0-2962">2962</a></span>
<span class="normal"><a href="#__codelineno-0-2963">2963</a></span>
<span class="normal"><a href="#__codelineno-0-2964">2964</a></span>
<span class="normal"><a href="#__codelineno-0-2965">2965</a></span>
<span class="normal"><a href="#__codelineno-0-2966">2966</a></span>
<span class="normal"><a href="#__codelineno-0-2967">2967</a></span>
<span class="normal"><a href="#__codelineno-0-2968">2968</a></span>
<span class="normal"><a href="#__codelineno-0-2969">2969</a></span>
<span class="normal"><a href="#__codelineno-0-2970">2970</a></span>
<span class="normal"><a href="#__codelineno-0-2971">2971</a></span>
<span class="normal"><a href="#__codelineno-0-2972">2972</a></span>
<span class="normal"><a href="#__codelineno-0-2973">2973</a></span>
<span class="normal"><a href="#__codelineno-0-2974">2974</a></span>
<span class="normal"><a href="#__codelineno-0-2975">2975</a></span>
<span class="normal"><a href="#__codelineno-0-2976">2976</a></span>
<span class="normal"><a href="#__codelineno-0-2977">2977</a></span>
<span class="normal"><a href="#__codelineno-0-2978">2978</a></span>
<span class="normal"><a href="#__codelineno-0-2979">2979</a></span>
<span class="normal"><a href="#__codelineno-0-2980">2980</a></span>
<span class="normal"><a href="#__codelineno-0-2981">2981</a></span>
<span class="normal"><a href="#__codelineno-0-2982">2982</a></span>
<span class="normal"><a href="#__codelineno-0-2983">2983</a></span>
<span class="normal"><a href="#__codelineno-0-2984">2984</a></span>
<span class="normal"><a href="#__codelineno-0-2985">2985</a></span>
<span class="normal"><a href="#__codelineno-0-2986">2986</a></span>
<span class="normal"><a href="#__codelineno-0-2987">2987</a></span>
<span class="normal"><a href="#__codelineno-0-2988">2988</a></span>
<span class="normal"><a href="#__codelineno-0-2989">2989</a></span>
<span class="normal"><a href="#__codelineno-0-2990">2990</a></span>
<span class="normal"><a href="#__codelineno-0-2991">2991</a></span>
<span class="normal"><a href="#__codelineno-0-2992">2992</a></span>
<span class="normal"><a href="#__codelineno-0-2993">2993</a></span>
<span class="normal"><a href="#__codelineno-0-2994">2994</a></span>
<span class="normal"><a href="#__codelineno-0-2995">2995</a></span>
<span class="normal"><a href="#__codelineno-0-2996">2996</a></span>
<span class="normal"><a href="#__codelineno-0-2997">2997</a></span>
<span class="normal"><a href="#__codelineno-0-2998">2998</a></span>
<span class="normal"><a href="#__codelineno-0-2999">2999</a></span>
<span class="normal"><a href="#__codelineno-0-3000">3000</a></span>
<span class="normal"><a href="#__codelineno-0-3001">3001</a></span>
<span class="normal"><a href="#__codelineno-0-3002">3002</a></span>
<span class="normal"><a href="#__codelineno-0-3003">3003</a></span>
<span class="normal"><a href="#__codelineno-0-3004">3004</a></span>
<span class="normal"><a href="#__codelineno-0-3005">3005</a></span>
<span class="normal"><a href="#__codelineno-0-3006">3006</a></span>
<span class="normal"><a href="#__codelineno-0-3007">3007</a></span>
<span class="normal"><a href="#__codelineno-0-3008">3008</a></span>
<span class="normal"><a href="#__codelineno-0-3009">3009</a></span>
<span class="normal"><a href="#__codelineno-0-3010">3010</a></span>
<span class="normal"><a href="#__codelineno-0-3011">3011</a></span>
<span class="normal"><a href="#__codelineno-0-3012">3012</a></span>
<span class="normal"><a href="#__codelineno-0-3013">3013</a></span>
<span class="normal"><a href="#__codelineno-0-3014">3014</a></span>
<span class="normal"><a href="#__codelineno-0-3015">3015</a></span>
<span class="normal"><a href="#__codelineno-0-3016">3016</a></span>
<span class="normal"><a href="#__codelineno-0-3017">3017</a></span>
<span class="normal"><a href="#__codelineno-0-3018">3018</a></span>
<span class="normal"><a href="#__codelineno-0-3019">3019</a></span>
<span class="normal"><a href="#__codelineno-0-3020">3020</a></span>
<span class="normal"><a href="#__codelineno-0-3021">3021</a></span>
<span class="normal"><a href="#__codelineno-0-3022">3022</a></span>
<span class="normal"><a href="#__codelineno-0-3023">3023</a></span>
<span class="normal"><a href="#__codelineno-0-3024">3024</a></span>
<span class="normal"><a href="#__codelineno-0-3025">3025</a></span>
<span class="normal"><a href="#__codelineno-0-3026">3026</a></span>
<span class="normal"><a href="#__codelineno-0-3027">3027</a></span>
<span class="normal"><a href="#__codelineno-0-3028">3028</a></span>
<span class="normal"><a href="#__codelineno-0-3029">3029</a></span>
<span class="normal"><a href="#__codelineno-0-3030">3030</a></span>
<span class="normal"><a href="#__codelineno-0-3031">3031</a></span>
<span class="normal"><a href="#__codelineno-0-3032">3032</a></span>
<span class="normal"><a href="#__codelineno-0-3033">3033</a></span>
<span class="normal"><a href="#__codelineno-0-3034">3034</a></span>
<span class="normal"><a href="#__codelineno-0-3035">3035</a></span>
<span class="normal"><a href="#__codelineno-0-3036">3036</a></span>
<span class="normal"><a href="#__codelineno-0-3037">3037</a></span>
<span class="normal"><a href="#__codelineno-0-3038">3038</a></span>
<span class="normal"><a href="#__codelineno-0-3039">3039</a></span>
<span class="normal"><a href="#__codelineno-0-3040">3040</a></span>
<span class="normal"><a href="#__codelineno-0-3041">3041</a></span>
<span class="normal"><a href="#__codelineno-0-3042">3042</a></span>
<span class="normal"><a href="#__codelineno-0-3043">3043</a></span>
<span class="normal"><a href="#__codelineno-0-3044">3044</a></span>
<span class="normal"><a href="#__codelineno-0-3045">3045</a></span>
<span class="normal"><a href="#__codelineno-0-3046">3046</a></span>
<span class="normal"><a href="#__codelineno-0-3047">3047</a></span>
<span class="normal"><a href="#__codelineno-0-3048">3048</a></span>
<span class="normal"><a href="#__codelineno-0-3049">3049</a></span>
<span class="normal"><a href="#__codelineno-0-3050">3050</a></span>
<span class="normal"><a href="#__codelineno-0-3051">3051</a></span>
<span class="normal"><a href="#__codelineno-0-3052">3052</a></span>
<span class="normal"><a href="#__codelineno-0-3053">3053</a></span>
<span class="normal"><a href="#__codelineno-0-3054">3054</a></span>
<span class="normal"><a href="#__codelineno-0-3055">3055</a></span>
<span class="normal"><a href="#__codelineno-0-3056">3056</a></span>
<span class="normal"><a href="#__codelineno-0-3057">3057</a></span>
<span class="normal"><a href="#__codelineno-0-3058">3058</a></span>
<span class="normal"><a href="#__codelineno-0-3059">3059</a></span>
<span class="normal"><a href="#__codelineno-0-3060">3060</a></span>
<span class="normal"><a href="#__codelineno-0-3061">3061</a></span>
<span class="normal"><a href="#__codelineno-0-3062">3062</a></span>
<span class="normal"><a href="#__codelineno-0-3063">3063</a></span>
<span class="normal"><a href="#__codelineno-0-3064">3064</a></span>
<span class="normal"><a href="#__codelineno-0-3065">3065</a></span>
<span class="normal"><a href="#__codelineno-0-3066">3066</a></span>
<span class="normal"><a href="#__codelineno-0-3067">3067</a></span>
<span class="normal"><a href="#__codelineno-0-3068">3068</a></span>
<span class="normal"><a href="#__codelineno-0-3069">3069</a></span>
<span class="normal"><a href="#__codelineno-0-3070">3070</a></span>
<span class="normal"><a href="#__codelineno-0-3071">3071</a></span>
<span class="normal"><a href="#__codelineno-0-3072">3072</a></span>
<span class="normal"><a href="#__codelineno-0-3073">3073</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-2762" name="__codelineno-0-2762"></a><span class="k">def</span><span class="w"> </span><span class="nf">sample_and_compute_gradients</span><span class="p">(</span>
<a id="__codelineno-0-2763" name="__codelineno-0-2763"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-2764" name="__codelineno-0-2764"></a>    <span class="n">distribution</span><span class="p">,</span>
<a id="__codelineno-0-2765" name="__codelineno-0-2765"></a>    <span class="n">popsize</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-2766" name="__codelineno-0-2766"></a>    <span class="o">*</span><span class="p">,</span>
<a id="__codelineno-0-2767" name="__codelineno-0-2767"></a>    <span class="n">num_interactions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2768" name="__codelineno-0-2768"></a>    <span class="n">popsize_max</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2769" name="__codelineno-0-2769"></a>    <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2770" name="__codelineno-0-2770"></a>    <span class="n">ranking_method</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2771" name="__codelineno-0-2771"></a>    <span class="n">with_stats</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-2772" name="__codelineno-0-2772"></a>    <span class="n">ensure_even_popsize</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-2773" name="__codelineno-0-2773"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]:</span>
<a id="__codelineno-0-2774" name="__codelineno-0-2774"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2775" name="__codelineno-0-2775"></a><span class="sd">    Sample new solutions from the distribution and compute gradients.</span>
<a id="__codelineno-0-2776" name="__codelineno-0-2776"></a>
<a id="__codelineno-0-2777" name="__codelineno-0-2777"></a><span class="sd">    The distribution can then be updated according to the computed</span>
<a id="__codelineno-0-2778" name="__codelineno-0-2778"></a><span class="sd">    gradients.</span>
<a id="__codelineno-0-2779" name="__codelineno-0-2779"></a>
<a id="__codelineno-0-2780" name="__codelineno-0-2780"></a><span class="sd">    If the problem is not parallelized, and `with_stats` is False,</span>
<a id="__codelineno-0-2781" name="__codelineno-0-2781"></a><span class="sd">    then the result will be a single dictionary of gradients.</span>
<a id="__codelineno-0-2782" name="__codelineno-0-2782"></a><span class="sd">    For example, in the case of a Gaussian distribution, the returned</span>
<a id="__codelineno-0-2783" name="__codelineno-0-2783"></a><span class="sd">    gradients dictionary would look like this:</span>
<a id="__codelineno-0-2784" name="__codelineno-0-2784"></a>
<a id="__codelineno-0-2785" name="__codelineno-0-2785"></a><span class="sd">        {</span>
<a id="__codelineno-0-2786" name="__codelineno-0-2786"></a><span class="sd">            &quot;mu&quot;: ...,     # the gradient for the mean</span>
<a id="__codelineno-0-2787" name="__codelineno-0-2787"></a><span class="sd">            &quot;sigma&quot;: ...,  # the gradient for the standard deviation</span>
<a id="__codelineno-0-2788" name="__codelineno-0-2788"></a><span class="sd">        }</span>
<a id="__codelineno-0-2789" name="__codelineno-0-2789"></a>
<a id="__codelineno-0-2790" name="__codelineno-0-2790"></a><span class="sd">    If the problem is not parallelized, and `with_stats` is True,</span>
<a id="__codelineno-0-2791" name="__codelineno-0-2791"></a><span class="sd">    then the result will be a dictionary which contains in itself</span>
<a id="__codelineno-0-2792" name="__codelineno-0-2792"></a><span class="sd">    the gradients dictionary, and additional elements for providing</span>
<a id="__codelineno-0-2793" name="__codelineno-0-2793"></a><span class="sd">    further information. In the case of a Gaussian distribution,</span>
<a id="__codelineno-0-2794" name="__codelineno-0-2794"></a><span class="sd">    the returned dictionary with additional stats would look like</span>
<a id="__codelineno-0-2795" name="__codelineno-0-2795"></a><span class="sd">    this:</span>
<a id="__codelineno-0-2796" name="__codelineno-0-2796"></a>
<a id="__codelineno-0-2797" name="__codelineno-0-2797"></a><span class="sd">        {</span>
<a id="__codelineno-0-2798" name="__codelineno-0-2798"></a><span class="sd">            &quot;gradients&quot;: {</span>
<a id="__codelineno-0-2799" name="__codelineno-0-2799"></a><span class="sd">                &quot;mu&quot;: ...,     # the gradient for the mean</span>
<a id="__codelineno-0-2800" name="__codelineno-0-2800"></a><span class="sd">                &quot;sigma&quot;: ...,  # the gradient for the standard deviation</span>
<a id="__codelineno-0-2801" name="__codelineno-0-2801"></a><span class="sd">            },</span>
<a id="__codelineno-0-2802" name="__codelineno-0-2802"></a><span class="sd">            &quot;num_solutions&quot;: ...,  # how many solutions were sampled</span>
<a id="__codelineno-0-2803" name="__codelineno-0-2803"></a><span class="sd">            &quot;mean_eval&quot;: ...,      # Mean of all evaluations</span>
<a id="__codelineno-0-2804" name="__codelineno-0-2804"></a><span class="sd">        }</span>
<a id="__codelineno-0-2805" name="__codelineno-0-2805"></a>
<a id="__codelineno-0-2806" name="__codelineno-0-2806"></a><span class="sd">    If the problem is parallelized, then the gradient computation will</span>
<a id="__codelineno-0-2807" name="__codelineno-0-2807"></a><span class="sd">    be distributed among the remote actors. In more details, each actor</span>
<a id="__codelineno-0-2808" name="__codelineno-0-2808"></a><span class="sd">    will sample its own solutions (such that the total population size</span>
<a id="__codelineno-0-2809" name="__codelineno-0-2809"></a><span class="sd">    across all remote actors will be near the provided `popsize`)</span>
<a id="__codelineno-0-2810" name="__codelineno-0-2810"></a><span class="sd">    and will compute its own gradients, and will produce its own</span>
<a id="__codelineno-0-2811" name="__codelineno-0-2811"></a><span class="sd">    additional stats (if `with_stats` is given as True).</span>
<a id="__codelineno-0-2812" name="__codelineno-0-2812"></a><span class="sd">    These remote results will then be collected by the main process,</span>
<a id="__codelineno-0-2813" name="__codelineno-0-2813"></a><span class="sd">    and the final result of this method will be a list of dictionaries,</span>
<a id="__codelineno-0-2814" name="__codelineno-0-2814"></a><span class="sd">    each dictionary being the result of a remote gradient computation.</span>
<a id="__codelineno-0-2815" name="__codelineno-0-2815"></a>
<a id="__codelineno-0-2816" name="__codelineno-0-2816"></a><span class="sd">    The sampled solutions are temporary, and will not be kept</span>
<a id="__codelineno-0-2817" name="__codelineno-0-2817"></a><span class="sd">    (and will not be returned).</span>
<a id="__codelineno-0-2818" name="__codelineno-0-2818"></a>
<a id="__codelineno-0-2819" name="__codelineno-0-2819"></a><span class="sd">    To customize how solutions are sampled and how gradients are</span>
<a id="__codelineno-0-2820" name="__codelineno-0-2820"></a><span class="sd">    computed, one is encouraged to override</span>
<a id="__codelineno-0-2821" name="__codelineno-0-2821"></a><span class="sd">    `_sample_and_compute_gradients(...)` (instead of overriding this</span>
<a id="__codelineno-0-2822" name="__codelineno-0-2822"></a><span class="sd">    method directly.</span>
<a id="__codelineno-0-2823" name="__codelineno-0-2823"></a>
<a id="__codelineno-0-2824" name="__codelineno-0-2824"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-2825" name="__codelineno-0-2825"></a><span class="sd">        distribution: The search distribution from which the solutions</span>
<a id="__codelineno-0-2826" name="__codelineno-0-2826"></a><span class="sd">            will be sampled, and according to which the gradients will</span>
<a id="__codelineno-0-2827" name="__codelineno-0-2827"></a><span class="sd">            be computed.</span>
<a id="__codelineno-0-2828" name="__codelineno-0-2828"></a><span class="sd">        popsize: The number of solutions which will be sampled.</span>
<a id="__codelineno-0-2829" name="__codelineno-0-2829"></a><span class="sd">        num_interactions: Number of simulator interactions that must</span>
<a id="__codelineno-0-2830" name="__codelineno-0-2830"></a><span class="sd">            be completed (more solutions will be sampled until this</span>
<a id="__codelineno-0-2831" name="__codelineno-0-2831"></a><span class="sd">            threshold is reached). This argument is to be used when</span>
<a id="__codelineno-0-2832" name="__codelineno-0-2832"></a><span class="sd">            the problem has characteristics similar to reinforcement</span>
<a id="__codelineno-0-2833" name="__codelineno-0-2833"></a><span class="sd">            learning, and an adaptive population size, depending on</span>
<a id="__codelineno-0-2834" name="__codelineno-0-2834"></a><span class="sd">            the interactions made, is desired.</span>
<a id="__codelineno-0-2835" name="__codelineno-0-2835"></a><span class="sd">            Otherwise, one can leave this argument as None, in which</span>
<a id="__codelineno-0-2836" name="__codelineno-0-2836"></a><span class="sd">            case, there will not be any threshold based on number</span>
<a id="__codelineno-0-2837" name="__codelineno-0-2837"></a><span class="sd">            of interactions.</span>
<a id="__codelineno-0-2838" name="__codelineno-0-2838"></a><span class="sd">        popsize_max: To be used when `num_interactions` is provided,</span>
<a id="__codelineno-0-2839" name="__codelineno-0-2839"></a><span class="sd">            as an additional criterion for ending the solution sampling</span>
<a id="__codelineno-0-2840" name="__codelineno-0-2840"></a><span class="sd">            phase. This argument can be used to prevent the population</span>
<a id="__codelineno-0-2841" name="__codelineno-0-2841"></a><span class="sd">            size from growing too much while trying to satisfy the</span>
<a id="__codelineno-0-2842" name="__codelineno-0-2842"></a><span class="sd">            `num_interactions`. If not needed, `popsize_max` can be left</span>
<a id="__codelineno-0-2843" name="__codelineno-0-2843"></a><span class="sd">            as None.</span>
<a id="__codelineno-0-2844" name="__codelineno-0-2844"></a><span class="sd">        obj_index: Index of the objective according to which the gradients</span>
<a id="__codelineno-0-2845" name="__codelineno-0-2845"></a><span class="sd">            will be computed. Can be left as None if the problem has only</span>
<a id="__codelineno-0-2846" name="__codelineno-0-2846"></a><span class="sd">            one objective.</span>
<a id="__codelineno-0-2847" name="__codelineno-0-2847"></a><span class="sd">        ranking_method: The solution ranking method to be used when</span>
<a id="__codelineno-0-2848" name="__codelineno-0-2848"></a><span class="sd">            computing the gradients.</span>
<a id="__codelineno-0-2849" name="__codelineno-0-2849"></a><span class="sd">            If not specified, the raw fitnesses will be used.</span>
<a id="__codelineno-0-2850" name="__codelineno-0-2850"></a><span class="sd">        with_stats: If given as False, then the results dictionary will</span>
<a id="__codelineno-0-2851" name="__codelineno-0-2851"></a><span class="sd">            only contain the gradients information. If given as True,</span>
<a id="__codelineno-0-2852" name="__codelineno-0-2852"></a><span class="sd">            then the results dictionary will contain within itself</span>
<a id="__codelineno-0-2853" name="__codelineno-0-2853"></a><span class="sd">            the gradients dictionary, and also additional elements for</span>
<a id="__codelineno-0-2854" name="__codelineno-0-2854"></a><span class="sd">            providing further information.</span>
<a id="__codelineno-0-2855" name="__codelineno-0-2855"></a><span class="sd">            The default is True.</span>
<a id="__codelineno-0-2856" name="__codelineno-0-2856"></a><span class="sd">        ensure_even_popsize: If `ensure_even_popsize` is True and the</span>
<a id="__codelineno-0-2857" name="__codelineno-0-2857"></a><span class="sd">            problem is not parallelized, then a `popsize` given as an odd</span>
<a id="__codelineno-0-2858" name="__codelineno-0-2858"></a><span class="sd">            number will cause an error. If `ensure_even_popsize` is True</span>
<a id="__codelineno-0-2859" name="__codelineno-0-2859"></a><span class="sd">            and the problem is parallelized, then the remote actors will</span>
<a id="__codelineno-0-2860" name="__codelineno-0-2860"></a><span class="sd">            sample their own sub-populations in such a way that their</span>
<a id="__codelineno-0-2861" name="__codelineno-0-2861"></a><span class="sd">            sizes are even.</span>
<a id="__codelineno-0-2862" name="__codelineno-0-2862"></a><span class="sd">            If `ensure_even_popsize` is False, whether or not the</span>
<a id="__codelineno-0-2863" name="__codelineno-0-2863"></a><span class="sd">            `popsize` is even will not be checked.</span>
<a id="__codelineno-0-2864" name="__codelineno-0-2864"></a><span class="sd">            When the provided `distribution` is a symmetric (or</span>
<a id="__codelineno-0-2865" name="__codelineno-0-2865"></a><span class="sd">            &quot;mirrored&quot;, or &quot;antithetic&quot;), then this argument must be</span>
<a id="__codelineno-0-2866" name="__codelineno-0-2866"></a><span class="sd">            given as True.</span>
<a id="__codelineno-0-2867" name="__codelineno-0-2867"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-2868" name="__codelineno-0-2868"></a><span class="sd">        A results dictionary when the problem is not parallelized,</span>
<a id="__codelineno-0-2869" name="__codelineno-0-2869"></a><span class="sd">        or list of results dictionaries when the problem is parallelized.</span>
<a id="__codelineno-0-2870" name="__codelineno-0-2870"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2871" name="__codelineno-0-2871"></a>
<a id="__codelineno-0-2872" name="__codelineno-0-2872"></a>    <span class="c1"># For problems which are configured for parallelization, make sure that the actors are created.</span>
<a id="__codelineno-0-2873" name="__codelineno-0-2873"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_parallelize</span><span class="p">()</span>
<a id="__codelineno-0-2874" name="__codelineno-0-2874"></a>
<a id="__codelineno-0-2875" name="__codelineno-0-2875"></a>    <span class="c1"># Below we check if there is an inconsistency in arguments.</span>
<a id="__codelineno-0-2876" name="__codelineno-0-2876"></a>    <span class="k">if</span> <span class="p">(</span><span class="n">num_interactions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">popsize_max</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-2877" name="__codelineno-0-2877"></a>        <span class="c1"># If `num_interactions` is None, then we assume that the user does not wish an adaptive population size.</span>
<a id="__codelineno-0-2878" name="__codelineno-0-2878"></a>        <span class="c1"># However, at the same time, if `popsize_max` is not None, then there is an inconsistency,</span>
<a id="__codelineno-0-2879" name="__codelineno-0-2879"></a>        <span class="c1"># because, `popsize_max` without `num_interactions` (therefore without adaptive population size)</span>
<a id="__codelineno-0-2880" name="__codelineno-0-2880"></a>        <span class="c1"># does not make sense.</span>
<a id="__codelineno-0-2881" name="__codelineno-0-2881"></a>        <span class="c1"># This is probably a configuration error, so, we inform the user by raising an error.</span>
<a id="__codelineno-0-2882" name="__codelineno-0-2882"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-2883" name="__codelineno-0-2883"></a>            <span class="sa">f</span><span class="s2">&quot;`popsize_max` was expected as None, because `num_interactions` is None.&quot;</span>
<a id="__codelineno-0-2884" name="__codelineno-0-2884"></a>            <span class="sa">f</span><span class="s2">&quot; However, `popsize_max` was found as </span><span class="si">{</span><span class="n">popsize_max</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-2885" name="__codelineno-0-2885"></a>        <span class="p">)</span>
<a id="__codelineno-0-2886" name="__codelineno-0-2886"></a>
<a id="__codelineno-0-2887" name="__codelineno-0-2887"></a>    <span class="c1"># The problem instance in the main process should trigger the `before_grad_hook`.</span>
<a id="__codelineno-0-2888" name="__codelineno-0-2888"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_main</span><span class="p">:</span>
<a id="__codelineno-0-2889" name="__codelineno-0-2889"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_before_grad_hook</span><span class="p">()</span>
<a id="__codelineno-0-2890" name="__codelineno-0-2890"></a>
<a id="__codelineno-0-2891" name="__codelineno-0-2891"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_main</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_actors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_actors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
<a id="__codelineno-0-2892" name="__codelineno-0-2892"></a>        <span class="c1"># If this is the main process and the problem is parallelized, then we need to split the request</span>
<a id="__codelineno-0-2893" name="__codelineno-0-2893"></a>        <span class="c1"># into multiple tasks, and then execute those tasks in parallel using the problem&#39;s actor pool.</span>
<a id="__codelineno-0-2894" name="__codelineno-0-2894"></a>
<a id="__codelineno-0-2895" name="__codelineno-0-2895"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subbatch_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2896" name="__codelineno-0-2896"></a>            <span class="c1"># If `subbatch_size` is provided, then we first make sure that `popsize` is divisible by</span>
<a id="__codelineno-0-2897" name="__codelineno-0-2897"></a>            <span class="c1"># `subbatch_size`</span>
<a id="__codelineno-0-2898" name="__codelineno-0-2898"></a>            <span class="k">if</span> <span class="p">(</span><span class="n">popsize</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subbatch_size</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-2899" name="__codelineno-0-2899"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-2900" name="__codelineno-0-2900"></a>                    <span class="sa">f</span><span class="s2">&quot;This Problem was created with `subbatch_size` as </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_subbatch_size</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-2901" name="__codelineno-0-2901"></a>                    <span class="sa">f</span><span class="s2">&quot; When doing remote gradient computation, the requested population size must be divisible by&quot;</span>
<a id="__codelineno-0-2902" name="__codelineno-0-2902"></a>                    <span class="sa">f</span><span class="s2">&quot; the `subbatch_size`.&quot;</span>
<a id="__codelineno-0-2903" name="__codelineno-0-2903"></a>                    <span class="sa">f</span><span class="s2">&quot; However, the requested population size is </span><span class="si">{</span><span class="n">popsize</span><span class="si">}</span><span class="s2">, and the remainder after dividing it&quot;</span>
<a id="__codelineno-0-2904" name="__codelineno-0-2904"></a>                    <span class="sa">f</span><span class="s2">&quot; by `subbatch_size` is not 0 (it is </span><span class="si">{</span><span class="n">popsize</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">_subbatch_size</span><span class="si">}</span><span class="s2">).&quot;</span>
<a id="__codelineno-0-2905" name="__codelineno-0-2905"></a>                <span class="p">)</span>
<a id="__codelineno-0-2906" name="__codelineno-0-2906"></a>            <span class="c1"># After making sure that `popsize` and `subbatch_size` configurations are compatible, we declare that</span>
<a id="__codelineno-0-2907" name="__codelineno-0-2907"></a>            <span class="c1"># we are going to have n tasks, each task imposing a sample size of `subbatch_size`.</span>
<a id="__codelineno-0-2908" name="__codelineno-0-2908"></a>            <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">popsize</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subbatch_size</span><span class="p">)</span>
<a id="__codelineno-0-2909" name="__codelineno-0-2909"></a>            <span class="n">popsize_per_task</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_subbatch_size</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
<a id="__codelineno-0-2910" name="__codelineno-0-2910"></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_subbatches</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2911" name="__codelineno-0-2911"></a>            <span class="c1"># If `num_subbatches` is provided, then we are going to have n tasks where n is equal to the given</span>
<a id="__codelineno-0-2912" name="__codelineno-0-2912"></a>            <span class="c1"># `num_subbatches`.</span>
<a id="__codelineno-0-2913" name="__codelineno-0-2913"></a>            <span class="n">popsize_per_task</span> <span class="o">=</span> <span class="n">split_workload</span><span class="p">(</span><span class="n">popsize</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_subbatches</span><span class="p">)</span>
<a id="__codelineno-0-2914" name="__codelineno-0-2914"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2915" name="__codelineno-0-2915"></a>            <span class="c1"># If neither `subbatch_size` nor `num_subbatches` is given, then we will split the workload in such</span>
<a id="__codelineno-0-2916" name="__codelineno-0-2916"></a>            <span class="c1"># a way that each actor will have its share.</span>
<a id="__codelineno-0-2917" name="__codelineno-0-2917"></a>            <span class="n">popsize_per_task</span> <span class="o">=</span> <span class="n">split_workload</span><span class="p">(</span><span class="n">popsize</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_actors</span><span class="p">))</span>
<a id="__codelineno-0-2918" name="__codelineno-0-2918"></a>
<a id="__codelineno-0-2919" name="__codelineno-0-2919"></a>        <span class="k">if</span> <span class="n">ensure_even_popsize</span><span class="p">:</span>
<a id="__codelineno-0-2920" name="__codelineno-0-2920"></a>            <span class="c1"># If `ensure_even_popsize` argument is True, then we need to make sure that each tasks&#39;s popsize is</span>
<a id="__codelineno-0-2921" name="__codelineno-0-2921"></a>            <span class="c1"># an even number.</span>
<a id="__codelineno-0-2922" name="__codelineno-0-2922"></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">popsize_per_task</span><span class="p">)):</span>
<a id="__codelineno-0-2923" name="__codelineno-0-2923"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">popsize_per_task</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-2924" name="__codelineno-0-2924"></a>                    <span class="c1"># If the i-th actor&#39;s assigned popsize is not even, increase its assigned popsize by 1.</span>
<a id="__codelineno-0-2925" name="__codelineno-0-2925"></a>                    <span class="n">popsize_per_task</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-0-2926" name="__codelineno-0-2926"></a>
<a id="__codelineno-0-2927" name="__codelineno-0-2927"></a>        <span class="c1"># The number of tasks is finally determined by the length of `popsize_per_task` list we created above.</span>
<a id="__codelineno-0-2928" name="__codelineno-0-2928"></a>        <span class="n">num_tasks</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">popsize_per_task</span><span class="p">)</span>
<a id="__codelineno-0-2929" name="__codelineno-0-2929"></a>
<a id="__codelineno-0-2930" name="__codelineno-0-2930"></a>        <span class="k">if</span> <span class="n">num_interactions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2931" name="__codelineno-0-2931"></a>            <span class="c1"># If the argument `num_interactions` is not given, then, for each task, we declare that</span>
<a id="__codelineno-0-2932" name="__codelineno-0-2932"></a>            <span class="c1"># `num_interactions` is None.</span>
<a id="__codelineno-0-2933" name="__codelineno-0-2933"></a>            <span class="n">num_inter_per_task</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_tasks</span><span class="p">)]</span>
<a id="__codelineno-0-2934" name="__codelineno-0-2934"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2935" name="__codelineno-0-2935"></a>            <span class="c1"># If the argument `num_interactions` is given, then we compute each task&#39;s target number of</span>
<a id="__codelineno-0-2936" name="__codelineno-0-2936"></a>            <span class="c1"># interactions from its sample size.</span>
<a id="__codelineno-0-2937" name="__codelineno-0-2937"></a>            <span class="n">num_inter_per_task</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-2938" name="__codelineno-0-2938"></a>                <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">((</span><span class="n">popsize_per_task</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="n">popsize</span><span class="p">)</span> <span class="o">*</span> <span class="n">num_interactions</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_tasks</span><span class="p">)</span>
<a id="__codelineno-0-2939" name="__codelineno-0-2939"></a>            <span class="p">]</span>
<a id="__codelineno-0-2940" name="__codelineno-0-2940"></a>
<a id="__codelineno-0-2941" name="__codelineno-0-2941"></a>        <span class="k">if</span> <span class="n">popsize_max</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2942" name="__codelineno-0-2942"></a>            <span class="c1"># If the argument `popsize_max` is not given, then, for each task, we declare that</span>
<a id="__codelineno-0-2943" name="__codelineno-0-2943"></a>            <span class="c1"># `popsize_max` is None.</span>
<a id="__codelineno-0-2944" name="__codelineno-0-2944"></a>            <span class="n">popsize_max_per_task</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_tasks</span><span class="p">)]</span>
<a id="__codelineno-0-2945" name="__codelineno-0-2945"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2946" name="__codelineno-0-2946"></a>            <span class="c1"># If the argument `popsize_max` is given, then we compute each task&#39;s target maximum population size</span>
<a id="__codelineno-0-2947" name="__codelineno-0-2947"></a>            <span class="c1"># from its sample size.</span>
<a id="__codelineno-0-2948" name="__codelineno-0-2948"></a>            <span class="n">popsize_max_per_task</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-2949" name="__codelineno-0-2949"></a>                <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">((</span><span class="n">popsize_per_task</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="n">popsize</span><span class="p">)</span> <span class="o">*</span> <span class="n">popsize_max</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_tasks</span><span class="p">)</span>
<a id="__codelineno-0-2950" name="__codelineno-0-2950"></a>            <span class="p">]</span>
<a id="__codelineno-0-2951" name="__codelineno-0-2951"></a>
<a id="__codelineno-0-2952" name="__codelineno-0-2952"></a>        <span class="c1"># We trigger the synchronization between the main process and the remote actors.</span>
<a id="__codelineno-0-2953" name="__codelineno-0-2953"></a>        <span class="c1"># If this problem instance has nothing to synchronize, then `must_sync_after` will be False.</span>
<a id="__codelineno-0-2954" name="__codelineno-0-2954"></a>        <span class="n">must_sync_after</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sync_before</span><span class="p">()</span>
<a id="__codelineno-0-2955" name="__codelineno-0-2955"></a>
<a id="__codelineno-0-2956" name="__codelineno-0-2956"></a>        <span class="c1"># Because we want to send the distribution to remote actors, we first copy the distribution to cpu</span>
<a id="__codelineno-0-2957" name="__codelineno-0-2957"></a>        <span class="c1"># (unless it is already on cpu)</span>
<a id="__codelineno-0-2958" name="__codelineno-0-2958"></a>        <span class="n">dist_on_cpu</span> <span class="o">=</span> <span class="n">distribution</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s2">&quot;cpu&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2959" name="__codelineno-0-2959"></a>
<a id="__codelineno-0-2960" name="__codelineno-0-2960"></a>        <span class="c1"># Here, we use our actor pool to execute our tasks in parallel.</span>
<a id="__codelineno-0-2961" name="__codelineno-0-2961"></a>        <span class="n">result</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
<a id="__codelineno-0-2962" name="__codelineno-0-2962"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_actor_pool</span><span class="o">.</span><span class="n">map_unordered</span><span class="p">(</span>
<a id="__codelineno-0-2963" name="__codelineno-0-2963"></a>                <span class="p">(</span>
<a id="__codelineno-0-2964" name="__codelineno-0-2964"></a>                    <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">a</span><span class="o">.</span><span class="n">call</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span>
<a id="__codelineno-0-2965" name="__codelineno-0-2965"></a>                        <span class="s2">&quot;_sample_and_compute_gradients&quot;</span><span class="p">,</span>
<a id="__codelineno-0-2966" name="__codelineno-0-2966"></a>                        <span class="p">[</span><span class="n">dist_on_cpu</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
<a id="__codelineno-0-2967" name="__codelineno-0-2967"></a>                        <span class="p">{</span>
<a id="__codelineno-0-2968" name="__codelineno-0-2968"></a>                            <span class="s2">&quot;obj_index&quot;</span><span class="p">:</span> <span class="n">obj_index</span><span class="p">,</span>
<a id="__codelineno-0-2969" name="__codelineno-0-2969"></a>                            <span class="s2">&quot;num_interactions&quot;</span><span class="p">:</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<a id="__codelineno-0-2970" name="__codelineno-0-2970"></a>                            <span class="s2">&quot;popsize_max&quot;</span><span class="p">:</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
<a id="__codelineno-0-2971" name="__codelineno-0-2971"></a>                            <span class="s2">&quot;ranking_method&quot;</span><span class="p">:</span> <span class="n">ranking_method</span><span class="p">,</span>
<a id="__codelineno-0-2972" name="__codelineno-0-2972"></a>                        <span class="p">},</span>
<a id="__codelineno-0-2973" name="__codelineno-0-2973"></a>                    <span class="p">)</span>
<a id="__codelineno-0-2974" name="__codelineno-0-2974"></a>                <span class="p">),</span>
<a id="__codelineno-0-2975" name="__codelineno-0-2975"></a>                <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">popsize_per_task</span><span class="p">,</span> <span class="n">num_inter_per_task</span><span class="p">,</span> <span class="n">popsize_max_per_task</span><span class="p">)),</span>
<a id="__codelineno-0-2976" name="__codelineno-0-2976"></a>            <span class="p">)</span>
<a id="__codelineno-0-2977" name="__codelineno-0-2977"></a>        <span class="p">)</span>
<a id="__codelineno-0-2978" name="__codelineno-0-2978"></a>
<a id="__codelineno-0-2979" name="__codelineno-0-2979"></a>        <span class="c1"># At this point, all the tensors within our collected results are on the CPU.</span>
<a id="__codelineno-0-2980" name="__codelineno-0-2980"></a>
<a id="__codelineno-0-2981" name="__codelineno-0-2981"></a>        <span class="k">if</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span> <span class="o">!=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cpu&quot;</span><span class="p">):</span>
<a id="__codelineno-0-2982" name="__codelineno-0-2982"></a>            <span class="c1"># If the main device of this problem instance is not CPU, then we move the tensors to the main device.</span>
<a id="__codelineno-0-2983" name="__codelineno-0-2983"></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">cast_tensors_in_container</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-2984" name="__codelineno-0-2984"></a>
<a id="__codelineno-0-2985" name="__codelineno-0-2985"></a>        <span class="k">if</span> <span class="n">must_sync_after</span><span class="p">:</span>
<a id="__codelineno-0-2986" name="__codelineno-0-2986"></a>            <span class="c1"># If a post-gradient synchronization is required, we trigger the synchronization operations.</span>
<a id="__codelineno-0-2987" name="__codelineno-0-2987"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_sync_after</span><span class="p">()</span>
<a id="__codelineno-0-2988" name="__codelineno-0-2988"></a>
<a id="__codelineno-0-2989" name="__codelineno-0-2989"></a>        <span class="c1"># ####################################################</span>
<a id="__codelineno-0-2990" name="__codelineno-0-2990"></a>        <span class="c1"># # If this is the main process and the problem is parallelized, then we need to split the workload among</span>
<a id="__codelineno-0-2991" name="__codelineno-0-2991"></a>        <span class="c1"># # the remote actors, and then request each of them to compute their gradients.</span>
<a id="__codelineno-0-2992" name="__codelineno-0-2992"></a>        <span class="c1">#</span>
<a id="__codelineno-0-2993" name="__codelineno-0-2993"></a>        <span class="c1"># # We begin by getting the number of actors, and computing the `popsize` for each actor.</span>
<a id="__codelineno-0-2994" name="__codelineno-0-2994"></a>        <span class="c1"># num_actors = len(self._actors)</span>
<a id="__codelineno-0-2995" name="__codelineno-0-2995"></a>        <span class="c1"># popsize_per_actor = split_workload(popsize, num_actors)</span>
<a id="__codelineno-0-2996" name="__codelineno-0-2996"></a>        <span class="c1">#</span>
<a id="__codelineno-0-2997" name="__codelineno-0-2997"></a>        <span class="c1"># if ensure_even_popsize:</span>
<a id="__codelineno-0-2998" name="__codelineno-0-2998"></a>        <span class="c1">#     # If `ensure_even_popsize` argument is True, then we need to make sure that each actor&#39;s popsize is</span>
<a id="__codelineno-0-2999" name="__codelineno-0-2999"></a>        <span class="c1">#     # an even number.</span>
<a id="__codelineno-0-3000" name="__codelineno-0-3000"></a>        <span class="c1">#     for i in range(len(popsize_per_actor)):</span>
<a id="__codelineno-0-3001" name="__codelineno-0-3001"></a>        <span class="c1">#         if (popsize_per_actor[i] % 2) != 0:</span>
<a id="__codelineno-0-3002" name="__codelineno-0-3002"></a>        <span class="c1">#             # If the i-th actor&#39;s assigned popsize is not even, increase its assigned popsize by 1.</span>
<a id="__codelineno-0-3003" name="__codelineno-0-3003"></a>        <span class="c1">#             popsize_per_actor[i] += 1</span>
<a id="__codelineno-0-3004" name="__codelineno-0-3004"></a>        <span class="c1">#</span>
<a id="__codelineno-0-3005" name="__codelineno-0-3005"></a>        <span class="c1"># if num_interactions is None:</span>
<a id="__codelineno-0-3006" name="__codelineno-0-3006"></a>        <span class="c1">#     # If `num_interactions` is None, then the `num_interactions` argument for each actor must also be</span>
<a id="__codelineno-0-3007" name="__codelineno-0-3007"></a>        <span class="c1">#     # passed as None.</span>
<a id="__codelineno-0-3008" name="__codelineno-0-3008"></a>        <span class="c1">#     num_int_per_actor = [None] * num_actors</span>
<a id="__codelineno-0-3009" name="__codelineno-0-3009"></a>        <span class="c1"># else:</span>
<a id="__codelineno-0-3010" name="__codelineno-0-3010"></a>        <span class="c1">#     # If `num_interactions` is not None, then we split the `num_interactions` workload among the actors.</span>
<a id="__codelineno-0-3011" name="__codelineno-0-3011"></a>        <span class="c1">#     num_int_per_actor = split_workload(num_interactions, num_actors)</span>
<a id="__codelineno-0-3012" name="__codelineno-0-3012"></a>        <span class="c1">#</span>
<a id="__codelineno-0-3013" name="__codelineno-0-3013"></a>        <span class="c1"># if popsize_max is None:</span>
<a id="__codelineno-0-3014" name="__codelineno-0-3014"></a>        <span class="c1">#     # If `popsize_max` is None, then the `popsize_max` argument for each actor must also be None.</span>
<a id="__codelineno-0-3015" name="__codelineno-0-3015"></a>        <span class="c1">#     popsize_max_per_actor = [None] * num_actors</span>
<a id="__codelineno-0-3016" name="__codelineno-0-3016"></a>        <span class="c1"># else:</span>
<a id="__codelineno-0-3017" name="__codelineno-0-3017"></a>        <span class="c1">#     # If `popsize_max` is not None, then we split the `popsize_max` workload among the actors.</span>
<a id="__codelineno-0-3018" name="__codelineno-0-3018"></a>        <span class="c1">#     popsize_max_per_actor = split_workload(popsize_max, num_actors)</span>
<a id="__codelineno-0-3019" name="__codelineno-0-3019"></a>        <span class="c1">#</span>
<a id="__codelineno-0-3020" name="__codelineno-0-3020"></a>        <span class="c1"># # We trigger the synchronization between the main process and the remote actors.</span>
<a id="__codelineno-0-3021" name="__codelineno-0-3021"></a>        <span class="c1"># # If this problem instance has nothing to synchronize, then `must_sync_after` will be False.</span>
<a id="__codelineno-0-3022" name="__codelineno-0-3022"></a>        <span class="c1"># must_sync_after = self._sync_before()</span>
<a id="__codelineno-0-3023" name="__codelineno-0-3023"></a>        <span class="c1">#</span>
<a id="__codelineno-0-3024" name="__codelineno-0-3024"></a>        <span class="c1"># # Because we want to send the distribution to remote actors, we first copy the distribution to cpu</span>
<a id="__codelineno-0-3025" name="__codelineno-0-3025"></a>        <span class="c1"># # (unless it is already on cpu)</span>
<a id="__codelineno-0-3026" name="__codelineno-0-3026"></a>        <span class="c1"># dist_on_cpu = distribution.to(&quot;cpu&quot;)</span>
<a id="__codelineno-0-3027" name="__codelineno-0-3027"></a>        <span class="c1">#</span>
<a id="__codelineno-0-3028" name="__codelineno-0-3028"></a>        <span class="c1"># # To each actor, we send the request of computing the gradients, and then collect the results</span>
<a id="__codelineno-0-3029" name="__codelineno-0-3029"></a>        <span class="c1"># result = ray.get(</span>
<a id="__codelineno-0-3030" name="__codelineno-0-3030"></a>        <span class="c1">#     [</span>
<a id="__codelineno-0-3031" name="__codelineno-0-3031"></a>        <span class="c1">#         self._actors[i].call.remote(</span>
<a id="__codelineno-0-3032" name="__codelineno-0-3032"></a>        <span class="c1">#             &quot;_gradient_computation_helper&quot;,</span>
<a id="__codelineno-0-3033" name="__codelineno-0-3033"></a>        <span class="c1">#             [dist_on_cpu, popsize_per_actor[i]],</span>
<a id="__codelineno-0-3034" name="__codelineno-0-3034"></a>        <span class="c1">#             dict(</span>
<a id="__codelineno-0-3035" name="__codelineno-0-3035"></a>        <span class="c1">#                 num_interactions=num_int_per_actor[i],</span>
<a id="__codelineno-0-3036" name="__codelineno-0-3036"></a>        <span class="c1">#                 popsize_max=popsize_max_per_actor[i],</span>
<a id="__codelineno-0-3037" name="__codelineno-0-3037"></a>        <span class="c1">#                 obj_index=obj_index,</span>
<a id="__codelineno-0-3038" name="__codelineno-0-3038"></a>        <span class="c1">#                 ranking_method=ranking_method,</span>
<a id="__codelineno-0-3039" name="__codelineno-0-3039"></a>        <span class="c1">#                 with_stats=with_stats,</span>
<a id="__codelineno-0-3040" name="__codelineno-0-3040"></a>        <span class="c1">#                 move_results_to_device=&quot;cpu&quot;,</span>
<a id="__codelineno-0-3041" name="__codelineno-0-3041"></a>        <span class="c1">#             ),</span>
<a id="__codelineno-0-3042" name="__codelineno-0-3042"></a>        <span class="c1">#         )</span>
<a id="__codelineno-0-3043" name="__codelineno-0-3043"></a>        <span class="c1">#         for i in range(num_actors)</span>
<a id="__codelineno-0-3044" name="__codelineno-0-3044"></a>        <span class="c1">#     ]</span>
<a id="__codelineno-0-3045" name="__codelineno-0-3045"></a>        <span class="c1"># )</span>
<a id="__codelineno-0-3046" name="__codelineno-0-3046"></a>        <span class="c1">#</span>
<a id="__codelineno-0-3047" name="__codelineno-0-3047"></a>        <span class="c1"># # At this point, all the tensors within our collected results are on the CPU.</span>
<a id="__codelineno-0-3048" name="__codelineno-0-3048"></a>        <span class="c1">#</span>
<a id="__codelineno-0-3049" name="__codelineno-0-3049"></a>        <span class="c1"># if torch.device(self.device) != torch.device(&quot;cpu&quot;):</span>
<a id="__codelineno-0-3050" name="__codelineno-0-3050"></a>        <span class="c1">#     # If the main device of this problem instance is not CPU, then we move the tensors to the main device.</span>
<a id="__codelineno-0-3051" name="__codelineno-0-3051"></a>        <span class="c1">#     result = cast_tensors_in_container(result, device=device)</span>
<a id="__codelineno-0-3052" name="__codelineno-0-3052"></a>        <span class="c1">#</span>
<a id="__codelineno-0-3053" name="__codelineno-0-3053"></a>        <span class="c1"># if must_sync_after:</span>
<a id="__codelineno-0-3054" name="__codelineno-0-3054"></a>        <span class="c1">#     # If a post-gradient synchronization is required, we trigger the synchronization operations.</span>
<a id="__codelineno-0-3055" name="__codelineno-0-3055"></a>        <span class="c1">#     self._sync_after()</span>
<a id="__codelineno-0-3056" name="__codelineno-0-3056"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3057" name="__codelineno-0-3057"></a>        <span class="c1"># If the problem is not parallelized, then we request this instance itself to compute the gradients.</span>
<a id="__codelineno-0-3058" name="__codelineno-0-3058"></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gradient_computation_helper</span><span class="p">(</span>
<a id="__codelineno-0-3059" name="__codelineno-0-3059"></a>            <span class="n">distribution</span><span class="p">,</span>
<a id="__codelineno-0-3060" name="__codelineno-0-3060"></a>            <span class="n">popsize</span><span class="p">,</span>
<a id="__codelineno-0-3061" name="__codelineno-0-3061"></a>            <span class="n">popsize_max</span><span class="o">=</span><span class="n">popsize_max</span><span class="p">,</span>
<a id="__codelineno-0-3062" name="__codelineno-0-3062"></a>            <span class="n">obj_index</span><span class="o">=</span><span class="n">obj_index</span><span class="p">,</span>
<a id="__codelineno-0-3063" name="__codelineno-0-3063"></a>            <span class="n">ranking_method</span><span class="o">=</span><span class="n">ranking_method</span><span class="p">,</span>
<a id="__codelineno-0-3064" name="__codelineno-0-3064"></a>            <span class="n">num_interactions</span><span class="o">=</span><span class="n">num_interactions</span><span class="p">,</span>
<a id="__codelineno-0-3065" name="__codelineno-0-3065"></a>            <span class="n">with_stats</span><span class="o">=</span><span class="n">with_stats</span><span class="p">,</span>
<a id="__codelineno-0-3066" name="__codelineno-0-3066"></a>        <span class="p">)</span>
<a id="__codelineno-0-3067" name="__codelineno-0-3067"></a>
<a id="__codelineno-0-3068" name="__codelineno-0-3068"></a>    <span class="c1"># The problem instance in the main process should trigger the `after_grad_hook`.</span>
<a id="__codelineno-0-3069" name="__codelineno-0-3069"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_main</span><span class="p">:</span>
<a id="__codelineno-0-3070" name="__codelineno-0-3070"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_after_eval_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_after_grad_hook</span><span class="o">.</span><span class="n">accumulate_dict</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<a id="__codelineno-0-3071" name="__codelineno-0-3071"></a>
<a id="__codelineno-0-3072" name="__codelineno-0-3072"></a>    <span class="c1"># We finally return the results</span>
<a id="__codelineno-0-3073" name="__codelineno-0-3073"></a>    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="evotorch.ProblemBoundEvaluator" class="doc doc-heading">
            <code>ProblemBoundEvaluator</code>


<a href="#evotorch.ProblemBoundEvaluator" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">


        <p>A callable fitness evaluator, bound to the given <code>Problem</code>.</p>
<p>A callable evaluator returned by the method
<code>Problem.make_callable_evaluator</code> is an instance of this class.
For details, please see the documentation of
<a class="autorefs autorefs-internal" href="core/#evotorch.core.Problem">Problem</a>, and of its method
<code>make_callable_evaluator</code>.</p>







              <details class="quote">
                <summary>Source code in <code>evotorch/core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-5109">5109</a></span>
<span class="normal"><a href="#__codelineno-0-5110">5110</a></span>
<span class="normal"><a href="#__codelineno-0-5111">5111</a></span>
<span class="normal"><a href="#__codelineno-0-5112">5112</a></span>
<span class="normal"><a href="#__codelineno-0-5113">5113</a></span>
<span class="normal"><a href="#__codelineno-0-5114">5114</a></span>
<span class="normal"><a href="#__codelineno-0-5115">5115</a></span>
<span class="normal"><a href="#__codelineno-0-5116">5116</a></span>
<span class="normal"><a href="#__codelineno-0-5117">5117</a></span>
<span class="normal"><a href="#__codelineno-0-5118">5118</a></span>
<span class="normal"><a href="#__codelineno-0-5119">5119</a></span>
<span class="normal"><a href="#__codelineno-0-5120">5120</a></span>
<span class="normal"><a href="#__codelineno-0-5121">5121</a></span>
<span class="normal"><a href="#__codelineno-0-5122">5122</a></span>
<span class="normal"><a href="#__codelineno-0-5123">5123</a></span>
<span class="normal"><a href="#__codelineno-0-5124">5124</a></span>
<span class="normal"><a href="#__codelineno-0-5125">5125</a></span>
<span class="normal"><a href="#__codelineno-0-5126">5126</a></span>
<span class="normal"><a href="#__codelineno-0-5127">5127</a></span>
<span class="normal"><a href="#__codelineno-0-5128">5128</a></span>
<span class="normal"><a href="#__codelineno-0-5129">5129</a></span>
<span class="normal"><a href="#__codelineno-0-5130">5130</a></span>
<span class="normal"><a href="#__codelineno-0-5131">5131</a></span>
<span class="normal"><a href="#__codelineno-0-5132">5132</a></span>
<span class="normal"><a href="#__codelineno-0-5133">5133</a></span>
<span class="normal"><a href="#__codelineno-0-5134">5134</a></span>
<span class="normal"><a href="#__codelineno-0-5135">5135</a></span>
<span class="normal"><a href="#__codelineno-0-5136">5136</a></span>
<span class="normal"><a href="#__codelineno-0-5137">5137</a></span>
<span class="normal"><a href="#__codelineno-0-5138">5138</a></span>
<span class="normal"><a href="#__codelineno-0-5139">5139</a></span>
<span class="normal"><a href="#__codelineno-0-5140">5140</a></span>
<span class="normal"><a href="#__codelineno-0-5141">5141</a></span>
<span class="normal"><a href="#__codelineno-0-5142">5142</a></span>
<span class="normal"><a href="#__codelineno-0-5143">5143</a></span>
<span class="normal"><a href="#__codelineno-0-5144">5144</a></span>
<span class="normal"><a href="#__codelineno-0-5145">5145</a></span>
<span class="normal"><a href="#__codelineno-0-5146">5146</a></span>
<span class="normal"><a href="#__codelineno-0-5147">5147</a></span>
<span class="normal"><a href="#__codelineno-0-5148">5148</a></span>
<span class="normal"><a href="#__codelineno-0-5149">5149</a></span>
<span class="normal"><a href="#__codelineno-0-5150">5150</a></span>
<span class="normal"><a href="#__codelineno-0-5151">5151</a></span>
<span class="normal"><a href="#__codelineno-0-5152">5152</a></span>
<span class="normal"><a href="#__codelineno-0-5153">5153</a></span>
<span class="normal"><a href="#__codelineno-0-5154">5154</a></span>
<span class="normal"><a href="#__codelineno-0-5155">5155</a></span>
<span class="normal"><a href="#__codelineno-0-5156">5156</a></span>
<span class="normal"><a href="#__codelineno-0-5157">5157</a></span>
<span class="normal"><a href="#__codelineno-0-5158">5158</a></span>
<span class="normal"><a href="#__codelineno-0-5159">5159</a></span>
<span class="normal"><a href="#__codelineno-0-5160">5160</a></span>
<span class="normal"><a href="#__codelineno-0-5161">5161</a></span>
<span class="normal"><a href="#__codelineno-0-5162">5162</a></span>
<span class="normal"><a href="#__codelineno-0-5163">5163</a></span>
<span class="normal"><a href="#__codelineno-0-5164">5164</a></span>
<span class="normal"><a href="#__codelineno-0-5165">5165</a></span>
<span class="normal"><a href="#__codelineno-0-5166">5166</a></span>
<span class="normal"><a href="#__codelineno-0-5167">5167</a></span>
<span class="normal"><a href="#__codelineno-0-5168">5168</a></span>
<span class="normal"><a href="#__codelineno-0-5169">5169</a></span>
<span class="normal"><a href="#__codelineno-0-5170">5170</a></span>
<span class="normal"><a href="#__codelineno-0-5171">5171</a></span>
<span class="normal"><a href="#__codelineno-0-5172">5172</a></span>
<span class="normal"><a href="#__codelineno-0-5173">5173</a></span>
<span class="normal"><a href="#__codelineno-0-5174">5174</a></span>
<span class="normal"><a href="#__codelineno-0-5175">5175</a></span>
<span class="normal"><a href="#__codelineno-0-5176">5176</a></span>
<span class="normal"><a href="#__codelineno-0-5177">5177</a></span>
<span class="normal"><a href="#__codelineno-0-5178">5178</a></span>
<span class="normal"><a href="#__codelineno-0-5179">5179</a></span>
<span class="normal"><a href="#__codelineno-0-5180">5180</a></span>
<span class="normal"><a href="#__codelineno-0-5181">5181</a></span>
<span class="normal"><a href="#__codelineno-0-5182">5182</a></span>
<span class="normal"><a href="#__codelineno-0-5183">5183</a></span>
<span class="normal"><a href="#__codelineno-0-5184">5184</a></span>
<span class="normal"><a href="#__codelineno-0-5185">5185</a></span>
<span class="normal"><a href="#__codelineno-0-5186">5186</a></span>
<span class="normal"><a href="#__codelineno-0-5187">5187</a></span>
<span class="normal"><a href="#__codelineno-0-5188">5188</a></span>
<span class="normal"><a href="#__codelineno-0-5189">5189</a></span>
<span class="normal"><a href="#__codelineno-0-5190">5190</a></span>
<span class="normal"><a href="#__codelineno-0-5191">5191</a></span>
<span class="normal"><a href="#__codelineno-0-5192">5192</a></span>
<span class="normal"><a href="#__codelineno-0-5193">5193</a></span>
<span class="normal"><a href="#__codelineno-0-5194">5194</a></span>
<span class="normal"><a href="#__codelineno-0-5195">5195</a></span>
<span class="normal"><a href="#__codelineno-0-5196">5196</a></span>
<span class="normal"><a href="#__codelineno-0-5197">5197</a></span>
<span class="normal"><a href="#__codelineno-0-5198">5198</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-5109" name="__codelineno-0-5109"></a><span class="k">class</span><span class="w"> </span><span class="nc">ProblemBoundEvaluator</span><span class="p">:</span>
<a id="__codelineno-0-5110" name="__codelineno-0-5110"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-5111" name="__codelineno-0-5111"></a><span class="sd">    A callable fitness evaluator, bound to the given `Problem`.</span>
<a id="__codelineno-0-5112" name="__codelineno-0-5112"></a>
<a id="__codelineno-0-5113" name="__codelineno-0-5113"></a><span class="sd">    A callable evaluator returned by the method</span>
<a id="__codelineno-0-5114" name="__codelineno-0-5114"></a><span class="sd">    `Problem.make_callable_evaluator` is an instance of this class.</span>
<a id="__codelineno-0-5115" name="__codelineno-0-5115"></a><span class="sd">    For details, please see the documentation of</span>
<a id="__codelineno-0-5116" name="__codelineno-0-5116"></a><span class="sd">    [Problem][evotorch.core.Problem], and of its method</span>
<a id="__codelineno-0-5117" name="__codelineno-0-5117"></a><span class="sd">    `make_callable_evaluator`.</span>
<a id="__codelineno-0-5118" name="__codelineno-0-5118"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-5119" name="__codelineno-0-5119"></a>
<a id="__codelineno-0-5120" name="__codelineno-0-5120"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">problem</span><span class="p">:</span> <span class="n">Problem</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-5121" name="__codelineno-0-5121"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-5122" name="__codelineno-0-5122"></a><span class="sd">        `__init__(...)`: Initialize the `ProblemBoundEvaluator`.</span>
<a id="__codelineno-0-5123" name="__codelineno-0-5123"></a>
<a id="__codelineno-0-5124" name="__codelineno-0-5124"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-5125" name="__codelineno-0-5125"></a><span class="sd">            problem: The problem object to be wrapped.</span>
<a id="__codelineno-0-5126" name="__codelineno-0-5126"></a><span class="sd">            obj_index: The objective index. Optional if the problem being</span>
<a id="__codelineno-0-5127" name="__codelineno-0-5127"></a><span class="sd">                wrapped is single-objective. If the problem being wrapped</span>
<a id="__codelineno-0-5128" name="__codelineno-0-5128"></a><span class="sd">                is multi-objective, this is expected as an integer.</span>
<a id="__codelineno-0-5129" name="__codelineno-0-5129"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-5130" name="__codelineno-0-5130"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_problem</span> <span class="o">=</span> <span class="n">problem</span>
<a id="__codelineno-0-5131" name="__codelineno-0-5131"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_valid_problem</span><span class="p">()</span>
<a id="__codelineno-0-5132" name="__codelineno-0-5132"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_problem</span><span class="o">.</span><span class="n">is_multi_objective</span> <span class="ow">and</span> <span class="p">(</span><span class="n">obj_index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-5133" name="__codelineno-0-5133"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_multi_objective</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-5134" name="__codelineno-0-5134"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_obj_index</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-5135" name="__codelineno-0-5135"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-5136" name="__codelineno-0-5136"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_multi_objective</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-5137" name="__codelineno-0-5137"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_obj_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_problem</span><span class="o">.</span><span class="n">normalize_obj_index</span><span class="p">(</span><span class="n">obj_index</span><span class="p">)</span>
<a id="__codelineno-0-5138" name="__codelineno-0-5138"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_problem</span><span class="o">.</span><span class="n">ensure_numeric</span><span class="p">()</span>
<a id="__codelineno-0-5139" name="__codelineno-0-5139"></a>        <span class="c1"># if problem.dtype != problem.eval_dtype:</span>
<a id="__codelineno-0-5140" name="__codelineno-0-5140"></a>        <span class="c1">#     raise TypeError(</span>
<a id="__codelineno-0-5141" name="__codelineno-0-5141"></a>        <span class="c1">#         &quot;The dtype of the decision values is not the same with the dtype of the evaluations.&quot;</span>
<a id="__codelineno-0-5142" name="__codelineno-0-5142"></a>        <span class="c1">#         &quot; Currently, it is not supported to make callable evaluators out of problems whose&quot;</span>
<a id="__codelineno-0-5143" name="__codelineno-0-5143"></a>        <span class="c1">#         &quot; decision value dtypes are different than their evaluation dtypes.&quot;</span>
<a id="__codelineno-0-5144" name="__codelineno-0-5144"></a>        <span class="c1">#     )</span>
<a id="__codelineno-0-5145" name="__codelineno-0-5145"></a>
<a id="__codelineno-0-5146" name="__codelineno-0-5146"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_ensure_valid_problem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-5147" name="__codelineno-0-5147"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_problem</span><span class="p">,</span> <span class="n">Problem</span><span class="p">):</span>
<a id="__codelineno-0-5148" name="__codelineno-0-5148"></a>            <span class="n">clsname</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
<a id="__codelineno-0-5149" name="__codelineno-0-5149"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-5150" name="__codelineno-0-5150"></a>                <span class="sa">f</span><span class="s2">&quot;In its initialization phase, </span><span class="si">{</span><span class="n">clsname</span><span class="si">}</span><span class="s2"> expected a `Problem` object,&quot;</span>
<a id="__codelineno-0-5151" name="__codelineno-0-5151"></a>                <span class="sa">f</span><span class="s2">&quot; but found: </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_problem</span><span class="p">)</span><span class="si">}</span><span class="s2"> (of type </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_problem</span><span class="p">))</span><span class="si">}</span><span class="s2">)&quot;</span>
<a id="__codelineno-0-5152" name="__codelineno-0-5152"></a>            <span class="p">)</span>
<a id="__codelineno-0-5153" name="__codelineno-0-5153"></a>
<a id="__codelineno-0-5154" name="__codelineno-0-5154"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_make_empty_solution_batch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">popsize</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SolutionBatch</span><span class="p">:</span>
<a id="__codelineno-0-5155" name="__codelineno-0-5155"></a>        <span class="k">return</span> <span class="n">SolutionBatch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_problem</span><span class="p">,</span> <span class="n">popsize</span><span class="o">=</span><span class="n">popsize</span><span class="p">,</span> <span class="n">empty</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="s2">&quot;meta&quot;</span><span class="p">)</span>
<a id="__codelineno-0-5156" name="__codelineno-0-5156"></a>
<a id="__codelineno-0-5157" name="__codelineno-0-5157"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_prepare_evaluated_solution_batch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values_2d</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SolutionBatch</span><span class="p">:</span>
<a id="__codelineno-0-5158" name="__codelineno-0-5158"></a>        <span class="n">num_solutions</span><span class="p">,</span> <span class="n">solution_length</span> <span class="o">=</span> <span class="n">values_2d</span><span class="o">.</span><span class="n">shape</span>
<a id="__codelineno-0-5159" name="__codelineno-0-5159"></a>        <span class="n">batch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_empty_solution_batch</span><span class="p">(</span><span class="n">num_solutions</span><span class="p">)</span>
<a id="__codelineno-0-5160" name="__codelineno-0-5160"></a>        <span class="n">batch</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">values_2d</span>
<a id="__codelineno-0-5161" name="__codelineno-0-5161"></a>        <span class="n">batch</span><span class="o">.</span><span class="n">_evdata</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">empty_like</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">_evdata</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">values_2d</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-5162" name="__codelineno-0-5162"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_problem</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
<a id="__codelineno-0-5163" name="__codelineno-0-5163"></a>        <span class="k">return</span> <span class="n">batch</span>
<a id="__codelineno-0-5164" name="__codelineno-0-5164"></a>
<a id="__codelineno-0-5165" name="__codelineno-0-5165"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-0-5166" name="__codelineno-0-5166"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-5167" name="__codelineno-0-5167"></a><span class="sd">        Evaluate the solutions expressed by the given `values` tensor.</span>
<a id="__codelineno-0-5168" name="__codelineno-0-5168"></a>
<a id="__codelineno-0-5169" name="__codelineno-0-5169"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-5170" name="__codelineno-0-5170"></a><span class="sd">            values: Decision values. Expected as a tensor with at least</span>
<a id="__codelineno-0-5171" name="__codelineno-0-5171"></a><span class="sd">                2 dimensions. If the number of dimensions is more than 2,</span>
<a id="__codelineno-0-5172" name="__codelineno-0-5172"></a><span class="sd">                the extra leftmost dimensions will be considered as batch</span>
<a id="__codelineno-0-5173" name="__codelineno-0-5173"></a><span class="sd">                dimensions.</span>
<a id="__codelineno-0-5174" name="__codelineno-0-5174"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-5175" name="__codelineno-0-5175"></a><span class="sd">            The fitnesses, as a tensor.</span>
<a id="__codelineno-0-5176" name="__codelineno-0-5176"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-5177" name="__codelineno-0-5177"></a>        <span class="n">ndim</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">ndim</span>
<a id="__codelineno-0-5178" name="__codelineno-0-5178"></a>        <span class="k">if</span> <span class="n">ndim</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-5179" name="__codelineno-0-5179"></a>            <span class="n">clsname</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
<a id="__codelineno-0-5180" name="__codelineno-0-5180"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-5181" name="__codelineno-0-5181"></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">clsname</span><span class="si">}</span><span class="s2"> was expecting a tensor with at least 1 dimension for solution evaluation.&quot;</span>
<a id="__codelineno-0-5182" name="__codelineno-0-5182"></a>                <span class="sa">f</span><span class="s2">&quot; However, it received a scalar: </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-5183" name="__codelineno-0-5183"></a>            <span class="p">)</span>
<a id="__codelineno-0-5184" name="__codelineno-0-5184"></a>
<a id="__codelineno-0-5185" name="__codelineno-0-5185"></a>        <span class="n">solution_length</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-5186" name="__codelineno-0-5186"></a>        <span class="n">original_batch_shape</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-5187" name="__codelineno-0-5187"></a>
<a id="__codelineno-0-5188" name="__codelineno-0-5188"></a>        <span class="n">values</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">solution_length</span><span class="p">)</span>
<a id="__codelineno-0-5189" name="__codelineno-0-5189"></a>        <span class="n">evaluated_batch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prepare_evaluated_solution_batch</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
<a id="__codelineno-0-5190" name="__codelineno-0-5190"></a>
<a id="__codelineno-0-5191" name="__codelineno-0-5191"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_multi_objective</span><span class="p">:</span>
<a id="__codelineno-0-5192" name="__codelineno-0-5192"></a>            <span class="n">evals</span> <span class="o">=</span> <span class="n">evaluated_batch</span><span class="o">.</span><span class="n">evals</span>
<a id="__codelineno-0-5193" name="__codelineno-0-5193"></a>            <span class="n">num_objs</span> <span class="o">=</span> <span class="n">evals</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-5194" name="__codelineno-0-5194"></a>            <span class="n">original_evals_shape</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="o">*</span><span class="n">original_batch_shape</span><span class="p">,</span> <span class="n">num_objs</span><span class="p">])</span>
<a id="__codelineno-0-5195" name="__codelineno-0-5195"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-5196" name="__codelineno-0-5196"></a>            <span class="n">evals</span> <span class="o">=</span> <span class="n">evaluated_batch</span><span class="o">.</span><span class="n">evals</span><span class="p">[:,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_obj_index</span><span class="p">]</span>
<a id="__codelineno-0-5197" name="__codelineno-0-5197"></a>            <span class="n">original_evals_shape</span> <span class="o">=</span> <span class="n">original_batch_shape</span>
<a id="__codelineno-0-5198" name="__codelineno-0-5198"></a>        <span class="k">return</span> <span class="n">evals</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">original_evals_shape</span><span class="p">)</span><span class="o">.</span><span class="n">as_subclass</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="evotorch.ProblemBoundEvaluator.__call__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__call__</span><span class="p">(</span><span class="n">values</span><span class="p">)</span></code>

<a href="#evotorch.ProblemBoundEvaluator.__call__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Evaluate the solutions expressed by the given <code>values</code> tensor.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>values</code>
            </td>
            <td>
                  <code><span title="torch.Tensor">Tensor</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Decision values. Expected as a tensor with at least
2 dimensions. If the number of dimensions is more than 2,
the extra leftmost dimensions will be considered as batch
dimensions.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-5165">5165</a></span>
<span class="normal"><a href="#__codelineno-0-5166">5166</a></span>
<span class="normal"><a href="#__codelineno-0-5167">5167</a></span>
<span class="normal"><a href="#__codelineno-0-5168">5168</a></span>
<span class="normal"><a href="#__codelineno-0-5169">5169</a></span>
<span class="normal"><a href="#__codelineno-0-5170">5170</a></span>
<span class="normal"><a href="#__codelineno-0-5171">5171</a></span>
<span class="normal"><a href="#__codelineno-0-5172">5172</a></span>
<span class="normal"><a href="#__codelineno-0-5173">5173</a></span>
<span class="normal"><a href="#__codelineno-0-5174">5174</a></span>
<span class="normal"><a href="#__codelineno-0-5175">5175</a></span>
<span class="normal"><a href="#__codelineno-0-5176">5176</a></span>
<span class="normal"><a href="#__codelineno-0-5177">5177</a></span>
<span class="normal"><a href="#__codelineno-0-5178">5178</a></span>
<span class="normal"><a href="#__codelineno-0-5179">5179</a></span>
<span class="normal"><a href="#__codelineno-0-5180">5180</a></span>
<span class="normal"><a href="#__codelineno-0-5181">5181</a></span>
<span class="normal"><a href="#__codelineno-0-5182">5182</a></span>
<span class="normal"><a href="#__codelineno-0-5183">5183</a></span>
<span class="normal"><a href="#__codelineno-0-5184">5184</a></span>
<span class="normal"><a href="#__codelineno-0-5185">5185</a></span>
<span class="normal"><a href="#__codelineno-0-5186">5186</a></span>
<span class="normal"><a href="#__codelineno-0-5187">5187</a></span>
<span class="normal"><a href="#__codelineno-0-5188">5188</a></span>
<span class="normal"><a href="#__codelineno-0-5189">5189</a></span>
<span class="normal"><a href="#__codelineno-0-5190">5190</a></span>
<span class="normal"><a href="#__codelineno-0-5191">5191</a></span>
<span class="normal"><a href="#__codelineno-0-5192">5192</a></span>
<span class="normal"><a href="#__codelineno-0-5193">5193</a></span>
<span class="normal"><a href="#__codelineno-0-5194">5194</a></span>
<span class="normal"><a href="#__codelineno-0-5195">5195</a></span>
<span class="normal"><a href="#__codelineno-0-5196">5196</a></span>
<span class="normal"><a href="#__codelineno-0-5197">5197</a></span>
<span class="normal"><a href="#__codelineno-0-5198">5198</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-5165" name="__codelineno-0-5165"></a><span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-0-5166" name="__codelineno-0-5166"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-5167" name="__codelineno-0-5167"></a><span class="sd">    Evaluate the solutions expressed by the given `values` tensor.</span>
<a id="__codelineno-0-5168" name="__codelineno-0-5168"></a>
<a id="__codelineno-0-5169" name="__codelineno-0-5169"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-5170" name="__codelineno-0-5170"></a><span class="sd">        values: Decision values. Expected as a tensor with at least</span>
<a id="__codelineno-0-5171" name="__codelineno-0-5171"></a><span class="sd">            2 dimensions. If the number of dimensions is more than 2,</span>
<a id="__codelineno-0-5172" name="__codelineno-0-5172"></a><span class="sd">            the extra leftmost dimensions will be considered as batch</span>
<a id="__codelineno-0-5173" name="__codelineno-0-5173"></a><span class="sd">            dimensions.</span>
<a id="__codelineno-0-5174" name="__codelineno-0-5174"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-5175" name="__codelineno-0-5175"></a><span class="sd">        The fitnesses, as a tensor.</span>
<a id="__codelineno-0-5176" name="__codelineno-0-5176"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-5177" name="__codelineno-0-5177"></a>    <span class="n">ndim</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">ndim</span>
<a id="__codelineno-0-5178" name="__codelineno-0-5178"></a>    <span class="k">if</span> <span class="n">ndim</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-5179" name="__codelineno-0-5179"></a>        <span class="n">clsname</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
<a id="__codelineno-0-5180" name="__codelineno-0-5180"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-5181" name="__codelineno-0-5181"></a>            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">clsname</span><span class="si">}</span><span class="s2"> was expecting a tensor with at least 1 dimension for solution evaluation.&quot;</span>
<a id="__codelineno-0-5182" name="__codelineno-0-5182"></a>            <span class="sa">f</span><span class="s2">&quot; However, it received a scalar: </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-5183" name="__codelineno-0-5183"></a>        <span class="p">)</span>
<a id="__codelineno-0-5184" name="__codelineno-0-5184"></a>
<a id="__codelineno-0-5185" name="__codelineno-0-5185"></a>    <span class="n">solution_length</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-5186" name="__codelineno-0-5186"></a>    <span class="n">original_batch_shape</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-5187" name="__codelineno-0-5187"></a>
<a id="__codelineno-0-5188" name="__codelineno-0-5188"></a>    <span class="n">values</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">solution_length</span><span class="p">)</span>
<a id="__codelineno-0-5189" name="__codelineno-0-5189"></a>    <span class="n">evaluated_batch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prepare_evaluated_solution_batch</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
<a id="__codelineno-0-5190" name="__codelineno-0-5190"></a>
<a id="__codelineno-0-5191" name="__codelineno-0-5191"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_multi_objective</span><span class="p">:</span>
<a id="__codelineno-0-5192" name="__codelineno-0-5192"></a>        <span class="n">evals</span> <span class="o">=</span> <span class="n">evaluated_batch</span><span class="o">.</span><span class="n">evals</span>
<a id="__codelineno-0-5193" name="__codelineno-0-5193"></a>        <span class="n">num_objs</span> <span class="o">=</span> <span class="n">evals</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-5194" name="__codelineno-0-5194"></a>        <span class="n">original_evals_shape</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="o">*</span><span class="n">original_batch_shape</span><span class="p">,</span> <span class="n">num_objs</span><span class="p">])</span>
<a id="__codelineno-0-5195" name="__codelineno-0-5195"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-5196" name="__codelineno-0-5196"></a>        <span class="n">evals</span> <span class="o">=</span> <span class="n">evaluated_batch</span><span class="o">.</span><span class="n">evals</span><span class="p">[:,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_obj_index</span><span class="p">]</span>
<a id="__codelineno-0-5197" name="__codelineno-0-5197"></a>        <span class="n">original_evals_shape</span> <span class="o">=</span> <span class="n">original_batch_shape</span>
<a id="__codelineno-0-5198" name="__codelineno-0-5198"></a>    <span class="k">return</span> <span class="n">evals</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">original_evals_shape</span><span class="p">)</span><span class="o">.</span><span class="n">as_subclass</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.ProblemBoundEvaluator.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">obj_index</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#evotorch.ProblemBoundEvaluator.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p><code>__init__(...)</code>: Initialize the <code>ProblemBoundEvaluator</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>problem</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Problem (evotorch.core.Problem)" href="core/#evotorch.core.Problem">Problem</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The problem object to be wrapped.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>obj_index</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The objective index. Optional if the problem being
wrapped is single-objective. If the problem being wrapped
is multi-objective, this is expected as an integer.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-5120">5120</a></span>
<span class="normal"><a href="#__codelineno-0-5121">5121</a></span>
<span class="normal"><a href="#__codelineno-0-5122">5122</a></span>
<span class="normal"><a href="#__codelineno-0-5123">5123</a></span>
<span class="normal"><a href="#__codelineno-0-5124">5124</a></span>
<span class="normal"><a href="#__codelineno-0-5125">5125</a></span>
<span class="normal"><a href="#__codelineno-0-5126">5126</a></span>
<span class="normal"><a href="#__codelineno-0-5127">5127</a></span>
<span class="normal"><a href="#__codelineno-0-5128">5128</a></span>
<span class="normal"><a href="#__codelineno-0-5129">5129</a></span>
<span class="normal"><a href="#__codelineno-0-5130">5130</a></span>
<span class="normal"><a href="#__codelineno-0-5131">5131</a></span>
<span class="normal"><a href="#__codelineno-0-5132">5132</a></span>
<span class="normal"><a href="#__codelineno-0-5133">5133</a></span>
<span class="normal"><a href="#__codelineno-0-5134">5134</a></span>
<span class="normal"><a href="#__codelineno-0-5135">5135</a></span>
<span class="normal"><a href="#__codelineno-0-5136">5136</a></span>
<span class="normal"><a href="#__codelineno-0-5137">5137</a></span>
<span class="normal"><a href="#__codelineno-0-5138">5138</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-5120" name="__codelineno-0-5120"></a><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">problem</span><span class="p">:</span> <span class="n">Problem</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-5121" name="__codelineno-0-5121"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-5122" name="__codelineno-0-5122"></a><span class="sd">    `__init__(...)`: Initialize the `ProblemBoundEvaluator`.</span>
<a id="__codelineno-0-5123" name="__codelineno-0-5123"></a>
<a id="__codelineno-0-5124" name="__codelineno-0-5124"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-5125" name="__codelineno-0-5125"></a><span class="sd">        problem: The problem object to be wrapped.</span>
<a id="__codelineno-0-5126" name="__codelineno-0-5126"></a><span class="sd">        obj_index: The objective index. Optional if the problem being</span>
<a id="__codelineno-0-5127" name="__codelineno-0-5127"></a><span class="sd">            wrapped is single-objective. If the problem being wrapped</span>
<a id="__codelineno-0-5128" name="__codelineno-0-5128"></a><span class="sd">            is multi-objective, this is expected as an integer.</span>
<a id="__codelineno-0-5129" name="__codelineno-0-5129"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-5130" name="__codelineno-0-5130"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_problem</span> <span class="o">=</span> <span class="n">problem</span>
<a id="__codelineno-0-5131" name="__codelineno-0-5131"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_valid_problem</span><span class="p">()</span>
<a id="__codelineno-0-5132" name="__codelineno-0-5132"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_problem</span><span class="o">.</span><span class="n">is_multi_objective</span> <span class="ow">and</span> <span class="p">(</span><span class="n">obj_index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-5133" name="__codelineno-0-5133"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_multi_objective</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-5134" name="__codelineno-0-5134"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_obj_index</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-5135" name="__codelineno-0-5135"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-5136" name="__codelineno-0-5136"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_multi_objective</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-5137" name="__codelineno-0-5137"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_obj_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_problem</span><span class="o">.</span><span class="n">normalize_obj_index</span><span class="p">(</span><span class="n">obj_index</span><span class="p">)</span>
<a id="__codelineno-0-5138" name="__codelineno-0-5138"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_problem</span><span class="o">.</span><span class="n">ensure_numeric</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="evotorch.Solution" class="doc doc-heading">
            <code>Solution</code>


<a href="#evotorch.Solution" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="Serializable (evotorch.tools.cloning.Serializable)" href="tools/cloning/#evotorch.tools.cloning.Serializable">Serializable</a></code></p>


        <p>Representation of a single Solution.</p>
<p>A Solution can be a reference to a row of a SolutionBatch
(in which case it shares its storage with the SolutionBatch),
or can be an independent solution.
When the Solution shares its storage with a SolutionBatch,
any modifications to its decision values and/or evaluation
results will affect its parent SolutionBatch as well.</p>
<p>When a Solution object is cloned (via its <code>clone()</code> method,
or via the functions <code>copy.copy(...)</code> and <code>copy.deepcopy(...)</code>,
a new independent Solution object will be created.
This new independent copy will NOT share its storage with
its original SolutionBatch anymore.</p>







              <details class="quote">
                <summary>Source code in <code>evotorch/core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4742">4742</a></span>
<span class="normal"><a href="#__codelineno-0-4743">4743</a></span>
<span class="normal"><a href="#__codelineno-0-4744">4744</a></span>
<span class="normal"><a href="#__codelineno-0-4745">4745</a></span>
<span class="normal"><a href="#__codelineno-0-4746">4746</a></span>
<span class="normal"><a href="#__codelineno-0-4747">4747</a></span>
<span class="normal"><a href="#__codelineno-0-4748">4748</a></span>
<span class="normal"><a href="#__codelineno-0-4749">4749</a></span>
<span class="normal"><a href="#__codelineno-0-4750">4750</a></span>
<span class="normal"><a href="#__codelineno-0-4751">4751</a></span>
<span class="normal"><a href="#__codelineno-0-4752">4752</a></span>
<span class="normal"><a href="#__codelineno-0-4753">4753</a></span>
<span class="normal"><a href="#__codelineno-0-4754">4754</a></span>
<span class="normal"><a href="#__codelineno-0-4755">4755</a></span>
<span class="normal"><a href="#__codelineno-0-4756">4756</a></span>
<span class="normal"><a href="#__codelineno-0-4757">4757</a></span>
<span class="normal"><a href="#__codelineno-0-4758">4758</a></span>
<span class="normal"><a href="#__codelineno-0-4759">4759</a></span>
<span class="normal"><a href="#__codelineno-0-4760">4760</a></span>
<span class="normal"><a href="#__codelineno-0-4761">4761</a></span>
<span class="normal"><a href="#__codelineno-0-4762">4762</a></span>
<span class="normal"><a href="#__codelineno-0-4763">4763</a></span>
<span class="normal"><a href="#__codelineno-0-4764">4764</a></span>
<span class="normal"><a href="#__codelineno-0-4765">4765</a></span>
<span class="normal"><a href="#__codelineno-0-4766">4766</a></span>
<span class="normal"><a href="#__codelineno-0-4767">4767</a></span>
<span class="normal"><a href="#__codelineno-0-4768">4768</a></span>
<span class="normal"><a href="#__codelineno-0-4769">4769</a></span>
<span class="normal"><a href="#__codelineno-0-4770">4770</a></span>
<span class="normal"><a href="#__codelineno-0-4771">4771</a></span>
<span class="normal"><a href="#__codelineno-0-4772">4772</a></span>
<span class="normal"><a href="#__codelineno-0-4773">4773</a></span>
<span class="normal"><a href="#__codelineno-0-4774">4774</a></span>
<span class="normal"><a href="#__codelineno-0-4775">4775</a></span>
<span class="normal"><a href="#__codelineno-0-4776">4776</a></span>
<span class="normal"><a href="#__codelineno-0-4777">4777</a></span>
<span class="normal"><a href="#__codelineno-0-4778">4778</a></span>
<span class="normal"><a href="#__codelineno-0-4779">4779</a></span>
<span class="normal"><a href="#__codelineno-0-4780">4780</a></span>
<span class="normal"><a href="#__codelineno-0-4781">4781</a></span>
<span class="normal"><a href="#__codelineno-0-4782">4782</a></span>
<span class="normal"><a href="#__codelineno-0-4783">4783</a></span>
<span class="normal"><a href="#__codelineno-0-4784">4784</a></span>
<span class="normal"><a href="#__codelineno-0-4785">4785</a></span>
<span class="normal"><a href="#__codelineno-0-4786">4786</a></span>
<span class="normal"><a href="#__codelineno-0-4787">4787</a></span>
<span class="normal"><a href="#__codelineno-0-4788">4788</a></span>
<span class="normal"><a href="#__codelineno-0-4789">4789</a></span>
<span class="normal"><a href="#__codelineno-0-4790">4790</a></span>
<span class="normal"><a href="#__codelineno-0-4791">4791</a></span>
<span class="normal"><a href="#__codelineno-0-4792">4792</a></span>
<span class="normal"><a href="#__codelineno-0-4793">4793</a></span>
<span class="normal"><a href="#__codelineno-0-4794">4794</a></span>
<span class="normal"><a href="#__codelineno-0-4795">4795</a></span>
<span class="normal"><a href="#__codelineno-0-4796">4796</a></span>
<span class="normal"><a href="#__codelineno-0-4797">4797</a></span>
<span class="normal"><a href="#__codelineno-0-4798">4798</a></span>
<span class="normal"><a href="#__codelineno-0-4799">4799</a></span>
<span class="normal"><a href="#__codelineno-0-4800">4800</a></span>
<span class="normal"><a href="#__codelineno-0-4801">4801</a></span>
<span class="normal"><a href="#__codelineno-0-4802">4802</a></span>
<span class="normal"><a href="#__codelineno-0-4803">4803</a></span>
<span class="normal"><a href="#__codelineno-0-4804">4804</a></span>
<span class="normal"><a href="#__codelineno-0-4805">4805</a></span>
<span class="normal"><a href="#__codelineno-0-4806">4806</a></span>
<span class="normal"><a href="#__codelineno-0-4807">4807</a></span>
<span class="normal"><a href="#__codelineno-0-4808">4808</a></span>
<span class="normal"><a href="#__codelineno-0-4809">4809</a></span>
<span class="normal"><a href="#__codelineno-0-4810">4810</a></span>
<span class="normal"><a href="#__codelineno-0-4811">4811</a></span>
<span class="normal"><a href="#__codelineno-0-4812">4812</a></span>
<span class="normal"><a href="#__codelineno-0-4813">4813</a></span>
<span class="normal"><a href="#__codelineno-0-4814">4814</a></span>
<span class="normal"><a href="#__codelineno-0-4815">4815</a></span>
<span class="normal"><a href="#__codelineno-0-4816">4816</a></span>
<span class="normal"><a href="#__codelineno-0-4817">4817</a></span>
<span class="normal"><a href="#__codelineno-0-4818">4818</a></span>
<span class="normal"><a href="#__codelineno-0-4819">4819</a></span>
<span class="normal"><a href="#__codelineno-0-4820">4820</a></span>
<span class="normal"><a href="#__codelineno-0-4821">4821</a></span>
<span class="normal"><a href="#__codelineno-0-4822">4822</a></span>
<span class="normal"><a href="#__codelineno-0-4823">4823</a></span>
<span class="normal"><a href="#__codelineno-0-4824">4824</a></span>
<span class="normal"><a href="#__codelineno-0-4825">4825</a></span>
<span class="normal"><a href="#__codelineno-0-4826">4826</a></span>
<span class="normal"><a href="#__codelineno-0-4827">4827</a></span>
<span class="normal"><a href="#__codelineno-0-4828">4828</a></span>
<span class="normal"><a href="#__codelineno-0-4829">4829</a></span>
<span class="normal"><a href="#__codelineno-0-4830">4830</a></span>
<span class="normal"><a href="#__codelineno-0-4831">4831</a></span>
<span class="normal"><a href="#__codelineno-0-4832">4832</a></span>
<span class="normal"><a href="#__codelineno-0-4833">4833</a></span>
<span class="normal"><a href="#__codelineno-0-4834">4834</a></span>
<span class="normal"><a href="#__codelineno-0-4835">4835</a></span>
<span class="normal"><a href="#__codelineno-0-4836">4836</a></span>
<span class="normal"><a href="#__codelineno-0-4837">4837</a></span>
<span class="normal"><a href="#__codelineno-0-4838">4838</a></span>
<span class="normal"><a href="#__codelineno-0-4839">4839</a></span>
<span class="normal"><a href="#__codelineno-0-4840">4840</a></span>
<span class="normal"><a href="#__codelineno-0-4841">4841</a></span>
<span class="normal"><a href="#__codelineno-0-4842">4842</a></span>
<span class="normal"><a href="#__codelineno-0-4843">4843</a></span>
<span class="normal"><a href="#__codelineno-0-4844">4844</a></span>
<span class="normal"><a href="#__codelineno-0-4845">4845</a></span>
<span class="normal"><a href="#__codelineno-0-4846">4846</a></span>
<span class="normal"><a href="#__codelineno-0-4847">4847</a></span>
<span class="normal"><a href="#__codelineno-0-4848">4848</a></span>
<span class="normal"><a href="#__codelineno-0-4849">4849</a></span>
<span class="normal"><a href="#__codelineno-0-4850">4850</a></span>
<span class="normal"><a href="#__codelineno-0-4851">4851</a></span>
<span class="normal"><a href="#__codelineno-0-4852">4852</a></span>
<span class="normal"><a href="#__codelineno-0-4853">4853</a></span>
<span class="normal"><a href="#__codelineno-0-4854">4854</a></span>
<span class="normal"><a href="#__codelineno-0-4855">4855</a></span>
<span class="normal"><a href="#__codelineno-0-4856">4856</a></span>
<span class="normal"><a href="#__codelineno-0-4857">4857</a></span>
<span class="normal"><a href="#__codelineno-0-4858">4858</a></span>
<span class="normal"><a href="#__codelineno-0-4859">4859</a></span>
<span class="normal"><a href="#__codelineno-0-4860">4860</a></span>
<span class="normal"><a href="#__codelineno-0-4861">4861</a></span>
<span class="normal"><a href="#__codelineno-0-4862">4862</a></span>
<span class="normal"><a href="#__codelineno-0-4863">4863</a></span>
<span class="normal"><a href="#__codelineno-0-4864">4864</a></span>
<span class="normal"><a href="#__codelineno-0-4865">4865</a></span>
<span class="normal"><a href="#__codelineno-0-4866">4866</a></span>
<span class="normal"><a href="#__codelineno-0-4867">4867</a></span>
<span class="normal"><a href="#__codelineno-0-4868">4868</a></span>
<span class="normal"><a href="#__codelineno-0-4869">4869</a></span>
<span class="normal"><a href="#__codelineno-0-4870">4870</a></span>
<span class="normal"><a href="#__codelineno-0-4871">4871</a></span>
<span class="normal"><a href="#__codelineno-0-4872">4872</a></span>
<span class="normal"><a href="#__codelineno-0-4873">4873</a></span>
<span class="normal"><a href="#__codelineno-0-4874">4874</a></span>
<span class="normal"><a href="#__codelineno-0-4875">4875</a></span>
<span class="normal"><a href="#__codelineno-0-4876">4876</a></span>
<span class="normal"><a href="#__codelineno-0-4877">4877</a></span>
<span class="normal"><a href="#__codelineno-0-4878">4878</a></span>
<span class="normal"><a href="#__codelineno-0-4879">4879</a></span>
<span class="normal"><a href="#__codelineno-0-4880">4880</a></span>
<span class="normal"><a href="#__codelineno-0-4881">4881</a></span>
<span class="normal"><a href="#__codelineno-0-4882">4882</a></span>
<span class="normal"><a href="#__codelineno-0-4883">4883</a></span>
<span class="normal"><a href="#__codelineno-0-4884">4884</a></span>
<span class="normal"><a href="#__codelineno-0-4885">4885</a></span>
<span class="normal"><a href="#__codelineno-0-4886">4886</a></span>
<span class="normal"><a href="#__codelineno-0-4887">4887</a></span>
<span class="normal"><a href="#__codelineno-0-4888">4888</a></span>
<span class="normal"><a href="#__codelineno-0-4889">4889</a></span>
<span class="normal"><a href="#__codelineno-0-4890">4890</a></span>
<span class="normal"><a href="#__codelineno-0-4891">4891</a></span>
<span class="normal"><a href="#__codelineno-0-4892">4892</a></span>
<span class="normal"><a href="#__codelineno-0-4893">4893</a></span>
<span class="normal"><a href="#__codelineno-0-4894">4894</a></span>
<span class="normal"><a href="#__codelineno-0-4895">4895</a></span>
<span class="normal"><a href="#__codelineno-0-4896">4896</a></span>
<span class="normal"><a href="#__codelineno-0-4897">4897</a></span>
<span class="normal"><a href="#__codelineno-0-4898">4898</a></span>
<span class="normal"><a href="#__codelineno-0-4899">4899</a></span>
<span class="normal"><a href="#__codelineno-0-4900">4900</a></span>
<span class="normal"><a href="#__codelineno-0-4901">4901</a></span>
<span class="normal"><a href="#__codelineno-0-4902">4902</a></span>
<span class="normal"><a href="#__codelineno-0-4903">4903</a></span>
<span class="normal"><a href="#__codelineno-0-4904">4904</a></span>
<span class="normal"><a href="#__codelineno-0-4905">4905</a></span>
<span class="normal"><a href="#__codelineno-0-4906">4906</a></span>
<span class="normal"><a href="#__codelineno-0-4907">4907</a></span>
<span class="normal"><a href="#__codelineno-0-4908">4908</a></span>
<span class="normal"><a href="#__codelineno-0-4909">4909</a></span>
<span class="normal"><a href="#__codelineno-0-4910">4910</a></span>
<span class="normal"><a href="#__codelineno-0-4911">4911</a></span>
<span class="normal"><a href="#__codelineno-0-4912">4912</a></span>
<span class="normal"><a href="#__codelineno-0-4913">4913</a></span>
<span class="normal"><a href="#__codelineno-0-4914">4914</a></span>
<span class="normal"><a href="#__codelineno-0-4915">4915</a></span>
<span class="normal"><a href="#__codelineno-0-4916">4916</a></span>
<span class="normal"><a href="#__codelineno-0-4917">4917</a></span>
<span class="normal"><a href="#__codelineno-0-4918">4918</a></span>
<span class="normal"><a href="#__codelineno-0-4919">4919</a></span>
<span class="normal"><a href="#__codelineno-0-4920">4920</a></span>
<span class="normal"><a href="#__codelineno-0-4921">4921</a></span>
<span class="normal"><a href="#__codelineno-0-4922">4922</a></span>
<span class="normal"><a href="#__codelineno-0-4923">4923</a></span>
<span class="normal"><a href="#__codelineno-0-4924">4924</a></span>
<span class="normal"><a href="#__codelineno-0-4925">4925</a></span>
<span class="normal"><a href="#__codelineno-0-4926">4926</a></span>
<span class="normal"><a href="#__codelineno-0-4927">4927</a></span>
<span class="normal"><a href="#__codelineno-0-4928">4928</a></span>
<span class="normal"><a href="#__codelineno-0-4929">4929</a></span>
<span class="normal"><a href="#__codelineno-0-4930">4930</a></span>
<span class="normal"><a href="#__codelineno-0-4931">4931</a></span>
<span class="normal"><a href="#__codelineno-0-4932">4932</a></span>
<span class="normal"><a href="#__codelineno-0-4933">4933</a></span>
<span class="normal"><a href="#__codelineno-0-4934">4934</a></span>
<span class="normal"><a href="#__codelineno-0-4935">4935</a></span>
<span class="normal"><a href="#__codelineno-0-4936">4936</a></span>
<span class="normal"><a href="#__codelineno-0-4937">4937</a></span>
<span class="normal"><a href="#__codelineno-0-4938">4938</a></span>
<span class="normal"><a href="#__codelineno-0-4939">4939</a></span>
<span class="normal"><a href="#__codelineno-0-4940">4940</a></span>
<span class="normal"><a href="#__codelineno-0-4941">4941</a></span>
<span class="normal"><a href="#__codelineno-0-4942">4942</a></span>
<span class="normal"><a href="#__codelineno-0-4943">4943</a></span>
<span class="normal"><a href="#__codelineno-0-4944">4944</a></span>
<span class="normal"><a href="#__codelineno-0-4945">4945</a></span>
<span class="normal"><a href="#__codelineno-0-4946">4946</a></span>
<span class="normal"><a href="#__codelineno-0-4947">4947</a></span>
<span class="normal"><a href="#__codelineno-0-4948">4948</a></span>
<span class="normal"><a href="#__codelineno-0-4949">4949</a></span>
<span class="normal"><a href="#__codelineno-0-4950">4950</a></span>
<span class="normal"><a href="#__codelineno-0-4951">4951</a></span>
<span class="normal"><a href="#__codelineno-0-4952">4952</a></span>
<span class="normal"><a href="#__codelineno-0-4953">4953</a></span>
<span class="normal"><a href="#__codelineno-0-4954">4954</a></span>
<span class="normal"><a href="#__codelineno-0-4955">4955</a></span>
<span class="normal"><a href="#__codelineno-0-4956">4956</a></span>
<span class="normal"><a href="#__codelineno-0-4957">4957</a></span>
<span class="normal"><a href="#__codelineno-0-4958">4958</a></span>
<span class="normal"><a href="#__codelineno-0-4959">4959</a></span>
<span class="normal"><a href="#__codelineno-0-4960">4960</a></span>
<span class="normal"><a href="#__codelineno-0-4961">4961</a></span>
<span class="normal"><a href="#__codelineno-0-4962">4962</a></span>
<span class="normal"><a href="#__codelineno-0-4963">4963</a></span>
<span class="normal"><a href="#__codelineno-0-4964">4964</a></span>
<span class="normal"><a href="#__codelineno-0-4965">4965</a></span>
<span class="normal"><a href="#__codelineno-0-4966">4966</a></span>
<span class="normal"><a href="#__codelineno-0-4967">4967</a></span>
<span class="normal"><a href="#__codelineno-0-4968">4968</a></span>
<span class="normal"><a href="#__codelineno-0-4969">4969</a></span>
<span class="normal"><a href="#__codelineno-0-4970">4970</a></span>
<span class="normal"><a href="#__codelineno-0-4971">4971</a></span>
<span class="normal"><a href="#__codelineno-0-4972">4972</a></span>
<span class="normal"><a href="#__codelineno-0-4973">4973</a></span>
<span class="normal"><a href="#__codelineno-0-4974">4974</a></span>
<span class="normal"><a href="#__codelineno-0-4975">4975</a></span>
<span class="normal"><a href="#__codelineno-0-4976">4976</a></span>
<span class="normal"><a href="#__codelineno-0-4977">4977</a></span>
<span class="normal"><a href="#__codelineno-0-4978">4978</a></span>
<span class="normal"><a href="#__codelineno-0-4979">4979</a></span>
<span class="normal"><a href="#__codelineno-0-4980">4980</a></span>
<span class="normal"><a href="#__codelineno-0-4981">4981</a></span>
<span class="normal"><a href="#__codelineno-0-4982">4982</a></span>
<span class="normal"><a href="#__codelineno-0-4983">4983</a></span>
<span class="normal"><a href="#__codelineno-0-4984">4984</a></span>
<span class="normal"><a href="#__codelineno-0-4985">4985</a></span>
<span class="normal"><a href="#__codelineno-0-4986">4986</a></span>
<span class="normal"><a href="#__codelineno-0-4987">4987</a></span>
<span class="normal"><a href="#__codelineno-0-4988">4988</a></span>
<span class="normal"><a href="#__codelineno-0-4989">4989</a></span>
<span class="normal"><a href="#__codelineno-0-4990">4990</a></span>
<span class="normal"><a href="#__codelineno-0-4991">4991</a></span>
<span class="normal"><a href="#__codelineno-0-4992">4992</a></span>
<span class="normal"><a href="#__codelineno-0-4993">4993</a></span>
<span class="normal"><a href="#__codelineno-0-4994">4994</a></span>
<span class="normal"><a href="#__codelineno-0-4995">4995</a></span>
<span class="normal"><a href="#__codelineno-0-4996">4996</a></span>
<span class="normal"><a href="#__codelineno-0-4997">4997</a></span>
<span class="normal"><a href="#__codelineno-0-4998">4998</a></span>
<span class="normal"><a href="#__codelineno-0-4999">4999</a></span>
<span class="normal"><a href="#__codelineno-0-5000">5000</a></span>
<span class="normal"><a href="#__codelineno-0-5001">5001</a></span>
<span class="normal"><a href="#__codelineno-0-5002">5002</a></span>
<span class="normal"><a href="#__codelineno-0-5003">5003</a></span>
<span class="normal"><a href="#__codelineno-0-5004">5004</a></span>
<span class="normal"><a href="#__codelineno-0-5005">5005</a></span>
<span class="normal"><a href="#__codelineno-0-5006">5006</a></span>
<span class="normal"><a href="#__codelineno-0-5007">5007</a></span>
<span class="normal"><a href="#__codelineno-0-5008">5008</a></span>
<span class="normal"><a href="#__codelineno-0-5009">5009</a></span>
<span class="normal"><a href="#__codelineno-0-5010">5010</a></span>
<span class="normal"><a href="#__codelineno-0-5011">5011</a></span>
<span class="normal"><a href="#__codelineno-0-5012">5012</a></span>
<span class="normal"><a href="#__codelineno-0-5013">5013</a></span>
<span class="normal"><a href="#__codelineno-0-5014">5014</a></span>
<span class="normal"><a href="#__codelineno-0-5015">5015</a></span>
<span class="normal"><a href="#__codelineno-0-5016">5016</a></span>
<span class="normal"><a href="#__codelineno-0-5017">5017</a></span>
<span class="normal"><a href="#__codelineno-0-5018">5018</a></span>
<span class="normal"><a href="#__codelineno-0-5019">5019</a></span>
<span class="normal"><a href="#__codelineno-0-5020">5020</a></span>
<span class="normal"><a href="#__codelineno-0-5021">5021</a></span>
<span class="normal"><a href="#__codelineno-0-5022">5022</a></span>
<span class="normal"><a href="#__codelineno-0-5023">5023</a></span>
<span class="normal"><a href="#__codelineno-0-5024">5024</a></span>
<span class="normal"><a href="#__codelineno-0-5025">5025</a></span>
<span class="normal"><a href="#__codelineno-0-5026">5026</a></span>
<span class="normal"><a href="#__codelineno-0-5027">5027</a></span>
<span class="normal"><a href="#__codelineno-0-5028">5028</a></span>
<span class="normal"><a href="#__codelineno-0-5029">5029</a></span>
<span class="normal"><a href="#__codelineno-0-5030">5030</a></span>
<span class="normal"><a href="#__codelineno-0-5031">5031</a></span>
<span class="normal"><a href="#__codelineno-0-5032">5032</a></span>
<span class="normal"><a href="#__codelineno-0-5033">5033</a></span>
<span class="normal"><a href="#__codelineno-0-5034">5034</a></span>
<span class="normal"><a href="#__codelineno-0-5035">5035</a></span>
<span class="normal"><a href="#__codelineno-0-5036">5036</a></span>
<span class="normal"><a href="#__codelineno-0-5037">5037</a></span>
<span class="normal"><a href="#__codelineno-0-5038">5038</a></span>
<span class="normal"><a href="#__codelineno-0-5039">5039</a></span>
<span class="normal"><a href="#__codelineno-0-5040">5040</a></span>
<span class="normal"><a href="#__codelineno-0-5041">5041</a></span>
<span class="normal"><a href="#__codelineno-0-5042">5042</a></span>
<span class="normal"><a href="#__codelineno-0-5043">5043</a></span>
<span class="normal"><a href="#__codelineno-0-5044">5044</a></span>
<span class="normal"><a href="#__codelineno-0-5045">5045</a></span>
<span class="normal"><a href="#__codelineno-0-5046">5046</a></span>
<span class="normal"><a href="#__codelineno-0-5047">5047</a></span>
<span class="normal"><a href="#__codelineno-0-5048">5048</a></span>
<span class="normal"><a href="#__codelineno-0-5049">5049</a></span>
<span class="normal"><a href="#__codelineno-0-5050">5050</a></span>
<span class="normal"><a href="#__codelineno-0-5051">5051</a></span>
<span class="normal"><a href="#__codelineno-0-5052">5052</a></span>
<span class="normal"><a href="#__codelineno-0-5053">5053</a></span>
<span class="normal"><a href="#__codelineno-0-5054">5054</a></span>
<span class="normal"><a href="#__codelineno-0-5055">5055</a></span>
<span class="normal"><a href="#__codelineno-0-5056">5056</a></span>
<span class="normal"><a href="#__codelineno-0-5057">5057</a></span>
<span class="normal"><a href="#__codelineno-0-5058">5058</a></span>
<span class="normal"><a href="#__codelineno-0-5059">5059</a></span>
<span class="normal"><a href="#__codelineno-0-5060">5060</a></span>
<span class="normal"><a href="#__codelineno-0-5061">5061</a></span>
<span class="normal"><a href="#__codelineno-0-5062">5062</a></span>
<span class="normal"><a href="#__codelineno-0-5063">5063</a></span>
<span class="normal"><a href="#__codelineno-0-5064">5064</a></span>
<span class="normal"><a href="#__codelineno-0-5065">5065</a></span>
<span class="normal"><a href="#__codelineno-0-5066">5066</a></span>
<span class="normal"><a href="#__codelineno-0-5067">5067</a></span>
<span class="normal"><a href="#__codelineno-0-5068">5068</a></span>
<span class="normal"><a href="#__codelineno-0-5069">5069</a></span>
<span class="normal"><a href="#__codelineno-0-5070">5070</a></span>
<span class="normal"><a href="#__codelineno-0-5071">5071</a></span>
<span class="normal"><a href="#__codelineno-0-5072">5072</a></span>
<span class="normal"><a href="#__codelineno-0-5073">5073</a></span>
<span class="normal"><a href="#__codelineno-0-5074">5074</a></span>
<span class="normal"><a href="#__codelineno-0-5075">5075</a></span>
<span class="normal"><a href="#__codelineno-0-5076">5076</a></span>
<span class="normal"><a href="#__codelineno-0-5077">5077</a></span>
<span class="normal"><a href="#__codelineno-0-5078">5078</a></span>
<span class="normal"><a href="#__codelineno-0-5079">5079</a></span>
<span class="normal"><a href="#__codelineno-0-5080">5080</a></span>
<span class="normal"><a href="#__codelineno-0-5081">5081</a></span>
<span class="normal"><a href="#__codelineno-0-5082">5082</a></span>
<span class="normal"><a href="#__codelineno-0-5083">5083</a></span>
<span class="normal"><a href="#__codelineno-0-5084">5084</a></span>
<span class="normal"><a href="#__codelineno-0-5085">5085</a></span>
<span class="normal"><a href="#__codelineno-0-5086">5086</a></span>
<span class="normal"><a href="#__codelineno-0-5087">5087</a></span>
<span class="normal"><a href="#__codelineno-0-5088">5088</a></span>
<span class="normal"><a href="#__codelineno-0-5089">5089</a></span>
<span class="normal"><a href="#__codelineno-0-5090">5090</a></span>
<span class="normal"><a href="#__codelineno-0-5091">5091</a></span>
<span class="normal"><a href="#__codelineno-0-5092">5092</a></span>
<span class="normal"><a href="#__codelineno-0-5093">5093</a></span>
<span class="normal"><a href="#__codelineno-0-5094">5094</a></span>
<span class="normal"><a href="#__codelineno-0-5095">5095</a></span>
<span class="normal"><a href="#__codelineno-0-5096">5096</a></span>
<span class="normal"><a href="#__codelineno-0-5097">5097</a></span>
<span class="normal"><a href="#__codelineno-0-5098">5098</a></span>
<span class="normal"><a href="#__codelineno-0-5099">5099</a></span>
<span class="normal"><a href="#__codelineno-0-5100">5100</a></span>
<span class="normal"><a href="#__codelineno-0-5101">5101</a></span>
<span class="normal"><a href="#__codelineno-0-5102">5102</a></span>
<span class="normal"><a href="#__codelineno-0-5103">5103</a></span>
<span class="normal"><a href="#__codelineno-0-5104">5104</a></span>
<span class="normal"><a href="#__codelineno-0-5105">5105</a></span>
<span class="normal"><a href="#__codelineno-0-5106">5106</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4742" name="__codelineno-0-4742"></a><span class="k">class</span><span class="w"> </span><span class="nc">Solution</span><span class="p">(</span><span class="n">Serializable</span><span class="p">):</span>
<a id="__codelineno-0-4743" name="__codelineno-0-4743"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4744" name="__codelineno-0-4744"></a><span class="sd">    Representation of a single Solution.</span>
<a id="__codelineno-0-4745" name="__codelineno-0-4745"></a>
<a id="__codelineno-0-4746" name="__codelineno-0-4746"></a><span class="sd">    A Solution can be a reference to a row of a SolutionBatch</span>
<a id="__codelineno-0-4747" name="__codelineno-0-4747"></a><span class="sd">    (in which case it shares its storage with the SolutionBatch),</span>
<a id="__codelineno-0-4748" name="__codelineno-0-4748"></a><span class="sd">    or can be an independent solution.</span>
<a id="__codelineno-0-4749" name="__codelineno-0-4749"></a><span class="sd">    When the Solution shares its storage with a SolutionBatch,</span>
<a id="__codelineno-0-4750" name="__codelineno-0-4750"></a><span class="sd">    any modifications to its decision values and/or evaluation</span>
<a id="__codelineno-0-4751" name="__codelineno-0-4751"></a><span class="sd">    results will affect its parent SolutionBatch as well.</span>
<a id="__codelineno-0-4752" name="__codelineno-0-4752"></a>
<a id="__codelineno-0-4753" name="__codelineno-0-4753"></a><span class="sd">    When a Solution object is cloned (via its `clone()` method,</span>
<a id="__codelineno-0-4754" name="__codelineno-0-4754"></a><span class="sd">    or via the functions `copy.copy(...)` and `copy.deepcopy(...)`,</span>
<a id="__codelineno-0-4755" name="__codelineno-0-4755"></a><span class="sd">    a new independent Solution object will be created.</span>
<a id="__codelineno-0-4756" name="__codelineno-0-4756"></a><span class="sd">    This new independent copy will NOT share its storage with</span>
<a id="__codelineno-0-4757" name="__codelineno-0-4757"></a><span class="sd">    its original SolutionBatch anymore.</span>
<a id="__codelineno-0-4758" name="__codelineno-0-4758"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4759" name="__codelineno-0-4759"></a>
<a id="__codelineno-0-4760" name="__codelineno-0-4760"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">SolutionBatch</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<a id="__codelineno-0-4761" name="__codelineno-0-4761"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4762" name="__codelineno-0-4762"></a><span class="sd">        `__init__(...)`: Initialize the Solution object.</span>
<a id="__codelineno-0-4763" name="__codelineno-0-4763"></a>
<a id="__codelineno-0-4764" name="__codelineno-0-4764"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4765" name="__codelineno-0-4765"></a><span class="sd">            parent: The parent SolutionBatch which stores the Solution.</span>
<a id="__codelineno-0-4766" name="__codelineno-0-4766"></a><span class="sd">            index: Index of the solution in SolutionBatch.</span>
<a id="__codelineno-0-4767" name="__codelineno-0-4767"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4768" name="__codelineno-0-4768"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">SolutionBatch</span><span class="p">):</span>
<a id="__codelineno-0-4769" name="__codelineno-0-4769"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-4770" name="__codelineno-0-4770"></a>                <span class="sa">f</span><span class="s2">&quot;Expected a SolutionBatch as a parent, but encountered </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span><span class="si">}</span><span class="s2">,&quot;</span>
<a id="__codelineno-0-4771" name="__codelineno-0-4771"></a>                <span class="sa">f</span><span class="s2">&quot; which is of type </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">parent</span><span class="p">))</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-4772" name="__codelineno-0-4772"></a>            <span class="p">)</span>
<a id="__codelineno-0-4773" name="__codelineno-0-4773"></a>        <span class="n">index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
<a id="__codelineno-0-4774" name="__codelineno-0-4774"></a>        <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-4775" name="__codelineno-0-4775"></a>            <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span> <span class="o">+</span> <span class="n">index</span>
<a id="__codelineno-0-4776" name="__codelineno-0-4776"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">((</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">index</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent</span><span class="p">))):</span>
<a id="__codelineno-0-4777" name="__codelineno-0-4777"></a>            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid index: </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-4778" name="__codelineno-0-4778"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="p">:</span> <span class="n">SolutionBatch</span> <span class="o">=</span> <span class="n">parent</span><span class="p">[</span><span class="n">index</span> <span class="p">:</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-4779" name="__codelineno-0-4779"></a>
<a id="__codelineno-0-4780" name="__codelineno-0-4780"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">access_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">keep_evals</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-0-4781" name="__codelineno-0-4781"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4782" name="__codelineno-0-4782"></a><span class="sd">        Access the decision values tensor of the solution.</span>
<a id="__codelineno-0-4783" name="__codelineno-0-4783"></a><span class="sd">        The received tensor will be mutable.</span>
<a id="__codelineno-0-4784" name="__codelineno-0-4784"></a>
<a id="__codelineno-0-4785" name="__codelineno-0-4785"></a><span class="sd">        By default, it will be assumed that the user wishes to</span>
<a id="__codelineno-0-4786" name="__codelineno-0-4786"></a><span class="sd">        obtain this tensor to change the decision values, and therefore,</span>
<a id="__codelineno-0-4787" name="__codelineno-0-4787"></a><span class="sd">        the evaluation results associated with this solution will be</span>
<a id="__codelineno-0-4788" name="__codelineno-0-4788"></a><span class="sd">        cleared (i.e. will be NaN).</span>
<a id="__codelineno-0-4789" name="__codelineno-0-4789"></a>
<a id="__codelineno-0-4790" name="__codelineno-0-4790"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4791" name="__codelineno-0-4791"></a><span class="sd">            keep_evals: When this is set to True, the evaluation results</span>
<a id="__codelineno-0-4792" name="__codelineno-0-4792"></a><span class="sd">                associated with this solution will be kept (i.e. will NOT</span>
<a id="__codelineno-0-4793" name="__codelineno-0-4793"></a><span class="sd">                be cleared).</span>
<a id="__codelineno-0-4794" name="__codelineno-0-4794"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4795" name="__codelineno-0-4795"></a><span class="sd">            The decision values tensor of the solution.</span>
<a id="__codelineno-0-4796" name="__codelineno-0-4796"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4797" name="__codelineno-0-4797"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">access_values</span><span class="p">(</span><span class="n">keep_evals</span><span class="o">=</span><span class="n">keep_evals</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-4798" name="__codelineno-0-4798"></a>
<a id="__codelineno-0-4799" name="__codelineno-0-4799"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">access_evals</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-0-4800" name="__codelineno-0-4800"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4801" name="__codelineno-0-4801"></a><span class="sd">        Access the evaluation results of the solution.</span>
<a id="__codelineno-0-4802" name="__codelineno-0-4802"></a><span class="sd">        The received tensor will be mutable.</span>
<a id="__codelineno-0-4803" name="__codelineno-0-4803"></a>
<a id="__codelineno-0-4804" name="__codelineno-0-4804"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4805" name="__codelineno-0-4805"></a><span class="sd">            The evaluation results tensor of the solution.</span>
<a id="__codelineno-0-4806" name="__codelineno-0-4806"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4807" name="__codelineno-0-4807"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">access_evals</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-4808" name="__codelineno-0-4808"></a>
<a id="__codelineno-0-4809" name="__codelineno-0-4809"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-4810" name="__codelineno-0-4810"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<a id="__codelineno-0-4811" name="__codelineno-0-4811"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4812" name="__codelineno-0-4812"></a><span class="sd">        Decision values of the solution</span>
<a id="__codelineno-0-4813" name="__codelineno-0-4813"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4814" name="__codelineno-0-4814"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-4815" name="__codelineno-0-4815"></a>
<a id="__codelineno-0-4816" name="__codelineno-0-4816"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-4817" name="__codelineno-0-4817"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">evals</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-0-4818" name="__codelineno-0-4818"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4819" name="__codelineno-0-4819"></a><span class="sd">        Evaluation results of the solution in a 1-dimensional tensor.</span>
<a id="__codelineno-0-4820" name="__codelineno-0-4820"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4821" name="__codelineno-0-4821"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">evals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-4822" name="__codelineno-0-4822"></a>
<a id="__codelineno-0-4823" name="__codelineno-0-4823"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-4824" name="__codelineno-0-4824"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">evaluation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-0-4825" name="__codelineno-0-4825"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4826" name="__codelineno-0-4826"></a><span class="sd">        Get the evaluation result.</span>
<a id="__codelineno-0-4827" name="__codelineno-0-4827"></a>
<a id="__codelineno-0-4828" name="__codelineno-0-4828"></a><span class="sd">        If the problem is single-objective and the problem does not</span>
<a id="__codelineno-0-4829" name="__codelineno-0-4829"></a><span class="sd">        allocate any space for extra evaluation data, then a scalar</span>
<a id="__codelineno-0-4830" name="__codelineno-0-4830"></a><span class="sd">        is returned.</span>
<a id="__codelineno-0-4831" name="__codelineno-0-4831"></a><span class="sd">        Otherwise, this property becomes equivalent to the `evals`</span>
<a id="__codelineno-0-4832" name="__codelineno-0-4832"></a><span class="sd">        property, and a 1-dimensional tensor is returned.</span>
<a id="__codelineno-0-4833" name="__codelineno-0-4833"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4834" name="__codelineno-0-4834"></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evals</span>
<a id="__codelineno-0-4835" name="__codelineno-0-4835"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-4836" name="__codelineno-0-4836"></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-4837" name="__codelineno-0-4837"></a>        <span class="k">return</span> <span class="n">result</span>
<a id="__codelineno-0-4838" name="__codelineno-0-4838"></a>
<a id="__codelineno-0-4839" name="__codelineno-0-4839"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<a id="__codelineno-0-4840" name="__codelineno-0-4840"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4841" name="__codelineno-0-4841"></a><span class="sd">        Set the decision values of the Solution.</span>
<a id="__codelineno-0-4842" name="__codelineno-0-4842"></a>
<a id="__codelineno-0-4843" name="__codelineno-0-4843"></a><span class="sd">        Note that modifying the decision values will result in the</span>
<a id="__codelineno-0-4844" name="__codelineno-0-4844"></a><span class="sd">        evaluation results being getting cleared (in more details,</span>
<a id="__codelineno-0-4845" name="__codelineno-0-4845"></a><span class="sd">        the evaluation results tensor will be filled with NaN values).</span>
<a id="__codelineno-0-4846" name="__codelineno-0-4846"></a>
<a id="__codelineno-0-4847" name="__codelineno-0-4847"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4848" name="__codelineno-0-4848"></a><span class="sd">            values: New decision values for this Solution.</span>
<a id="__codelineno-0-4849" name="__codelineno-0-4849"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4850" name="__codelineno-0-4850"></a>        <span class="k">if</span> <span class="n">is_dtype_object</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">):</span>
<a id="__codelineno-0-4851" name="__codelineno-0-4851"></a>            <span class="n">value_tensor</span> <span class="o">=</span> <span class="n">ObjectArray</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-4852" name="__codelineno-0-4852"></a>            <span class="n">value_tensor</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span>
<a id="__codelineno-0-4853" name="__codelineno-0-4853"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4854" name="__codelineno-0-4854"></a>            <span class="n">value_tensor</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">as_tensor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-4855" name="__codelineno-0-4855"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span><span class="n">value_tensor</span><span class="p">)</span>
<a id="__codelineno-0-4856" name="__codelineno-0-4856"></a>
<a id="__codelineno-0-4857" name="__codelineno-0-4857"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_evals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evals</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">,</span> <span class="n">eval_data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-4858" name="__codelineno-0-4858"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4859" name="__codelineno-0-4859"></a><span class="sd">        Set the evaluation results of the Solution.</span>
<a id="__codelineno-0-4860" name="__codelineno-0-4860"></a>
<a id="__codelineno-0-4861" name="__codelineno-0-4861"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4862" name="__codelineno-0-4862"></a><span class="sd">            evals: New evaluation result(s) for the Solution.</span>
<a id="__codelineno-0-4863" name="__codelineno-0-4863"></a><span class="sd">                For single-objective problems, this argument can be given</span>
<a id="__codelineno-0-4864" name="__codelineno-0-4864"></a><span class="sd">                as a scalar.</span>
<a id="__codelineno-0-4865" name="__codelineno-0-4865"></a><span class="sd">                When this argument is given as a scalar (for single-objective</span>
<a id="__codelineno-0-4866" name="__codelineno-0-4866"></a><span class="sd">                cases) or as a tensor which is long enough to cover for</span>
<a id="__codelineno-0-4867" name="__codelineno-0-4867"></a><span class="sd">                all the objectives but not for the extra evaluation data,</span>
<a id="__codelineno-0-4868" name="__codelineno-0-4868"></a><span class="sd">                then the extra evaluation data will be cleared</span>
<a id="__codelineno-0-4869" name="__codelineno-0-4869"></a><span class="sd">                (in more details, extra evaluation data will be filled with</span>
<a id="__codelineno-0-4870" name="__codelineno-0-4870"></a><span class="sd">                NaN values).</span>
<a id="__codelineno-0-4871" name="__codelineno-0-4871"></a><span class="sd">            eval_data: Optionally, the argument `eval_data` can be used to</span>
<a id="__codelineno-0-4872" name="__codelineno-0-4872"></a><span class="sd">                specify extra evaluation data separately.</span>
<a id="__codelineno-0-4873" name="__codelineno-0-4873"></a><span class="sd">                `eval_data` is expected as a 1-dimensional sequence.</span>
<a id="__codelineno-0-4874" name="__codelineno-0-4874"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4875" name="__codelineno-0-4875"></a>        <span class="n">evals</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">as_tensor</span><span class="p">(</span><span class="n">evals</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">eval_dtype</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-4876" name="__codelineno-0-4876"></a>        <span class="k">if</span> <span class="n">evals</span><span class="o">.</span><span class="n">ndim</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
<a id="__codelineno-0-4877" name="__codelineno-0-4877"></a>            <span class="n">evals</span> <span class="o">=</span> <span class="n">evals</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-4878" name="__codelineno-0-4878"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4879" name="__codelineno-0-4879"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4880" name="__codelineno-0-4880"></a>                <span class="sa">f</span><span class="s2">&quot;`set_evals(...)` method of a Solution expects a 1-dimensional or a 2-dimensional&quot;</span>
<a id="__codelineno-0-4881" name="__codelineno-0-4881"></a>                <span class="sa">f</span><span class="s2">&quot; evaluation tensor. However, the received evaluation tensor has </span><span class="si">{</span><span class="n">evals</span><span class="o">.</span><span class="n">ndim</span><span class="si">}</span><span class="s2"> dimensions&quot;</span>
<a id="__codelineno-0-4882" name="__codelineno-0-4882"></a>                <span class="sa">f</span><span class="s2">&quot; (having a shape of </span><span class="si">{</span><span class="n">evals</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">).&quot;</span>
<a id="__codelineno-0-4883" name="__codelineno-0-4883"></a>            <span class="p">)</span>
<a id="__codelineno-0-4884" name="__codelineno-0-4884"></a>
<a id="__codelineno-0-4885" name="__codelineno-0-4885"></a>        <span class="k">if</span> <span class="n">eval_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-4886" name="__codelineno-0-4886"></a>            <span class="n">eval_data</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">as_tensor</span><span class="p">(</span><span class="n">eval_data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">eval_dtype</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-4887" name="__codelineno-0-4887"></a>            <span class="k">if</span> <span class="n">eval_data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-4888" name="__codelineno-0-4888"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4889" name="__codelineno-0-4889"></a>                    <span class="sa">f</span><span class="s2">&quot;The argument `eval_data` was expected as a 1-dimensional sequence.&quot;</span>
<a id="__codelineno-0-4890" name="__codelineno-0-4890"></a>                    <span class="sa">f</span><span class="s2">&quot; However, the shape of `eval_data` is </span><span class="si">{</span><span class="n">eval_data</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-4891" name="__codelineno-0-4891"></a>                <span class="p">)</span>
<a id="__codelineno-0-4892" name="__codelineno-0-4892"></a>            <span class="n">eval_data</span> <span class="o">=</span> <span class="n">eval_data</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-4893" name="__codelineno-0-4893"></a>
<a id="__codelineno-0-4894" name="__codelineno-0-4894"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">set_evals</span><span class="p">(</span><span class="n">evals</span><span class="p">,</span> <span class="n">eval_data</span><span class="p">)</span>
<a id="__codelineno-0-4895" name="__codelineno-0-4895"></a>
<a id="__codelineno-0-4896" name="__codelineno-0-4896"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_evaluation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">:</span> <span class="n">RealOrVector</span><span class="p">,</span> <span class="n">eval_data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-4897" name="__codelineno-0-4897"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4898" name="__codelineno-0-4898"></a><span class="sd">        Set the evaluation results of the Solution.</span>
<a id="__codelineno-0-4899" name="__codelineno-0-4899"></a>
<a id="__codelineno-0-4900" name="__codelineno-0-4900"></a><span class="sd">        This method is an alias for `set_evals(...)`, added for having</span>
<a id="__codelineno-0-4901" name="__codelineno-0-4901"></a><span class="sd">        a setter counterpart for the `evaluation` property of the Solution</span>
<a id="__codelineno-0-4902" name="__codelineno-0-4902"></a><span class="sd">        class.</span>
<a id="__codelineno-0-4903" name="__codelineno-0-4903"></a>
<a id="__codelineno-0-4904" name="__codelineno-0-4904"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4905" name="__codelineno-0-4905"></a><span class="sd">            evaluation: New evaluation result(s) for the Solution.</span>
<a id="__codelineno-0-4906" name="__codelineno-0-4906"></a><span class="sd">                For single-objective problems, this argument can be given</span>
<a id="__codelineno-0-4907" name="__codelineno-0-4907"></a><span class="sd">                as a scalar.</span>
<a id="__codelineno-0-4908" name="__codelineno-0-4908"></a><span class="sd">                When this argument is given as a scalar (for single-objective</span>
<a id="__codelineno-0-4909" name="__codelineno-0-4909"></a><span class="sd">                cases) or as a tensor which is long enough to cover for</span>
<a id="__codelineno-0-4910" name="__codelineno-0-4910"></a><span class="sd">                all the objectives but not for the extra evaluation data,</span>
<a id="__codelineno-0-4911" name="__codelineno-0-4911"></a><span class="sd">                then the extra evaluation data will be cleared</span>
<a id="__codelineno-0-4912" name="__codelineno-0-4912"></a><span class="sd">                (in more details, extra evaluation data will be filled with</span>
<a id="__codelineno-0-4913" name="__codelineno-0-4913"></a><span class="sd">                NaN values).</span>
<a id="__codelineno-0-4914" name="__codelineno-0-4914"></a><span class="sd">            eval_data: Optionally, the argument `eval_data` can be used to</span>
<a id="__codelineno-0-4915" name="__codelineno-0-4915"></a><span class="sd">                specify extra evaluation data separately.</span>
<a id="__codelineno-0-4916" name="__codelineno-0-4916"></a><span class="sd">                `eval_data` is expected as a 1-dimensional sequence.</span>
<a id="__codelineno-0-4917" name="__codelineno-0-4917"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4918" name="__codelineno-0-4918"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_evals</span><span class="p">(</span><span class="n">evaluation</span><span class="p">,</span> <span class="n">eval_data</span><span class="p">)</span>
<a id="__codelineno-0-4919" name="__codelineno-0-4919"></a>
<a id="__codelineno-0-4920" name="__codelineno-0-4920"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">objective_sense</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ObjectiveSense</span><span class="p">:</span>
<a id="__codelineno-0-4921" name="__codelineno-0-4921"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4922" name="__codelineno-0-4922"></a><span class="sd">        Get the objective sense(s) of this Solution&#39;s associated Problem.</span>
<a id="__codelineno-0-4923" name="__codelineno-0-4923"></a>
<a id="__codelineno-0-4924" name="__codelineno-0-4924"></a><span class="sd">        If the problem is single-objective, then a single string is returned.</span>
<a id="__codelineno-0-4925" name="__codelineno-0-4925"></a><span class="sd">        If the problem is multi-objective, then the objective senses will be</span>
<a id="__codelineno-0-4926" name="__codelineno-0-4926"></a><span class="sd">        returned in a list.</span>
<a id="__codelineno-0-4927" name="__codelineno-0-4927"></a>
<a id="__codelineno-0-4928" name="__codelineno-0-4928"></a><span class="sd">        The returned string in the single-objective case, or each returned</span>
<a id="__codelineno-0-4929" name="__codelineno-0-4929"></a><span class="sd">        string in the multi-objective case, is &quot;min&quot; or &quot;max&quot;.</span>
<a id="__codelineno-0-4930" name="__codelineno-0-4930"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4931" name="__codelineno-0-4931"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">objective_sense</span>
<a id="__codelineno-0-4932" name="__codelineno-0-4932"></a>
<a id="__codelineno-0-4933" name="__codelineno-0-4933"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-4934" name="__codelineno-0-4934"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">senses</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<a id="__codelineno-0-4935" name="__codelineno-0-4935"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4936" name="__codelineno-0-4936"></a><span class="sd">        Objective sense(s) of this Solution&#39;s associated Problem.</span>
<a id="__codelineno-0-4937" name="__codelineno-0-4937"></a>
<a id="__codelineno-0-4938" name="__codelineno-0-4938"></a><span class="sd">        This is a list of strings, each string being &quot;min&quot; or &quot;max&quot;.</span>
<a id="__codelineno-0-4939" name="__codelineno-0-4939"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4940" name="__codelineno-0-4940"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">senses</span>
<a id="__codelineno-0-4941" name="__codelineno-0-4941"></a>
<a id="__codelineno-0-4942" name="__codelineno-0-4942"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-4943" name="__codelineno-0-4943"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_evaluated</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-4944" name="__codelineno-0-4944"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4945" name="__codelineno-0-4945"></a><span class="sd">        Whether or not the Solution is fully evaluated.</span>
<a id="__codelineno-0-4946" name="__codelineno-0-4946"></a>
<a id="__codelineno-0-4947" name="__codelineno-0-4947"></a><span class="sd">        This property returns True only when all of the evaluation results</span>
<a id="__codelineno-0-4948" name="__codelineno-0-4948"></a><span class="sd">        for all objectives have numeric values other than NaN.</span>
<a id="__codelineno-0-4949" name="__codelineno-0-4949"></a>
<a id="__codelineno-0-4950" name="__codelineno-0-4950"></a><span class="sd">        This property assumes that the extra evaluation data is optional,</span>
<a id="__codelineno-0-4951" name="__codelineno-0-4951"></a><span class="sd">        and therefore does not take into consideration whether or not the</span>
<a id="__codelineno-0-4952" name="__codelineno-0-4952"></a><span class="sd">        extra evaluation data contains NaN values.</span>
<a id="__codelineno-0-4953" name="__codelineno-0-4953"></a><span class="sd">        In other words, while determining whether or not a solution is fully</span>
<a id="__codelineno-0-4954" name="__codelineno-0-4954"></a><span class="sd">        evaluated, only the evaluation results corresponding to the</span>
<a id="__codelineno-0-4955" name="__codelineno-0-4955"></a><span class="sd">        objectives are taken into account.</span>
<a id="__codelineno-0-4956" name="__codelineno-0-4956"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4957" name="__codelineno-0-4957"></a>        <span class="n">num_objs</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">senses</span><span class="p">)</span>
<a id="__codelineno-0-4958" name="__codelineno-0-4958"></a>        <span class="k">with</span> <span class="n">torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">():</span>
<a id="__codelineno-0-4959" name="__codelineno-0-4959"></a>            <span class="k">return</span> <span class="ow">not</span> <span class="nb">bool</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">evals</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:</span><span class="n">num_objs</span><span class="p">])))</span>
<a id="__codelineno-0-4960" name="__codelineno-0-4960"></a>
<a id="__codelineno-0-4961" name="__codelineno-0-4961"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-4962" name="__codelineno-0-4962"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">dtype</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DType</span><span class="p">:</span>
<a id="__codelineno-0-4963" name="__codelineno-0-4963"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4964" name="__codelineno-0-4964"></a><span class="sd">        dtype of the decision values</span>
<a id="__codelineno-0-4965" name="__codelineno-0-4965"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4966" name="__codelineno-0-4966"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">dtype</span>
<a id="__codelineno-0-4967" name="__codelineno-0-4967"></a>
<a id="__codelineno-0-4968" name="__codelineno-0-4968"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-4969" name="__codelineno-0-4969"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">device</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Device</span><span class="p">:</span>
<a id="__codelineno-0-4970" name="__codelineno-0-4970"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4971" name="__codelineno-0-4971"></a><span class="sd">        The device storing the Solution</span>
<a id="__codelineno-0-4972" name="__codelineno-0-4972"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4973" name="__codelineno-0-4973"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">device</span>
<a id="__codelineno-0-4974" name="__codelineno-0-4974"></a>
<a id="__codelineno-0-4975" name="__codelineno-0-4975"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-4976" name="__codelineno-0-4976"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">eval_dtype</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DType</span><span class="p">:</span>
<a id="__codelineno-0-4977" name="__codelineno-0-4977"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4978" name="__codelineno-0-4978"></a><span class="sd">        dtype of the evaluation results</span>
<a id="__codelineno-0-4979" name="__codelineno-0-4979"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4980" name="__codelineno-0-4980"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">eval_dtype</span>
<a id="__codelineno-0-4981" name="__codelineno-0-4981"></a>
<a id="__codelineno-0-4982" name="__codelineno-0-4982"></a>    <span class="nd">@staticmethod</span>
<a id="__codelineno-0-4983" name="__codelineno-0-4983"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_rightmost_shape</span><span class="p">(</span><span class="n">shape</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">:</span>
<a id="__codelineno-0-4984" name="__codelineno-0-4984"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-4985" name="__codelineno-0-4985"></a>            <span class="k">return</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])])</span>
<a id="__codelineno-0-4986" name="__codelineno-0-4986"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4987" name="__codelineno-0-4987"></a>            <span class="k">return</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">([])</span>
<a id="__codelineno-0-4988" name="__codelineno-0-4988"></a>
<a id="__codelineno-0-4989" name="__codelineno-0-4989"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-4990" name="__codelineno-0-4990"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">shape</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">:</span>
<a id="__codelineno-0-4991" name="__codelineno-0-4991"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4992" name="__codelineno-0-4992"></a><span class="sd">        Shape of the decision values of the Solution</span>
<a id="__codelineno-0-4993" name="__codelineno-0-4993"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4994" name="__codelineno-0-4994"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rightmost_shape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">values_shape</span><span class="p">)</span>
<a id="__codelineno-0-4995" name="__codelineno-0-4995"></a>
<a id="__codelineno-0-4996" name="__codelineno-0-4996"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">:</span>
<a id="__codelineno-0-4997" name="__codelineno-0-4997"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4998" name="__codelineno-0-4998"></a><span class="sd">        Shape of the decision values of the Solution</span>
<a id="__codelineno-0-4999" name="__codelineno-0-4999"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-5000" name="__codelineno-0-5000"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">shape</span>
<a id="__codelineno-0-5001" name="__codelineno-0-5001"></a>
<a id="__codelineno-0-5002" name="__codelineno-0-5002"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-5003" name="__codelineno-0-5003"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">eval_shape</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">:</span>
<a id="__codelineno-0-5004" name="__codelineno-0-5004"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-5005" name="__codelineno-0-5005"></a><span class="sd">        Shape of the evaluation results</span>
<a id="__codelineno-0-5006" name="__codelineno-0-5006"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-5007" name="__codelineno-0-5007"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rightmost_shape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">eval_shape</span><span class="p">)</span>
<a id="__codelineno-0-5008" name="__codelineno-0-5008"></a>
<a id="__codelineno-0-5009" name="__codelineno-0-5009"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-5010" name="__codelineno-0-5010"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ndim</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-5011" name="__codelineno-0-5011"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-5012" name="__codelineno-0-5012"></a><span class="sd">        Number of dimensions of the decision values.</span>
<a id="__codelineno-0-5013" name="__codelineno-0-5013"></a>
<a id="__codelineno-0-5014" name="__codelineno-0-5014"></a><span class="sd">        For numeric solutions (e.g. of dtype `torch.float32`), this returns</span>
<a id="__codelineno-0-5015" name="__codelineno-0-5015"></a><span class="sd">        1, since such numeric solutions are kepts as 1-dimensional vectors.</span>
<a id="__codelineno-0-5016" name="__codelineno-0-5016"></a>
<a id="__codelineno-0-5017" name="__codelineno-0-5017"></a><span class="sd">        When dtype is `object`, `ndim` is reported as whatever the contained</span>
<a id="__codelineno-0-5018" name="__codelineno-0-5018"></a><span class="sd">        object reports as its `ndim`, or 0 if the contained object does not</span>
<a id="__codelineno-0-5019" name="__codelineno-0-5019"></a><span class="sd">        have an `ndim` attribute.</span>
<a id="__codelineno-0-5020" name="__codelineno-0-5020"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-5021" name="__codelineno-0-5021"></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span>
<a id="__codelineno-0-5022" name="__codelineno-0-5022"></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="s2">&quot;ndim&quot;</span><span class="p">):</span>
<a id="__codelineno-0-5023" name="__codelineno-0-5023"></a>            <span class="k">return</span> <span class="n">values</span><span class="o">.</span><span class="n">ndim</span>
<a id="__codelineno-0-5024" name="__codelineno-0-5024"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-5025" name="__codelineno-0-5025"></a>            <span class="k">return</span> <span class="mi">0</span>
<a id="__codelineno-0-5026" name="__codelineno-0-5026"></a>
<a id="__codelineno-0-5027" name="__codelineno-0-5027"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">dim</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-5028" name="__codelineno-0-5028"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-5029" name="__codelineno-0-5029"></a><span class="sd">        This method returns the `ndim` attribute of this Solution.</span>
<a id="__codelineno-0-5030" name="__codelineno-0-5030"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-5031" name="__codelineno-0-5031"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim</span>
<a id="__codelineno-0-5032" name="__codelineno-0-5032"></a>
<a id="__codelineno-0-5033" name="__codelineno-0-5033"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-5034" name="__codelineno-0-5034"></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<a id="__codelineno-0-5035" name="__codelineno-0-5035"></a>
<a id="__codelineno-0-5036" name="__codelineno-0-5036"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-5037" name="__codelineno-0-5037"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="fm">__iter__</span><span class="p">()</span>
<a id="__codelineno-0-5038" name="__codelineno-0-5038"></a>
<a id="__codelineno-0-5039" name="__codelineno-0-5039"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__reversed__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-5040" name="__codelineno-0-5040"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="fm">__reversed__</span><span class="p">()</span>
<a id="__codelineno-0-5041" name="__codelineno-0-5041"></a>
<a id="__codelineno-0-5042" name="__codelineno-0-5042"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
<a id="__codelineno-0-5043" name="__codelineno-0-5043"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-0-5044" name="__codelineno-0-5044"></a>
<a id="__codelineno-0-5045" name="__codelineno-0-5045"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_to_string</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-5046" name="__codelineno-0-5046"></a>        <span class="n">clsname</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
<a id="__codelineno-0-5047" name="__codelineno-0-5047"></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-5048" name="__codelineno-0-5048"></a>
<a id="__codelineno-0-5049" name="__codelineno-0-5049"></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">access_values</span><span class="p">(</span><span class="n">keep_evals</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-5050" name="__codelineno-0-5050"></a>        <span class="n">evals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">access_evals</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-5051" name="__codelineno-0-5051"></a>
<a id="__codelineno-0-5052" name="__codelineno-0-5052"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">write</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
<a id="__codelineno-0-5053" name="__codelineno-0-5053"></a>            <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
<a id="__codelineno-0-5054" name="__codelineno-0-5054"></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
<a id="__codelineno-0-5055" name="__codelineno-0-5055"></a>
<a id="__codelineno-0-5056" name="__codelineno-0-5056"></a>        <span class="n">write</span><span class="p">(</span><span class="s2">&quot;&lt;&quot;</span><span class="p">,</span> <span class="n">clsname</span><span class="p">,</span> <span class="s2">&quot; values=&quot;</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
<a id="__codelineno-0-5057" name="__codelineno-0-5057"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">torch</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">evals</span><span class="p">)):</span>
<a id="__codelineno-0-5058" name="__codelineno-0-5058"></a>            <span class="n">write</span><span class="p">(</span><span class="s2">&quot;, evals=&quot;</span><span class="p">,</span> <span class="n">evals</span><span class="p">)</span>
<a id="__codelineno-0-5059" name="__codelineno-0-5059"></a>        <span class="n">write</span><span class="p">(</span><span class="s2">&quot;&gt;&quot;</span><span class="p">)</span>
<a id="__codelineno-0-5060" name="__codelineno-0-5060"></a>        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<a id="__codelineno-0-5061" name="__codelineno-0-5061"></a>
<a id="__codelineno-0-5062" name="__codelineno-0-5062"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-5063" name="__codelineno-0-5063"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_string</span><span class="p">()</span>
<a id="__codelineno-0-5064" name="__codelineno-0-5064"></a>
<a id="__codelineno-0-5065" name="__codelineno-0-5065"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-5066" name="__codelineno-0-5066"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_string</span><span class="p">()</span>
<a id="__codelineno-0-5067" name="__codelineno-0-5067"></a>
<a id="__codelineno-0-5068" name="__codelineno-0-5068"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_cloned_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">memo</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-5069" name="__codelineno-0-5069"></a>        <span class="k">with</span> <span class="n">_no_grad_if_basic_dtype</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">):</span>
<a id="__codelineno-0-5070" name="__codelineno-0-5070"></a>            <span class="k">return</span> <span class="n">deep_clone</span><span class="p">(</span>
<a id="__codelineno-0-5071" name="__codelineno-0-5071"></a>                <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">,</span>
<a id="__codelineno-0-5072" name="__codelineno-0-5072"></a>                <span class="n">otherwise_deepcopy</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-5073" name="__codelineno-0-5073"></a>                <span class="n">memo</span><span class="o">=</span><span class="n">memo</span><span class="p">,</span>
<a id="__codelineno-0-5074" name="__codelineno-0-5074"></a>            <span class="p">)</span>
<a id="__codelineno-0-5075" name="__codelineno-0-5075"></a>
<a id="__codelineno-0-5076" name="__codelineno-0-5076"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device</span><span class="p">:</span> <span class="n">Device</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Solution&quot;</span><span class="p">:</span>
<a id="__codelineno-0-5077" name="__codelineno-0-5077"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-5078" name="__codelineno-0-5078"></a><span class="sd">        Get the counterpart of this Solution on the new device.</span>
<a id="__codelineno-0-5079" name="__codelineno-0-5079"></a>
<a id="__codelineno-0-5080" name="__codelineno-0-5080"></a><span class="sd">        If the specified device is the device of this Solution,</span>
<a id="__codelineno-0-5081" name="__codelineno-0-5081"></a><span class="sd">        then this Solution itself is returned.</span>
<a id="__codelineno-0-5082" name="__codelineno-0-5082"></a><span class="sd">        If the specified device is a different device, then a clone</span>
<a id="__codelineno-0-5083" name="__codelineno-0-5083"></a><span class="sd">        of this Solution on this different device is first</span>
<a id="__codelineno-0-5084" name="__codelineno-0-5084"></a><span class="sd">        created, and then this new clone is returned.</span>
<a id="__codelineno-0-5085" name="__codelineno-0-5085"></a>
<a id="__codelineno-0-5086" name="__codelineno-0-5086"></a><span class="sd">        Please note that the `to(...)` method is not supported when</span>
<a id="__codelineno-0-5087" name="__codelineno-0-5087"></a><span class="sd">        the dtype is `object`.</span>
<a id="__codelineno-0-5088" name="__codelineno-0-5088"></a>
<a id="__codelineno-0-5089" name="__codelineno-0-5089"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-5090" name="__codelineno-0-5090"></a><span class="sd">            device: The device on which the resulting Solution</span>
<a id="__codelineno-0-5091" name="__codelineno-0-5091"></a><span class="sd">                will be stored.</span>
<a id="__codelineno-0-5092" name="__codelineno-0-5092"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-5093" name="__codelineno-0-5093"></a><span class="sd">            The Solution on the specified device.</span>
<a id="__codelineno-0-5094" name="__codelineno-0-5094"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-5095" name="__codelineno-0-5095"></a>        <span class="k">return</span> <span class="n">Solution</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-5096" name="__codelineno-0-5096"></a>
<a id="__codelineno-0-5097" name="__codelineno-0-5097"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">to_batch</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SolutionBatch</span><span class="p">:</span>
<a id="__codelineno-0-5098" name="__codelineno-0-5098"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-5099" name="__codelineno-0-5099"></a><span class="sd">        Get the single-row SolutionBatch counterpart of the Solution.</span>
<a id="__codelineno-0-5100" name="__codelineno-0-5100"></a><span class="sd">        The returned SolutionBatch and the Solution have shared</span>
<a id="__codelineno-0-5101" name="__codelineno-0-5101"></a><span class="sd">        storage, meaning that modifying one of them affects the other.</span>
<a id="__codelineno-0-5102" name="__codelineno-0-5102"></a>
<a id="__codelineno-0-5103" name="__codelineno-0-5103"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-5104" name="__codelineno-0-5104"></a><span class="sd">            The SolutionBatch counterpart of the Solution.</span>
<a id="__codelineno-0-5105" name="__codelineno-0-5105"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-5106" name="__codelineno-0-5106"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Solution.device" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">device</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Solution.device" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The device storing the Solution</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Solution.dtype" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">dtype</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Solution.dtype" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>dtype of the decision values</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Solution.eval_dtype" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">eval_dtype</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Solution.eval_dtype" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>dtype of the evaluation results</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Solution.eval_shape" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">eval_shape</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Solution.eval_shape" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Shape of the evaluation results</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Solution.evals" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">evals</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Solution.evals" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Evaluation results of the solution in a 1-dimensional tensor.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Solution.evaluation" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">evaluation</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Solution.evaluation" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the evaluation result.</p>
<p>If the problem is single-objective and the problem does not
allocate any space for extra evaluation data, then a scalar
is returned.
Otherwise, this property becomes equivalent to the <code>evals</code>
property, and a 1-dimensional tensor is returned.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Solution.is_evaluated" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_evaluated</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Solution.is_evaluated" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Whether or not the Solution is fully evaluated.</p>
<p>This property returns True only when all of the evaluation results
for all objectives have numeric values other than NaN.</p>
<p>This property assumes that the extra evaluation data is optional,
and therefore does not take into consideration whether or not the
extra evaluation data contains NaN values.
In other words, while determining whether or not a solution is fully
evaluated, only the evaluation results corresponding to the
objectives are taken into account.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Solution.ndim" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ndim</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Solution.ndim" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Number of dimensions of the decision values.</p>
<p>For numeric solutions (e.g. of dtype <code>torch.float32</code>), this returns
1, since such numeric solutions are kepts as 1-dimensional vectors.</p>
<p>When dtype is <code>object</code>, <code>ndim</code> is reported as whatever the contained
object reports as its <code>ndim</code>, or 0 if the contained object does not
have an <code>ndim</code> attribute.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Solution.senses" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">senses</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Solution.senses" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Objective sense(s) of this Solution's associated Problem.</p>
<p>This is a list of strings, each string being "min" or "max".</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Solution.shape" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">shape</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Solution.shape" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Shape of the decision values of the Solution</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.Solution.values" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">values</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.Solution.values" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Decision values of the solution</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="evotorch.Solution.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span></code>

<a href="#evotorch.Solution.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p><code>__init__(...)</code>: Initialize the Solution object.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="SolutionBatch (evotorch.core.SolutionBatch)" href="core/#evotorch.core.SolutionBatch">SolutionBatch</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent SolutionBatch which stores the Solution.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>index</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Index of the solution in SolutionBatch.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4760">4760</a></span>
<span class="normal"><a href="#__codelineno-0-4761">4761</a></span>
<span class="normal"><a href="#__codelineno-0-4762">4762</a></span>
<span class="normal"><a href="#__codelineno-0-4763">4763</a></span>
<span class="normal"><a href="#__codelineno-0-4764">4764</a></span>
<span class="normal"><a href="#__codelineno-0-4765">4765</a></span>
<span class="normal"><a href="#__codelineno-0-4766">4766</a></span>
<span class="normal"><a href="#__codelineno-0-4767">4767</a></span>
<span class="normal"><a href="#__codelineno-0-4768">4768</a></span>
<span class="normal"><a href="#__codelineno-0-4769">4769</a></span>
<span class="normal"><a href="#__codelineno-0-4770">4770</a></span>
<span class="normal"><a href="#__codelineno-0-4771">4771</a></span>
<span class="normal"><a href="#__codelineno-0-4772">4772</a></span>
<span class="normal"><a href="#__codelineno-0-4773">4773</a></span>
<span class="normal"><a href="#__codelineno-0-4774">4774</a></span>
<span class="normal"><a href="#__codelineno-0-4775">4775</a></span>
<span class="normal"><a href="#__codelineno-0-4776">4776</a></span>
<span class="normal"><a href="#__codelineno-0-4777">4777</a></span>
<span class="normal"><a href="#__codelineno-0-4778">4778</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4760" name="__codelineno-0-4760"></a><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">SolutionBatch</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<a id="__codelineno-0-4761" name="__codelineno-0-4761"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4762" name="__codelineno-0-4762"></a><span class="sd">    `__init__(...)`: Initialize the Solution object.</span>
<a id="__codelineno-0-4763" name="__codelineno-0-4763"></a>
<a id="__codelineno-0-4764" name="__codelineno-0-4764"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-4765" name="__codelineno-0-4765"></a><span class="sd">        parent: The parent SolutionBatch which stores the Solution.</span>
<a id="__codelineno-0-4766" name="__codelineno-0-4766"></a><span class="sd">        index: Index of the solution in SolutionBatch.</span>
<a id="__codelineno-0-4767" name="__codelineno-0-4767"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4768" name="__codelineno-0-4768"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">SolutionBatch</span><span class="p">):</span>
<a id="__codelineno-0-4769" name="__codelineno-0-4769"></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-4770" name="__codelineno-0-4770"></a>            <span class="sa">f</span><span class="s2">&quot;Expected a SolutionBatch as a parent, but encountered </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span><span class="si">}</span><span class="s2">,&quot;</span>
<a id="__codelineno-0-4771" name="__codelineno-0-4771"></a>            <span class="sa">f</span><span class="s2">&quot; which is of type </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">parent</span><span class="p">))</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-4772" name="__codelineno-0-4772"></a>        <span class="p">)</span>
<a id="__codelineno-0-4773" name="__codelineno-0-4773"></a>    <span class="n">index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
<a id="__codelineno-0-4774" name="__codelineno-0-4774"></a>    <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-4775" name="__codelineno-0-4775"></a>        <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span> <span class="o">+</span> <span class="n">index</span>
<a id="__codelineno-0-4776" name="__codelineno-0-4776"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="p">((</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">index</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent</span><span class="p">))):</span>
<a id="__codelineno-0-4777" name="__codelineno-0-4777"></a>        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid index: </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-4778" name="__codelineno-0-4778"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="p">:</span> <span class="n">SolutionBatch</span> <span class="o">=</span> <span class="n">parent</span><span class="p">[</span><span class="n">index</span> <span class="p">:</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Solution.access_evals" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">access_evals</span><span class="p">()</span></code>

<a href="#evotorch.Solution.access_evals" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Access the evaluation results of the solution.
The received tensor will be mutable.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="torch.Tensor">Tensor</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The evaluation results tensor of the solution.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4799">4799</a></span>
<span class="normal"><a href="#__codelineno-0-4800">4800</a></span>
<span class="normal"><a href="#__codelineno-0-4801">4801</a></span>
<span class="normal"><a href="#__codelineno-0-4802">4802</a></span>
<span class="normal"><a href="#__codelineno-0-4803">4803</a></span>
<span class="normal"><a href="#__codelineno-0-4804">4804</a></span>
<span class="normal"><a href="#__codelineno-0-4805">4805</a></span>
<span class="normal"><a href="#__codelineno-0-4806">4806</a></span>
<span class="normal"><a href="#__codelineno-0-4807">4807</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4799" name="__codelineno-0-4799"></a><span class="k">def</span><span class="w"> </span><span class="nf">access_evals</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-0-4800" name="__codelineno-0-4800"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4801" name="__codelineno-0-4801"></a><span class="sd">    Access the evaluation results of the solution.</span>
<a id="__codelineno-0-4802" name="__codelineno-0-4802"></a><span class="sd">    The received tensor will be mutable.</span>
<a id="__codelineno-0-4803" name="__codelineno-0-4803"></a>
<a id="__codelineno-0-4804" name="__codelineno-0-4804"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-4805" name="__codelineno-0-4805"></a><span class="sd">        The evaluation results tensor of the solution.</span>
<a id="__codelineno-0-4806" name="__codelineno-0-4806"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4807" name="__codelineno-0-4807"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">access_evals</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Solution.access_values" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">access_values</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">keep_evals</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#evotorch.Solution.access_values" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Access the decision values tensor of the solution.
The received tensor will be mutable.</p>
<p>By default, it will be assumed that the user wishes to
obtain this tensor to change the decision values, and therefore,
the evaluation results associated with this solution will be
cleared (i.e. will be NaN).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>keep_evals</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>When this is set to True, the evaluation results
associated with this solution will be kept (i.e. will NOT
be cleared).</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4780">4780</a></span>
<span class="normal"><a href="#__codelineno-0-4781">4781</a></span>
<span class="normal"><a href="#__codelineno-0-4782">4782</a></span>
<span class="normal"><a href="#__codelineno-0-4783">4783</a></span>
<span class="normal"><a href="#__codelineno-0-4784">4784</a></span>
<span class="normal"><a href="#__codelineno-0-4785">4785</a></span>
<span class="normal"><a href="#__codelineno-0-4786">4786</a></span>
<span class="normal"><a href="#__codelineno-0-4787">4787</a></span>
<span class="normal"><a href="#__codelineno-0-4788">4788</a></span>
<span class="normal"><a href="#__codelineno-0-4789">4789</a></span>
<span class="normal"><a href="#__codelineno-0-4790">4790</a></span>
<span class="normal"><a href="#__codelineno-0-4791">4791</a></span>
<span class="normal"><a href="#__codelineno-0-4792">4792</a></span>
<span class="normal"><a href="#__codelineno-0-4793">4793</a></span>
<span class="normal"><a href="#__codelineno-0-4794">4794</a></span>
<span class="normal"><a href="#__codelineno-0-4795">4795</a></span>
<span class="normal"><a href="#__codelineno-0-4796">4796</a></span>
<span class="normal"><a href="#__codelineno-0-4797">4797</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4780" name="__codelineno-0-4780"></a><span class="k">def</span><span class="w"> </span><span class="nf">access_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">keep_evals</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-0-4781" name="__codelineno-0-4781"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4782" name="__codelineno-0-4782"></a><span class="sd">    Access the decision values tensor of the solution.</span>
<a id="__codelineno-0-4783" name="__codelineno-0-4783"></a><span class="sd">    The received tensor will be mutable.</span>
<a id="__codelineno-0-4784" name="__codelineno-0-4784"></a>
<a id="__codelineno-0-4785" name="__codelineno-0-4785"></a><span class="sd">    By default, it will be assumed that the user wishes to</span>
<a id="__codelineno-0-4786" name="__codelineno-0-4786"></a><span class="sd">    obtain this tensor to change the decision values, and therefore,</span>
<a id="__codelineno-0-4787" name="__codelineno-0-4787"></a><span class="sd">    the evaluation results associated with this solution will be</span>
<a id="__codelineno-0-4788" name="__codelineno-0-4788"></a><span class="sd">    cleared (i.e. will be NaN).</span>
<a id="__codelineno-0-4789" name="__codelineno-0-4789"></a>
<a id="__codelineno-0-4790" name="__codelineno-0-4790"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-4791" name="__codelineno-0-4791"></a><span class="sd">        keep_evals: When this is set to True, the evaluation results</span>
<a id="__codelineno-0-4792" name="__codelineno-0-4792"></a><span class="sd">            associated with this solution will be kept (i.e. will NOT</span>
<a id="__codelineno-0-4793" name="__codelineno-0-4793"></a><span class="sd">            be cleared).</span>
<a id="__codelineno-0-4794" name="__codelineno-0-4794"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-4795" name="__codelineno-0-4795"></a><span class="sd">        The decision values tensor of the solution.</span>
<a id="__codelineno-0-4796" name="__codelineno-0-4796"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4797" name="__codelineno-0-4797"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">access_values</span><span class="p">(</span><span class="n">keep_evals</span><span class="o">=</span><span class="n">keep_evals</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Solution.dim" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">dim</span><span class="p">()</span></code>

<a href="#evotorch.Solution.dim" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>This method returns the <code>ndim</code> attribute of this Solution.</p>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-5027">5027</a></span>
<span class="normal"><a href="#__codelineno-0-5028">5028</a></span>
<span class="normal"><a href="#__codelineno-0-5029">5029</a></span>
<span class="normal"><a href="#__codelineno-0-5030">5030</a></span>
<span class="normal"><a href="#__codelineno-0-5031">5031</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-5027" name="__codelineno-0-5027"></a><span class="k">def</span><span class="w"> </span><span class="nf">dim</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-5028" name="__codelineno-0-5028"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-5029" name="__codelineno-0-5029"></a><span class="sd">    This method returns the `ndim` attribute of this Solution.</span>
<a id="__codelineno-0-5030" name="__codelineno-0-5030"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-5031" name="__codelineno-0-5031"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Solution.objective_sense" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">objective_sense</span><span class="p">()</span></code>

<a href="#evotorch.Solution.objective_sense" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the objective sense(s) of this Solution's associated Problem.</p>
<p>If the problem is single-objective, then a single string is returned.
If the problem is multi-objective, then the objective senses will be
returned in a list.</p>
<p>The returned string in the single-objective case, or each returned
string in the multi-objective case, is "min" or "max".</p>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4920">4920</a></span>
<span class="normal"><a href="#__codelineno-0-4921">4921</a></span>
<span class="normal"><a href="#__codelineno-0-4922">4922</a></span>
<span class="normal"><a href="#__codelineno-0-4923">4923</a></span>
<span class="normal"><a href="#__codelineno-0-4924">4924</a></span>
<span class="normal"><a href="#__codelineno-0-4925">4925</a></span>
<span class="normal"><a href="#__codelineno-0-4926">4926</a></span>
<span class="normal"><a href="#__codelineno-0-4927">4927</a></span>
<span class="normal"><a href="#__codelineno-0-4928">4928</a></span>
<span class="normal"><a href="#__codelineno-0-4929">4929</a></span>
<span class="normal"><a href="#__codelineno-0-4930">4930</a></span>
<span class="normal"><a href="#__codelineno-0-4931">4931</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4920" name="__codelineno-0-4920"></a><span class="k">def</span><span class="w"> </span><span class="nf">objective_sense</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ObjectiveSense</span><span class="p">:</span>
<a id="__codelineno-0-4921" name="__codelineno-0-4921"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4922" name="__codelineno-0-4922"></a><span class="sd">    Get the objective sense(s) of this Solution&#39;s associated Problem.</span>
<a id="__codelineno-0-4923" name="__codelineno-0-4923"></a>
<a id="__codelineno-0-4924" name="__codelineno-0-4924"></a><span class="sd">    If the problem is single-objective, then a single string is returned.</span>
<a id="__codelineno-0-4925" name="__codelineno-0-4925"></a><span class="sd">    If the problem is multi-objective, then the objective senses will be</span>
<a id="__codelineno-0-4926" name="__codelineno-0-4926"></a><span class="sd">    returned in a list.</span>
<a id="__codelineno-0-4927" name="__codelineno-0-4927"></a>
<a id="__codelineno-0-4928" name="__codelineno-0-4928"></a><span class="sd">    The returned string in the single-objective case, or each returned</span>
<a id="__codelineno-0-4929" name="__codelineno-0-4929"></a><span class="sd">    string in the multi-objective case, is &quot;min&quot; or &quot;max&quot;.</span>
<a id="__codelineno-0-4930" name="__codelineno-0-4930"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4931" name="__codelineno-0-4931"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">objective_sense</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Solution.set_evals" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_evals</span><span class="p">(</span><span class="n">evals</span><span class="p">,</span> <span class="n">eval_data</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#evotorch.Solution.set_evals" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Set the evaluation results of the Solution.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>evals</code>
            </td>
            <td>
                  <code><span title="torch.Tensor">Tensor</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New evaluation result(s) for the Solution.
For single-objective problems, this argument can be given
as a scalar.
When this argument is given as a scalar (for single-objective
cases) or as a tensor which is long enough to cover for
all the objectives but not for the extra evaluation data,
then the extra evaluation data will be cleared
(in more details, extra evaluation data will be filled with
NaN values).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>eval_data</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Iterable">Iterable</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optionally, the argument <code>eval_data</code> can be used to
specify extra evaluation data separately.
<code>eval_data</code> is expected as a 1-dimensional sequence.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4857">4857</a></span>
<span class="normal"><a href="#__codelineno-0-4858">4858</a></span>
<span class="normal"><a href="#__codelineno-0-4859">4859</a></span>
<span class="normal"><a href="#__codelineno-0-4860">4860</a></span>
<span class="normal"><a href="#__codelineno-0-4861">4861</a></span>
<span class="normal"><a href="#__codelineno-0-4862">4862</a></span>
<span class="normal"><a href="#__codelineno-0-4863">4863</a></span>
<span class="normal"><a href="#__codelineno-0-4864">4864</a></span>
<span class="normal"><a href="#__codelineno-0-4865">4865</a></span>
<span class="normal"><a href="#__codelineno-0-4866">4866</a></span>
<span class="normal"><a href="#__codelineno-0-4867">4867</a></span>
<span class="normal"><a href="#__codelineno-0-4868">4868</a></span>
<span class="normal"><a href="#__codelineno-0-4869">4869</a></span>
<span class="normal"><a href="#__codelineno-0-4870">4870</a></span>
<span class="normal"><a href="#__codelineno-0-4871">4871</a></span>
<span class="normal"><a href="#__codelineno-0-4872">4872</a></span>
<span class="normal"><a href="#__codelineno-0-4873">4873</a></span>
<span class="normal"><a href="#__codelineno-0-4874">4874</a></span>
<span class="normal"><a href="#__codelineno-0-4875">4875</a></span>
<span class="normal"><a href="#__codelineno-0-4876">4876</a></span>
<span class="normal"><a href="#__codelineno-0-4877">4877</a></span>
<span class="normal"><a href="#__codelineno-0-4878">4878</a></span>
<span class="normal"><a href="#__codelineno-0-4879">4879</a></span>
<span class="normal"><a href="#__codelineno-0-4880">4880</a></span>
<span class="normal"><a href="#__codelineno-0-4881">4881</a></span>
<span class="normal"><a href="#__codelineno-0-4882">4882</a></span>
<span class="normal"><a href="#__codelineno-0-4883">4883</a></span>
<span class="normal"><a href="#__codelineno-0-4884">4884</a></span>
<span class="normal"><a href="#__codelineno-0-4885">4885</a></span>
<span class="normal"><a href="#__codelineno-0-4886">4886</a></span>
<span class="normal"><a href="#__codelineno-0-4887">4887</a></span>
<span class="normal"><a href="#__codelineno-0-4888">4888</a></span>
<span class="normal"><a href="#__codelineno-0-4889">4889</a></span>
<span class="normal"><a href="#__codelineno-0-4890">4890</a></span>
<span class="normal"><a href="#__codelineno-0-4891">4891</a></span>
<span class="normal"><a href="#__codelineno-0-4892">4892</a></span>
<span class="normal"><a href="#__codelineno-0-4893">4893</a></span>
<span class="normal"><a href="#__codelineno-0-4894">4894</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4857" name="__codelineno-0-4857"></a><span class="k">def</span><span class="w"> </span><span class="nf">set_evals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evals</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">,</span> <span class="n">eval_data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-4858" name="__codelineno-0-4858"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4859" name="__codelineno-0-4859"></a><span class="sd">    Set the evaluation results of the Solution.</span>
<a id="__codelineno-0-4860" name="__codelineno-0-4860"></a>
<a id="__codelineno-0-4861" name="__codelineno-0-4861"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-4862" name="__codelineno-0-4862"></a><span class="sd">        evals: New evaluation result(s) for the Solution.</span>
<a id="__codelineno-0-4863" name="__codelineno-0-4863"></a><span class="sd">            For single-objective problems, this argument can be given</span>
<a id="__codelineno-0-4864" name="__codelineno-0-4864"></a><span class="sd">            as a scalar.</span>
<a id="__codelineno-0-4865" name="__codelineno-0-4865"></a><span class="sd">            When this argument is given as a scalar (for single-objective</span>
<a id="__codelineno-0-4866" name="__codelineno-0-4866"></a><span class="sd">            cases) or as a tensor which is long enough to cover for</span>
<a id="__codelineno-0-4867" name="__codelineno-0-4867"></a><span class="sd">            all the objectives but not for the extra evaluation data,</span>
<a id="__codelineno-0-4868" name="__codelineno-0-4868"></a><span class="sd">            then the extra evaluation data will be cleared</span>
<a id="__codelineno-0-4869" name="__codelineno-0-4869"></a><span class="sd">            (in more details, extra evaluation data will be filled with</span>
<a id="__codelineno-0-4870" name="__codelineno-0-4870"></a><span class="sd">            NaN values).</span>
<a id="__codelineno-0-4871" name="__codelineno-0-4871"></a><span class="sd">        eval_data: Optionally, the argument `eval_data` can be used to</span>
<a id="__codelineno-0-4872" name="__codelineno-0-4872"></a><span class="sd">            specify extra evaluation data separately.</span>
<a id="__codelineno-0-4873" name="__codelineno-0-4873"></a><span class="sd">            `eval_data` is expected as a 1-dimensional sequence.</span>
<a id="__codelineno-0-4874" name="__codelineno-0-4874"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4875" name="__codelineno-0-4875"></a>    <span class="n">evals</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">as_tensor</span><span class="p">(</span><span class="n">evals</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">eval_dtype</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-4876" name="__codelineno-0-4876"></a>    <span class="k">if</span> <span class="n">evals</span><span class="o">.</span><span class="n">ndim</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
<a id="__codelineno-0-4877" name="__codelineno-0-4877"></a>        <span class="n">evals</span> <span class="o">=</span> <span class="n">evals</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-4878" name="__codelineno-0-4878"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4879" name="__codelineno-0-4879"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4880" name="__codelineno-0-4880"></a>            <span class="sa">f</span><span class="s2">&quot;`set_evals(...)` method of a Solution expects a 1-dimensional or a 2-dimensional&quot;</span>
<a id="__codelineno-0-4881" name="__codelineno-0-4881"></a>            <span class="sa">f</span><span class="s2">&quot; evaluation tensor. However, the received evaluation tensor has </span><span class="si">{</span><span class="n">evals</span><span class="o">.</span><span class="n">ndim</span><span class="si">}</span><span class="s2"> dimensions&quot;</span>
<a id="__codelineno-0-4882" name="__codelineno-0-4882"></a>            <span class="sa">f</span><span class="s2">&quot; (having a shape of </span><span class="si">{</span><span class="n">evals</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">).&quot;</span>
<a id="__codelineno-0-4883" name="__codelineno-0-4883"></a>        <span class="p">)</span>
<a id="__codelineno-0-4884" name="__codelineno-0-4884"></a>
<a id="__codelineno-0-4885" name="__codelineno-0-4885"></a>    <span class="k">if</span> <span class="n">eval_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-4886" name="__codelineno-0-4886"></a>        <span class="n">eval_data</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">as_tensor</span><span class="p">(</span><span class="n">eval_data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">eval_dtype</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-4887" name="__codelineno-0-4887"></a>        <span class="k">if</span> <span class="n">eval_data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-4888" name="__codelineno-0-4888"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4889" name="__codelineno-0-4889"></a>                <span class="sa">f</span><span class="s2">&quot;The argument `eval_data` was expected as a 1-dimensional sequence.&quot;</span>
<a id="__codelineno-0-4890" name="__codelineno-0-4890"></a>                <span class="sa">f</span><span class="s2">&quot; However, the shape of `eval_data` is </span><span class="si">{</span><span class="n">eval_data</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-4891" name="__codelineno-0-4891"></a>            <span class="p">)</span>
<a id="__codelineno-0-4892" name="__codelineno-0-4892"></a>        <span class="n">eval_data</span> <span class="o">=</span> <span class="n">eval_data</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-4893" name="__codelineno-0-4893"></a>
<a id="__codelineno-0-4894" name="__codelineno-0-4894"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">set_evals</span><span class="p">(</span><span class="n">evals</span><span class="p">,</span> <span class="n">eval_data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Solution.set_evaluation" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_evaluation</span><span class="p">(</span><span class="n">evaluation</span><span class="p">,</span> <span class="n">eval_data</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#evotorch.Solution.set_evaluation" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Set the evaluation results of the Solution.</p>
<p>This method is an alias for <code>set_evals(...)</code>, added for having
a setter counterpart for the <code>evaluation</code> property of the Solution
class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>evaluation</code>
            </td>
            <td>
                  <code><span title="evotorch.tools.RealOrVector">RealOrVector</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New evaluation result(s) for the Solution.
For single-objective problems, this argument can be given
as a scalar.
When this argument is given as a scalar (for single-objective
cases) or as a tensor which is long enough to cover for
all the objectives but not for the extra evaluation data,
then the extra evaluation data will be cleared
(in more details, extra evaluation data will be filled with
NaN values).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>eval_data</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Iterable">Iterable</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optionally, the argument <code>eval_data</code> can be used to
specify extra evaluation data separately.
<code>eval_data</code> is expected as a 1-dimensional sequence.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4896">4896</a></span>
<span class="normal"><a href="#__codelineno-0-4897">4897</a></span>
<span class="normal"><a href="#__codelineno-0-4898">4898</a></span>
<span class="normal"><a href="#__codelineno-0-4899">4899</a></span>
<span class="normal"><a href="#__codelineno-0-4900">4900</a></span>
<span class="normal"><a href="#__codelineno-0-4901">4901</a></span>
<span class="normal"><a href="#__codelineno-0-4902">4902</a></span>
<span class="normal"><a href="#__codelineno-0-4903">4903</a></span>
<span class="normal"><a href="#__codelineno-0-4904">4904</a></span>
<span class="normal"><a href="#__codelineno-0-4905">4905</a></span>
<span class="normal"><a href="#__codelineno-0-4906">4906</a></span>
<span class="normal"><a href="#__codelineno-0-4907">4907</a></span>
<span class="normal"><a href="#__codelineno-0-4908">4908</a></span>
<span class="normal"><a href="#__codelineno-0-4909">4909</a></span>
<span class="normal"><a href="#__codelineno-0-4910">4910</a></span>
<span class="normal"><a href="#__codelineno-0-4911">4911</a></span>
<span class="normal"><a href="#__codelineno-0-4912">4912</a></span>
<span class="normal"><a href="#__codelineno-0-4913">4913</a></span>
<span class="normal"><a href="#__codelineno-0-4914">4914</a></span>
<span class="normal"><a href="#__codelineno-0-4915">4915</a></span>
<span class="normal"><a href="#__codelineno-0-4916">4916</a></span>
<span class="normal"><a href="#__codelineno-0-4917">4917</a></span>
<span class="normal"><a href="#__codelineno-0-4918">4918</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4896" name="__codelineno-0-4896"></a><span class="k">def</span><span class="w"> </span><span class="nf">set_evaluation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">:</span> <span class="n">RealOrVector</span><span class="p">,</span> <span class="n">eval_data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-4897" name="__codelineno-0-4897"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4898" name="__codelineno-0-4898"></a><span class="sd">    Set the evaluation results of the Solution.</span>
<a id="__codelineno-0-4899" name="__codelineno-0-4899"></a>
<a id="__codelineno-0-4900" name="__codelineno-0-4900"></a><span class="sd">    This method is an alias for `set_evals(...)`, added for having</span>
<a id="__codelineno-0-4901" name="__codelineno-0-4901"></a><span class="sd">    a setter counterpart for the `evaluation` property of the Solution</span>
<a id="__codelineno-0-4902" name="__codelineno-0-4902"></a><span class="sd">    class.</span>
<a id="__codelineno-0-4903" name="__codelineno-0-4903"></a>
<a id="__codelineno-0-4904" name="__codelineno-0-4904"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-4905" name="__codelineno-0-4905"></a><span class="sd">        evaluation: New evaluation result(s) for the Solution.</span>
<a id="__codelineno-0-4906" name="__codelineno-0-4906"></a><span class="sd">            For single-objective problems, this argument can be given</span>
<a id="__codelineno-0-4907" name="__codelineno-0-4907"></a><span class="sd">            as a scalar.</span>
<a id="__codelineno-0-4908" name="__codelineno-0-4908"></a><span class="sd">            When this argument is given as a scalar (for single-objective</span>
<a id="__codelineno-0-4909" name="__codelineno-0-4909"></a><span class="sd">            cases) or as a tensor which is long enough to cover for</span>
<a id="__codelineno-0-4910" name="__codelineno-0-4910"></a><span class="sd">            all the objectives but not for the extra evaluation data,</span>
<a id="__codelineno-0-4911" name="__codelineno-0-4911"></a><span class="sd">            then the extra evaluation data will be cleared</span>
<a id="__codelineno-0-4912" name="__codelineno-0-4912"></a><span class="sd">            (in more details, extra evaluation data will be filled with</span>
<a id="__codelineno-0-4913" name="__codelineno-0-4913"></a><span class="sd">            NaN values).</span>
<a id="__codelineno-0-4914" name="__codelineno-0-4914"></a><span class="sd">        eval_data: Optionally, the argument `eval_data` can be used to</span>
<a id="__codelineno-0-4915" name="__codelineno-0-4915"></a><span class="sd">            specify extra evaluation data separately.</span>
<a id="__codelineno-0-4916" name="__codelineno-0-4916"></a><span class="sd">            `eval_data` is expected as a 1-dimensional sequence.</span>
<a id="__codelineno-0-4917" name="__codelineno-0-4917"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4918" name="__codelineno-0-4918"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">set_evals</span><span class="p">(</span><span class="n">evaluation</span><span class="p">,</span> <span class="n">eval_data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Solution.set_values" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_values</span><span class="p">(</span><span class="n">values</span><span class="p">)</span></code>

<a href="#evotorch.Solution.set_values" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Set the decision values of the Solution.</p>
<p>Note that modifying the decision values will result in the
evaluation results being getting cleared (in more details,
the evaluation results tensor will be filled with NaN values).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>values</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New decision values for this Solution.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4839">4839</a></span>
<span class="normal"><a href="#__codelineno-0-4840">4840</a></span>
<span class="normal"><a href="#__codelineno-0-4841">4841</a></span>
<span class="normal"><a href="#__codelineno-0-4842">4842</a></span>
<span class="normal"><a href="#__codelineno-0-4843">4843</a></span>
<span class="normal"><a href="#__codelineno-0-4844">4844</a></span>
<span class="normal"><a href="#__codelineno-0-4845">4845</a></span>
<span class="normal"><a href="#__codelineno-0-4846">4846</a></span>
<span class="normal"><a href="#__codelineno-0-4847">4847</a></span>
<span class="normal"><a href="#__codelineno-0-4848">4848</a></span>
<span class="normal"><a href="#__codelineno-0-4849">4849</a></span>
<span class="normal"><a href="#__codelineno-0-4850">4850</a></span>
<span class="normal"><a href="#__codelineno-0-4851">4851</a></span>
<span class="normal"><a href="#__codelineno-0-4852">4852</a></span>
<span class="normal"><a href="#__codelineno-0-4853">4853</a></span>
<span class="normal"><a href="#__codelineno-0-4854">4854</a></span>
<span class="normal"><a href="#__codelineno-0-4855">4855</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4839" name="__codelineno-0-4839"></a><span class="k">def</span><span class="w"> </span><span class="nf">set_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<a id="__codelineno-0-4840" name="__codelineno-0-4840"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4841" name="__codelineno-0-4841"></a><span class="sd">    Set the decision values of the Solution.</span>
<a id="__codelineno-0-4842" name="__codelineno-0-4842"></a>
<a id="__codelineno-0-4843" name="__codelineno-0-4843"></a><span class="sd">    Note that modifying the decision values will result in the</span>
<a id="__codelineno-0-4844" name="__codelineno-0-4844"></a><span class="sd">    evaluation results being getting cleared (in more details,</span>
<a id="__codelineno-0-4845" name="__codelineno-0-4845"></a><span class="sd">    the evaluation results tensor will be filled with NaN values).</span>
<a id="__codelineno-0-4846" name="__codelineno-0-4846"></a>
<a id="__codelineno-0-4847" name="__codelineno-0-4847"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-4848" name="__codelineno-0-4848"></a><span class="sd">        values: New decision values for this Solution.</span>
<a id="__codelineno-0-4849" name="__codelineno-0-4849"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4850" name="__codelineno-0-4850"></a>    <span class="k">if</span> <span class="n">is_dtype_object</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">):</span>
<a id="__codelineno-0-4851" name="__codelineno-0-4851"></a>        <span class="n">value_tensor</span> <span class="o">=</span> <span class="n">ObjectArray</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-4852" name="__codelineno-0-4852"></a>        <span class="n">value_tensor</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span>
<a id="__codelineno-0-4853" name="__codelineno-0-4853"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4854" name="__codelineno-0-4854"></a>        <span class="n">value_tensor</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">as_tensor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-4855" name="__codelineno-0-4855"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span><span class="n">value_tensor</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Solution.size" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">size</span><span class="p">()</span></code>

<a href="#evotorch.Solution.size" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Shape of the decision values of the Solution</p>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4996">4996</a></span>
<span class="normal"><a href="#__codelineno-0-4997">4997</a></span>
<span class="normal"><a href="#__codelineno-0-4998">4998</a></span>
<span class="normal"><a href="#__codelineno-0-4999">4999</a></span>
<span class="normal"><a href="#__codelineno-0-5000">5000</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4996" name="__codelineno-0-4996"></a><span class="k">def</span><span class="w"> </span><span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">:</span>
<a id="__codelineno-0-4997" name="__codelineno-0-4997"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4998" name="__codelineno-0-4998"></a><span class="sd">    Shape of the decision values of the Solution</span>
<a id="__codelineno-0-4999" name="__codelineno-0-4999"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-5000" name="__codelineno-0-5000"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">shape</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Solution.to" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span></code>

<a href="#evotorch.Solution.to" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the counterpart of this Solution on the new device.</p>
<p>If the specified device is the device of this Solution,
then this Solution itself is returned.
If the specified device is a different device, then a clone
of this Solution on this different device is first
created, and then this new clone is returned.</p>
<p>Please note that the <code>to(...)</code> method is not supported when
the dtype is <code>object</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>device</code>
            </td>
            <td>
                  <code><span title="evotorch.tools.Device">Device</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The device on which the resulting Solution
will be stored.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-5076">5076</a></span>
<span class="normal"><a href="#__codelineno-0-5077">5077</a></span>
<span class="normal"><a href="#__codelineno-0-5078">5078</a></span>
<span class="normal"><a href="#__codelineno-0-5079">5079</a></span>
<span class="normal"><a href="#__codelineno-0-5080">5080</a></span>
<span class="normal"><a href="#__codelineno-0-5081">5081</a></span>
<span class="normal"><a href="#__codelineno-0-5082">5082</a></span>
<span class="normal"><a href="#__codelineno-0-5083">5083</a></span>
<span class="normal"><a href="#__codelineno-0-5084">5084</a></span>
<span class="normal"><a href="#__codelineno-0-5085">5085</a></span>
<span class="normal"><a href="#__codelineno-0-5086">5086</a></span>
<span class="normal"><a href="#__codelineno-0-5087">5087</a></span>
<span class="normal"><a href="#__codelineno-0-5088">5088</a></span>
<span class="normal"><a href="#__codelineno-0-5089">5089</a></span>
<span class="normal"><a href="#__codelineno-0-5090">5090</a></span>
<span class="normal"><a href="#__codelineno-0-5091">5091</a></span>
<span class="normal"><a href="#__codelineno-0-5092">5092</a></span>
<span class="normal"><a href="#__codelineno-0-5093">5093</a></span>
<span class="normal"><a href="#__codelineno-0-5094">5094</a></span>
<span class="normal"><a href="#__codelineno-0-5095">5095</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-5076" name="__codelineno-0-5076"></a><span class="k">def</span><span class="w"> </span><span class="nf">to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device</span><span class="p">:</span> <span class="n">Device</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Solution&quot;</span><span class="p">:</span>
<a id="__codelineno-0-5077" name="__codelineno-0-5077"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-5078" name="__codelineno-0-5078"></a><span class="sd">    Get the counterpart of this Solution on the new device.</span>
<a id="__codelineno-0-5079" name="__codelineno-0-5079"></a>
<a id="__codelineno-0-5080" name="__codelineno-0-5080"></a><span class="sd">    If the specified device is the device of this Solution,</span>
<a id="__codelineno-0-5081" name="__codelineno-0-5081"></a><span class="sd">    then this Solution itself is returned.</span>
<a id="__codelineno-0-5082" name="__codelineno-0-5082"></a><span class="sd">    If the specified device is a different device, then a clone</span>
<a id="__codelineno-0-5083" name="__codelineno-0-5083"></a><span class="sd">    of this Solution on this different device is first</span>
<a id="__codelineno-0-5084" name="__codelineno-0-5084"></a><span class="sd">    created, and then this new clone is returned.</span>
<a id="__codelineno-0-5085" name="__codelineno-0-5085"></a>
<a id="__codelineno-0-5086" name="__codelineno-0-5086"></a><span class="sd">    Please note that the `to(...)` method is not supported when</span>
<a id="__codelineno-0-5087" name="__codelineno-0-5087"></a><span class="sd">    the dtype is `object`.</span>
<a id="__codelineno-0-5088" name="__codelineno-0-5088"></a>
<a id="__codelineno-0-5089" name="__codelineno-0-5089"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-5090" name="__codelineno-0-5090"></a><span class="sd">        device: The device on which the resulting Solution</span>
<a id="__codelineno-0-5091" name="__codelineno-0-5091"></a><span class="sd">            will be stored.</span>
<a id="__codelineno-0-5092" name="__codelineno-0-5092"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-5093" name="__codelineno-0-5093"></a><span class="sd">        The Solution on the specified device.</span>
<a id="__codelineno-0-5094" name="__codelineno-0-5094"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-5095" name="__codelineno-0-5095"></a>    <span class="k">return</span> <span class="n">Solution</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_batch</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.Solution.to_batch" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to_batch</span><span class="p">()</span></code>

<a href="#evotorch.Solution.to_batch" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the single-row SolutionBatch counterpart of the Solution.
The returned SolutionBatch and the Solution have shared
storage, meaning that modifying one of them affects the other.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="SolutionBatch (evotorch.core.SolutionBatch)" href="core/#evotorch.core.SolutionBatch">SolutionBatch</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The SolutionBatch counterpart of the Solution.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-5097">5097</a></span>
<span class="normal"><a href="#__codelineno-0-5098">5098</a></span>
<span class="normal"><a href="#__codelineno-0-5099">5099</a></span>
<span class="normal"><a href="#__codelineno-0-5100">5100</a></span>
<span class="normal"><a href="#__codelineno-0-5101">5101</a></span>
<span class="normal"><a href="#__codelineno-0-5102">5102</a></span>
<span class="normal"><a href="#__codelineno-0-5103">5103</a></span>
<span class="normal"><a href="#__codelineno-0-5104">5104</a></span>
<span class="normal"><a href="#__codelineno-0-5105">5105</a></span>
<span class="normal"><a href="#__codelineno-0-5106">5106</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-5097" name="__codelineno-0-5097"></a><span class="k">def</span><span class="w"> </span><span class="nf">to_batch</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SolutionBatch</span><span class="p">:</span>
<a id="__codelineno-0-5098" name="__codelineno-0-5098"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-5099" name="__codelineno-0-5099"></a><span class="sd">    Get the single-row SolutionBatch counterpart of the Solution.</span>
<a id="__codelineno-0-5100" name="__codelineno-0-5100"></a><span class="sd">    The returned SolutionBatch and the Solution have shared</span>
<a id="__codelineno-0-5101" name="__codelineno-0-5101"></a><span class="sd">    storage, meaning that modifying one of them affects the other.</span>
<a id="__codelineno-0-5102" name="__codelineno-0-5102"></a>
<a id="__codelineno-0-5103" name="__codelineno-0-5103"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-5104" name="__codelineno-0-5104"></a><span class="sd">        The SolutionBatch counterpart of the Solution.</span>
<a id="__codelineno-0-5105" name="__codelineno-0-5105"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-5106" name="__codelineno-0-5106"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="evotorch.SolutionBatch" class="doc doc-heading">
            <code>SolutionBatch</code>


<a href="#evotorch.SolutionBatch" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="Serializable (evotorch.tools.cloning.Serializable)" href="tools/cloning/#evotorch.tools.cloning.Serializable">Serializable</a></code></p>


        <p>Representation of a batch of solutions.</p>
<p>A SolutionBatch stores the decision values of multiple solutions
in a single contiguous tensor. For numeric and fixed-length
problems, this contiguous tensor is a PyTorch tensor.
For not-necessarily-numeric and not-necessarily-fixed-length
problems, this contiguous tensor is an ObjectArray.</p>
<p>The evalution results and extra evaluation data of the solutions
are also stored in an additional contiguous tensor.</p>
<p>Interface-wise, a SolutionBatch behaves like a sequence of
Solution objects. One can get single Solution from a SolutionBatch
via the indexing operator (<code>[]</code>).
Additionally, one can iterate over each solution using
the <code>for ... in ...</code> statement.</p>
<p>One can also get a slice of a SolutionBatch.
The slicing of a SolutionBatch results in a new SolutionBatch.
With simple slicing, the obtained SolutionBatch shares its
memory with the original SolutionBatch.
With advanced slicing (i.e. the kind of slicing where the
solution indices are specified one by one, like:
<code>mybatch[[0, 4, 2, 5]]</code>), the obtained SolutionBatch is a copy,
and does not share any memory with its original.</p>
<p>The decision values of all the stored solutions in the batch
can be obtained in a read-only tensor via:</p>
<div class="highlight"><pre><span></span><code>values = batch.values
</code></pre></div>
<p>If one has modified decision values and wishes to put them
into the batch, the <code>set_values(...)</code> method can be used
as follows:</p>
<div class="highlight"><pre><span></span><code>batch.set_values(modified_values)
</code></pre></div>
<p>The evaluation results of the solutions can be obtained
in a read-only tensor via:</p>
<div class="highlight"><pre><span></span><code>evals = batch.evals
</code></pre></div>
<p>If one has newly computed evaluation results, and wishes
to put them into the batch, the <code>set_evals(...)</code> method
can be used as follows:</p>
<div class="highlight"><pre><span></span><code>batch.set_evals(newly_computed_evals)
</code></pre></div>







              <details class="quote">
                <summary>Source code in <code>evotorch/core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3590">3590</a></span>
<span class="normal"><a href="#__codelineno-0-3591">3591</a></span>
<span class="normal"><a href="#__codelineno-0-3592">3592</a></span>
<span class="normal"><a href="#__codelineno-0-3593">3593</a></span>
<span class="normal"><a href="#__codelineno-0-3594">3594</a></span>
<span class="normal"><a href="#__codelineno-0-3595">3595</a></span>
<span class="normal"><a href="#__codelineno-0-3596">3596</a></span>
<span class="normal"><a href="#__codelineno-0-3597">3597</a></span>
<span class="normal"><a href="#__codelineno-0-3598">3598</a></span>
<span class="normal"><a href="#__codelineno-0-3599">3599</a></span>
<span class="normal"><a href="#__codelineno-0-3600">3600</a></span>
<span class="normal"><a href="#__codelineno-0-3601">3601</a></span>
<span class="normal"><a href="#__codelineno-0-3602">3602</a></span>
<span class="normal"><a href="#__codelineno-0-3603">3603</a></span>
<span class="normal"><a href="#__codelineno-0-3604">3604</a></span>
<span class="normal"><a href="#__codelineno-0-3605">3605</a></span>
<span class="normal"><a href="#__codelineno-0-3606">3606</a></span>
<span class="normal"><a href="#__codelineno-0-3607">3607</a></span>
<span class="normal"><a href="#__codelineno-0-3608">3608</a></span>
<span class="normal"><a href="#__codelineno-0-3609">3609</a></span>
<span class="normal"><a href="#__codelineno-0-3610">3610</a></span>
<span class="normal"><a href="#__codelineno-0-3611">3611</a></span>
<span class="normal"><a href="#__codelineno-0-3612">3612</a></span>
<span class="normal"><a href="#__codelineno-0-3613">3613</a></span>
<span class="normal"><a href="#__codelineno-0-3614">3614</a></span>
<span class="normal"><a href="#__codelineno-0-3615">3615</a></span>
<span class="normal"><a href="#__codelineno-0-3616">3616</a></span>
<span class="normal"><a href="#__codelineno-0-3617">3617</a></span>
<span class="normal"><a href="#__codelineno-0-3618">3618</a></span>
<span class="normal"><a href="#__codelineno-0-3619">3619</a></span>
<span class="normal"><a href="#__codelineno-0-3620">3620</a></span>
<span class="normal"><a href="#__codelineno-0-3621">3621</a></span>
<span class="normal"><a href="#__codelineno-0-3622">3622</a></span>
<span class="normal"><a href="#__codelineno-0-3623">3623</a></span>
<span class="normal"><a href="#__codelineno-0-3624">3624</a></span>
<span class="normal"><a href="#__codelineno-0-3625">3625</a></span>
<span class="normal"><a href="#__codelineno-0-3626">3626</a></span>
<span class="normal"><a href="#__codelineno-0-3627">3627</a></span>
<span class="normal"><a href="#__codelineno-0-3628">3628</a></span>
<span class="normal"><a href="#__codelineno-0-3629">3629</a></span>
<span class="normal"><a href="#__codelineno-0-3630">3630</a></span>
<span class="normal"><a href="#__codelineno-0-3631">3631</a></span>
<span class="normal"><a href="#__codelineno-0-3632">3632</a></span>
<span class="normal"><a href="#__codelineno-0-3633">3633</a></span>
<span class="normal"><a href="#__codelineno-0-3634">3634</a></span>
<span class="normal"><a href="#__codelineno-0-3635">3635</a></span>
<span class="normal"><a href="#__codelineno-0-3636">3636</a></span>
<span class="normal"><a href="#__codelineno-0-3637">3637</a></span>
<span class="normal"><a href="#__codelineno-0-3638">3638</a></span>
<span class="normal"><a href="#__codelineno-0-3639">3639</a></span>
<span class="normal"><a href="#__codelineno-0-3640">3640</a></span>
<span class="normal"><a href="#__codelineno-0-3641">3641</a></span>
<span class="normal"><a href="#__codelineno-0-3642">3642</a></span>
<span class="normal"><a href="#__codelineno-0-3643">3643</a></span>
<span class="normal"><a href="#__codelineno-0-3644">3644</a></span>
<span class="normal"><a href="#__codelineno-0-3645">3645</a></span>
<span class="normal"><a href="#__codelineno-0-3646">3646</a></span>
<span class="normal"><a href="#__codelineno-0-3647">3647</a></span>
<span class="normal"><a href="#__codelineno-0-3648">3648</a></span>
<span class="normal"><a href="#__codelineno-0-3649">3649</a></span>
<span class="normal"><a href="#__codelineno-0-3650">3650</a></span>
<span class="normal"><a href="#__codelineno-0-3651">3651</a></span>
<span class="normal"><a href="#__codelineno-0-3652">3652</a></span>
<span class="normal"><a href="#__codelineno-0-3653">3653</a></span>
<span class="normal"><a href="#__codelineno-0-3654">3654</a></span>
<span class="normal"><a href="#__codelineno-0-3655">3655</a></span>
<span class="normal"><a href="#__codelineno-0-3656">3656</a></span>
<span class="normal"><a href="#__codelineno-0-3657">3657</a></span>
<span class="normal"><a href="#__codelineno-0-3658">3658</a></span>
<span class="normal"><a href="#__codelineno-0-3659">3659</a></span>
<span class="normal"><a href="#__codelineno-0-3660">3660</a></span>
<span class="normal"><a href="#__codelineno-0-3661">3661</a></span>
<span class="normal"><a href="#__codelineno-0-3662">3662</a></span>
<span class="normal"><a href="#__codelineno-0-3663">3663</a></span>
<span class="normal"><a href="#__codelineno-0-3664">3664</a></span>
<span class="normal"><a href="#__codelineno-0-3665">3665</a></span>
<span class="normal"><a href="#__codelineno-0-3666">3666</a></span>
<span class="normal"><a href="#__codelineno-0-3667">3667</a></span>
<span class="normal"><a href="#__codelineno-0-3668">3668</a></span>
<span class="normal"><a href="#__codelineno-0-3669">3669</a></span>
<span class="normal"><a href="#__codelineno-0-3670">3670</a></span>
<span class="normal"><a href="#__codelineno-0-3671">3671</a></span>
<span class="normal"><a href="#__codelineno-0-3672">3672</a></span>
<span class="normal"><a href="#__codelineno-0-3673">3673</a></span>
<span class="normal"><a href="#__codelineno-0-3674">3674</a></span>
<span class="normal"><a href="#__codelineno-0-3675">3675</a></span>
<span class="normal"><a href="#__codelineno-0-3676">3676</a></span>
<span class="normal"><a href="#__codelineno-0-3677">3677</a></span>
<span class="normal"><a href="#__codelineno-0-3678">3678</a></span>
<span class="normal"><a href="#__codelineno-0-3679">3679</a></span>
<span class="normal"><a href="#__codelineno-0-3680">3680</a></span>
<span class="normal"><a href="#__codelineno-0-3681">3681</a></span>
<span class="normal"><a href="#__codelineno-0-3682">3682</a></span>
<span class="normal"><a href="#__codelineno-0-3683">3683</a></span>
<span class="normal"><a href="#__codelineno-0-3684">3684</a></span>
<span class="normal"><a href="#__codelineno-0-3685">3685</a></span>
<span class="normal"><a href="#__codelineno-0-3686">3686</a></span>
<span class="normal"><a href="#__codelineno-0-3687">3687</a></span>
<span class="normal"><a href="#__codelineno-0-3688">3688</a></span>
<span class="normal"><a href="#__codelineno-0-3689">3689</a></span>
<span class="normal"><a href="#__codelineno-0-3690">3690</a></span>
<span class="normal"><a href="#__codelineno-0-3691">3691</a></span>
<span class="normal"><a href="#__codelineno-0-3692">3692</a></span>
<span class="normal"><a href="#__codelineno-0-3693">3693</a></span>
<span class="normal"><a href="#__codelineno-0-3694">3694</a></span>
<span class="normal"><a href="#__codelineno-0-3695">3695</a></span>
<span class="normal"><a href="#__codelineno-0-3696">3696</a></span>
<span class="normal"><a href="#__codelineno-0-3697">3697</a></span>
<span class="normal"><a href="#__codelineno-0-3698">3698</a></span>
<span class="normal"><a href="#__codelineno-0-3699">3699</a></span>
<span class="normal"><a href="#__codelineno-0-3700">3700</a></span>
<span class="normal"><a href="#__codelineno-0-3701">3701</a></span>
<span class="normal"><a href="#__codelineno-0-3702">3702</a></span>
<span class="normal"><a href="#__codelineno-0-3703">3703</a></span>
<span class="normal"><a href="#__codelineno-0-3704">3704</a></span>
<span class="normal"><a href="#__codelineno-0-3705">3705</a></span>
<span class="normal"><a href="#__codelineno-0-3706">3706</a></span>
<span class="normal"><a href="#__codelineno-0-3707">3707</a></span>
<span class="normal"><a href="#__codelineno-0-3708">3708</a></span>
<span class="normal"><a href="#__codelineno-0-3709">3709</a></span>
<span class="normal"><a href="#__codelineno-0-3710">3710</a></span>
<span class="normal"><a href="#__codelineno-0-3711">3711</a></span>
<span class="normal"><a href="#__codelineno-0-3712">3712</a></span>
<span class="normal"><a href="#__codelineno-0-3713">3713</a></span>
<span class="normal"><a href="#__codelineno-0-3714">3714</a></span>
<span class="normal"><a href="#__codelineno-0-3715">3715</a></span>
<span class="normal"><a href="#__codelineno-0-3716">3716</a></span>
<span class="normal"><a href="#__codelineno-0-3717">3717</a></span>
<span class="normal"><a href="#__codelineno-0-3718">3718</a></span>
<span class="normal"><a href="#__codelineno-0-3719">3719</a></span>
<span class="normal"><a href="#__codelineno-0-3720">3720</a></span>
<span class="normal"><a href="#__codelineno-0-3721">3721</a></span>
<span class="normal"><a href="#__codelineno-0-3722">3722</a></span>
<span class="normal"><a href="#__codelineno-0-3723">3723</a></span>
<span class="normal"><a href="#__codelineno-0-3724">3724</a></span>
<span class="normal"><a href="#__codelineno-0-3725">3725</a></span>
<span class="normal"><a href="#__codelineno-0-3726">3726</a></span>
<span class="normal"><a href="#__codelineno-0-3727">3727</a></span>
<span class="normal"><a href="#__codelineno-0-3728">3728</a></span>
<span class="normal"><a href="#__codelineno-0-3729">3729</a></span>
<span class="normal"><a href="#__codelineno-0-3730">3730</a></span>
<span class="normal"><a href="#__codelineno-0-3731">3731</a></span>
<span class="normal"><a href="#__codelineno-0-3732">3732</a></span>
<span class="normal"><a href="#__codelineno-0-3733">3733</a></span>
<span class="normal"><a href="#__codelineno-0-3734">3734</a></span>
<span class="normal"><a href="#__codelineno-0-3735">3735</a></span>
<span class="normal"><a href="#__codelineno-0-3736">3736</a></span>
<span class="normal"><a href="#__codelineno-0-3737">3737</a></span>
<span class="normal"><a href="#__codelineno-0-3738">3738</a></span>
<span class="normal"><a href="#__codelineno-0-3739">3739</a></span>
<span class="normal"><a href="#__codelineno-0-3740">3740</a></span>
<span class="normal"><a href="#__codelineno-0-3741">3741</a></span>
<span class="normal"><a href="#__codelineno-0-3742">3742</a></span>
<span class="normal"><a href="#__codelineno-0-3743">3743</a></span>
<span class="normal"><a href="#__codelineno-0-3744">3744</a></span>
<span class="normal"><a href="#__codelineno-0-3745">3745</a></span>
<span class="normal"><a href="#__codelineno-0-3746">3746</a></span>
<span class="normal"><a href="#__codelineno-0-3747">3747</a></span>
<span class="normal"><a href="#__codelineno-0-3748">3748</a></span>
<span class="normal"><a href="#__codelineno-0-3749">3749</a></span>
<span class="normal"><a href="#__codelineno-0-3750">3750</a></span>
<span class="normal"><a href="#__codelineno-0-3751">3751</a></span>
<span class="normal"><a href="#__codelineno-0-3752">3752</a></span>
<span class="normal"><a href="#__codelineno-0-3753">3753</a></span>
<span class="normal"><a href="#__codelineno-0-3754">3754</a></span>
<span class="normal"><a href="#__codelineno-0-3755">3755</a></span>
<span class="normal"><a href="#__codelineno-0-3756">3756</a></span>
<span class="normal"><a href="#__codelineno-0-3757">3757</a></span>
<span class="normal"><a href="#__codelineno-0-3758">3758</a></span>
<span class="normal"><a href="#__codelineno-0-3759">3759</a></span>
<span class="normal"><a href="#__codelineno-0-3760">3760</a></span>
<span class="normal"><a href="#__codelineno-0-3761">3761</a></span>
<span class="normal"><a href="#__codelineno-0-3762">3762</a></span>
<span class="normal"><a href="#__codelineno-0-3763">3763</a></span>
<span class="normal"><a href="#__codelineno-0-3764">3764</a></span>
<span class="normal"><a href="#__codelineno-0-3765">3765</a></span>
<span class="normal"><a href="#__codelineno-0-3766">3766</a></span>
<span class="normal"><a href="#__codelineno-0-3767">3767</a></span>
<span class="normal"><a href="#__codelineno-0-3768">3768</a></span>
<span class="normal"><a href="#__codelineno-0-3769">3769</a></span>
<span class="normal"><a href="#__codelineno-0-3770">3770</a></span>
<span class="normal"><a href="#__codelineno-0-3771">3771</a></span>
<span class="normal"><a href="#__codelineno-0-3772">3772</a></span>
<span class="normal"><a href="#__codelineno-0-3773">3773</a></span>
<span class="normal"><a href="#__codelineno-0-3774">3774</a></span>
<span class="normal"><a href="#__codelineno-0-3775">3775</a></span>
<span class="normal"><a href="#__codelineno-0-3776">3776</a></span>
<span class="normal"><a href="#__codelineno-0-3777">3777</a></span>
<span class="normal"><a href="#__codelineno-0-3778">3778</a></span>
<span class="normal"><a href="#__codelineno-0-3779">3779</a></span>
<span class="normal"><a href="#__codelineno-0-3780">3780</a></span>
<span class="normal"><a href="#__codelineno-0-3781">3781</a></span>
<span class="normal"><a href="#__codelineno-0-3782">3782</a></span>
<span class="normal"><a href="#__codelineno-0-3783">3783</a></span>
<span class="normal"><a href="#__codelineno-0-3784">3784</a></span>
<span class="normal"><a href="#__codelineno-0-3785">3785</a></span>
<span class="normal"><a href="#__codelineno-0-3786">3786</a></span>
<span class="normal"><a href="#__codelineno-0-3787">3787</a></span>
<span class="normal"><a href="#__codelineno-0-3788">3788</a></span>
<span class="normal"><a href="#__codelineno-0-3789">3789</a></span>
<span class="normal"><a href="#__codelineno-0-3790">3790</a></span>
<span class="normal"><a href="#__codelineno-0-3791">3791</a></span>
<span class="normal"><a href="#__codelineno-0-3792">3792</a></span>
<span class="normal"><a href="#__codelineno-0-3793">3793</a></span>
<span class="normal"><a href="#__codelineno-0-3794">3794</a></span>
<span class="normal"><a href="#__codelineno-0-3795">3795</a></span>
<span class="normal"><a href="#__codelineno-0-3796">3796</a></span>
<span class="normal"><a href="#__codelineno-0-3797">3797</a></span>
<span class="normal"><a href="#__codelineno-0-3798">3798</a></span>
<span class="normal"><a href="#__codelineno-0-3799">3799</a></span>
<span class="normal"><a href="#__codelineno-0-3800">3800</a></span>
<span class="normal"><a href="#__codelineno-0-3801">3801</a></span>
<span class="normal"><a href="#__codelineno-0-3802">3802</a></span>
<span class="normal"><a href="#__codelineno-0-3803">3803</a></span>
<span class="normal"><a href="#__codelineno-0-3804">3804</a></span>
<span class="normal"><a href="#__codelineno-0-3805">3805</a></span>
<span class="normal"><a href="#__codelineno-0-3806">3806</a></span>
<span class="normal"><a href="#__codelineno-0-3807">3807</a></span>
<span class="normal"><a href="#__codelineno-0-3808">3808</a></span>
<span class="normal"><a href="#__codelineno-0-3809">3809</a></span>
<span class="normal"><a href="#__codelineno-0-3810">3810</a></span>
<span class="normal"><a href="#__codelineno-0-3811">3811</a></span>
<span class="normal"><a href="#__codelineno-0-3812">3812</a></span>
<span class="normal"><a href="#__codelineno-0-3813">3813</a></span>
<span class="normal"><a href="#__codelineno-0-3814">3814</a></span>
<span class="normal"><a href="#__codelineno-0-3815">3815</a></span>
<span class="normal"><a href="#__codelineno-0-3816">3816</a></span>
<span class="normal"><a href="#__codelineno-0-3817">3817</a></span>
<span class="normal"><a href="#__codelineno-0-3818">3818</a></span>
<span class="normal"><a href="#__codelineno-0-3819">3819</a></span>
<span class="normal"><a href="#__codelineno-0-3820">3820</a></span>
<span class="normal"><a href="#__codelineno-0-3821">3821</a></span>
<span class="normal"><a href="#__codelineno-0-3822">3822</a></span>
<span class="normal"><a href="#__codelineno-0-3823">3823</a></span>
<span class="normal"><a href="#__codelineno-0-3824">3824</a></span>
<span class="normal"><a href="#__codelineno-0-3825">3825</a></span>
<span class="normal"><a href="#__codelineno-0-3826">3826</a></span>
<span class="normal"><a href="#__codelineno-0-3827">3827</a></span>
<span class="normal"><a href="#__codelineno-0-3828">3828</a></span>
<span class="normal"><a href="#__codelineno-0-3829">3829</a></span>
<span class="normal"><a href="#__codelineno-0-3830">3830</a></span>
<span class="normal"><a href="#__codelineno-0-3831">3831</a></span>
<span class="normal"><a href="#__codelineno-0-3832">3832</a></span>
<span class="normal"><a href="#__codelineno-0-3833">3833</a></span>
<span class="normal"><a href="#__codelineno-0-3834">3834</a></span>
<span class="normal"><a href="#__codelineno-0-3835">3835</a></span>
<span class="normal"><a href="#__codelineno-0-3836">3836</a></span>
<span class="normal"><a href="#__codelineno-0-3837">3837</a></span>
<span class="normal"><a href="#__codelineno-0-3838">3838</a></span>
<span class="normal"><a href="#__codelineno-0-3839">3839</a></span>
<span class="normal"><a href="#__codelineno-0-3840">3840</a></span>
<span class="normal"><a href="#__codelineno-0-3841">3841</a></span>
<span class="normal"><a href="#__codelineno-0-3842">3842</a></span>
<span class="normal"><a href="#__codelineno-0-3843">3843</a></span>
<span class="normal"><a href="#__codelineno-0-3844">3844</a></span>
<span class="normal"><a href="#__codelineno-0-3845">3845</a></span>
<span class="normal"><a href="#__codelineno-0-3846">3846</a></span>
<span class="normal"><a href="#__codelineno-0-3847">3847</a></span>
<span class="normal"><a href="#__codelineno-0-3848">3848</a></span>
<span class="normal"><a href="#__codelineno-0-3849">3849</a></span>
<span class="normal"><a href="#__codelineno-0-3850">3850</a></span>
<span class="normal"><a href="#__codelineno-0-3851">3851</a></span>
<span class="normal"><a href="#__codelineno-0-3852">3852</a></span>
<span class="normal"><a href="#__codelineno-0-3853">3853</a></span>
<span class="normal"><a href="#__codelineno-0-3854">3854</a></span>
<span class="normal"><a href="#__codelineno-0-3855">3855</a></span>
<span class="normal"><a href="#__codelineno-0-3856">3856</a></span>
<span class="normal"><a href="#__codelineno-0-3857">3857</a></span>
<span class="normal"><a href="#__codelineno-0-3858">3858</a></span>
<span class="normal"><a href="#__codelineno-0-3859">3859</a></span>
<span class="normal"><a href="#__codelineno-0-3860">3860</a></span>
<span class="normal"><a href="#__codelineno-0-3861">3861</a></span>
<span class="normal"><a href="#__codelineno-0-3862">3862</a></span>
<span class="normal"><a href="#__codelineno-0-3863">3863</a></span>
<span class="normal"><a href="#__codelineno-0-3864">3864</a></span>
<span class="normal"><a href="#__codelineno-0-3865">3865</a></span>
<span class="normal"><a href="#__codelineno-0-3866">3866</a></span>
<span class="normal"><a href="#__codelineno-0-3867">3867</a></span>
<span class="normal"><a href="#__codelineno-0-3868">3868</a></span>
<span class="normal"><a href="#__codelineno-0-3869">3869</a></span>
<span class="normal"><a href="#__codelineno-0-3870">3870</a></span>
<span class="normal"><a href="#__codelineno-0-3871">3871</a></span>
<span class="normal"><a href="#__codelineno-0-3872">3872</a></span>
<span class="normal"><a href="#__codelineno-0-3873">3873</a></span>
<span class="normal"><a href="#__codelineno-0-3874">3874</a></span>
<span class="normal"><a href="#__codelineno-0-3875">3875</a></span>
<span class="normal"><a href="#__codelineno-0-3876">3876</a></span>
<span class="normal"><a href="#__codelineno-0-3877">3877</a></span>
<span class="normal"><a href="#__codelineno-0-3878">3878</a></span>
<span class="normal"><a href="#__codelineno-0-3879">3879</a></span>
<span class="normal"><a href="#__codelineno-0-3880">3880</a></span>
<span class="normal"><a href="#__codelineno-0-3881">3881</a></span>
<span class="normal"><a href="#__codelineno-0-3882">3882</a></span>
<span class="normal"><a href="#__codelineno-0-3883">3883</a></span>
<span class="normal"><a href="#__codelineno-0-3884">3884</a></span>
<span class="normal"><a href="#__codelineno-0-3885">3885</a></span>
<span class="normal"><a href="#__codelineno-0-3886">3886</a></span>
<span class="normal"><a href="#__codelineno-0-3887">3887</a></span>
<span class="normal"><a href="#__codelineno-0-3888">3888</a></span>
<span class="normal"><a href="#__codelineno-0-3889">3889</a></span>
<span class="normal"><a href="#__codelineno-0-3890">3890</a></span>
<span class="normal"><a href="#__codelineno-0-3891">3891</a></span>
<span class="normal"><a href="#__codelineno-0-3892">3892</a></span>
<span class="normal"><a href="#__codelineno-0-3893">3893</a></span>
<span class="normal"><a href="#__codelineno-0-3894">3894</a></span>
<span class="normal"><a href="#__codelineno-0-3895">3895</a></span>
<span class="normal"><a href="#__codelineno-0-3896">3896</a></span>
<span class="normal"><a href="#__codelineno-0-3897">3897</a></span>
<span class="normal"><a href="#__codelineno-0-3898">3898</a></span>
<span class="normal"><a href="#__codelineno-0-3899">3899</a></span>
<span class="normal"><a href="#__codelineno-0-3900">3900</a></span>
<span class="normal"><a href="#__codelineno-0-3901">3901</a></span>
<span class="normal"><a href="#__codelineno-0-3902">3902</a></span>
<span class="normal"><a href="#__codelineno-0-3903">3903</a></span>
<span class="normal"><a href="#__codelineno-0-3904">3904</a></span>
<span class="normal"><a href="#__codelineno-0-3905">3905</a></span>
<span class="normal"><a href="#__codelineno-0-3906">3906</a></span>
<span class="normal"><a href="#__codelineno-0-3907">3907</a></span>
<span class="normal"><a href="#__codelineno-0-3908">3908</a></span>
<span class="normal"><a href="#__codelineno-0-3909">3909</a></span>
<span class="normal"><a href="#__codelineno-0-3910">3910</a></span>
<span class="normal"><a href="#__codelineno-0-3911">3911</a></span>
<span class="normal"><a href="#__codelineno-0-3912">3912</a></span>
<span class="normal"><a href="#__codelineno-0-3913">3913</a></span>
<span class="normal"><a href="#__codelineno-0-3914">3914</a></span>
<span class="normal"><a href="#__codelineno-0-3915">3915</a></span>
<span class="normal"><a href="#__codelineno-0-3916">3916</a></span>
<span class="normal"><a href="#__codelineno-0-3917">3917</a></span>
<span class="normal"><a href="#__codelineno-0-3918">3918</a></span>
<span class="normal"><a href="#__codelineno-0-3919">3919</a></span>
<span class="normal"><a href="#__codelineno-0-3920">3920</a></span>
<span class="normal"><a href="#__codelineno-0-3921">3921</a></span>
<span class="normal"><a href="#__codelineno-0-3922">3922</a></span>
<span class="normal"><a href="#__codelineno-0-3923">3923</a></span>
<span class="normal"><a href="#__codelineno-0-3924">3924</a></span>
<span class="normal"><a href="#__codelineno-0-3925">3925</a></span>
<span class="normal"><a href="#__codelineno-0-3926">3926</a></span>
<span class="normal"><a href="#__codelineno-0-3927">3927</a></span>
<span class="normal"><a href="#__codelineno-0-3928">3928</a></span>
<span class="normal"><a href="#__codelineno-0-3929">3929</a></span>
<span class="normal"><a href="#__codelineno-0-3930">3930</a></span>
<span class="normal"><a href="#__codelineno-0-3931">3931</a></span>
<span class="normal"><a href="#__codelineno-0-3932">3932</a></span>
<span class="normal"><a href="#__codelineno-0-3933">3933</a></span>
<span class="normal"><a href="#__codelineno-0-3934">3934</a></span>
<span class="normal"><a href="#__codelineno-0-3935">3935</a></span>
<span class="normal"><a href="#__codelineno-0-3936">3936</a></span>
<span class="normal"><a href="#__codelineno-0-3937">3937</a></span>
<span class="normal"><a href="#__codelineno-0-3938">3938</a></span>
<span class="normal"><a href="#__codelineno-0-3939">3939</a></span>
<span class="normal"><a href="#__codelineno-0-3940">3940</a></span>
<span class="normal"><a href="#__codelineno-0-3941">3941</a></span>
<span class="normal"><a href="#__codelineno-0-3942">3942</a></span>
<span class="normal"><a href="#__codelineno-0-3943">3943</a></span>
<span class="normal"><a href="#__codelineno-0-3944">3944</a></span>
<span class="normal"><a href="#__codelineno-0-3945">3945</a></span>
<span class="normal"><a href="#__codelineno-0-3946">3946</a></span>
<span class="normal"><a href="#__codelineno-0-3947">3947</a></span>
<span class="normal"><a href="#__codelineno-0-3948">3948</a></span>
<span class="normal"><a href="#__codelineno-0-3949">3949</a></span>
<span class="normal"><a href="#__codelineno-0-3950">3950</a></span>
<span class="normal"><a href="#__codelineno-0-3951">3951</a></span>
<span class="normal"><a href="#__codelineno-0-3952">3952</a></span>
<span class="normal"><a href="#__codelineno-0-3953">3953</a></span>
<span class="normal"><a href="#__codelineno-0-3954">3954</a></span>
<span class="normal"><a href="#__codelineno-0-3955">3955</a></span>
<span class="normal"><a href="#__codelineno-0-3956">3956</a></span>
<span class="normal"><a href="#__codelineno-0-3957">3957</a></span>
<span class="normal"><a href="#__codelineno-0-3958">3958</a></span>
<span class="normal"><a href="#__codelineno-0-3959">3959</a></span>
<span class="normal"><a href="#__codelineno-0-3960">3960</a></span>
<span class="normal"><a href="#__codelineno-0-3961">3961</a></span>
<span class="normal"><a href="#__codelineno-0-3962">3962</a></span>
<span class="normal"><a href="#__codelineno-0-3963">3963</a></span>
<span class="normal"><a href="#__codelineno-0-3964">3964</a></span>
<span class="normal"><a href="#__codelineno-0-3965">3965</a></span>
<span class="normal"><a href="#__codelineno-0-3966">3966</a></span>
<span class="normal"><a href="#__codelineno-0-3967">3967</a></span>
<span class="normal"><a href="#__codelineno-0-3968">3968</a></span>
<span class="normal"><a href="#__codelineno-0-3969">3969</a></span>
<span class="normal"><a href="#__codelineno-0-3970">3970</a></span>
<span class="normal"><a href="#__codelineno-0-3971">3971</a></span>
<span class="normal"><a href="#__codelineno-0-3972">3972</a></span>
<span class="normal"><a href="#__codelineno-0-3973">3973</a></span>
<span class="normal"><a href="#__codelineno-0-3974">3974</a></span>
<span class="normal"><a href="#__codelineno-0-3975">3975</a></span>
<span class="normal"><a href="#__codelineno-0-3976">3976</a></span>
<span class="normal"><a href="#__codelineno-0-3977">3977</a></span>
<span class="normal"><a href="#__codelineno-0-3978">3978</a></span>
<span class="normal"><a href="#__codelineno-0-3979">3979</a></span>
<span class="normal"><a href="#__codelineno-0-3980">3980</a></span>
<span class="normal"><a href="#__codelineno-0-3981">3981</a></span>
<span class="normal"><a href="#__codelineno-0-3982">3982</a></span>
<span class="normal"><a href="#__codelineno-0-3983">3983</a></span>
<span class="normal"><a href="#__codelineno-0-3984">3984</a></span>
<span class="normal"><a href="#__codelineno-0-3985">3985</a></span>
<span class="normal"><a href="#__codelineno-0-3986">3986</a></span>
<span class="normal"><a href="#__codelineno-0-3987">3987</a></span>
<span class="normal"><a href="#__codelineno-0-3988">3988</a></span>
<span class="normal"><a href="#__codelineno-0-3989">3989</a></span>
<span class="normal"><a href="#__codelineno-0-3990">3990</a></span>
<span class="normal"><a href="#__codelineno-0-3991">3991</a></span>
<span class="normal"><a href="#__codelineno-0-3992">3992</a></span>
<span class="normal"><a href="#__codelineno-0-3993">3993</a></span>
<span class="normal"><a href="#__codelineno-0-3994">3994</a></span>
<span class="normal"><a href="#__codelineno-0-3995">3995</a></span>
<span class="normal"><a href="#__codelineno-0-3996">3996</a></span>
<span class="normal"><a href="#__codelineno-0-3997">3997</a></span>
<span class="normal"><a href="#__codelineno-0-3998">3998</a></span>
<span class="normal"><a href="#__codelineno-0-3999">3999</a></span>
<span class="normal"><a href="#__codelineno-0-4000">4000</a></span>
<span class="normal"><a href="#__codelineno-0-4001">4001</a></span>
<span class="normal"><a href="#__codelineno-0-4002">4002</a></span>
<span class="normal"><a href="#__codelineno-0-4003">4003</a></span>
<span class="normal"><a href="#__codelineno-0-4004">4004</a></span>
<span class="normal"><a href="#__codelineno-0-4005">4005</a></span>
<span class="normal"><a href="#__codelineno-0-4006">4006</a></span>
<span class="normal"><a href="#__codelineno-0-4007">4007</a></span>
<span class="normal"><a href="#__codelineno-0-4008">4008</a></span>
<span class="normal"><a href="#__codelineno-0-4009">4009</a></span>
<span class="normal"><a href="#__codelineno-0-4010">4010</a></span>
<span class="normal"><a href="#__codelineno-0-4011">4011</a></span>
<span class="normal"><a href="#__codelineno-0-4012">4012</a></span>
<span class="normal"><a href="#__codelineno-0-4013">4013</a></span>
<span class="normal"><a href="#__codelineno-0-4014">4014</a></span>
<span class="normal"><a href="#__codelineno-0-4015">4015</a></span>
<span class="normal"><a href="#__codelineno-0-4016">4016</a></span>
<span class="normal"><a href="#__codelineno-0-4017">4017</a></span>
<span class="normal"><a href="#__codelineno-0-4018">4018</a></span>
<span class="normal"><a href="#__codelineno-0-4019">4019</a></span>
<span class="normal"><a href="#__codelineno-0-4020">4020</a></span>
<span class="normal"><a href="#__codelineno-0-4021">4021</a></span>
<span class="normal"><a href="#__codelineno-0-4022">4022</a></span>
<span class="normal"><a href="#__codelineno-0-4023">4023</a></span>
<span class="normal"><a href="#__codelineno-0-4024">4024</a></span>
<span class="normal"><a href="#__codelineno-0-4025">4025</a></span>
<span class="normal"><a href="#__codelineno-0-4026">4026</a></span>
<span class="normal"><a href="#__codelineno-0-4027">4027</a></span>
<span class="normal"><a href="#__codelineno-0-4028">4028</a></span>
<span class="normal"><a href="#__codelineno-0-4029">4029</a></span>
<span class="normal"><a href="#__codelineno-0-4030">4030</a></span>
<span class="normal"><a href="#__codelineno-0-4031">4031</a></span>
<span class="normal"><a href="#__codelineno-0-4032">4032</a></span>
<span class="normal"><a href="#__codelineno-0-4033">4033</a></span>
<span class="normal"><a href="#__codelineno-0-4034">4034</a></span>
<span class="normal"><a href="#__codelineno-0-4035">4035</a></span>
<span class="normal"><a href="#__codelineno-0-4036">4036</a></span>
<span class="normal"><a href="#__codelineno-0-4037">4037</a></span>
<span class="normal"><a href="#__codelineno-0-4038">4038</a></span>
<span class="normal"><a href="#__codelineno-0-4039">4039</a></span>
<span class="normal"><a href="#__codelineno-0-4040">4040</a></span>
<span class="normal"><a href="#__codelineno-0-4041">4041</a></span>
<span class="normal"><a href="#__codelineno-0-4042">4042</a></span>
<span class="normal"><a href="#__codelineno-0-4043">4043</a></span>
<span class="normal"><a href="#__codelineno-0-4044">4044</a></span>
<span class="normal"><a href="#__codelineno-0-4045">4045</a></span>
<span class="normal"><a href="#__codelineno-0-4046">4046</a></span>
<span class="normal"><a href="#__codelineno-0-4047">4047</a></span>
<span class="normal"><a href="#__codelineno-0-4048">4048</a></span>
<span class="normal"><a href="#__codelineno-0-4049">4049</a></span>
<span class="normal"><a href="#__codelineno-0-4050">4050</a></span>
<span class="normal"><a href="#__codelineno-0-4051">4051</a></span>
<span class="normal"><a href="#__codelineno-0-4052">4052</a></span>
<span class="normal"><a href="#__codelineno-0-4053">4053</a></span>
<span class="normal"><a href="#__codelineno-0-4054">4054</a></span>
<span class="normal"><a href="#__codelineno-0-4055">4055</a></span>
<span class="normal"><a href="#__codelineno-0-4056">4056</a></span>
<span class="normal"><a href="#__codelineno-0-4057">4057</a></span>
<span class="normal"><a href="#__codelineno-0-4058">4058</a></span>
<span class="normal"><a href="#__codelineno-0-4059">4059</a></span>
<span class="normal"><a href="#__codelineno-0-4060">4060</a></span>
<span class="normal"><a href="#__codelineno-0-4061">4061</a></span>
<span class="normal"><a href="#__codelineno-0-4062">4062</a></span>
<span class="normal"><a href="#__codelineno-0-4063">4063</a></span>
<span class="normal"><a href="#__codelineno-0-4064">4064</a></span>
<span class="normal"><a href="#__codelineno-0-4065">4065</a></span>
<span class="normal"><a href="#__codelineno-0-4066">4066</a></span>
<span class="normal"><a href="#__codelineno-0-4067">4067</a></span>
<span class="normal"><a href="#__codelineno-0-4068">4068</a></span>
<span class="normal"><a href="#__codelineno-0-4069">4069</a></span>
<span class="normal"><a href="#__codelineno-0-4070">4070</a></span>
<span class="normal"><a href="#__codelineno-0-4071">4071</a></span>
<span class="normal"><a href="#__codelineno-0-4072">4072</a></span>
<span class="normal"><a href="#__codelineno-0-4073">4073</a></span>
<span class="normal"><a href="#__codelineno-0-4074">4074</a></span>
<span class="normal"><a href="#__codelineno-0-4075">4075</a></span>
<span class="normal"><a href="#__codelineno-0-4076">4076</a></span>
<span class="normal"><a href="#__codelineno-0-4077">4077</a></span>
<span class="normal"><a href="#__codelineno-0-4078">4078</a></span>
<span class="normal"><a href="#__codelineno-0-4079">4079</a></span>
<span class="normal"><a href="#__codelineno-0-4080">4080</a></span>
<span class="normal"><a href="#__codelineno-0-4081">4081</a></span>
<span class="normal"><a href="#__codelineno-0-4082">4082</a></span>
<span class="normal"><a href="#__codelineno-0-4083">4083</a></span>
<span class="normal"><a href="#__codelineno-0-4084">4084</a></span>
<span class="normal"><a href="#__codelineno-0-4085">4085</a></span>
<span class="normal"><a href="#__codelineno-0-4086">4086</a></span>
<span class="normal"><a href="#__codelineno-0-4087">4087</a></span>
<span class="normal"><a href="#__codelineno-0-4088">4088</a></span>
<span class="normal"><a href="#__codelineno-0-4089">4089</a></span>
<span class="normal"><a href="#__codelineno-0-4090">4090</a></span>
<span class="normal"><a href="#__codelineno-0-4091">4091</a></span>
<span class="normal"><a href="#__codelineno-0-4092">4092</a></span>
<span class="normal"><a href="#__codelineno-0-4093">4093</a></span>
<span class="normal"><a href="#__codelineno-0-4094">4094</a></span>
<span class="normal"><a href="#__codelineno-0-4095">4095</a></span>
<span class="normal"><a href="#__codelineno-0-4096">4096</a></span>
<span class="normal"><a href="#__codelineno-0-4097">4097</a></span>
<span class="normal"><a href="#__codelineno-0-4098">4098</a></span>
<span class="normal"><a href="#__codelineno-0-4099">4099</a></span>
<span class="normal"><a href="#__codelineno-0-4100">4100</a></span>
<span class="normal"><a href="#__codelineno-0-4101">4101</a></span>
<span class="normal"><a href="#__codelineno-0-4102">4102</a></span>
<span class="normal"><a href="#__codelineno-0-4103">4103</a></span>
<span class="normal"><a href="#__codelineno-0-4104">4104</a></span>
<span class="normal"><a href="#__codelineno-0-4105">4105</a></span>
<span class="normal"><a href="#__codelineno-0-4106">4106</a></span>
<span class="normal"><a href="#__codelineno-0-4107">4107</a></span>
<span class="normal"><a href="#__codelineno-0-4108">4108</a></span>
<span class="normal"><a href="#__codelineno-0-4109">4109</a></span>
<span class="normal"><a href="#__codelineno-0-4110">4110</a></span>
<span class="normal"><a href="#__codelineno-0-4111">4111</a></span>
<span class="normal"><a href="#__codelineno-0-4112">4112</a></span>
<span class="normal"><a href="#__codelineno-0-4113">4113</a></span>
<span class="normal"><a href="#__codelineno-0-4114">4114</a></span>
<span class="normal"><a href="#__codelineno-0-4115">4115</a></span>
<span class="normal"><a href="#__codelineno-0-4116">4116</a></span>
<span class="normal"><a href="#__codelineno-0-4117">4117</a></span>
<span class="normal"><a href="#__codelineno-0-4118">4118</a></span>
<span class="normal"><a href="#__codelineno-0-4119">4119</a></span>
<span class="normal"><a href="#__codelineno-0-4120">4120</a></span>
<span class="normal"><a href="#__codelineno-0-4121">4121</a></span>
<span class="normal"><a href="#__codelineno-0-4122">4122</a></span>
<span class="normal"><a href="#__codelineno-0-4123">4123</a></span>
<span class="normal"><a href="#__codelineno-0-4124">4124</a></span>
<span class="normal"><a href="#__codelineno-0-4125">4125</a></span>
<span class="normal"><a href="#__codelineno-0-4126">4126</a></span>
<span class="normal"><a href="#__codelineno-0-4127">4127</a></span>
<span class="normal"><a href="#__codelineno-0-4128">4128</a></span>
<span class="normal"><a href="#__codelineno-0-4129">4129</a></span>
<span class="normal"><a href="#__codelineno-0-4130">4130</a></span>
<span class="normal"><a href="#__codelineno-0-4131">4131</a></span>
<span class="normal"><a href="#__codelineno-0-4132">4132</a></span>
<span class="normal"><a href="#__codelineno-0-4133">4133</a></span>
<span class="normal"><a href="#__codelineno-0-4134">4134</a></span>
<span class="normal"><a href="#__codelineno-0-4135">4135</a></span>
<span class="normal"><a href="#__codelineno-0-4136">4136</a></span>
<span class="normal"><a href="#__codelineno-0-4137">4137</a></span>
<span class="normal"><a href="#__codelineno-0-4138">4138</a></span>
<span class="normal"><a href="#__codelineno-0-4139">4139</a></span>
<span class="normal"><a href="#__codelineno-0-4140">4140</a></span>
<span class="normal"><a href="#__codelineno-0-4141">4141</a></span>
<span class="normal"><a href="#__codelineno-0-4142">4142</a></span>
<span class="normal"><a href="#__codelineno-0-4143">4143</a></span>
<span class="normal"><a href="#__codelineno-0-4144">4144</a></span>
<span class="normal"><a href="#__codelineno-0-4145">4145</a></span>
<span class="normal"><a href="#__codelineno-0-4146">4146</a></span>
<span class="normal"><a href="#__codelineno-0-4147">4147</a></span>
<span class="normal"><a href="#__codelineno-0-4148">4148</a></span>
<span class="normal"><a href="#__codelineno-0-4149">4149</a></span>
<span class="normal"><a href="#__codelineno-0-4150">4150</a></span>
<span class="normal"><a href="#__codelineno-0-4151">4151</a></span>
<span class="normal"><a href="#__codelineno-0-4152">4152</a></span>
<span class="normal"><a href="#__codelineno-0-4153">4153</a></span>
<span class="normal"><a href="#__codelineno-0-4154">4154</a></span>
<span class="normal"><a href="#__codelineno-0-4155">4155</a></span>
<span class="normal"><a href="#__codelineno-0-4156">4156</a></span>
<span class="normal"><a href="#__codelineno-0-4157">4157</a></span>
<span class="normal"><a href="#__codelineno-0-4158">4158</a></span>
<span class="normal"><a href="#__codelineno-0-4159">4159</a></span>
<span class="normal"><a href="#__codelineno-0-4160">4160</a></span>
<span class="normal"><a href="#__codelineno-0-4161">4161</a></span>
<span class="normal"><a href="#__codelineno-0-4162">4162</a></span>
<span class="normal"><a href="#__codelineno-0-4163">4163</a></span>
<span class="normal"><a href="#__codelineno-0-4164">4164</a></span>
<span class="normal"><a href="#__codelineno-0-4165">4165</a></span>
<span class="normal"><a href="#__codelineno-0-4166">4166</a></span>
<span class="normal"><a href="#__codelineno-0-4167">4167</a></span>
<span class="normal"><a href="#__codelineno-0-4168">4168</a></span>
<span class="normal"><a href="#__codelineno-0-4169">4169</a></span>
<span class="normal"><a href="#__codelineno-0-4170">4170</a></span>
<span class="normal"><a href="#__codelineno-0-4171">4171</a></span>
<span class="normal"><a href="#__codelineno-0-4172">4172</a></span>
<span class="normal"><a href="#__codelineno-0-4173">4173</a></span>
<span class="normal"><a href="#__codelineno-0-4174">4174</a></span>
<span class="normal"><a href="#__codelineno-0-4175">4175</a></span>
<span class="normal"><a href="#__codelineno-0-4176">4176</a></span>
<span class="normal"><a href="#__codelineno-0-4177">4177</a></span>
<span class="normal"><a href="#__codelineno-0-4178">4178</a></span>
<span class="normal"><a href="#__codelineno-0-4179">4179</a></span>
<span class="normal"><a href="#__codelineno-0-4180">4180</a></span>
<span class="normal"><a href="#__codelineno-0-4181">4181</a></span>
<span class="normal"><a href="#__codelineno-0-4182">4182</a></span>
<span class="normal"><a href="#__codelineno-0-4183">4183</a></span>
<span class="normal"><a href="#__codelineno-0-4184">4184</a></span>
<span class="normal"><a href="#__codelineno-0-4185">4185</a></span>
<span class="normal"><a href="#__codelineno-0-4186">4186</a></span>
<span class="normal"><a href="#__codelineno-0-4187">4187</a></span>
<span class="normal"><a href="#__codelineno-0-4188">4188</a></span>
<span class="normal"><a href="#__codelineno-0-4189">4189</a></span>
<span class="normal"><a href="#__codelineno-0-4190">4190</a></span>
<span class="normal"><a href="#__codelineno-0-4191">4191</a></span>
<span class="normal"><a href="#__codelineno-0-4192">4192</a></span>
<span class="normal"><a href="#__codelineno-0-4193">4193</a></span>
<span class="normal"><a href="#__codelineno-0-4194">4194</a></span>
<span class="normal"><a href="#__codelineno-0-4195">4195</a></span>
<span class="normal"><a href="#__codelineno-0-4196">4196</a></span>
<span class="normal"><a href="#__codelineno-0-4197">4197</a></span>
<span class="normal"><a href="#__codelineno-0-4198">4198</a></span>
<span class="normal"><a href="#__codelineno-0-4199">4199</a></span>
<span class="normal"><a href="#__codelineno-0-4200">4200</a></span>
<span class="normal"><a href="#__codelineno-0-4201">4201</a></span>
<span class="normal"><a href="#__codelineno-0-4202">4202</a></span>
<span class="normal"><a href="#__codelineno-0-4203">4203</a></span>
<span class="normal"><a href="#__codelineno-0-4204">4204</a></span>
<span class="normal"><a href="#__codelineno-0-4205">4205</a></span>
<span class="normal"><a href="#__codelineno-0-4206">4206</a></span>
<span class="normal"><a href="#__codelineno-0-4207">4207</a></span>
<span class="normal"><a href="#__codelineno-0-4208">4208</a></span>
<span class="normal"><a href="#__codelineno-0-4209">4209</a></span>
<span class="normal"><a href="#__codelineno-0-4210">4210</a></span>
<span class="normal"><a href="#__codelineno-0-4211">4211</a></span>
<span class="normal"><a href="#__codelineno-0-4212">4212</a></span>
<span class="normal"><a href="#__codelineno-0-4213">4213</a></span>
<span class="normal"><a href="#__codelineno-0-4214">4214</a></span>
<span class="normal"><a href="#__codelineno-0-4215">4215</a></span>
<span class="normal"><a href="#__codelineno-0-4216">4216</a></span>
<span class="normal"><a href="#__codelineno-0-4217">4217</a></span>
<span class="normal"><a href="#__codelineno-0-4218">4218</a></span>
<span class="normal"><a href="#__codelineno-0-4219">4219</a></span>
<span class="normal"><a href="#__codelineno-0-4220">4220</a></span>
<span class="normal"><a href="#__codelineno-0-4221">4221</a></span>
<span class="normal"><a href="#__codelineno-0-4222">4222</a></span>
<span class="normal"><a href="#__codelineno-0-4223">4223</a></span>
<span class="normal"><a href="#__codelineno-0-4224">4224</a></span>
<span class="normal"><a href="#__codelineno-0-4225">4225</a></span>
<span class="normal"><a href="#__codelineno-0-4226">4226</a></span>
<span class="normal"><a href="#__codelineno-0-4227">4227</a></span>
<span class="normal"><a href="#__codelineno-0-4228">4228</a></span>
<span class="normal"><a href="#__codelineno-0-4229">4229</a></span>
<span class="normal"><a href="#__codelineno-0-4230">4230</a></span>
<span class="normal"><a href="#__codelineno-0-4231">4231</a></span>
<span class="normal"><a href="#__codelineno-0-4232">4232</a></span>
<span class="normal"><a href="#__codelineno-0-4233">4233</a></span>
<span class="normal"><a href="#__codelineno-0-4234">4234</a></span>
<span class="normal"><a href="#__codelineno-0-4235">4235</a></span>
<span class="normal"><a href="#__codelineno-0-4236">4236</a></span>
<span class="normal"><a href="#__codelineno-0-4237">4237</a></span>
<span class="normal"><a href="#__codelineno-0-4238">4238</a></span>
<span class="normal"><a href="#__codelineno-0-4239">4239</a></span>
<span class="normal"><a href="#__codelineno-0-4240">4240</a></span>
<span class="normal"><a href="#__codelineno-0-4241">4241</a></span>
<span class="normal"><a href="#__codelineno-0-4242">4242</a></span>
<span class="normal"><a href="#__codelineno-0-4243">4243</a></span>
<span class="normal"><a href="#__codelineno-0-4244">4244</a></span>
<span class="normal"><a href="#__codelineno-0-4245">4245</a></span>
<span class="normal"><a href="#__codelineno-0-4246">4246</a></span>
<span class="normal"><a href="#__codelineno-0-4247">4247</a></span>
<span class="normal"><a href="#__codelineno-0-4248">4248</a></span>
<span class="normal"><a href="#__codelineno-0-4249">4249</a></span>
<span class="normal"><a href="#__codelineno-0-4250">4250</a></span>
<span class="normal"><a href="#__codelineno-0-4251">4251</a></span>
<span class="normal"><a href="#__codelineno-0-4252">4252</a></span>
<span class="normal"><a href="#__codelineno-0-4253">4253</a></span>
<span class="normal"><a href="#__codelineno-0-4254">4254</a></span>
<span class="normal"><a href="#__codelineno-0-4255">4255</a></span>
<span class="normal"><a href="#__codelineno-0-4256">4256</a></span>
<span class="normal"><a href="#__codelineno-0-4257">4257</a></span>
<span class="normal"><a href="#__codelineno-0-4258">4258</a></span>
<span class="normal"><a href="#__codelineno-0-4259">4259</a></span>
<span class="normal"><a href="#__codelineno-0-4260">4260</a></span>
<span class="normal"><a href="#__codelineno-0-4261">4261</a></span>
<span class="normal"><a href="#__codelineno-0-4262">4262</a></span>
<span class="normal"><a href="#__codelineno-0-4263">4263</a></span>
<span class="normal"><a href="#__codelineno-0-4264">4264</a></span>
<span class="normal"><a href="#__codelineno-0-4265">4265</a></span>
<span class="normal"><a href="#__codelineno-0-4266">4266</a></span>
<span class="normal"><a href="#__codelineno-0-4267">4267</a></span>
<span class="normal"><a href="#__codelineno-0-4268">4268</a></span>
<span class="normal"><a href="#__codelineno-0-4269">4269</a></span>
<span class="normal"><a href="#__codelineno-0-4270">4270</a></span>
<span class="normal"><a href="#__codelineno-0-4271">4271</a></span>
<span class="normal"><a href="#__codelineno-0-4272">4272</a></span>
<span class="normal"><a href="#__codelineno-0-4273">4273</a></span>
<span class="normal"><a href="#__codelineno-0-4274">4274</a></span>
<span class="normal"><a href="#__codelineno-0-4275">4275</a></span>
<span class="normal"><a href="#__codelineno-0-4276">4276</a></span>
<span class="normal"><a href="#__codelineno-0-4277">4277</a></span>
<span class="normal"><a href="#__codelineno-0-4278">4278</a></span>
<span class="normal"><a href="#__codelineno-0-4279">4279</a></span>
<span class="normal"><a href="#__codelineno-0-4280">4280</a></span>
<span class="normal"><a href="#__codelineno-0-4281">4281</a></span>
<span class="normal"><a href="#__codelineno-0-4282">4282</a></span>
<span class="normal"><a href="#__codelineno-0-4283">4283</a></span>
<span class="normal"><a href="#__codelineno-0-4284">4284</a></span>
<span class="normal"><a href="#__codelineno-0-4285">4285</a></span>
<span class="normal"><a href="#__codelineno-0-4286">4286</a></span>
<span class="normal"><a href="#__codelineno-0-4287">4287</a></span>
<span class="normal"><a href="#__codelineno-0-4288">4288</a></span>
<span class="normal"><a href="#__codelineno-0-4289">4289</a></span>
<span class="normal"><a href="#__codelineno-0-4290">4290</a></span>
<span class="normal"><a href="#__codelineno-0-4291">4291</a></span>
<span class="normal"><a href="#__codelineno-0-4292">4292</a></span>
<span class="normal"><a href="#__codelineno-0-4293">4293</a></span>
<span class="normal"><a href="#__codelineno-0-4294">4294</a></span>
<span class="normal"><a href="#__codelineno-0-4295">4295</a></span>
<span class="normal"><a href="#__codelineno-0-4296">4296</a></span>
<span class="normal"><a href="#__codelineno-0-4297">4297</a></span>
<span class="normal"><a href="#__codelineno-0-4298">4298</a></span>
<span class="normal"><a href="#__codelineno-0-4299">4299</a></span>
<span class="normal"><a href="#__codelineno-0-4300">4300</a></span>
<span class="normal"><a href="#__codelineno-0-4301">4301</a></span>
<span class="normal"><a href="#__codelineno-0-4302">4302</a></span>
<span class="normal"><a href="#__codelineno-0-4303">4303</a></span>
<span class="normal"><a href="#__codelineno-0-4304">4304</a></span>
<span class="normal"><a href="#__codelineno-0-4305">4305</a></span>
<span class="normal"><a href="#__codelineno-0-4306">4306</a></span>
<span class="normal"><a href="#__codelineno-0-4307">4307</a></span>
<span class="normal"><a href="#__codelineno-0-4308">4308</a></span>
<span class="normal"><a href="#__codelineno-0-4309">4309</a></span>
<span class="normal"><a href="#__codelineno-0-4310">4310</a></span>
<span class="normal"><a href="#__codelineno-0-4311">4311</a></span>
<span class="normal"><a href="#__codelineno-0-4312">4312</a></span>
<span class="normal"><a href="#__codelineno-0-4313">4313</a></span>
<span class="normal"><a href="#__codelineno-0-4314">4314</a></span>
<span class="normal"><a href="#__codelineno-0-4315">4315</a></span>
<span class="normal"><a href="#__codelineno-0-4316">4316</a></span>
<span class="normal"><a href="#__codelineno-0-4317">4317</a></span>
<span class="normal"><a href="#__codelineno-0-4318">4318</a></span>
<span class="normal"><a href="#__codelineno-0-4319">4319</a></span>
<span class="normal"><a href="#__codelineno-0-4320">4320</a></span>
<span class="normal"><a href="#__codelineno-0-4321">4321</a></span>
<span class="normal"><a href="#__codelineno-0-4322">4322</a></span>
<span class="normal"><a href="#__codelineno-0-4323">4323</a></span>
<span class="normal"><a href="#__codelineno-0-4324">4324</a></span>
<span class="normal"><a href="#__codelineno-0-4325">4325</a></span>
<span class="normal"><a href="#__codelineno-0-4326">4326</a></span>
<span class="normal"><a href="#__codelineno-0-4327">4327</a></span>
<span class="normal"><a href="#__codelineno-0-4328">4328</a></span>
<span class="normal"><a href="#__codelineno-0-4329">4329</a></span>
<span class="normal"><a href="#__codelineno-0-4330">4330</a></span>
<span class="normal"><a href="#__codelineno-0-4331">4331</a></span>
<span class="normal"><a href="#__codelineno-0-4332">4332</a></span>
<span class="normal"><a href="#__codelineno-0-4333">4333</a></span>
<span class="normal"><a href="#__codelineno-0-4334">4334</a></span>
<span class="normal"><a href="#__codelineno-0-4335">4335</a></span>
<span class="normal"><a href="#__codelineno-0-4336">4336</a></span>
<span class="normal"><a href="#__codelineno-0-4337">4337</a></span>
<span class="normal"><a href="#__codelineno-0-4338">4338</a></span>
<span class="normal"><a href="#__codelineno-0-4339">4339</a></span>
<span class="normal"><a href="#__codelineno-0-4340">4340</a></span>
<span class="normal"><a href="#__codelineno-0-4341">4341</a></span>
<span class="normal"><a href="#__codelineno-0-4342">4342</a></span>
<span class="normal"><a href="#__codelineno-0-4343">4343</a></span>
<span class="normal"><a href="#__codelineno-0-4344">4344</a></span>
<span class="normal"><a href="#__codelineno-0-4345">4345</a></span>
<span class="normal"><a href="#__codelineno-0-4346">4346</a></span>
<span class="normal"><a href="#__codelineno-0-4347">4347</a></span>
<span class="normal"><a href="#__codelineno-0-4348">4348</a></span>
<span class="normal"><a href="#__codelineno-0-4349">4349</a></span>
<span class="normal"><a href="#__codelineno-0-4350">4350</a></span>
<span class="normal"><a href="#__codelineno-0-4351">4351</a></span>
<span class="normal"><a href="#__codelineno-0-4352">4352</a></span>
<span class="normal"><a href="#__codelineno-0-4353">4353</a></span>
<span class="normal"><a href="#__codelineno-0-4354">4354</a></span>
<span class="normal"><a href="#__codelineno-0-4355">4355</a></span>
<span class="normal"><a href="#__codelineno-0-4356">4356</a></span>
<span class="normal"><a href="#__codelineno-0-4357">4357</a></span>
<span class="normal"><a href="#__codelineno-0-4358">4358</a></span>
<span class="normal"><a href="#__codelineno-0-4359">4359</a></span>
<span class="normal"><a href="#__codelineno-0-4360">4360</a></span>
<span class="normal"><a href="#__codelineno-0-4361">4361</a></span>
<span class="normal"><a href="#__codelineno-0-4362">4362</a></span>
<span class="normal"><a href="#__codelineno-0-4363">4363</a></span>
<span class="normal"><a href="#__codelineno-0-4364">4364</a></span>
<span class="normal"><a href="#__codelineno-0-4365">4365</a></span>
<span class="normal"><a href="#__codelineno-0-4366">4366</a></span>
<span class="normal"><a href="#__codelineno-0-4367">4367</a></span>
<span class="normal"><a href="#__codelineno-0-4368">4368</a></span>
<span class="normal"><a href="#__codelineno-0-4369">4369</a></span>
<span class="normal"><a href="#__codelineno-0-4370">4370</a></span>
<span class="normal"><a href="#__codelineno-0-4371">4371</a></span>
<span class="normal"><a href="#__codelineno-0-4372">4372</a></span>
<span class="normal"><a href="#__codelineno-0-4373">4373</a></span>
<span class="normal"><a href="#__codelineno-0-4374">4374</a></span>
<span class="normal"><a href="#__codelineno-0-4375">4375</a></span>
<span class="normal"><a href="#__codelineno-0-4376">4376</a></span>
<span class="normal"><a href="#__codelineno-0-4377">4377</a></span>
<span class="normal"><a href="#__codelineno-0-4378">4378</a></span>
<span class="normal"><a href="#__codelineno-0-4379">4379</a></span>
<span class="normal"><a href="#__codelineno-0-4380">4380</a></span>
<span class="normal"><a href="#__codelineno-0-4381">4381</a></span>
<span class="normal"><a href="#__codelineno-0-4382">4382</a></span>
<span class="normal"><a href="#__codelineno-0-4383">4383</a></span>
<span class="normal"><a href="#__codelineno-0-4384">4384</a></span>
<span class="normal"><a href="#__codelineno-0-4385">4385</a></span>
<span class="normal"><a href="#__codelineno-0-4386">4386</a></span>
<span class="normal"><a href="#__codelineno-0-4387">4387</a></span>
<span class="normal"><a href="#__codelineno-0-4388">4388</a></span>
<span class="normal"><a href="#__codelineno-0-4389">4389</a></span>
<span class="normal"><a href="#__codelineno-0-4390">4390</a></span>
<span class="normal"><a href="#__codelineno-0-4391">4391</a></span>
<span class="normal"><a href="#__codelineno-0-4392">4392</a></span>
<span class="normal"><a href="#__codelineno-0-4393">4393</a></span>
<span class="normal"><a href="#__codelineno-0-4394">4394</a></span>
<span class="normal"><a href="#__codelineno-0-4395">4395</a></span>
<span class="normal"><a href="#__codelineno-0-4396">4396</a></span>
<span class="normal"><a href="#__codelineno-0-4397">4397</a></span>
<span class="normal"><a href="#__codelineno-0-4398">4398</a></span>
<span class="normal"><a href="#__codelineno-0-4399">4399</a></span>
<span class="normal"><a href="#__codelineno-0-4400">4400</a></span>
<span class="normal"><a href="#__codelineno-0-4401">4401</a></span>
<span class="normal"><a href="#__codelineno-0-4402">4402</a></span>
<span class="normal"><a href="#__codelineno-0-4403">4403</a></span>
<span class="normal"><a href="#__codelineno-0-4404">4404</a></span>
<span class="normal"><a href="#__codelineno-0-4405">4405</a></span>
<span class="normal"><a href="#__codelineno-0-4406">4406</a></span>
<span class="normal"><a href="#__codelineno-0-4407">4407</a></span>
<span class="normal"><a href="#__codelineno-0-4408">4408</a></span>
<span class="normal"><a href="#__codelineno-0-4409">4409</a></span>
<span class="normal"><a href="#__codelineno-0-4410">4410</a></span>
<span class="normal"><a href="#__codelineno-0-4411">4411</a></span>
<span class="normal"><a href="#__codelineno-0-4412">4412</a></span>
<span class="normal"><a href="#__codelineno-0-4413">4413</a></span>
<span class="normal"><a href="#__codelineno-0-4414">4414</a></span>
<span class="normal"><a href="#__codelineno-0-4415">4415</a></span>
<span class="normal"><a href="#__codelineno-0-4416">4416</a></span>
<span class="normal"><a href="#__codelineno-0-4417">4417</a></span>
<span class="normal"><a href="#__codelineno-0-4418">4418</a></span>
<span class="normal"><a href="#__codelineno-0-4419">4419</a></span>
<span class="normal"><a href="#__codelineno-0-4420">4420</a></span>
<span class="normal"><a href="#__codelineno-0-4421">4421</a></span>
<span class="normal"><a href="#__codelineno-0-4422">4422</a></span>
<span class="normal"><a href="#__codelineno-0-4423">4423</a></span>
<span class="normal"><a href="#__codelineno-0-4424">4424</a></span>
<span class="normal"><a href="#__codelineno-0-4425">4425</a></span>
<span class="normal"><a href="#__codelineno-0-4426">4426</a></span>
<span class="normal"><a href="#__codelineno-0-4427">4427</a></span>
<span class="normal"><a href="#__codelineno-0-4428">4428</a></span>
<span class="normal"><a href="#__codelineno-0-4429">4429</a></span>
<span class="normal"><a href="#__codelineno-0-4430">4430</a></span>
<span class="normal"><a href="#__codelineno-0-4431">4431</a></span>
<span class="normal"><a href="#__codelineno-0-4432">4432</a></span>
<span class="normal"><a href="#__codelineno-0-4433">4433</a></span>
<span class="normal"><a href="#__codelineno-0-4434">4434</a></span>
<span class="normal"><a href="#__codelineno-0-4435">4435</a></span>
<span class="normal"><a href="#__codelineno-0-4436">4436</a></span>
<span class="normal"><a href="#__codelineno-0-4437">4437</a></span>
<span class="normal"><a href="#__codelineno-0-4438">4438</a></span>
<span class="normal"><a href="#__codelineno-0-4439">4439</a></span>
<span class="normal"><a href="#__codelineno-0-4440">4440</a></span>
<span class="normal"><a href="#__codelineno-0-4441">4441</a></span>
<span class="normal"><a href="#__codelineno-0-4442">4442</a></span>
<span class="normal"><a href="#__codelineno-0-4443">4443</a></span>
<span class="normal"><a href="#__codelineno-0-4444">4444</a></span>
<span class="normal"><a href="#__codelineno-0-4445">4445</a></span>
<span class="normal"><a href="#__codelineno-0-4446">4446</a></span>
<span class="normal"><a href="#__codelineno-0-4447">4447</a></span>
<span class="normal"><a href="#__codelineno-0-4448">4448</a></span>
<span class="normal"><a href="#__codelineno-0-4449">4449</a></span>
<span class="normal"><a href="#__codelineno-0-4450">4450</a></span>
<span class="normal"><a href="#__codelineno-0-4451">4451</a></span>
<span class="normal"><a href="#__codelineno-0-4452">4452</a></span>
<span class="normal"><a href="#__codelineno-0-4453">4453</a></span>
<span class="normal"><a href="#__codelineno-0-4454">4454</a></span>
<span class="normal"><a href="#__codelineno-0-4455">4455</a></span>
<span class="normal"><a href="#__codelineno-0-4456">4456</a></span>
<span class="normal"><a href="#__codelineno-0-4457">4457</a></span>
<span class="normal"><a href="#__codelineno-0-4458">4458</a></span>
<span class="normal"><a href="#__codelineno-0-4459">4459</a></span>
<span class="normal"><a href="#__codelineno-0-4460">4460</a></span>
<span class="normal"><a href="#__codelineno-0-4461">4461</a></span>
<span class="normal"><a href="#__codelineno-0-4462">4462</a></span>
<span class="normal"><a href="#__codelineno-0-4463">4463</a></span>
<span class="normal"><a href="#__codelineno-0-4464">4464</a></span>
<span class="normal"><a href="#__codelineno-0-4465">4465</a></span>
<span class="normal"><a href="#__codelineno-0-4466">4466</a></span>
<span class="normal"><a href="#__codelineno-0-4467">4467</a></span>
<span class="normal"><a href="#__codelineno-0-4468">4468</a></span>
<span class="normal"><a href="#__codelineno-0-4469">4469</a></span>
<span class="normal"><a href="#__codelineno-0-4470">4470</a></span>
<span class="normal"><a href="#__codelineno-0-4471">4471</a></span>
<span class="normal"><a href="#__codelineno-0-4472">4472</a></span>
<span class="normal"><a href="#__codelineno-0-4473">4473</a></span>
<span class="normal"><a href="#__codelineno-0-4474">4474</a></span>
<span class="normal"><a href="#__codelineno-0-4475">4475</a></span>
<span class="normal"><a href="#__codelineno-0-4476">4476</a></span>
<span class="normal"><a href="#__codelineno-0-4477">4477</a></span>
<span class="normal"><a href="#__codelineno-0-4478">4478</a></span>
<span class="normal"><a href="#__codelineno-0-4479">4479</a></span>
<span class="normal"><a href="#__codelineno-0-4480">4480</a></span>
<span class="normal"><a href="#__codelineno-0-4481">4481</a></span>
<span class="normal"><a href="#__codelineno-0-4482">4482</a></span>
<span class="normal"><a href="#__codelineno-0-4483">4483</a></span>
<span class="normal"><a href="#__codelineno-0-4484">4484</a></span>
<span class="normal"><a href="#__codelineno-0-4485">4485</a></span>
<span class="normal"><a href="#__codelineno-0-4486">4486</a></span>
<span class="normal"><a href="#__codelineno-0-4487">4487</a></span>
<span class="normal"><a href="#__codelineno-0-4488">4488</a></span>
<span class="normal"><a href="#__codelineno-0-4489">4489</a></span>
<span class="normal"><a href="#__codelineno-0-4490">4490</a></span>
<span class="normal"><a href="#__codelineno-0-4491">4491</a></span>
<span class="normal"><a href="#__codelineno-0-4492">4492</a></span>
<span class="normal"><a href="#__codelineno-0-4493">4493</a></span>
<span class="normal"><a href="#__codelineno-0-4494">4494</a></span>
<span class="normal"><a href="#__codelineno-0-4495">4495</a></span>
<span class="normal"><a href="#__codelineno-0-4496">4496</a></span>
<span class="normal"><a href="#__codelineno-0-4497">4497</a></span>
<span class="normal"><a href="#__codelineno-0-4498">4498</a></span>
<span class="normal"><a href="#__codelineno-0-4499">4499</a></span>
<span class="normal"><a href="#__codelineno-0-4500">4500</a></span>
<span class="normal"><a href="#__codelineno-0-4501">4501</a></span>
<span class="normal"><a href="#__codelineno-0-4502">4502</a></span>
<span class="normal"><a href="#__codelineno-0-4503">4503</a></span>
<span class="normal"><a href="#__codelineno-0-4504">4504</a></span>
<span class="normal"><a href="#__codelineno-0-4505">4505</a></span>
<span class="normal"><a href="#__codelineno-0-4506">4506</a></span>
<span class="normal"><a href="#__codelineno-0-4507">4507</a></span>
<span class="normal"><a href="#__codelineno-0-4508">4508</a></span>
<span class="normal"><a href="#__codelineno-0-4509">4509</a></span>
<span class="normal"><a href="#__codelineno-0-4510">4510</a></span>
<span class="normal"><a href="#__codelineno-0-4511">4511</a></span>
<span class="normal"><a href="#__codelineno-0-4512">4512</a></span>
<span class="normal"><a href="#__codelineno-0-4513">4513</a></span>
<span class="normal"><a href="#__codelineno-0-4514">4514</a></span>
<span class="normal"><a href="#__codelineno-0-4515">4515</a></span>
<span class="normal"><a href="#__codelineno-0-4516">4516</a></span>
<span class="normal"><a href="#__codelineno-0-4517">4517</a></span>
<span class="normal"><a href="#__codelineno-0-4518">4518</a></span>
<span class="normal"><a href="#__codelineno-0-4519">4519</a></span>
<span class="normal"><a href="#__codelineno-0-4520">4520</a></span>
<span class="normal"><a href="#__codelineno-0-4521">4521</a></span>
<span class="normal"><a href="#__codelineno-0-4522">4522</a></span>
<span class="normal"><a href="#__codelineno-0-4523">4523</a></span>
<span class="normal"><a href="#__codelineno-0-4524">4524</a></span>
<span class="normal"><a href="#__codelineno-0-4525">4525</a></span>
<span class="normal"><a href="#__codelineno-0-4526">4526</a></span>
<span class="normal"><a href="#__codelineno-0-4527">4527</a></span>
<span class="normal"><a href="#__codelineno-0-4528">4528</a></span>
<span class="normal"><a href="#__codelineno-0-4529">4529</a></span>
<span class="normal"><a href="#__codelineno-0-4530">4530</a></span>
<span class="normal"><a href="#__codelineno-0-4531">4531</a></span>
<span class="normal"><a href="#__codelineno-0-4532">4532</a></span>
<span class="normal"><a href="#__codelineno-0-4533">4533</a></span>
<span class="normal"><a href="#__codelineno-0-4534">4534</a></span>
<span class="normal"><a href="#__codelineno-0-4535">4535</a></span>
<span class="normal"><a href="#__codelineno-0-4536">4536</a></span>
<span class="normal"><a href="#__codelineno-0-4537">4537</a></span>
<span class="normal"><a href="#__codelineno-0-4538">4538</a></span>
<span class="normal"><a href="#__codelineno-0-4539">4539</a></span>
<span class="normal"><a href="#__codelineno-0-4540">4540</a></span>
<span class="normal"><a href="#__codelineno-0-4541">4541</a></span>
<span class="normal"><a href="#__codelineno-0-4542">4542</a></span>
<span class="normal"><a href="#__codelineno-0-4543">4543</a></span>
<span class="normal"><a href="#__codelineno-0-4544">4544</a></span>
<span class="normal"><a href="#__codelineno-0-4545">4545</a></span>
<span class="normal"><a href="#__codelineno-0-4546">4546</a></span>
<span class="normal"><a href="#__codelineno-0-4547">4547</a></span>
<span class="normal"><a href="#__codelineno-0-4548">4548</a></span>
<span class="normal"><a href="#__codelineno-0-4549">4549</a></span>
<span class="normal"><a href="#__codelineno-0-4550">4550</a></span>
<span class="normal"><a href="#__codelineno-0-4551">4551</a></span>
<span class="normal"><a href="#__codelineno-0-4552">4552</a></span>
<span class="normal"><a href="#__codelineno-0-4553">4553</a></span>
<span class="normal"><a href="#__codelineno-0-4554">4554</a></span>
<span class="normal"><a href="#__codelineno-0-4555">4555</a></span>
<span class="normal"><a href="#__codelineno-0-4556">4556</a></span>
<span class="normal"><a href="#__codelineno-0-4557">4557</a></span>
<span class="normal"><a href="#__codelineno-0-4558">4558</a></span>
<span class="normal"><a href="#__codelineno-0-4559">4559</a></span>
<span class="normal"><a href="#__codelineno-0-4560">4560</a></span>
<span class="normal"><a href="#__codelineno-0-4561">4561</a></span>
<span class="normal"><a href="#__codelineno-0-4562">4562</a></span>
<span class="normal"><a href="#__codelineno-0-4563">4563</a></span>
<span class="normal"><a href="#__codelineno-0-4564">4564</a></span>
<span class="normal"><a href="#__codelineno-0-4565">4565</a></span>
<span class="normal"><a href="#__codelineno-0-4566">4566</a></span>
<span class="normal"><a href="#__codelineno-0-4567">4567</a></span>
<span class="normal"><a href="#__codelineno-0-4568">4568</a></span>
<span class="normal"><a href="#__codelineno-0-4569">4569</a></span>
<span class="normal"><a href="#__codelineno-0-4570">4570</a></span>
<span class="normal"><a href="#__codelineno-0-4571">4571</a></span>
<span class="normal"><a href="#__codelineno-0-4572">4572</a></span>
<span class="normal"><a href="#__codelineno-0-4573">4573</a></span>
<span class="normal"><a href="#__codelineno-0-4574">4574</a></span>
<span class="normal"><a href="#__codelineno-0-4575">4575</a></span>
<span class="normal"><a href="#__codelineno-0-4576">4576</a></span>
<span class="normal"><a href="#__codelineno-0-4577">4577</a></span>
<span class="normal"><a href="#__codelineno-0-4578">4578</a></span>
<span class="normal"><a href="#__codelineno-0-4579">4579</a></span>
<span class="normal"><a href="#__codelineno-0-4580">4580</a></span>
<span class="normal"><a href="#__codelineno-0-4581">4581</a></span>
<span class="normal"><a href="#__codelineno-0-4582">4582</a></span>
<span class="normal"><a href="#__codelineno-0-4583">4583</a></span>
<span class="normal"><a href="#__codelineno-0-4584">4584</a></span>
<span class="normal"><a href="#__codelineno-0-4585">4585</a></span>
<span class="normal"><a href="#__codelineno-0-4586">4586</a></span>
<span class="normal"><a href="#__codelineno-0-4587">4587</a></span>
<span class="normal"><a href="#__codelineno-0-4588">4588</a></span>
<span class="normal"><a href="#__codelineno-0-4589">4589</a></span>
<span class="normal"><a href="#__codelineno-0-4590">4590</a></span>
<span class="normal"><a href="#__codelineno-0-4591">4591</a></span>
<span class="normal"><a href="#__codelineno-0-4592">4592</a></span>
<span class="normal"><a href="#__codelineno-0-4593">4593</a></span>
<span class="normal"><a href="#__codelineno-0-4594">4594</a></span>
<span class="normal"><a href="#__codelineno-0-4595">4595</a></span>
<span class="normal"><a href="#__codelineno-0-4596">4596</a></span>
<span class="normal"><a href="#__codelineno-0-4597">4597</a></span>
<span class="normal"><a href="#__codelineno-0-4598">4598</a></span>
<span class="normal"><a href="#__codelineno-0-4599">4599</a></span>
<span class="normal"><a href="#__codelineno-0-4600">4600</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-3590" name="__codelineno-0-3590"></a><span class="k">class</span><span class="w"> </span><span class="nc">SolutionBatch</span><span class="p">(</span><span class="n">Serializable</span><span class="p">):</span>
<a id="__codelineno-0-3591" name="__codelineno-0-3591"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-3592" name="__codelineno-0-3592"></a><span class="sd">    Representation of a batch of solutions.</span>
<a id="__codelineno-0-3593" name="__codelineno-0-3593"></a>
<a id="__codelineno-0-3594" name="__codelineno-0-3594"></a><span class="sd">    A SolutionBatch stores the decision values of multiple solutions</span>
<a id="__codelineno-0-3595" name="__codelineno-0-3595"></a><span class="sd">    in a single contiguous tensor. For numeric and fixed-length</span>
<a id="__codelineno-0-3596" name="__codelineno-0-3596"></a><span class="sd">    problems, this contiguous tensor is a PyTorch tensor.</span>
<a id="__codelineno-0-3597" name="__codelineno-0-3597"></a><span class="sd">    For not-necessarily-numeric and not-necessarily-fixed-length</span>
<a id="__codelineno-0-3598" name="__codelineno-0-3598"></a><span class="sd">    problems, this contiguous tensor is an ObjectArray.</span>
<a id="__codelineno-0-3599" name="__codelineno-0-3599"></a>
<a id="__codelineno-0-3600" name="__codelineno-0-3600"></a><span class="sd">    The evalution results and extra evaluation data of the solutions</span>
<a id="__codelineno-0-3601" name="__codelineno-0-3601"></a><span class="sd">    are also stored in an additional contiguous tensor.</span>
<a id="__codelineno-0-3602" name="__codelineno-0-3602"></a>
<a id="__codelineno-0-3603" name="__codelineno-0-3603"></a><span class="sd">    Interface-wise, a SolutionBatch behaves like a sequence of</span>
<a id="__codelineno-0-3604" name="__codelineno-0-3604"></a><span class="sd">    Solution objects. One can get single Solution from a SolutionBatch</span>
<a id="__codelineno-0-3605" name="__codelineno-0-3605"></a><span class="sd">    via the indexing operator (`[]`).</span>
<a id="__codelineno-0-3606" name="__codelineno-0-3606"></a><span class="sd">    Additionally, one can iterate over each solution using</span>
<a id="__codelineno-0-3607" name="__codelineno-0-3607"></a><span class="sd">    the `for ... in ...` statement.</span>
<a id="__codelineno-0-3608" name="__codelineno-0-3608"></a>
<a id="__codelineno-0-3609" name="__codelineno-0-3609"></a><span class="sd">    One can also get a slice of a SolutionBatch.</span>
<a id="__codelineno-0-3610" name="__codelineno-0-3610"></a><span class="sd">    The slicing of a SolutionBatch results in a new SolutionBatch.</span>
<a id="__codelineno-0-3611" name="__codelineno-0-3611"></a><span class="sd">    With simple slicing, the obtained SolutionBatch shares its</span>
<a id="__codelineno-0-3612" name="__codelineno-0-3612"></a><span class="sd">    memory with the original SolutionBatch.</span>
<a id="__codelineno-0-3613" name="__codelineno-0-3613"></a><span class="sd">    With advanced slicing (i.e. the kind of slicing where the</span>
<a id="__codelineno-0-3614" name="__codelineno-0-3614"></a><span class="sd">    solution indices are specified one by one, like:</span>
<a id="__codelineno-0-3615" name="__codelineno-0-3615"></a><span class="sd">    `mybatch[[0, 4, 2, 5]]`), the obtained SolutionBatch is a copy,</span>
<a id="__codelineno-0-3616" name="__codelineno-0-3616"></a><span class="sd">    and does not share any memory with its original.</span>
<a id="__codelineno-0-3617" name="__codelineno-0-3617"></a>
<a id="__codelineno-0-3618" name="__codelineno-0-3618"></a><span class="sd">    The decision values of all the stored solutions in the batch</span>
<a id="__codelineno-0-3619" name="__codelineno-0-3619"></a><span class="sd">    can be obtained in a read-only tensor via:</span>
<a id="__codelineno-0-3620" name="__codelineno-0-3620"></a>
<a id="__codelineno-0-3621" name="__codelineno-0-3621"></a><span class="sd">        values = batch.values</span>
<a id="__codelineno-0-3622" name="__codelineno-0-3622"></a>
<a id="__codelineno-0-3623" name="__codelineno-0-3623"></a><span class="sd">    If one has modified decision values and wishes to put them</span>
<a id="__codelineno-0-3624" name="__codelineno-0-3624"></a><span class="sd">    into the batch, the `set_values(...)` method can be used</span>
<a id="__codelineno-0-3625" name="__codelineno-0-3625"></a><span class="sd">    as follows:</span>
<a id="__codelineno-0-3626" name="__codelineno-0-3626"></a>
<a id="__codelineno-0-3627" name="__codelineno-0-3627"></a><span class="sd">        batch.set_values(modified_values)</span>
<a id="__codelineno-0-3628" name="__codelineno-0-3628"></a>
<a id="__codelineno-0-3629" name="__codelineno-0-3629"></a><span class="sd">    The evaluation results of the solutions can be obtained</span>
<a id="__codelineno-0-3630" name="__codelineno-0-3630"></a><span class="sd">    in a read-only tensor via:</span>
<a id="__codelineno-0-3631" name="__codelineno-0-3631"></a>
<a id="__codelineno-0-3632" name="__codelineno-0-3632"></a><span class="sd">        evals = batch.evals</span>
<a id="__codelineno-0-3633" name="__codelineno-0-3633"></a>
<a id="__codelineno-0-3634" name="__codelineno-0-3634"></a><span class="sd">    If one has newly computed evaluation results, and wishes</span>
<a id="__codelineno-0-3635" name="__codelineno-0-3635"></a><span class="sd">    to put them into the batch, the `set_evals(...)` method</span>
<a id="__codelineno-0-3636" name="__codelineno-0-3636"></a><span class="sd">    can be used as follows:</span>
<a id="__codelineno-0-3637" name="__codelineno-0-3637"></a>
<a id="__codelineno-0-3638" name="__codelineno-0-3638"></a><span class="sd">        batch.set_evals(newly_computed_evals)</span>
<a id="__codelineno-0-3639" name="__codelineno-0-3639"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-3640" name="__codelineno-0-3640"></a>
<a id="__codelineno-0-3641" name="__codelineno-0-3641"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-0-3642" name="__codelineno-0-3642"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-3643" name="__codelineno-0-3643"></a>        <span class="n">problem</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Problem</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3644" name="__codelineno-0-3644"></a>        <span class="n">popsize</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3645" name="__codelineno-0-3645"></a>        <span class="o">*</span><span class="p">,</span>
<a id="__codelineno-0-3646" name="__codelineno-0-3646"></a>        <span class="n">device</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Device</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3647" name="__codelineno-0-3647"></a>        <span class="n">slice_of</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">tuple</span><span class="p">,</span> <span class="n">SolutionBatchSliceInfo</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3648" name="__codelineno-0-3648"></a>        <span class="n">like</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;SolutionBatch&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3649" name="__codelineno-0-3649"></a>        <span class="n">merging_of</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="s2">&quot;SolutionBatch&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3650" name="__codelineno-0-3650"></a>        <span class="n">empty</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3651" name="__codelineno-0-3651"></a>    <span class="p">):</span>
<a id="__codelineno-0-3652" name="__codelineno-0-3652"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_num_objs</span><span class="p">:</span> <span class="nb">int</span>
<a id="__codelineno-0-3653" name="__codelineno-0-3653"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">,</span> <span class="n">ObjectArray</span><span class="p">]</span>
<a id="__codelineno-0-3654" name="__codelineno-0-3654"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_descending</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span>
<a id="__codelineno-0-3655" name="__codelineno-0-3655"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_slice</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">IndicesOrSlice</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-3656" name="__codelineno-0-3656"></a>
<a id="__codelineno-0-3657" name="__codelineno-0-3657"></a>        <span class="k">if</span> <span class="n">slice_of</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3658" name="__codelineno-0-3658"></a>            <span class="n">expect_none</span><span class="p">(</span>
<a id="__codelineno-0-3659" name="__codelineno-0-3659"></a>                <span class="s2">&quot;While making a new SolutionBatch via slicing&quot;</span><span class="p">,</span>
<a id="__codelineno-0-3660" name="__codelineno-0-3660"></a>                <span class="n">problem</span><span class="o">=</span><span class="n">problem</span><span class="p">,</span>
<a id="__codelineno-0-3661" name="__codelineno-0-3661"></a>                <span class="n">popsize</span><span class="o">=</span><span class="n">popsize</span><span class="p">,</span>
<a id="__codelineno-0-3662" name="__codelineno-0-3662"></a>                <span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">,</span>
<a id="__codelineno-0-3663" name="__codelineno-0-3663"></a>                <span class="n">merging_of</span><span class="o">=</span><span class="n">merging_of</span><span class="p">,</span>
<a id="__codelineno-0-3664" name="__codelineno-0-3664"></a>                <span class="n">like</span><span class="o">=</span><span class="n">like</span><span class="p">,</span>
<a id="__codelineno-0-3665" name="__codelineno-0-3665"></a>                <span class="n">empty</span><span class="o">=</span><span class="n">empty</span><span class="p">,</span>
<a id="__codelineno-0-3666" name="__codelineno-0-3666"></a>            <span class="p">)</span>
<a id="__codelineno-0-3667" name="__codelineno-0-3667"></a>
<a id="__codelineno-0-3668" name="__codelineno-0-3668"></a>            <span class="n">source</span><span class="p">:</span> <span class="s2">&quot;SolutionBatch&quot;</span>
<a id="__codelineno-0-3669" name="__codelineno-0-3669"></a>            <span class="n">slice_info</span><span class="p">:</span> <span class="n">IndicesOrSlice</span>
<a id="__codelineno-0-3670" name="__codelineno-0-3670"></a>            <span class="n">source</span><span class="p">,</span> <span class="n">slice_info</span> <span class="o">=</span> <span class="n">slice_of</span>
<a id="__codelineno-0-3671" name="__codelineno-0-3671"></a>
<a id="__codelineno-0-3672" name="__codelineno-0-3672"></a>            <span class="k">def</span><span class="w"> </span><span class="nf">safe_slice</span><span class="p">(</span><span class="n">t</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">,</span> <span class="n">slice_info</span><span class="p">):</span>
<a id="__codelineno-0-3673" name="__codelineno-0-3673"></a>                <span class="n">d0</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">ndim</span>
<a id="__codelineno-0-3674" name="__codelineno-0-3674"></a>                <span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="n">slice_info</span><span class="p">]</span>
<a id="__codelineno-0-3675" name="__codelineno-0-3675"></a>                <span class="n">d1</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">ndim</span>
<a id="__codelineno-0-3676" name="__codelineno-0-3676"></a>                <span class="k">if</span> <span class="n">d0</span> <span class="o">!=</span> <span class="n">d1</span><span class="p">:</span>
<a id="__codelineno-0-3677" name="__codelineno-0-3677"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-3678" name="__codelineno-0-3678"></a>                        <span class="s2">&quot;Encountered an illegal slicing operation which would&quot;</span>
<a id="__codelineno-0-3679" name="__codelineno-0-3679"></a>                        <span class="s2">&quot; change the shape of the stored tensor(s) of the&quot;</span>
<a id="__codelineno-0-3680" name="__codelineno-0-3680"></a>                        <span class="s2">&quot; SolutionBatch.&quot;</span>
<a id="__codelineno-0-3681" name="__codelineno-0-3681"></a>                    <span class="p">)</span>
<a id="__codelineno-0-3682" name="__codelineno-0-3682"></a>                <span class="k">return</span> <span class="n">t</span>
<a id="__codelineno-0-3683" name="__codelineno-0-3683"></a>
<a id="__codelineno-0-3684" name="__codelineno-0-3684"></a>            <span class="k">with</span> <span class="n">torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">():</span>
<a id="__codelineno-0-3685" name="__codelineno-0-3685"></a>                <span class="c1"># self._data = source._data[slice_info]</span>
<a id="__codelineno-0-3686" name="__codelineno-0-3686"></a>                <span class="c1"># self._evdata = source._evdata[slice_info]</span>
<a id="__codelineno-0-3687" name="__codelineno-0-3687"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">safe_slice</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">_data</span><span class="p">,</span> <span class="n">slice_info</span><span class="p">)</span>
<a id="__codelineno-0-3688" name="__codelineno-0-3688"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span> <span class="o">=</span> <span class="n">safe_slice</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">_evdata</span><span class="p">,</span> <span class="n">slice_info</span><span class="p">)</span>
<a id="__codelineno-0-3689" name="__codelineno-0-3689"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_slice</span> <span class="o">=</span> <span class="n">slice_info</span>
<a id="__codelineno-0-3690" name="__codelineno-0-3690"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_descending</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">_descending</span>
<a id="__codelineno-0-3691" name="__codelineno-0-3691"></a>
<a id="__codelineno-0-3692" name="__codelineno-0-3692"></a>            <span class="n">shares_storage</span> <span class="o">=</span> <span class="n">storage_ptr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">)</span> <span class="o">==</span> <span class="n">storage_ptr</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">_data</span><span class="p">)</span>
<a id="__codelineno-0-3693" name="__codelineno-0-3693"></a>
<a id="__codelineno-0-3694" name="__codelineno-0-3694"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">shares_storage</span><span class="p">:</span>
<a id="__codelineno-0-3695" name="__codelineno-0-3695"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_descending</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_descending</span><span class="p">)</span>
<a id="__codelineno-0-3696" name="__codelineno-0-3696"></a>
<a id="__codelineno-0-3697" name="__codelineno-0-3697"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_num_objs</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">_num_objs</span>
<a id="__codelineno-0-3698" name="__codelineno-0-3698"></a>        <span class="k">elif</span> <span class="n">like</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3699" name="__codelineno-0-3699"></a>            <span class="n">expect_none</span><span class="p">(</span>
<a id="__codelineno-0-3700" name="__codelineno-0-3700"></a>                <span class="s2">&quot;While making a new SolutionBatch via the like=... argument&quot;</span><span class="p">,</span>
<a id="__codelineno-0-3701" name="__codelineno-0-3701"></a>                <span class="n">merging_of</span><span class="o">=</span><span class="n">merging_of</span><span class="p">,</span>
<a id="__codelineno-0-3702" name="__codelineno-0-3702"></a>                <span class="n">slice_of</span><span class="o">=</span><span class="n">slice_of</span><span class="p">,</span>
<a id="__codelineno-0-3703" name="__codelineno-0-3703"></a>            <span class="p">)</span>
<a id="__codelineno-0-3704" name="__codelineno-0-3704"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">empty_tensor_like</span><span class="p">(</span><span class="n">like</span><span class="o">.</span><span class="n">_data</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">popsize</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-3705" name="__codelineno-0-3705"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span> <span class="o">=</span> <span class="n">empty_tensor_like</span><span class="p">(</span><span class="n">like</span><span class="o">.</span><span class="n">_evdata</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">popsize</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-3706" name="__codelineno-0-3706"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[:]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;nan&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3707" name="__codelineno-0-3707"></a>
<a id="__codelineno-0-3708" name="__codelineno-0-3708"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_descending</span> <span class="o">=</span> <span class="n">like</span><span class="o">.</span><span class="n">_descending</span>
<a id="__codelineno-0-3709" name="__codelineno-0-3709"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_num_objs</span> <span class="o">=</span> <span class="n">like</span><span class="o">.</span><span class="n">_num_objs</span>
<a id="__codelineno-0-3710" name="__codelineno-0-3710"></a>
<a id="__codelineno-0-3711" name="__codelineno-0-3711"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">_opt_bool</span><span class="p">(</span><span class="n">empty</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-3712" name="__codelineno-0-3712"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_fill_via_problem</span><span class="p">(</span><span class="n">problem</span><span class="p">)</span>
<a id="__codelineno-0-3713" name="__codelineno-0-3713"></a>        <span class="k">elif</span> <span class="n">merging_of</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3714" name="__codelineno-0-3714"></a>            <span class="n">expect_none</span><span class="p">(</span>
<a id="__codelineno-0-3715" name="__codelineno-0-3715"></a>                <span class="s2">&quot;While making a new SolutionBatch via merging&quot;</span><span class="p">,</span>
<a id="__codelineno-0-3716" name="__codelineno-0-3716"></a>                <span class="n">problem</span><span class="o">=</span><span class="n">problem</span><span class="p">,</span>
<a id="__codelineno-0-3717" name="__codelineno-0-3717"></a>                <span class="n">popsize</span><span class="o">=</span><span class="n">popsize</span><span class="p">,</span>
<a id="__codelineno-0-3718" name="__codelineno-0-3718"></a>                <span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">,</span>
<a id="__codelineno-0-3719" name="__codelineno-0-3719"></a>                <span class="n">slice_of</span><span class="o">=</span><span class="n">slice_of</span><span class="p">,</span>
<a id="__codelineno-0-3720" name="__codelineno-0-3720"></a>                <span class="n">like</span><span class="o">=</span><span class="n">like</span><span class="p">,</span>
<a id="__codelineno-0-3721" name="__codelineno-0-3721"></a>                <span class="n">empty</span><span class="o">=</span><span class="n">empty</span><span class="p">,</span>
<a id="__codelineno-0-3722" name="__codelineno-0-3722"></a>            <span class="p">)</span>
<a id="__codelineno-0-3723" name="__codelineno-0-3723"></a>
<a id="__codelineno-0-3724" name="__codelineno-0-3724"></a>            <span class="c1"># Convert `merging_of` into a list.</span>
<a id="__codelineno-0-3725" name="__codelineno-0-3725"></a>            <span class="c1"># While doing that, also count the total number of rows</span>
<a id="__codelineno-0-3726" name="__codelineno-0-3726"></a>            <span class="n">batches</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-3727" name="__codelineno-0-3727"></a>            <span class="n">total_rows</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-3728" name="__codelineno-0-3728"></a>            <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">merging_of</span><span class="p">:</span>
<a id="__codelineno-0-3729" name="__codelineno-0-3729"></a>                <span class="n">total_rows</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
<a id="__codelineno-0-3730" name="__codelineno-0-3730"></a>                <span class="n">batches</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
<a id="__codelineno-0-3731" name="__codelineno-0-3731"></a>
<a id="__codelineno-0-3732" name="__codelineno-0-3732"></a>            <span class="c1"># Get essential attributes from the first batch</span>
<a id="__codelineno-0-3733" name="__codelineno-0-3733"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_descending</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">batches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">_descending</span><span class="p">)</span>
<a id="__codelineno-0-3734" name="__codelineno-0-3734"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_num_objs</span> <span class="o">=</span> <span class="n">batches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">_num_objs</span>
<a id="__codelineno-0-3735" name="__codelineno-0-3735"></a>
<a id="__codelineno-0-3736" name="__codelineno-0-3736"></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">batches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">_data</span><span class="p">,</span> <span class="n">ObjectArray</span><span class="p">):</span>
<a id="__codelineno-0-3737" name="__codelineno-0-3737"></a>
<a id="__codelineno-0-3738" name="__codelineno-0-3738"></a>                <span class="k">def</span><span class="w"> </span><span class="nf">process_data</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<a id="__codelineno-0-3739" name="__codelineno-0-3739"></a>                    <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<a id="__codelineno-0-3740" name="__codelineno-0-3740"></a>
<a id="__codelineno-0-3741" name="__codelineno-0-3741"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">ObjectArray</span><span class="p">(</span><span class="n">total_rows</span><span class="p">)</span>
<a id="__codelineno-0-3742" name="__codelineno-0-3742"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3743" name="__codelineno-0-3743"></a>
<a id="__codelineno-0-3744" name="__codelineno-0-3744"></a>                <span class="k">def</span><span class="w"> </span><span class="nf">process_data</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<a id="__codelineno-0-3745" name="__codelineno-0-3745"></a>                    <span class="k">return</span> <span class="n">x</span>
<a id="__codelineno-0-3746" name="__codelineno-0-3746"></a>
<a id="__codelineno-0-3747" name="__codelineno-0-3747"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">empty_tensor_like</span><span class="p">(</span><span class="n">batches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">_data</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">total_rows</span><span class="p">)</span>
<a id="__codelineno-0-3748" name="__codelineno-0-3748"></a>
<a id="__codelineno-0-3749" name="__codelineno-0-3749"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span> <span class="o">=</span> <span class="n">empty_tensor_like</span><span class="p">(</span><span class="n">batches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">_evdata</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">total_rows</span><span class="p">)</span>
<a id="__codelineno-0-3750" name="__codelineno-0-3750"></a>
<a id="__codelineno-0-3751" name="__codelineno-0-3751"></a>            <span class="n">row_begin</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-3752" name="__codelineno-0-3752"></a>            <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">batches</span><span class="p">:</span>
<a id="__codelineno-0-3753" name="__codelineno-0-3753"></a>                <span class="n">row_end</span> <span class="o">=</span> <span class="n">row_begin</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
<a id="__codelineno-0-3754" name="__codelineno-0-3754"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="n">row_begin</span><span class="p">:</span><span class="n">row_end</span><span class="p">]</span> <span class="o">=</span> <span class="n">process_data</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">_data</span><span class="p">)</span>
<a id="__codelineno-0-3755" name="__codelineno-0-3755"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[</span><span class="n">row_begin</span><span class="p">:</span><span class="n">row_end</span><span class="p">]</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">_evdata</span>
<a id="__codelineno-0-3756" name="__codelineno-0-3756"></a>                <span class="n">row_begin</span> <span class="o">=</span> <span class="n">row_end</span>
<a id="__codelineno-0-3757" name="__codelineno-0-3757"></a>
<a id="__codelineno-0-3758" name="__codelineno-0-3758"></a>        <span class="k">elif</span> <span class="n">problem</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3759" name="__codelineno-0-3759"></a>            <span class="n">expect_none</span><span class="p">(</span>
<a id="__codelineno-0-3760" name="__codelineno-0-3760"></a>                <span class="s2">&quot;While making a new SolutionBatch with a given problem&quot;</span><span class="p">,</span>
<a id="__codelineno-0-3761" name="__codelineno-0-3761"></a>                <span class="n">slice_of</span><span class="o">=</span><span class="n">slice_of</span><span class="p">,</span>
<a id="__codelineno-0-3762" name="__codelineno-0-3762"></a>                <span class="n">like</span><span class="o">=</span><span class="n">like</span><span class="p">,</span>
<a id="__codelineno-0-3763" name="__codelineno-0-3763"></a>                <span class="n">merging_of</span><span class="o">=</span><span class="n">merging_of</span><span class="p">,</span>
<a id="__codelineno-0-3764" name="__codelineno-0-3764"></a>            <span class="p">)</span>
<a id="__codelineno-0-3765" name="__codelineno-0-3765"></a>
<a id="__codelineno-0-3766" name="__codelineno-0-3766"></a>            <span class="k">if</span> <span class="n">device</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3767" name="__codelineno-0-3767"></a>                <span class="n">device</span> <span class="o">=</span> <span class="n">problem</span><span class="o">.</span><span class="n">device</span>
<a id="__codelineno-0-3768" name="__codelineno-0-3768"></a>
<a id="__codelineno-0-3769" name="__codelineno-0-3769"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_num_objs</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">problem</span><span class="o">.</span><span class="n">senses</span><span class="p">)</span>
<a id="__codelineno-0-3770" name="__codelineno-0-3770"></a>
<a id="__codelineno-0-3771" name="__codelineno-0-3771"></a>            <span class="k">if</span> <span class="n">problem</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="nb">object</span><span class="p">:</span>
<a id="__codelineno-0-3772" name="__codelineno-0-3772"></a>                <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">device</span><span class="p">)</span> <span class="o">!=</span> <span class="s2">&quot;cpu&quot;</span><span class="p">:</span>
<a id="__codelineno-0-3773" name="__codelineno-0-3773"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot create a batch containing arbitrary objects on a device other than cpu&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3774" name="__codelineno-0-3774"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">ObjectArray</span><span class="p">(</span><span class="n">popsize</span><span class="p">)</span>
<a id="__codelineno-0-3775" name="__codelineno-0-3775"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3776" name="__codelineno-0-3776"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">popsize</span><span class="p">,</span> <span class="n">problem</span><span class="o">.</span><span class="n">solution_length</span><span class="p">),</span> <span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">problem</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
<a id="__codelineno-0-3777" name="__codelineno-0-3777"></a>
<a id="__codelineno-0-3778" name="__codelineno-0-3778"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">_opt_bool</span><span class="p">(</span><span class="n">empty</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-3779" name="__codelineno-0-3779"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">problem</span><span class="o">.</span><span class="n">generate_values</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">))</span>
<a id="__codelineno-0-3780" name="__codelineno-0-3780"></a>
<a id="__codelineno-0-3781" name="__codelineno-0-3781"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span> <span class="o">=</span> <span class="n">problem</span><span class="o">.</span><span class="n">make_nan</span><span class="p">(</span>
<a id="__codelineno-0-3782" name="__codelineno-0-3782"></a>                <span class="n">popsize</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_objs</span> <span class="o">+</span> <span class="n">problem</span><span class="o">.</span><span class="n">eval_data_length</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">,</span> <span class="n">use_eval_dtype</span><span class="o">=</span><span class="kc">True</span>
<a id="__codelineno-0-3783" name="__codelineno-0-3783"></a>            <span class="p">)</span>
<a id="__codelineno-0-3784" name="__codelineno-0-3784"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_descending</span> <span class="o">=</span> <span class="n">problem</span><span class="o">.</span><span class="n">get_obj_order_descending</span><span class="p">()</span>
<a id="__codelineno-0-3785" name="__codelineno-0-3785"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3786" name="__codelineno-0-3786"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid call to the __init__(...) of SolutionBatch&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3787" name="__codelineno-0-3787"></a>
<a id="__codelineno-0-3788" name="__codelineno-0-3788"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_normalize_row_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-3789" name="__codelineno-0-3789"></a>        <span class="n">i</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-0-3790" name="__codelineno-0-3790"></a>        <span class="n">org_i</span> <span class="o">=</span> <span class="n">i</span>
<a id="__codelineno-0-3791" name="__codelineno-0-3791"></a>
<a id="__codelineno-0-3792" name="__codelineno-0-3792"></a>        <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-3793" name="__codelineno-0-3793"></a>            <span class="n">i</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="n">i</span>
<a id="__codelineno-0-3794" name="__codelineno-0-3794"></a>
<a id="__codelineno-0-3795" name="__codelineno-0-3795"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)):</span>
<a id="__codelineno-0-3796" name="__codelineno-0-3796"></a>            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid row: </span><span class="si">{</span><span class="n">org_i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3797" name="__codelineno-0-3797"></a>
<a id="__codelineno-0-3798" name="__codelineno-0-3798"></a>        <span class="k">return</span> <span class="n">i</span>
<a id="__codelineno-0-3799" name="__codelineno-0-3799"></a>
<a id="__codelineno-0-3800" name="__codelineno-0-3800"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_normalize_obj_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-3801" name="__codelineno-0-3801"></a>        <span class="n">i</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-0-3802" name="__codelineno-0-3802"></a>        <span class="n">org_i</span> <span class="o">=</span> <span class="n">i</span>
<a id="__codelineno-0-3803" name="__codelineno-0-3803"></a>
<a id="__codelineno-0-3804" name="__codelineno-0-3804"></a>        <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-3805" name="__codelineno-0-3805"></a>            <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_objs</span> <span class="o">+</span> <span class="n">i</span>
<a id="__codelineno-0-3806" name="__codelineno-0-3806"></a>
<a id="__codelineno-0-3807" name="__codelineno-0-3807"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_objs</span><span class="p">)):</span>
<a id="__codelineno-0-3808" name="__codelineno-0-3808"></a>            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid objective index: </span><span class="si">{</span><span class="n">org_i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3809" name="__codelineno-0-3809"></a>
<a id="__codelineno-0-3810" name="__codelineno-0-3810"></a>        <span class="k">return</span> <span class="n">i</span>
<a id="__codelineno-0-3811" name="__codelineno-0-3811"></a>
<a id="__codelineno-0-3812" name="__codelineno-0-3812"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_optionally_get_obj_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-3813" name="__codelineno-0-3813"></a>        <span class="k">if</span> <span class="n">i</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3814" name="__codelineno-0-3814"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_objs</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-3815" name="__codelineno-0-3815"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-3816" name="__codelineno-0-3816"></a>                    <span class="sa">f</span><span class="s2">&quot;The objective index was given as None.&quot;</span>
<a id="__codelineno-0-3817" name="__codelineno-0-3817"></a>                    <span class="sa">f</span><span class="s2">&quot; However, the number of objectives is not 1,&quot;</span>
<a id="__codelineno-0-3818" name="__codelineno-0-3818"></a>                    <span class="sa">f</span><span class="s2">&quot; it is </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_objs</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-3819" name="__codelineno-0-3819"></a>                    <span class="sa">f</span><span class="s2">&quot; Therefore, the objective index is not optional,&quot;</span>
<a id="__codelineno-0-3820" name="__codelineno-0-3820"></a>                    <span class="sa">f</span><span class="s2">&quot; and must be provided as an integer, not as None.&quot;</span>
<a id="__codelineno-0-3821" name="__codelineno-0-3821"></a>                <span class="p">)</span>
<a id="__codelineno-0-3822" name="__codelineno-0-3822"></a>            <span class="k">return</span> <span class="mi">0</span>
<a id="__codelineno-0-3823" name="__codelineno-0-3823"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3824" name="__codelineno-0-3824"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normalize_obj_index</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-0-3825" name="__codelineno-0-3825"></a>
<a id="__codelineno-0-3826" name="__codelineno-0-3826"></a>    <span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-3827" name="__codelineno-0-3827"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">argsort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-0-3828" name="__codelineno-0-3828"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the indices of solutions, sorted from best to worst.</span>
<a id="__codelineno-0-3829" name="__codelineno-0-3829"></a>
<a id="__codelineno-0-3830" name="__codelineno-0-3830"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-3831" name="__codelineno-0-3831"></a><span class="sd">            obj_index: The objective index. Can be passed as None</span>
<a id="__codelineno-0-3832" name="__codelineno-0-3832"></a><span class="sd">                if the problem is single-objective. Otherwise,</span>
<a id="__codelineno-0-3833" name="__codelineno-0-3833"></a><span class="sd">                expected as an int.</span>
<a id="__codelineno-0-3834" name="__codelineno-0-3834"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-3835" name="__codelineno-0-3835"></a><span class="sd">            A PyTorch tensor, containing the solution indices,</span>
<a id="__codelineno-0-3836" name="__codelineno-0-3836"></a><span class="sd">            sorted from the best solution to the worst.</span>
<a id="__codelineno-0-3837" name="__codelineno-0-3837"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-3838" name="__codelineno-0-3838"></a>        <span class="n">obj_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_optionally_get_obj_index</span><span class="p">(</span><span class="n">obj_index</span><span class="p">)</span>
<a id="__codelineno-0-3839" name="__codelineno-0-3839"></a>
<a id="__codelineno-0-3840" name="__codelineno-0-3840"></a>        <span class="n">descending</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_descending</span><span class="p">[</span><span class="n">obj_index</span><span class="p">]</span>
<a id="__codelineno-0-3841" name="__codelineno-0-3841"></a>        <span class="n">ev_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[:,</span> <span class="n">obj_index</span><span class="p">]</span>
<a id="__codelineno-0-3842" name="__codelineno-0-3842"></a>
<a id="__codelineno-0-3843" name="__codelineno-0-3843"></a>        <span class="k">return</span> <span class="n">torch</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">ev_col</span><span class="p">,</span> <span class="n">descending</span><span class="o">=</span><span class="n">descending</span><span class="p">)</span>
<a id="__codelineno-0-3844" name="__codelineno-0-3844"></a>
<a id="__codelineno-0-3845" name="__codelineno-0-3845"></a>    <span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-3846" name="__codelineno-0-3846"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">compute_pareto_ranks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">crowdsort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">,</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">]:</span>
<a id="__codelineno-0-3847" name="__codelineno-0-3847"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-3848" name="__codelineno-0-3848"></a><span class="sd">        Compute the pareto-ranks of the solutions in the batch.</span>
<a id="__codelineno-0-3849" name="__codelineno-0-3849"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-3850" name="__codelineno-0-3850"></a><span class="sd">            crowdsort: If given as True, each front in itself</span>
<a id="__codelineno-0-3851" name="__codelineno-0-3851"></a><span class="sd">                will be sorted from the least crowding solution</span>
<a id="__codelineno-0-3852" name="__codelineno-0-3852"></a><span class="sd">                to the most crowding solution.</span>
<a id="__codelineno-0-3853" name="__codelineno-0-3853"></a><span class="sd">                If given as False, there will be no crowd-sorting.</span>
<a id="__codelineno-0-3854" name="__codelineno-0-3854"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-3855" name="__codelineno-0-3855"></a><span class="sd">            ranks (torch.Tensor): The computed pareto ranks, of shape [num_samples,]</span>
<a id="__codelineno-0-3856" name="__codelineno-0-3856"></a><span class="sd">                                Ranks are encoded in the form &#39;lowest is best&#39;. So solutions in the pareto front will be assigned rank 0,</span>
<a id="__codelineno-0-3857" name="__codelineno-0-3857"></a><span class="sd">                                solutions in the next non-dominated set (excluding the pareto front) will be assigned rank 1, and so on.</span>
<a id="__codelineno-0-3858" name="__codelineno-0-3858"></a><span class="sd">            crowdsort_ranks (Optional[torch.Tensor]): The computed crowd sort ranks, only returned if crowdsort=True. Otherwise, None is returned.</span>
<a id="__codelineno-0-3859" name="__codelineno-0-3859"></a><span class="sd">                                Solutions within a front are assigned a crowding score, as described in the above paper.</span>
<a id="__codelineno-0-3860" name="__codelineno-0-3860"></a><span class="sd">                                Then, the solution with the best crowding score within a front of size K is assigned rank 0, and the solution with the</span>
<a id="__codelineno-0-3861" name="__codelineno-0-3861"></a><span class="sd">                                worst crowding score within a front is assigned rank K-1.</span>
<a id="__codelineno-0-3862" name="__codelineno-0-3862"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-3863" name="__codelineno-0-3863"></a>        <span class="n">utils</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">utils</span><span class="p">()</span>
<a id="__codelineno-0-3864" name="__codelineno-0-3864"></a>
<a id="__codelineno-0-3865" name="__codelineno-0-3865"></a>        <span class="n">ranks</span><span class="p">,</span> <span class="n">crowdsort_ranks</span> <span class="o">=</span> <span class="n">_compute_pareto_ranks</span><span class="p">(</span><span class="n">utils</span><span class="p">,</span> <span class="n">crowdsort</span><span class="p">)</span>
<a id="__codelineno-0-3866" name="__codelineno-0-3866"></a>
<a id="__codelineno-0-3867" name="__codelineno-0-3867"></a>        <span class="k">return</span> <span class="n">ranks</span><span class="p">,</span> <span class="n">crowdsort_ranks</span>
<a id="__codelineno-0-3868" name="__codelineno-0-3868"></a>
<a id="__codelineno-0-3869" name="__codelineno-0-3869"></a>    <span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-3870" name="__codelineno-0-3870"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">arg_pareto_sort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">crowdsort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ParetoInfo</span><span class="p">:</span>
<a id="__codelineno-0-3871" name="__codelineno-0-3871"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-3872" name="__codelineno-0-3872"></a><span class="sd">        Pareto-sort the solutions in the batch.</span>
<a id="__codelineno-0-3873" name="__codelineno-0-3873"></a>
<a id="__codelineno-0-3874" name="__codelineno-0-3874"></a><span class="sd">        The result is a namedtuple consisting of two elements:</span>
<a id="__codelineno-0-3875" name="__codelineno-0-3875"></a><span class="sd">        `fronts` and `ranks`.</span>
<a id="__codelineno-0-3876" name="__codelineno-0-3876"></a><span class="sd">        Let us assume that we have 5 solutions, and after a</span>
<a id="__codelineno-0-3877" name="__codelineno-0-3877"></a><span class="sd">        pareto-sorting they ended up in this order:</span>
<a id="__codelineno-0-3878" name="__codelineno-0-3878"></a>
<a id="__codelineno-0-3879" name="__codelineno-0-3879"></a><span class="sd">            front 0 (best front) : solution 1, solution 2</span>
<a id="__codelineno-0-3880" name="__codelineno-0-3880"></a><span class="sd">            front 1              : solution 0, solution 4</span>
<a id="__codelineno-0-3881" name="__codelineno-0-3881"></a><span class="sd">            front 2 (worst front): solution 3</span>
<a id="__codelineno-0-3882" name="__codelineno-0-3882"></a>
<a id="__codelineno-0-3883" name="__codelineno-0-3883"></a><span class="sd">        Considering the example ordering above, the returned</span>
<a id="__codelineno-0-3884" name="__codelineno-0-3884"></a><span class="sd">        ParetoInfo instance looks like this:</span>
<a id="__codelineno-0-3885" name="__codelineno-0-3885"></a>
<a id="__codelineno-0-3886" name="__codelineno-0-3886"></a><span class="sd">            ParetoInfo(</span>
<a id="__codelineno-0-3887" name="__codelineno-0-3887"></a><span class="sd">                fronts=[[1, 2], [0, 4], [3]],</span>
<a id="__codelineno-0-3888" name="__codelineno-0-3888"></a><span class="sd">                ranks=tensor([1, 0, 0, 2, 1])</span>
<a id="__codelineno-0-3889" name="__codelineno-0-3889"></a><span class="sd">            )</span>
<a id="__codelineno-0-3890" name="__codelineno-0-3890"></a>
<a id="__codelineno-0-3891" name="__codelineno-0-3891"></a><span class="sd">        where `fronts` stores the solution indices grouped by</span>
<a id="__codelineno-0-3892" name="__codelineno-0-3892"></a><span class="sd">        pareto fronts; and `ranks` stores, as a tensor of int64,</span>
<a id="__codelineno-0-3893" name="__codelineno-0-3893"></a><span class="sd">        the pareto rank for each solution (where 0 means best</span>
<a id="__codelineno-0-3894" name="__codelineno-0-3894"></a><span class="sd">        rank).</span>
<a id="__codelineno-0-3895" name="__codelineno-0-3895"></a>
<a id="__codelineno-0-3896" name="__codelineno-0-3896"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-3897" name="__codelineno-0-3897"></a><span class="sd">            crowdsort: If given as True, each front in itself</span>
<a id="__codelineno-0-3898" name="__codelineno-0-3898"></a><span class="sd">                will be sorted from the least crowding solution</span>
<a id="__codelineno-0-3899" name="__codelineno-0-3899"></a><span class="sd">                to the most crowding solution.</span>
<a id="__codelineno-0-3900" name="__codelineno-0-3900"></a><span class="sd">                If given as False, there will be no crowd-sorting.</span>
<a id="__codelineno-0-3901" name="__codelineno-0-3901"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-3902" name="__codelineno-0-3902"></a><span class="sd">            A ParetoInfo instance</span>
<a id="__codelineno-0-3903" name="__codelineno-0-3903"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-3904" name="__codelineno-0-3904"></a>
<a id="__codelineno-0-3905" name="__codelineno-0-3905"></a>        <span class="n">utils</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">utils</span><span class="p">()</span>
<a id="__codelineno-0-3906" name="__codelineno-0-3906"></a>
<a id="__codelineno-0-3907" name="__codelineno-0-3907"></a>        <span class="n">fronts</span><span class="p">,</span> <span class="n">ranks</span> <span class="o">=</span> <span class="n">_pareto_sort</span><span class="p">(</span><span class="n">utils</span><span class="p">,</span> <span class="n">crowdsort</span><span class="p">)</span>
<a id="__codelineno-0-3908" name="__codelineno-0-3908"></a>
<a id="__codelineno-0-3909" name="__codelineno-0-3909"></a>        <span class="k">return</span> <span class="n">ParetoInfo</span><span class="p">(</span><span class="n">fronts</span><span class="o">=</span><span class="n">fronts</span><span class="p">,</span> <span class="n">ranks</span><span class="o">=</span><span class="n">ranks</span><span class="p">)</span>
<a id="__codelineno-0-3910" name="__codelineno-0-3910"></a>
<a id="__codelineno-0-3911" name="__codelineno-0-3911"></a>    <span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-3912" name="__codelineno-0-3912"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">argbest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-0-3913" name="__codelineno-0-3913"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the best solution&#39;s index</span>
<a id="__codelineno-0-3914" name="__codelineno-0-3914"></a>
<a id="__codelineno-0-3915" name="__codelineno-0-3915"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-3916" name="__codelineno-0-3916"></a><span class="sd">            obj_index: The objective index. Can be passed as None</span>
<a id="__codelineno-0-3917" name="__codelineno-0-3917"></a><span class="sd">                if the problem is single-objective. Otherwise,</span>
<a id="__codelineno-0-3918" name="__codelineno-0-3918"></a><span class="sd">                expected as an int.</span>
<a id="__codelineno-0-3919" name="__codelineno-0-3919"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-3920" name="__codelineno-0-3920"></a><span class="sd">            The index of the best solution.</span>
<a id="__codelineno-0-3921" name="__codelineno-0-3921"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-3922" name="__codelineno-0-3922"></a>        <span class="n">obj_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_optionally_get_obj_index</span><span class="p">(</span><span class="n">obj_index</span><span class="p">)</span>
<a id="__codelineno-0-3923" name="__codelineno-0-3923"></a>        <span class="n">descending</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_descending</span><span class="p">[</span><span class="n">obj_index</span><span class="p">]</span>
<a id="__codelineno-0-3924" name="__codelineno-0-3924"></a>        <span class="n">argf</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">argmax</span> <span class="k">if</span> <span class="n">descending</span> <span class="k">else</span> <span class="n">torch</span><span class="o">.</span><span class="n">argmin</span>
<a id="__codelineno-0-3925" name="__codelineno-0-3925"></a>        <span class="k">return</span> <span class="n">argf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[:,</span> <span class="n">obj_index</span><span class="p">])</span>
<a id="__codelineno-0-3926" name="__codelineno-0-3926"></a>
<a id="__codelineno-0-3927" name="__codelineno-0-3927"></a>    <span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-3928" name="__codelineno-0-3928"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">argworst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-0-3929" name="__codelineno-0-3929"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the worst solution&#39;s index</span>
<a id="__codelineno-0-3930" name="__codelineno-0-3930"></a>
<a id="__codelineno-0-3931" name="__codelineno-0-3931"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-3932" name="__codelineno-0-3932"></a><span class="sd">            obj_index: The objective index. Can be passed as None</span>
<a id="__codelineno-0-3933" name="__codelineno-0-3933"></a><span class="sd">                if the problem is single-objective. Otherwise,</span>
<a id="__codelineno-0-3934" name="__codelineno-0-3934"></a><span class="sd">                expected as an int.</span>
<a id="__codelineno-0-3935" name="__codelineno-0-3935"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-3936" name="__codelineno-0-3936"></a><span class="sd">            The index of the worst solution.</span>
<a id="__codelineno-0-3937" name="__codelineno-0-3937"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-3938" name="__codelineno-0-3938"></a>        <span class="n">obj_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_optionally_get_obj_index</span><span class="p">(</span><span class="n">obj_index</span><span class="p">)</span>
<a id="__codelineno-0-3939" name="__codelineno-0-3939"></a>        <span class="n">descending</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_descending</span><span class="p">[</span><span class="n">obj_index</span><span class="p">]</span>
<a id="__codelineno-0-3940" name="__codelineno-0-3940"></a>        <span class="n">argf</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">argmin</span> <span class="k">if</span> <span class="n">descending</span> <span class="k">else</span> <span class="n">torch</span><span class="o">.</span><span class="n">argmax</span>
<a id="__codelineno-0-3941" name="__codelineno-0-3941"></a>        <span class="k">return</span> <span class="n">argf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[:,</span> <span class="n">obj_index</span><span class="p">])</span>
<a id="__codelineno-0-3942" name="__codelineno-0-3942"></a>
<a id="__codelineno-0-3943" name="__codelineno-0-3943"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_objective_sign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i_obj</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<a id="__codelineno-0-3944" name="__codelineno-0-3944"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_descending</span><span class="p">[</span><span class="n">i_obj</span><span class="p">]:</span>
<a id="__codelineno-0-3945" name="__codelineno-0-3945"></a>            <span class="k">return</span> <span class="mf">1.0</span>
<a id="__codelineno-0-3946" name="__codelineno-0-3946"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3947" name="__codelineno-0-3947"></a>            <span class="k">return</span> <span class="o">-</span><span class="mf">1.0</span>
<a id="__codelineno-0-3948" name="__codelineno-0-3948"></a>
<a id="__codelineno-0-3949" name="__codelineno-0-3949"></a>    <span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-3950" name="__codelineno-0-3950"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">solutions</span><span class="p">:</span> <span class="n">MaybeIndicesOrSlice</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-3951" name="__codelineno-0-3951"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-3952" name="__codelineno-0-3952"></a><span class="sd">        Set the decision values of the solutions.</span>
<a id="__codelineno-0-3953" name="__codelineno-0-3953"></a>
<a id="__codelineno-0-3954" name="__codelineno-0-3954"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-3955" name="__codelineno-0-3955"></a><span class="sd">            values: New decision values.</span>
<a id="__codelineno-0-3956" name="__codelineno-0-3956"></a><span class="sd">            solutions: Optionally a list of integer indices or an instance</span>
<a id="__codelineno-0-3957" name="__codelineno-0-3957"></a><span class="sd">                of `slice(...)`, to be used if one wishes to set the</span>
<a id="__codelineno-0-3958" name="__codelineno-0-3958"></a><span class="sd">                decision values of only some of the solutions.</span>
<a id="__codelineno-0-3959" name="__codelineno-0-3959"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-3960" name="__codelineno-0-3960"></a>        <span class="k">if</span> <span class="n">solutions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3961" name="__codelineno-0-3961"></a>            <span class="n">solutions</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-3962" name="__codelineno-0-3962"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="n">solutions</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span>
<a id="__codelineno-0-3963" name="__codelineno-0-3963"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[</span><span class="n">solutions</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;nan&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3964" name="__codelineno-0-3964"></a>
<a id="__codelineno-0-3965" name="__codelineno-0-3965"></a>    <span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-3966" name="__codelineno-0-3966"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_evals</span><span class="p">(</span>
<a id="__codelineno-0-3967" name="__codelineno-0-3967"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-3968" name="__codelineno-0-3968"></a>        <span class="n">evals</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">,</span>
<a id="__codelineno-0-3969" name="__codelineno-0-3969"></a>        <span class="n">eval_data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3970" name="__codelineno-0-3970"></a>        <span class="o">*</span><span class="p">,</span>
<a id="__codelineno-0-3971" name="__codelineno-0-3971"></a>        <span class="n">solutions</span><span class="p">:</span> <span class="n">MaybeIndicesOrSlice</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3972" name="__codelineno-0-3972"></a>    <span class="p">):</span>
<a id="__codelineno-0-3973" name="__codelineno-0-3973"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-3974" name="__codelineno-0-3974"></a><span class="sd">        Set the evaluations of the solutions.</span>
<a id="__codelineno-0-3975" name="__codelineno-0-3975"></a>
<a id="__codelineno-0-3976" name="__codelineno-0-3976"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-3977" name="__codelineno-0-3977"></a><span class="sd">            evals: A numeric tensor which contains the evaluation results.</span>
<a id="__codelineno-0-3978" name="__codelineno-0-3978"></a><span class="sd">                Acceptable shapes are as follows:</span>
<a id="__codelineno-0-3979" name="__codelineno-0-3979"></a><span class="sd">                `(n,)` only to be used for single-objective problems, sets</span>
<a id="__codelineno-0-3980" name="__codelineno-0-3980"></a><span class="sd">                the evaluation results of the target `n` solutions, and clears</span>
<a id="__codelineno-0-3981" name="__codelineno-0-3981"></a><span class="sd">                (where clearing means to fill with NaN values)</span>
<a id="__codelineno-0-3982" name="__codelineno-0-3982"></a><span class="sd">                extra evaluation data (if the problem has allocations for such</span>
<a id="__codelineno-0-3983" name="__codelineno-0-3983"></a><span class="sd">                extra evaluation data);</span>
<a id="__codelineno-0-3984" name="__codelineno-0-3984"></a><span class="sd">                `(n,m)` where `m` is the number of objectives, sets the</span>
<a id="__codelineno-0-3985" name="__codelineno-0-3985"></a><span class="sd">                evaluation results of the target `n` solutions, and clears</span>
<a id="__codelineno-0-3986" name="__codelineno-0-3986"></a><span class="sd">                their extra evaluation data;</span>
<a id="__codelineno-0-3987" name="__codelineno-0-3987"></a><span class="sd">                `(n,m+q)` where `m` is the number of objectives and `q` is the</span>
<a id="__codelineno-0-3988" name="__codelineno-0-3988"></a><span class="sd">                length of extra evaluation data, sets the evaluation result</span>
<a id="__codelineno-0-3989" name="__codelineno-0-3989"></a><span class="sd">                and extra data of the target `n` solutions.</span>
<a id="__codelineno-0-3990" name="__codelineno-0-3990"></a><span class="sd">            eval_data: To be used only when the problem has extra evaluation</span>
<a id="__codelineno-0-3991" name="__codelineno-0-3991"></a><span class="sd">                data. Optionally, one can pass the extra evaluation data</span>
<a id="__codelineno-0-3992" name="__codelineno-0-3992"></a><span class="sd">                separately via this argument (instead of jointly through</span>
<a id="__codelineno-0-3993" name="__codelineno-0-3993"></a><span class="sd">                a single tensor via `evals`).</span>
<a id="__codelineno-0-3994" name="__codelineno-0-3994"></a><span class="sd">                The expected shape of this tensor is `(n,q)` where `n`</span>
<a id="__codelineno-0-3995" name="__codelineno-0-3995"></a><span class="sd">                is the number of solutions and `q` is the length of the</span>
<a id="__codelineno-0-3996" name="__codelineno-0-3996"></a><span class="sd">                extra evaluation data.</span>
<a id="__codelineno-0-3997" name="__codelineno-0-3997"></a><span class="sd">            solutions: Optionally a list of integer indices or an instance</span>
<a id="__codelineno-0-3998" name="__codelineno-0-3998"></a><span class="sd">                of `slice(...)`, to be used if one wishes to set the</span>
<a id="__codelineno-0-3999" name="__codelineno-0-3999"></a><span class="sd">                evaluations of only some of the solutions.</span>
<a id="__codelineno-0-4000" name="__codelineno-0-4000"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-4001" name="__codelineno-0-4001"></a><span class="sd">            ValueError: if the given tensor has an incompatible shape.</span>
<a id="__codelineno-0-4002" name="__codelineno-0-4002"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4003" name="__codelineno-0-4003"></a>        <span class="k">if</span> <span class="n">solutions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-4004" name="__codelineno-0-4004"></a>            <span class="n">solutions</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-4005" name="__codelineno-0-4005"></a>            <span class="n">num_solutions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-4006" name="__codelineno-0-4006"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">solutions</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
<a id="__codelineno-0-4007" name="__codelineno-0-4007"></a>            <span class="n">num_solutions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[</span><span class="n">solutions</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-4008" name="__codelineno-0-4008"></a>        <span class="k">elif</span> <span class="n">is_sequence</span><span class="p">(</span><span class="n">solutions</span><span class="p">):</span>
<a id="__codelineno-0-4009" name="__codelineno-0-4009"></a>            <span class="n">num_solutions</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">solutions</span><span class="p">)</span>
<a id="__codelineno-0-4010" name="__codelineno-0-4010"></a>        <span class="n">total_eval_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-4011" name="__codelineno-0-4011"></a>
<a id="__codelineno-0-4012" name="__codelineno-0-4012"></a>        <span class="n">num_objs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_objs</span>
<a id="__codelineno-0-4013" name="__codelineno-0-4013"></a>        <span class="n">num_data</span> <span class="o">=</span> <span class="n">total_eval_width</span> <span class="o">-</span> <span class="n">num_objs</span>
<a id="__codelineno-0-4014" name="__codelineno-0-4014"></a>
<a id="__codelineno-0-4015" name="__codelineno-0-4015"></a>        <span class="k">if</span> <span class="n">evals</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-4016" name="__codelineno-0-4016"></a>            <span class="k">if</span> <span class="n">num_objs</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-4017" name="__codelineno-0-4017"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4018" name="__codelineno-0-4018"></a>                    <span class="sa">f</span><span class="s2">&quot;The method `set_evals(...)` was given a 1-dimensional tensor.&quot;</span>
<a id="__codelineno-0-4019" name="__codelineno-0-4019"></a>                    <span class="sa">f</span><span class="s2">&quot; However, the number of objectives of the problem at hand is </span><span class="si">{</span><span class="n">num_objs</span><span class="si">}</span><span class="s2">, not 1.&quot;</span>
<a id="__codelineno-0-4020" name="__codelineno-0-4020"></a>                    <span class="sa">f</span><span class="s2">&quot; 1-dimensional evaluation tensors can only be accepted if the problem&quot;</span>
<a id="__codelineno-0-4021" name="__codelineno-0-4021"></a>                    <span class="sa">f</span><span class="s2">&quot; has one objective.&quot;</span>
<a id="__codelineno-0-4022" name="__codelineno-0-4022"></a>                <span class="p">)</span>
<a id="__codelineno-0-4023" name="__codelineno-0-4023"></a>            <span class="n">evals</span> <span class="o">=</span> <span class="n">evals</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-4024" name="__codelineno-0-4024"></a>        <span class="k">elif</span> <span class="n">evals</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-4025" name="__codelineno-0-4025"></a>            <span class="k">pass</span>  <span class="c1"># nothing to do here</span>
<a id="__codelineno-0-4026" name="__codelineno-0-4026"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4027" name="__codelineno-0-4027"></a>            <span class="k">if</span> <span class="n">num_objs</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-4028" name="__codelineno-0-4028"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4029" name="__codelineno-0-4029"></a>                    <span class="sa">f</span><span class="s2">&quot;The method `set_evals(...)` received a tensor with </span><span class="si">{</span><span class="n">evals</span><span class="o">.</span><span class="n">ndim</span><span class="si">}</span><span class="s2"> dimensions.&quot;</span>
<a id="__codelineno-0-4030" name="__codelineno-0-4030"></a>                    <span class="sa">f</span><span class="s2">&quot; Since the problem at hand has only one objective,&quot;</span>
<a id="__codelineno-0-4031" name="__codelineno-0-4031"></a>                    <span class="sa">f</span><span class="s2">&quot; 1-dimensional or 2-dimensional tensors are acceptable, but not </span><span class="si">{</span><span class="n">evals</span><span class="o">.</span><span class="n">ndim</span><span class="si">}</span><span class="s2">-dimensional ones.&quot;</span>
<a id="__codelineno-0-4032" name="__codelineno-0-4032"></a>                <span class="p">)</span>
<a id="__codelineno-0-4033" name="__codelineno-0-4033"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4034" name="__codelineno-0-4034"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4035" name="__codelineno-0-4035"></a>                    <span class="sa">f</span><span class="s2">&quot;The method `set_evals(...)` received a tensor with </span><span class="si">{</span><span class="n">evals</span><span class="o">.</span><span class="n">ndim</span><span class="si">}</span><span class="s2"> dimensions.&quot;</span>
<a id="__codelineno-0-4036" name="__codelineno-0-4036"></a>                    <span class="sa">f</span><span class="s2">&quot; Since the problem at hand has more than one objective (there are </span><span class="si">{</span><span class="n">num_objs</span><span class="si">}</span><span class="s2"> objectives),&quot;</span>
<a id="__codelineno-0-4037" name="__codelineno-0-4037"></a>                    <span class="sa">f</span><span class="s2">&quot; only 2-dimensional tensors are acceptable, not </span><span class="si">{</span><span class="n">evals</span><span class="o">.</span><span class="n">ndim</span><span class="si">}</span><span class="s2">-dimensional ones.&quot;</span>
<a id="__codelineno-0-4038" name="__codelineno-0-4038"></a>                <span class="p">)</span>
<a id="__codelineno-0-4039" name="__codelineno-0-4039"></a>
<a id="__codelineno-0-4040" name="__codelineno-0-4040"></a>        <span class="p">[</span><span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">]</span> <span class="o">=</span> <span class="n">evals</span><span class="o">.</span><span class="n">shape</span>
<a id="__codelineno-0-4041" name="__codelineno-0-4041"></a>
<a id="__codelineno-0-4042" name="__codelineno-0-4042"></a>        <span class="k">if</span> <span class="n">nrows</span> <span class="o">!=</span> <span class="n">num_solutions</span><span class="p">:</span>
<a id="__codelineno-0-4043" name="__codelineno-0-4043"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4044" name="__codelineno-0-4044"></a>                <span class="sa">f</span><span class="s2">&quot;Trying to set the evaluations of </span><span class="si">{</span><span class="n">num_solutions</span><span class="si">}</span><span class="s2"> solutions, but the given tensor has </span><span class="si">{</span><span class="n">nrows</span><span class="si">}</span><span class="s2"> rows.&quot;</span>
<a id="__codelineno-0-4045" name="__codelineno-0-4045"></a>            <span class="p">)</span>
<a id="__codelineno-0-4046" name="__codelineno-0-4046"></a>
<a id="__codelineno-0-4047" name="__codelineno-0-4047"></a>        <span class="k">if</span> <span class="n">eval_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-4048" name="__codelineno-0-4048"></a>            <span class="k">if</span> <span class="n">eval_data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-4049" name="__codelineno-0-4049"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4050" name="__codelineno-0-4050"></a>                    <span class="sa">f</span><span class="s2">&quot;The `eval_data` argument was expected as a 2-dimensional tensor.&quot;</span>
<a id="__codelineno-0-4051" name="__codelineno-0-4051"></a>                    <span class="sa">f</span><span class="s2">&quot; However, the shape of the given `eval_data` is </span><span class="si">{</span><span class="n">eval_data</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-4052" name="__codelineno-0-4052"></a>                <span class="p">)</span>
<a id="__codelineno-0-4053" name="__codelineno-0-4053"></a>            <span class="k">if</span> <span class="n">eval_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">num_data</span><span class="p">:</span>
<a id="__codelineno-0-4054" name="__codelineno-0-4054"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4055" name="__codelineno-0-4055"></a>                    <span class="sa">f</span><span class="s2">&quot;The `eval_data` argument was expected to have </span><span class="si">{</span><span class="n">num_data</span><span class="si">}</span><span class="s2"> columns.&quot;</span>
<a id="__codelineno-0-4056" name="__codelineno-0-4056"></a>                    <span class="sa">f</span><span class="s2">&quot; However, the received `eval_data` has the shape: </span><span class="si">{</span><span class="n">eval_data</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-4057" name="__codelineno-0-4057"></a>                <span class="p">)</span>
<a id="__codelineno-0-4058" name="__codelineno-0-4058"></a>            <span class="k">if</span> <span class="n">ncols</span> <span class="o">!=</span> <span class="n">num_objs</span><span class="p">:</span>
<a id="__codelineno-0-4059" name="__codelineno-0-4059"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4060" name="__codelineno-0-4060"></a>                    <span class="sa">f</span><span class="s2">&quot;The method `set_evals(...)` was used with `evals` and `eval_data` arguments.&quot;</span>
<a id="__codelineno-0-4061" name="__codelineno-0-4061"></a>                    <span class="sa">f</span><span class="s2">&quot; When both of these arguments are provided, `evals` is expected either as a 1-dimensional tensor&quot;</span>
<a id="__codelineno-0-4062" name="__codelineno-0-4062"></a>                    <span class="sa">f</span><span class="s2">&quot; (for single-objective cases only), or as a tensor of shape (n, m) where n is the number of&quot;</span>
<a id="__codelineno-0-4063" name="__codelineno-0-4063"></a>                    <span class="sa">f</span><span class="s2">&quot; solutions, and m is the number of objectives.&quot;</span>
<a id="__codelineno-0-4064" name="__codelineno-0-4064"></a>                    <span class="sa">f</span><span class="s2">&quot; However, while the problem at hand has </span><span class="si">{</span><span class="n">num_objs</span><span class="si">}</span><span class="s2"> objectives,&quot;</span>
<a id="__codelineno-0-4065" name="__codelineno-0-4065"></a>                    <span class="sa">f</span><span class="s2">&quot; the `evals` tensor has </span><span class="si">{</span><span class="n">ncols</span><span class="si">}</span><span class="s2"> columns.&quot;</span>
<a id="__codelineno-0-4066" name="__codelineno-0-4066"></a>                <span class="p">)</span>
<a id="__codelineno-0-4067" name="__codelineno-0-4067"></a>            <span class="k">if</span> <span class="n">evals</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">eval_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
<a id="__codelineno-0-4068" name="__codelineno-0-4068"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4069" name="__codelineno-0-4069"></a>                    <span class="sa">f</span><span class="s2">&quot;The provided `evals` and `eval_data` tensors have incompatible shapes.&quot;</span>
<a id="__codelineno-0-4070" name="__codelineno-0-4070"></a>                    <span class="sa">f</span><span class="s2">&quot; Shape of `evals`: </span><span class="si">{</span><span class="n">evals</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">,&quot;</span>
<a id="__codelineno-0-4071" name="__codelineno-0-4071"></a>                    <span class="sa">f</span><span class="s2">&quot; shape of `eval_data`: </span><span class="si">{</span><span class="n">eval_data</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-4072" name="__codelineno-0-4072"></a>                <span class="p">)</span>
<a id="__codelineno-0-4073" name="__codelineno-0-4073"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[</span><span class="n">solutions</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">hstack</span><span class="p">([</span><span class="n">evals</span><span class="p">,</span> <span class="n">eval_data</span><span class="p">])</span>
<a id="__codelineno-0-4074" name="__codelineno-0-4074"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4075" name="__codelineno-0-4075"></a>            <span class="k">if</span> <span class="n">ncols</span> <span class="o">==</span> <span class="n">num_objs</span><span class="p">:</span>
<a id="__codelineno-0-4076" name="__codelineno-0-4076"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[</span><span class="n">solutions</span><span class="p">,</span> <span class="p">:</span><span class="n">num_objs</span><span class="p">]</span> <span class="o">=</span> <span class="n">evals</span>
<a id="__codelineno-0-4077" name="__codelineno-0-4077"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[</span><span class="n">solutions</span><span class="p">,</span> <span class="n">num_objs</span><span class="p">:]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;nan&quot;</span><span class="p">)</span>
<a id="__codelineno-0-4078" name="__codelineno-0-4078"></a>            <span class="k">elif</span> <span class="n">ncols</span> <span class="o">==</span> <span class="n">total_eval_width</span><span class="p">:</span>
<a id="__codelineno-0-4079" name="__codelineno-0-4079"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[</span><span class="n">solutions</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">evals</span>
<a id="__codelineno-0-4080" name="__codelineno-0-4080"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4081" name="__codelineno-0-4081"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4082" name="__codelineno-0-4082"></a>                    <span class="sa">f</span><span class="s2">&quot;The method `set_evals(...)` received a tensor with </span><span class="si">{</span><span class="n">ncols</span><span class="si">}</span><span class="s2"> columns, which is incompatible.&quot;</span>
<a id="__codelineno-0-4083" name="__codelineno-0-4083"></a>                    <span class="sa">f</span><span class="s2">&quot; Acceptable number of columns are: </span><span class="si">{</span><span class="n">num_objs</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-4084" name="__codelineno-0-4084"></a>                    <span class="sa">f</span><span class="s2">&quot; (for setting only the objective-associated evaluations and leave extra evaluation data as NaN), or&quot;</span>
<a id="__codelineno-0-4085" name="__codelineno-0-4085"></a>                    <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">total_eval_width</span><span class="si">}</span><span class="s2"> (for setting both objective-associated evaluations and extra evaluation data).&quot;</span>
<a id="__codelineno-0-4086" name="__codelineno-0-4086"></a>                <span class="p">)</span>
<a id="__codelineno-0-4087" name="__codelineno-0-4087"></a>
<a id="__codelineno-0-4088" name="__codelineno-0-4088"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-4089" name="__codelineno-0-4089"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">evals</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-0-4090" name="__codelineno-0-4090"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4091" name="__codelineno-0-4091"></a><span class="sd">        Evaluation results of the solutions, in a ReadOnlyTensor</span>
<a id="__codelineno-0-4092" name="__codelineno-0-4092"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4093" name="__codelineno-0-4093"></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">.tools.readonlytensor</span><span class="w"> </span><span class="kn">import</span> <span class="n">as_read_only_tensor</span>
<a id="__codelineno-0-4094" name="__codelineno-0-4094"></a>
<a id="__codelineno-0-4095" name="__codelineno-0-4095"></a>        <span class="k">with</span> <span class="n">torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">():</span>
<a id="__codelineno-0-4096" name="__codelineno-0-4096"></a>            <span class="k">return</span> <span class="n">as_read_only_tensor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">)</span>
<a id="__codelineno-0-4097" name="__codelineno-0-4097"></a>
<a id="__codelineno-0-4098" name="__codelineno-0-4098"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-4099" name="__codelineno-0-4099"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">]:</span>
<a id="__codelineno-0-4100" name="__codelineno-0-4100"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4101" name="__codelineno-0-4101"></a><span class="sd">        Decision values of the solutions, in a read-only tensor-like object</span>
<a id="__codelineno-0-4102" name="__codelineno-0-4102"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4103" name="__codelineno-0-4103"></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">.tools.readonlytensor</span><span class="w"> </span><span class="kn">import</span> <span class="n">as_read_only_tensor</span>
<a id="__codelineno-0-4104" name="__codelineno-0-4104"></a>
<a id="__codelineno-0-4105" name="__codelineno-0-4105"></a>        <span class="k">with</span> <span class="n">torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">():</span>
<a id="__codelineno-0-4106" name="__codelineno-0-4106"></a>            <span class="k">return</span> <span class="n">as_read_only_tensor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">)</span>
<a id="__codelineno-0-4107" name="__codelineno-0-4107"></a>
<a id="__codelineno-0-4108" name="__codelineno-0-4108"></a>    <span class="c1"># @property</span>
<a id="__codelineno-0-4109" name="__codelineno-0-4109"></a>    <span class="c1"># def unsafe_evals(self) -&gt; torch.Tensor:</span>
<a id="__codelineno-0-4110" name="__codelineno-0-4110"></a>    <span class="c1">#    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4111" name="__codelineno-0-4111"></a>    <span class="c1">#    It is not recommended to use this property.</span>
<a id="__codelineno-0-4112" name="__codelineno-0-4112"></a>    <span class="c1">#</span>
<a id="__codelineno-0-4113" name="__codelineno-0-4113"></a>    <span class="c1">#    Grants mutable access to the evaluations of the solutions.</span>
<a id="__codelineno-0-4114" name="__codelineno-0-4114"></a>    <span class="c1">#    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4115" name="__codelineno-0-4115"></a>    <span class="c1">#    return self._evdata</span>
<a id="__codelineno-0-4116" name="__codelineno-0-4116"></a>    <span class="c1">#</span>
<a id="__codelineno-0-4117" name="__codelineno-0-4117"></a>    <span class="c1"># @property</span>
<a id="__codelineno-0-4118" name="__codelineno-0-4118"></a>    <span class="c1"># def unsafe_values(self) -&gt; Union[torch.Tensor, Iterable]:</span>
<a id="__codelineno-0-4119" name="__codelineno-0-4119"></a>    <span class="c1">#    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4120" name="__codelineno-0-4120"></a>    <span class="c1">#    It is not recommended to use this property.</span>
<a id="__codelineno-0-4121" name="__codelineno-0-4121"></a>    <span class="c1">#</span>
<a id="__codelineno-0-4122" name="__codelineno-0-4122"></a>    <span class="c1">#    Grants mutable access to the decision values of the solutions.</span>
<a id="__codelineno-0-4123" name="__codelineno-0-4123"></a>    <span class="c1">#    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4124" name="__codelineno-0-4124"></a>    <span class="c1">#    return self._data</span>
<a id="__codelineno-0-4125" name="__codelineno-0-4125"></a>
<a id="__codelineno-0-4126" name="__codelineno-0-4126"></a>    <span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-4127" name="__codelineno-0-4127"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">access_evals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-0-4128" name="__codelineno-0-4128"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4129" name="__codelineno-0-4129"></a><span class="sd">        Get the internal mutable tensor storing the evaluations.</span>
<a id="__codelineno-0-4130" name="__codelineno-0-4130"></a>
<a id="__codelineno-0-4131" name="__codelineno-0-4131"></a><span class="sd">        IMPORTANT: This method exposes the evaluation tensor of the batch</span>
<a id="__codelineno-0-4132" name="__codelineno-0-4132"></a><span class="sd">        as it is, in mutable mode. It is therefore considered unsafe to rely</span>
<a id="__codelineno-0-4133" name="__codelineno-0-4133"></a><span class="sd">        on this method. Before using this method, please consider using the</span>
<a id="__codelineno-0-4134" name="__codelineno-0-4134"></a><span class="sd">        `evals` property for reading the evaluation results, and using the</span>
<a id="__codelineno-0-4135" name="__codelineno-0-4135"></a><span class="sd">        `set_evals(...)` method which allows one to update the evaluations</span>
<a id="__codelineno-0-4136" name="__codelineno-0-4136"></a><span class="sd">        without exposing any internal tensor.</span>
<a id="__codelineno-0-4137" name="__codelineno-0-4137"></a>
<a id="__codelineno-0-4138" name="__codelineno-0-4138"></a><span class="sd">        When this method is used without any argument, the returned tensor</span>
<a id="__codelineno-0-4139" name="__codelineno-0-4139"></a><span class="sd">        will be of shape `(n, m)`, where `n` is the number of solutions,</span>
<a id="__codelineno-0-4140" name="__codelineno-0-4140"></a><span class="sd">        and `m` is the number of objectives plus the length of extra</span>
<a id="__codelineno-0-4141" name="__codelineno-0-4141"></a><span class="sd">        evaluation data.</span>
<a id="__codelineno-0-4142" name="__codelineno-0-4142"></a>
<a id="__codelineno-0-4143" name="__codelineno-0-4143"></a><span class="sd">        When this method is used with an integer argument specifying an</span>
<a id="__codelineno-0-4144" name="__codelineno-0-4144"></a><span class="sd">        objective index, the returned tensor will be 1-dimensional</span>
<a id="__codelineno-0-4145" name="__codelineno-0-4145"></a><span class="sd">        having a length of `n`, where `n` is the number of solutions.</span>
<a id="__codelineno-0-4146" name="__codelineno-0-4146"></a><span class="sd">        In this case, the returned 1-dimensional tensor will be a view</span>
<a id="__codelineno-0-4147" name="__codelineno-0-4147"></a><span class="sd">        upon the evaluation results of the specified objective.</span>
<a id="__codelineno-0-4148" name="__codelineno-0-4148"></a>
<a id="__codelineno-0-4149" name="__codelineno-0-4149"></a><span class="sd">        The value `nan` (not-a-number) means not evaluated yet.</span>
<a id="__codelineno-0-4150" name="__codelineno-0-4150"></a>
<a id="__codelineno-0-4151" name="__codelineno-0-4151"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4152" name="__codelineno-0-4152"></a><span class="sd">            obj_index: None for getting the entire 2-dimensional evaluation</span>
<a id="__codelineno-0-4153" name="__codelineno-0-4153"></a><span class="sd">                tensor; an objective index (as integer) for getting a</span>
<a id="__codelineno-0-4154" name="__codelineno-0-4154"></a><span class="sd">                1-dimensional mutable slice of the evaluation tensor,</span>
<a id="__codelineno-0-4155" name="__codelineno-0-4155"></a><span class="sd">                the slice being a view upon the evaluation results</span>
<a id="__codelineno-0-4156" name="__codelineno-0-4156"></a><span class="sd">                regarding the specified objective.</span>
<a id="__codelineno-0-4157" name="__codelineno-0-4157"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4158" name="__codelineno-0-4158"></a><span class="sd">            The mutable tensor storing the evaluation information.</span>
<a id="__codelineno-0-4159" name="__codelineno-0-4159"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4160" name="__codelineno-0-4160"></a>        <span class="k">if</span> <span class="n">obj_index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-4161" name="__codelineno-0-4161"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span>
<a id="__codelineno-0-4162" name="__codelineno-0-4162"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4163" name="__codelineno-0-4163"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[:,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normalize_obj_index</span><span class="p">(</span><span class="n">obj_index</span><span class="p">)]</span>
<a id="__codelineno-0-4164" name="__codelineno-0-4164"></a>
<a id="__codelineno-0-4165" name="__codelineno-0-4165"></a>    <span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-4166" name="__codelineno-0-4166"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">access_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">keep_evals</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">,</span> <span class="n">ObjectArray</span><span class="p">]:</span>
<a id="__codelineno-0-4167" name="__codelineno-0-4167"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4168" name="__codelineno-0-4168"></a><span class="sd">        Get the internal mutable tensor storing the decision values.</span>
<a id="__codelineno-0-4169" name="__codelineno-0-4169"></a>
<a id="__codelineno-0-4170" name="__codelineno-0-4170"></a><span class="sd">        IMPORTANT: This method exposes the internal decision values tensor of</span>
<a id="__codelineno-0-4171" name="__codelineno-0-4171"></a><span class="sd">        the batch as it is, in mutable mode. It is therefore considered unsafe</span>
<a id="__codelineno-0-4172" name="__codelineno-0-4172"></a><span class="sd">        to rely on this method. Before using this method, please consider</span>
<a id="__codelineno-0-4173" name="__codelineno-0-4173"></a><span class="sd">        using the `values` property for reading the decision values, and using</span>
<a id="__codelineno-0-4174" name="__codelineno-0-4174"></a><span class="sd">        the `set_values(...)` method which allows one to update the decision</span>
<a id="__codelineno-0-4175" name="__codelineno-0-4175"></a><span class="sd">        values without exposing any internal tensor.</span>
<a id="__codelineno-0-4176" name="__codelineno-0-4176"></a>
<a id="__codelineno-0-4177" name="__codelineno-0-4177"></a><span class="sd">        IMPORTANT: The default assumption of this method is that the tensor</span>
<a id="__codelineno-0-4178" name="__codelineno-0-4178"></a><span class="sd">        is requested for modification purposes. Therefore, by default, as soon</span>
<a id="__codelineno-0-4179" name="__codelineno-0-4179"></a><span class="sd">        as this method is called, the evaluation results of the solutions will</span>
<a id="__codelineno-0-4180" name="__codelineno-0-4180"></a><span class="sd">        be cleared (where clearing means that the evaluation results will be</span>
<a id="__codelineno-0-4181" name="__codelineno-0-4181"></a><span class="sd">        filled with `NaN`s).</span>
<a id="__codelineno-0-4182" name="__codelineno-0-4182"></a><span class="sd">        The reasoning behind this default behavior is to prevent the modified</span>
<a id="__codelineno-0-4183" name="__codelineno-0-4183"></a><span class="sd">        solutions from having outdated evaluation results.</span>
<a id="__codelineno-0-4184" name="__codelineno-0-4184"></a>
<a id="__codelineno-0-4185" name="__codelineno-0-4185"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4186" name="__codelineno-0-4186"></a><span class="sd">            keep_evals: If set as False, the evaluation data of the solutions</span>
<a id="__codelineno-0-4187" name="__codelineno-0-4187"></a><span class="sd">                will be cleared (i.e. will be filled with `NaN`s).</span>
<a id="__codelineno-0-4188" name="__codelineno-0-4188"></a><span class="sd">                If set as True, the existing evaluation data will be kept.</span>
<a id="__codelineno-0-4189" name="__codelineno-0-4189"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4190" name="__codelineno-0-4190"></a><span class="sd">            The mutable tensor storing the decision values.</span>
<a id="__codelineno-0-4191" name="__codelineno-0-4191"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4192" name="__codelineno-0-4192"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">keep_evals</span><span class="p">:</span>
<a id="__codelineno-0-4193" name="__codelineno-0-4193"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">forget_evals</span><span class="p">()</span>
<a id="__codelineno-0-4194" name="__codelineno-0-4194"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span>
<a id="__codelineno-0-4195" name="__codelineno-0-4195"></a>
<a id="__codelineno-0-4196" name="__codelineno-0-4196"></a>    <span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-4197" name="__codelineno-0-4197"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">forget_evals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">solutions</span><span class="p">:</span> <span class="n">MaybeIndicesOrSlice</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-4198" name="__codelineno-0-4198"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4199" name="__codelineno-0-4199"></a><span class="sd">        Forget the evaluations of the solutions.</span>
<a id="__codelineno-0-4200" name="__codelineno-0-4200"></a><span class="sd">        The evaluation results will be cleared, which means that they will</span>
<a id="__codelineno-0-4201" name="__codelineno-0-4201"></a><span class="sd">        be filled with `NaN`s.</span>
<a id="__codelineno-0-4202" name="__codelineno-0-4202"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4203" name="__codelineno-0-4203"></a>        <span class="k">if</span> <span class="n">solutions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-4204" name="__codelineno-0-4204"></a>            <span class="n">solutions</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-4205" name="__codelineno-0-4205"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[</span><span class="n">solutions</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;nan&quot;</span><span class="p">)</span>
<a id="__codelineno-0-4206" name="__codelineno-0-4206"></a>
<a id="__codelineno-0-4207" name="__codelineno-0-4207"></a>    <span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-4208" name="__codelineno-0-4208"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">utility</span><span class="p">(</span>
<a id="__codelineno-0-4209" name="__codelineno-0-4209"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-4210" name="__codelineno-0-4210"></a>        <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-4211" name="__codelineno-0-4211"></a>        <span class="o">*</span><span class="p">,</span>
<a id="__codelineno-0-4212" name="__codelineno-0-4212"></a>        <span class="n">ranking_method</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-4213" name="__codelineno-0-4213"></a>        <span class="n">check_nans</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-4214" name="__codelineno-0-4214"></a>        <span class="n">using_values_dtype</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-4215" name="__codelineno-0-4215"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-0-4216" name="__codelineno-0-4216"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4217" name="__codelineno-0-4217"></a><span class="sd">        Return numeric scores for each solution.</span>
<a id="__codelineno-0-4218" name="__codelineno-0-4218"></a>
<a id="__codelineno-0-4219" name="__codelineno-0-4219"></a><span class="sd">        Utility scores are different from evaluation results,</span>
<a id="__codelineno-0-4220" name="__codelineno-0-4220"></a><span class="sd">        in the sense that utilities monotonically increase from</span>
<a id="__codelineno-0-4221" name="__codelineno-0-4221"></a><span class="sd">        bad solutions to good solutions, regardless of the</span>
<a id="__codelineno-0-4222" name="__codelineno-0-4222"></a><span class="sd">        objective sense.</span>
<a id="__codelineno-0-4223" name="__codelineno-0-4223"></a>
<a id="__codelineno-0-4224" name="__codelineno-0-4224"></a><span class="sd">        **If ranking method is passed as None:**</span>
<a id="__codelineno-0-4225" name="__codelineno-0-4225"></a><span class="sd">        if the objective sense is &#39;max&#39;, the evaluation results are returned</span>
<a id="__codelineno-0-4226" name="__codelineno-0-4226"></a><span class="sd">        as the utility scores; otherwise, if the objective sense is &#39;min&#39;,</span>
<a id="__codelineno-0-4227" name="__codelineno-0-4227"></a><span class="sd">        the evaluation results multiplied by -1 are returned as the</span>
<a id="__codelineno-0-4228" name="__codelineno-0-4228"></a><span class="sd">        utility scores.</span>
<a id="__codelineno-0-4229" name="__codelineno-0-4229"></a>
<a id="__codelineno-0-4230" name="__codelineno-0-4230"></a><span class="sd">        **If the name of a ranking method is given** (e.g. &#39;centered&#39;):</span>
<a id="__codelineno-0-4231" name="__codelineno-0-4231"></a><span class="sd">        then the solutions are ranked (best solutions having the</span>
<a id="__codelineno-0-4232" name="__codelineno-0-4232"></a><span class="sd">        highest rank), and those ranks are returned as the utility</span>
<a id="__codelineno-0-4233" name="__codelineno-0-4233"></a><span class="sd">        scores.</span>
<a id="__codelineno-0-4234" name="__codelineno-0-4234"></a>
<a id="__codelineno-0-4235" name="__codelineno-0-4235"></a><span class="sd">        **If an objective index is not provided:** (i.e. passed as None)</span>
<a id="__codelineno-0-4236" name="__codelineno-0-4236"></a><span class="sd">        if the problem is multi-objective, the utility scores</span>
<a id="__codelineno-0-4237" name="__codelineno-0-4237"></a><span class="sd">        for each objective is given, in a tensor shaped (n, m),</span>
<a id="__codelineno-0-4238" name="__codelineno-0-4238"></a><span class="sd">        n being the number of solutions and m being the number</span>
<a id="__codelineno-0-4239" name="__codelineno-0-4239"></a><span class="sd">        of objectives; otherwise, if the problem is single-objective,</span>
<a id="__codelineno-0-4240" name="__codelineno-0-4240"></a><span class="sd">        the utility scores for each objective is given in a 1-dimensional</span>
<a id="__codelineno-0-4241" name="__codelineno-0-4241"></a><span class="sd">        tensor of length n, n being the number of solutions.</span>
<a id="__codelineno-0-4242" name="__codelineno-0-4242"></a>
<a id="__codelineno-0-4243" name="__codelineno-0-4243"></a><span class="sd">        **If an objective index is provided as an int:**</span>
<a id="__codelineno-0-4244" name="__codelineno-0-4244"></a><span class="sd">        the utility scores are returned in a 1-dimensional tensor</span>
<a id="__codelineno-0-4245" name="__codelineno-0-4245"></a><span class="sd">        of length n, n being the number of solutions.</span>
<a id="__codelineno-0-4246" name="__codelineno-0-4246"></a>
<a id="__codelineno-0-4247" name="__codelineno-0-4247"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4248" name="__codelineno-0-4248"></a><span class="sd">            obj_index: Expected as None, or as an integer.</span>
<a id="__codelineno-0-4249" name="__codelineno-0-4249"></a><span class="sd">                In the single-objective case, None is equivalent to 0.</span>
<a id="__codelineno-0-4250" name="__codelineno-0-4250"></a><span class="sd">                In the multi-objective case, None means &quot;for each</span>
<a id="__codelineno-0-4251" name="__codelineno-0-4251"></a><span class="sd">                objective&quot;.</span>
<a id="__codelineno-0-4252" name="__codelineno-0-4252"></a><span class="sd">            ranking_method: If the utility scores are to be generated</span>
<a id="__codelineno-0-4253" name="__codelineno-0-4253"></a><span class="sd">                according to a certain ranking method, pass here the name</span>
<a id="__codelineno-0-4254" name="__codelineno-0-4254"></a><span class="sd">                of that ranking method as a str (e.g. &#39;centered&#39;).</span>
<a id="__codelineno-0-4255" name="__codelineno-0-4255"></a><span class="sd">            check_nans: Check for nan (not-a-number) values in the</span>
<a id="__codelineno-0-4256" name="__codelineno-0-4256"></a><span class="sd">                evaluation results, which is an indication of</span>
<a id="__codelineno-0-4257" name="__codelineno-0-4257"></a><span class="sd">                unevaluated solutions.</span>
<a id="__codelineno-0-4258" name="__codelineno-0-4258"></a><span class="sd">            using_values_dtype: If True, the utility values will be returned</span>
<a id="__codelineno-0-4259" name="__codelineno-0-4259"></a><span class="sd">                using the dtype of the decision values.</span>
<a id="__codelineno-0-4260" name="__codelineno-0-4260"></a><span class="sd">                If False, the utility values will be returned using the dtype</span>
<a id="__codelineno-0-4261" name="__codelineno-0-4261"></a><span class="sd">                of the evaluation data.</span>
<a id="__codelineno-0-4262" name="__codelineno-0-4262"></a><span class="sd">                The default is False.</span>
<a id="__codelineno-0-4263" name="__codelineno-0-4263"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4264" name="__codelineno-0-4264"></a><span class="sd">            Utility scores, in a PyTorch tensor.</span>
<a id="__codelineno-0-4265" name="__codelineno-0-4265"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4266" name="__codelineno-0-4266"></a>        <span class="k">if</span> <span class="n">obj_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-4267" name="__codelineno-0-4267"></a>            <span class="n">obj_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normalize_obj_index</span><span class="p">(</span><span class="n">obj_index</span><span class="p">)</span>
<a id="__codelineno-0-4268" name="__codelineno-0-4268"></a>
<a id="__codelineno-0-4269" name="__codelineno-0-4269"></a>            <span class="n">evdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[:,</span> <span class="n">obj_index</span><span class="p">]</span>
<a id="__codelineno-0-4270" name="__codelineno-0-4270"></a>            <span class="k">if</span> <span class="n">check_nans</span><span class="p">:</span>
<a id="__codelineno-0-4271" name="__codelineno-0-4271"></a>                <span class="k">if</span> <span class="n">torch</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">evdata</span><span class="p">)):</span>
<a id="__codelineno-0-4272" name="__codelineno-0-4272"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4273" name="__codelineno-0-4273"></a>                        <span class="s2">&quot;Cannot compute the utility values, because there are solutions which are not evaluated yet.&quot;</span>
<a id="__codelineno-0-4274" name="__codelineno-0-4274"></a>                    <span class="p">)</span>
<a id="__codelineno-0-4275" name="__codelineno-0-4275"></a>
<a id="__codelineno-0-4276" name="__codelineno-0-4276"></a>            <span class="k">if</span> <span class="n">ranking_method</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-4277" name="__codelineno-0-4277"></a>                <span class="n">result</span> <span class="o">=</span> <span class="n">evdata</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_objective_sign</span><span class="p">(</span><span class="n">obj_index</span><span class="p">)</span>
<a id="__codelineno-0-4278" name="__codelineno-0-4278"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4279" name="__codelineno-0-4279"></a>                <span class="n">result</span> <span class="o">=</span> <span class="n">rank</span><span class="p">(</span><span class="n">evdata</span><span class="p">,</span> <span class="n">ranking_method</span><span class="o">=</span><span class="n">ranking_method</span><span class="p">,</span> <span class="n">higher_is_better</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_descending</span><span class="p">[</span><span class="n">obj_index</span><span class="p">])</span>
<a id="__codelineno-0-4280" name="__codelineno-0-4280"></a>
<a id="__codelineno-0-4281" name="__codelineno-0-4281"></a>            <span class="k">if</span> <span class="n">using_values_dtype</span><span class="p">:</span>
<a id="__codelineno-0-4282" name="__codelineno-0-4282"></a>                <span class="n">result</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">as_tensor</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-4283" name="__codelineno-0-4283"></a>
<a id="__codelineno-0-4284" name="__codelineno-0-4284"></a>            <span class="k">return</span> <span class="n">result</span>
<a id="__codelineno-0-4285" name="__codelineno-0-4285"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4286" name="__codelineno-0-4286"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_objs</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-4287" name="__codelineno-0-4287"></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">utility</span><span class="p">(</span>
<a id="__codelineno-0-4288" name="__codelineno-0-4288"></a>                    <span class="mi">0</span><span class="p">,</span> <span class="n">ranking_method</span><span class="o">=</span><span class="n">ranking_method</span><span class="p">,</span> <span class="n">check_nans</span><span class="o">=</span><span class="n">check_nans</span><span class="p">,</span> <span class="n">using_values_dtype</span><span class="o">=</span><span class="n">using_values_dtype</span>
<a id="__codelineno-0-4289" name="__codelineno-0-4289"></a>                <span class="p">)</span>
<a id="__codelineno-0-4290" name="__codelineno-0-4290"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4291" name="__codelineno-0-4291"></a>                <span class="k">return</span> <span class="n">torch</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span>
<a id="__codelineno-0-4292" name="__codelineno-0-4292"></a>                    <span class="p">[</span>
<a id="__codelineno-0-4293" name="__codelineno-0-4293"></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">utility</span><span class="p">(</span>
<a id="__codelineno-0-4294" name="__codelineno-0-4294"></a>                            <span class="n">j</span><span class="p">,</span>
<a id="__codelineno-0-4295" name="__codelineno-0-4295"></a>                            <span class="n">ranking_method</span><span class="o">=</span><span class="n">ranking_method</span><span class="p">,</span>
<a id="__codelineno-0-4296" name="__codelineno-0-4296"></a>                            <span class="n">check_nans</span><span class="o">=</span><span class="n">check_nans</span><span class="p">,</span>
<a id="__codelineno-0-4297" name="__codelineno-0-4297"></a>                            <span class="n">using_values_dtype</span><span class="o">=</span><span class="n">using_values_dtype</span><span class="p">,</span>
<a id="__codelineno-0-4298" name="__codelineno-0-4298"></a>                        <span class="p">)</span>
<a id="__codelineno-0-4299" name="__codelineno-0-4299"></a>                        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_objs</span><span class="p">)</span>
<a id="__codelineno-0-4300" name="__codelineno-0-4300"></a>                    <span class="p">],</span>
<a id="__codelineno-0-4301" name="__codelineno-0-4301"></a>                <span class="p">)</span><span class="o">.</span><span class="n">T</span>
<a id="__codelineno-0-4302" name="__codelineno-0-4302"></a>
<a id="__codelineno-0-4303" name="__codelineno-0-4303"></a>    <span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-4304" name="__codelineno-0-4304"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">utils</span><span class="p">(</span>
<a id="__codelineno-0-4305" name="__codelineno-0-4305"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-4306" name="__codelineno-0-4306"></a>        <span class="o">*</span><span class="p">,</span>
<a id="__codelineno-0-4307" name="__codelineno-0-4307"></a>        <span class="n">ranking_method</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-4308" name="__codelineno-0-4308"></a>        <span class="n">check_nans</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-4309" name="__codelineno-0-4309"></a>        <span class="n">using_values_dtype</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-4310" name="__codelineno-0-4310"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-0-4311" name="__codelineno-0-4311"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4312" name="__codelineno-0-4312"></a><span class="sd">        Return numeric scores for each solution, and for each objective.</span>
<a id="__codelineno-0-4313" name="__codelineno-0-4313"></a><span class="sd">        Utility scores are different from evaluation results,</span>
<a id="__codelineno-0-4314" name="__codelineno-0-4314"></a><span class="sd">        in the sense that utilities monotonically increase from</span>
<a id="__codelineno-0-4315" name="__codelineno-0-4315"></a><span class="sd">        bad solutions to good solutions, regardless of the</span>
<a id="__codelineno-0-4316" name="__codelineno-0-4316"></a><span class="sd">        objective sense.</span>
<a id="__codelineno-0-4317" name="__codelineno-0-4317"></a>
<a id="__codelineno-0-4318" name="__codelineno-0-4318"></a><span class="sd">        Unlike the method called `utility(...)`, this function returns</span>
<a id="__codelineno-0-4319" name="__codelineno-0-4319"></a><span class="sd">        a 2-dimensional tensor even when the problem is single-objective.</span>
<a id="__codelineno-0-4320" name="__codelineno-0-4320"></a>
<a id="__codelineno-0-4321" name="__codelineno-0-4321"></a><span class="sd">        The result of this method is always a 2-dimensional tensor of</span>
<a id="__codelineno-0-4322" name="__codelineno-0-4322"></a><span class="sd">        shape `(n, m)`, `n` being the number of solutions, `m` being the</span>
<a id="__codelineno-0-4323" name="__codelineno-0-4323"></a><span class="sd">        number of objectives.</span>
<a id="__codelineno-0-4324" name="__codelineno-0-4324"></a>
<a id="__codelineno-0-4325" name="__codelineno-0-4325"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4326" name="__codelineno-0-4326"></a><span class="sd">            ranking_method: If the utility scores are to be generated</span>
<a id="__codelineno-0-4327" name="__codelineno-0-4327"></a><span class="sd">                according to a certain ranking method, pass here the name</span>
<a id="__codelineno-0-4328" name="__codelineno-0-4328"></a><span class="sd">                of that ranking method as a str (e.g. &#39;centered&#39;).</span>
<a id="__codelineno-0-4329" name="__codelineno-0-4329"></a><span class="sd">            check_nans: Check for nan (not-a-number) values in the</span>
<a id="__codelineno-0-4330" name="__codelineno-0-4330"></a><span class="sd">                evaluation results, which is an indication of</span>
<a id="__codelineno-0-4331" name="__codelineno-0-4331"></a><span class="sd">                unevaluated solutions.</span>
<a id="__codelineno-0-4332" name="__codelineno-0-4332"></a><span class="sd">            using_values_dtype: If True, the utility values will be returned</span>
<a id="__codelineno-0-4333" name="__codelineno-0-4333"></a><span class="sd">                using the dtype of the decision values.</span>
<a id="__codelineno-0-4334" name="__codelineno-0-4334"></a><span class="sd">                If False, the utility values will be returned using the dtype</span>
<a id="__codelineno-0-4335" name="__codelineno-0-4335"></a><span class="sd">                of the evaluation data.</span>
<a id="__codelineno-0-4336" name="__codelineno-0-4336"></a><span class="sd">                The default is False.</span>
<a id="__codelineno-0-4337" name="__codelineno-0-4337"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4338" name="__codelineno-0-4338"></a><span class="sd">            Utility scores, in a 2-dimensional PyTorch tensor.</span>
<a id="__codelineno-0-4339" name="__codelineno-0-4339"></a>
<a id="__codelineno-0-4340" name="__codelineno-0-4340"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4341" name="__codelineno-0-4341"></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">utility</span><span class="p">(</span>
<a id="__codelineno-0-4342" name="__codelineno-0-4342"></a>            <span class="n">ranking_method</span><span class="o">=</span><span class="n">ranking_method</span><span class="p">,</span> <span class="n">check_nans</span><span class="o">=</span><span class="n">check_nans</span><span class="p">,</span> <span class="n">using_values_dtype</span><span class="o">=</span><span class="n">using_values_dtype</span>
<a id="__codelineno-0-4343" name="__codelineno-0-4343"></a>        <span class="p">)</span>
<a id="__codelineno-0-4344" name="__codelineno-0-4344"></a>        <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-4345" name="__codelineno-0-4345"></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-4346" name="__codelineno-0-4346"></a>        <span class="k">return</span> <span class="n">result</span>
<a id="__codelineno-0-4347" name="__codelineno-0-4347"></a>
<a id="__codelineno-0-4348" name="__codelineno-0-4348"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">split</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_pieces</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">max_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SolutionBatchPieces&quot;</span><span class="p">:</span>
<a id="__codelineno-0-4349" name="__codelineno-0-4349"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Split this SolutionBatch into a specified number of pieces,</span>
<a id="__codelineno-0-4350" name="__codelineno-0-4350"></a><span class="sd">        or into an unspecified number of pieces where the maximum</span>
<a id="__codelineno-0-4351" name="__codelineno-0-4351"></a><span class="sd">        size of each piece is specified.</span>
<a id="__codelineno-0-4352" name="__codelineno-0-4352"></a>
<a id="__codelineno-0-4353" name="__codelineno-0-4353"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4354" name="__codelineno-0-4354"></a><span class="sd">            num_pieces: Can be provided as an integer n, which means</span>
<a id="__codelineno-0-4355" name="__codelineno-0-4355"></a><span class="sd">                that the this SolutionBatch will be split to n pieces.</span>
<a id="__codelineno-0-4356" name="__codelineno-0-4356"></a><span class="sd">                Alternatively, can be left as None if the user intends</span>
<a id="__codelineno-0-4357" name="__codelineno-0-4357"></a><span class="sd">                to set max_size as an integer instead.</span>
<a id="__codelineno-0-4358" name="__codelineno-0-4358"></a><span class="sd">            max_size: Can be provided as an integer n, which means</span>
<a id="__codelineno-0-4359" name="__codelineno-0-4359"></a><span class="sd">                that this SolutionBatch will be split to multiple</span>
<a id="__codelineno-0-4360" name="__codelineno-0-4360"></a><span class="sd">                pieces, each piece containing n solutions at most.</span>
<a id="__codelineno-0-4361" name="__codelineno-0-4361"></a><span class="sd">                Alternatively, can be left as None if the user intends</span>
<a id="__codelineno-0-4362" name="__codelineno-0-4362"></a><span class="sd">                to set num_pieces as an integer instead.</span>
<a id="__codelineno-0-4363" name="__codelineno-0-4363"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4364" name="__codelineno-0-4364"></a><span class="sd">            A SolutionBatchPieces object, which behaves like a list of</span>
<a id="__codelineno-0-4365" name="__codelineno-0-4365"></a><span class="sd">            SolutionBatch objects, each object in the list being a</span>
<a id="__codelineno-0-4366" name="__codelineno-0-4366"></a><span class="sd">            slice view of this SolutionBatch object.</span>
<a id="__codelineno-0-4367" name="__codelineno-0-4367"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4368" name="__codelineno-0-4368"></a>        <span class="k">return</span> <span class="n">SolutionBatchPieces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_pieces</span><span class="o">=</span><span class="n">num_pieces</span><span class="p">,</span> <span class="n">max_size</span><span class="o">=</span><span class="n">max_size</span><span class="p">)</span>
<a id="__codelineno-0-4369" name="__codelineno-0-4369"></a>
<a id="__codelineno-0-4370" name="__codelineno-0-4370"></a>    <span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-4371" name="__codelineno-0-4371"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">concat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;SolutionBatch&quot;</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;SolutionBatch&quot;</span><span class="p">:</span>
<a id="__codelineno-0-4372" name="__codelineno-0-4372"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Concatenate this SolutionBatch with the other(s).</span>
<a id="__codelineno-0-4373" name="__codelineno-0-4373"></a>
<a id="__codelineno-0-4374" name="__codelineno-0-4374"></a><span class="sd">        In this context, concatenation means that the solutions of</span>
<a id="__codelineno-0-4375" name="__codelineno-0-4375"></a><span class="sd">        this SolutionBatch and of the others are collected in one big</span>
<a id="__codelineno-0-4376" name="__codelineno-0-4376"></a><span class="sd">        SolutionBatch object.</span>
<a id="__codelineno-0-4377" name="__codelineno-0-4377"></a>
<a id="__codelineno-0-4378" name="__codelineno-0-4378"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4379" name="__codelineno-0-4379"></a><span class="sd">            other: A SolutionBatch, or a sequence of SolutionBatch objects.</span>
<a id="__codelineno-0-4380" name="__codelineno-0-4380"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4381" name="__codelineno-0-4381"></a><span class="sd">            A new SolutionBatch object which is the result of the</span>
<a id="__codelineno-0-4382" name="__codelineno-0-4382"></a><span class="sd">            concatenation.</span>
<a id="__codelineno-0-4383" name="__codelineno-0-4383"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4384" name="__codelineno-0-4384"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">SolutionBatch</span><span class="p">):</span>
<a id="__codelineno-0-4385" name="__codelineno-0-4385"></a>            <span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">]</span>
<a id="__codelineno-0-4386" name="__codelineno-0-4386"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4387" name="__codelineno-0-4387"></a>            <span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">]</span>
<a id="__codelineno-0-4388" name="__codelineno-0-4388"></a>            <span class="n">lst</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">other</span><span class="p">))</span>
<a id="__codelineno-0-4389" name="__codelineno-0-4389"></a>        <span class="k">return</span> <span class="n">SolutionBatch</span><span class="p">(</span><span class="n">merging_of</span><span class="o">=</span><span class="n">lst</span><span class="p">)</span>
<a id="__codelineno-0-4390" name="__codelineno-0-4390"></a>
<a id="__codelineno-0-4391" name="__codelineno-0-4391"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">take</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">indices</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SolutionBatch&quot;</span><span class="p">:</span>
<a id="__codelineno-0-4392" name="__codelineno-0-4392"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Make a new SolutionBatch containing the specified solutions.</span>
<a id="__codelineno-0-4393" name="__codelineno-0-4393"></a>
<a id="__codelineno-0-4394" name="__codelineno-0-4394"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4395" name="__codelineno-0-4395"></a><span class="sd">            indices: A sequence of solution indices. These specified</span>
<a id="__codelineno-0-4396" name="__codelineno-0-4396"></a><span class="sd">                solutions will make it to the newly made SolutionBatch.</span>
<a id="__codelineno-0-4397" name="__codelineno-0-4397"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4398" name="__codelineno-0-4398"></a><span class="sd">            The new SolutionBatch.</span>
<a id="__codelineno-0-4399" name="__codelineno-0-4399"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4400" name="__codelineno-0-4400"></a>        <span class="k">if</span> <span class="n">is_sequence</span><span class="p">(</span><span class="n">indices</span><span class="p">):</span>
<a id="__codelineno-0-4401" name="__codelineno-0-4401"></a>            <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">slice_of</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">indices</span><span class="p">))</span>
<a id="__codelineno-0-4402" name="__codelineno-0-4402"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4403" name="__codelineno-0-4403"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Expected a sequence of solution indices, but got a `{type(indices)}`&quot;</span><span class="p">)</span>
<a id="__codelineno-0-4404" name="__codelineno-0-4404"></a>
<a id="__codelineno-0-4405" name="__codelineno-0-4405"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">take_best</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SolutionBatch&quot;</span><span class="p">:</span>
<a id="__codelineno-0-4406" name="__codelineno-0-4406"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Make a new SolutionBatch containing the best `n` solutions.</span>
<a id="__codelineno-0-4407" name="__codelineno-0-4407"></a>
<a id="__codelineno-0-4408" name="__codelineno-0-4408"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4409" name="__codelineno-0-4409"></a><span class="sd">            n: Number of solutions which will be taken.</span>
<a id="__codelineno-0-4410" name="__codelineno-0-4410"></a><span class="sd">            obj_index: Objective index according to which the best ones</span>
<a id="__codelineno-0-4411" name="__codelineno-0-4411"></a><span class="sd">                will be taken.</span>
<a id="__codelineno-0-4412" name="__codelineno-0-4412"></a><span class="sd">                If `obj_index` is left as None and the problem is multi-</span>
<a id="__codelineno-0-4413" name="__codelineno-0-4413"></a><span class="sd">                objective, then the solutions will be ranked according to</span>
<a id="__codelineno-0-4414" name="__codelineno-0-4414"></a><span class="sd">                their fronts, and according how crowding they are, and then</span>
<a id="__codelineno-0-4415" name="__codelineno-0-4415"></a><span class="sd">                the topmost `n` solutions will be taken.</span>
<a id="__codelineno-0-4416" name="__codelineno-0-4416"></a><span class="sd">                If `obj_index` is left as None and the problem is single-</span>
<a id="__codelineno-0-4417" name="__codelineno-0-4417"></a><span class="sd">                objective, then that single objective will be taken as the</span>
<a id="__codelineno-0-4418" name="__codelineno-0-4418"></a><span class="sd">                ranking criterion.</span>
<a id="__codelineno-0-4419" name="__codelineno-0-4419"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4420" name="__codelineno-0-4420"></a><span class="sd">            The new SolutionBatch.</span>
<a id="__codelineno-0-4421" name="__codelineno-0-4421"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4422" name="__codelineno-0-4422"></a>        <span class="k">if</span> <span class="n">obj_index</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_objs</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-4423" name="__codelineno-0-4423"></a>            <span class="n">ranks</span><span class="p">,</span> <span class="n">crowdsort_ranks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_pareto_ranks</span><span class="p">(</span><span class="n">crowdsort</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-4424" name="__codelineno-0-4424"></a>            <span class="c1"># Combine the ranks, such that solutions with a better crowdsort rank are weighted above solutions with the same pareto rank **only**</span>
<a id="__codelineno-0-4425" name="__codelineno-0-4425"></a>            <span class="n">combined_ranks</span> <span class="o">=</span> <span class="n">ranks</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">float</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="n">crowdsort_ranks</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">float</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<a id="__codelineno-0-4426" name="__codelineno-0-4426"></a>            <span class="n">indices</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">combined_ranks</span><span class="p">)[:</span><span class="n">n</span><span class="p">]</span>
<a id="__codelineno-0-4427" name="__codelineno-0-4427"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4428" name="__codelineno-0-4428"></a>            <span class="n">indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">obj_index</span><span class="p">)[:</span><span class="n">n</span><span class="p">]</span>
<a id="__codelineno-0-4429" name="__codelineno-0-4429"></a>        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">slice_of</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">indices</span><span class="p">))</span>
<a id="__codelineno-0-4430" name="__codelineno-0-4430"></a>
<a id="__codelineno-0-4431" name="__codelineno-0-4431"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
<a id="__codelineno-0-4432" name="__codelineno-0-4432"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">slice</span><span class="p">)</span> <span class="ow">or</span> <span class="n">is_sequence</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="o">...</span><span class="p">)):</span>
<a id="__codelineno-0-4433" name="__codelineno-0-4433"></a>            <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">slice_of</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
<a id="__codelineno-0-4434" name="__codelineno-0-4434"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4435" name="__codelineno-0-4435"></a>            <span class="k">return</span> <span class="n">Solution</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-0-4436" name="__codelineno-0-4436"></a>
<a id="__codelineno-0-4437" name="__codelineno-0-4437"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-4438" name="__codelineno-0-4438"></a>        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-4439" name="__codelineno-0-4439"></a>
<a id="__codelineno-0-4440" name="__codelineno-0-4440"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-4441" name="__codelineno-0-4441"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)):</span>
<a id="__codelineno-0-4442" name="__codelineno-0-4442"></a>            <span class="k">yield</span> <span class="bp">self</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<a id="__codelineno-0-4443" name="__codelineno-0-4443"></a>
<a id="__codelineno-0-4444" name="__codelineno-0-4444"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_cloned_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">memo</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-4445" name="__codelineno-0-4445"></a>        <span class="k">with</span> <span class="n">_no_grad_if_basic_dtype</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">):</span>
<a id="__codelineno-0-4446" name="__codelineno-0-4446"></a>            <span class="k">return</span> <span class="n">deep_clone</span><span class="p">(</span>
<a id="__codelineno-0-4447" name="__codelineno-0-4447"></a>                <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">,</span>
<a id="__codelineno-0-4448" name="__codelineno-0-4448"></a>                <span class="n">otherwise_deepcopy</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-4449" name="__codelineno-0-4449"></a>                <span class="n">memo</span><span class="o">=</span><span class="n">memo</span><span class="p">,</span>
<a id="__codelineno-0-4450" name="__codelineno-0-4450"></a>            <span class="p">)</span>
<a id="__codelineno-0-4451" name="__codelineno-0-4451"></a>
<a id="__codelineno-0-4452" name="__codelineno-0-4452"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device</span><span class="p">:</span> <span class="n">Device</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SolutionBatch&quot;</span><span class="p">:</span>
<a id="__codelineno-0-4453" name="__codelineno-0-4453"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4454" name="__codelineno-0-4454"></a><span class="sd">        Get the counterpart of this SolutionBatch on the new device.</span>
<a id="__codelineno-0-4455" name="__codelineno-0-4455"></a>
<a id="__codelineno-0-4456" name="__codelineno-0-4456"></a><span class="sd">        If the specified device is the device of this SolutionBatch,</span>
<a id="__codelineno-0-4457" name="__codelineno-0-4457"></a><span class="sd">        then this SolutionBatch itself is returned.</span>
<a id="__codelineno-0-4458" name="__codelineno-0-4458"></a><span class="sd">        If the specified device is a different device, then a clone</span>
<a id="__codelineno-0-4459" name="__codelineno-0-4459"></a><span class="sd">        of this SolutionBatch on this different device is first</span>
<a id="__codelineno-0-4460" name="__codelineno-0-4460"></a><span class="sd">        created, and then this new clone is returned.</span>
<a id="__codelineno-0-4461" name="__codelineno-0-4461"></a>
<a id="__codelineno-0-4462" name="__codelineno-0-4462"></a><span class="sd">        Please note that the `to(...)` method is not supported when</span>
<a id="__codelineno-0-4463" name="__codelineno-0-4463"></a><span class="sd">        the dtype is `object`.</span>
<a id="__codelineno-0-4464" name="__codelineno-0-4464"></a>
<a id="__codelineno-0-4465" name="__codelineno-0-4465"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4466" name="__codelineno-0-4466"></a><span class="sd">            device: The device on which the resulting SolutionBatch</span>
<a id="__codelineno-0-4467" name="__codelineno-0-4467"></a><span class="sd">                will be stored.</span>
<a id="__codelineno-0-4468" name="__codelineno-0-4468"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4469" name="__codelineno-0-4469"></a><span class="sd">            The SolutionBatch on the specified device.</span>
<a id="__codelineno-0-4470" name="__codelineno-0-4470"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4471" name="__codelineno-0-4471"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">,</span> <span class="n">ObjectArray</span><span class="p">):</span>
<a id="__codelineno-0-4472" name="__codelineno-0-4472"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The `to(...)` method is not supported when the dtype is `object`.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-4473" name="__codelineno-0-4473"></a>
<a id="__codelineno-0-4474" name="__codelineno-0-4474"></a>        <span class="n">device</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-4475" name="__codelineno-0-4475"></a>        <span class="k">if</span> <span class="n">device</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">:</span>
<a id="__codelineno-0-4476" name="__codelineno-0-4476"></a>            <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-0-4477" name="__codelineno-0-4477"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4478" name="__codelineno-0-4478"></a>            <span class="n">new_batch</span> <span class="o">=</span> <span class="n">SolutionBatch</span><span class="p">(</span><span class="n">like</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">,</span> <span class="n">empty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-4479" name="__codelineno-0-4479"></a>            <span class="k">with</span> <span class="n">torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">():</span>
<a id="__codelineno-0-4480" name="__codelineno-0-4480"></a>                <span class="n">new_batch</span><span class="o">.</span><span class="n">_data</span><span class="p">[:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-4481" name="__codelineno-0-4481"></a>                <span class="n">new_batch</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-4482" name="__codelineno-0-4482"></a>            <span class="k">return</span> <span class="n">new_batch</span>
<a id="__codelineno-0-4483" name="__codelineno-0-4483"></a>
<a id="__codelineno-0-4484" name="__codelineno-0-4484"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-4485" name="__codelineno-0-4485"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">device</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Device</span><span class="p">:</span>
<a id="__codelineno-0-4486" name="__codelineno-0-4486"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4487" name="__codelineno-0-4487"></a><span class="sd">        The device in which the solutions are stored.</span>
<a id="__codelineno-0-4488" name="__codelineno-0-4488"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4489" name="__codelineno-0-4489"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">device</span>
<a id="__codelineno-0-4490" name="__codelineno-0-4490"></a>
<a id="__codelineno-0-4491" name="__codelineno-0-4491"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-4492" name="__codelineno-0-4492"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">dtype</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DType</span><span class="p">:</span>
<a id="__codelineno-0-4493" name="__codelineno-0-4493"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4494" name="__codelineno-0-4494"></a><span class="sd">        The dtype of the decision values of the solutions.</span>
<a id="__codelineno-0-4495" name="__codelineno-0-4495"></a>
<a id="__codelineno-0-4496" name="__codelineno-0-4496"></a><span class="sd">        This property exists as an alias for the property</span>
<a id="__codelineno-0-4497" name="__codelineno-0-4497"></a><span class="sd">        `.values_dtype`.</span>
<a id="__codelineno-0-4498" name="__codelineno-0-4498"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4499" name="__codelineno-0-4499"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">dtype</span>
<a id="__codelineno-0-4500" name="__codelineno-0-4500"></a>
<a id="__codelineno-0-4501" name="__codelineno-0-4501"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-4502" name="__codelineno-0-4502"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">values_dtype</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DType</span><span class="p">:</span>
<a id="__codelineno-0-4503" name="__codelineno-0-4503"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4504" name="__codelineno-0-4504"></a><span class="sd">        The dtype of the decision values of the solutions.</span>
<a id="__codelineno-0-4505" name="__codelineno-0-4505"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4506" name="__codelineno-0-4506"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">dtype</span>
<a id="__codelineno-0-4507" name="__codelineno-0-4507"></a>
<a id="__codelineno-0-4508" name="__codelineno-0-4508"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-4509" name="__codelineno-0-4509"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">eval_dtype</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DType</span><span class="p">:</span>
<a id="__codelineno-0-4510" name="__codelineno-0-4510"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4511" name="__codelineno-0-4511"></a><span class="sd">        The dtype of the evaluation results and extra evaluation data</span>
<a id="__codelineno-0-4512" name="__codelineno-0-4512"></a><span class="sd">        of the solutions.</span>
<a id="__codelineno-0-4513" name="__codelineno-0-4513"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4514" name="__codelineno-0-4514"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="o">.</span><span class="n">dtype</span>
<a id="__codelineno-0-4515" name="__codelineno-0-4515"></a>
<a id="__codelineno-0-4516" name="__codelineno-0-4516"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-4517" name="__codelineno-0-4517"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">values_shape</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">:</span>
<a id="__codelineno-0-4518" name="__codelineno-0-4518"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4519" name="__codelineno-0-4519"></a><span class="sd">        The shape of the batch&#39;s decision values tensor, as a tuple (n, l),</span>
<a id="__codelineno-0-4520" name="__codelineno-0-4520"></a><span class="sd">        where `n` is the number of solutions, and `l` is the length</span>
<a id="__codelineno-0-4521" name="__codelineno-0-4521"></a><span class="sd">        of a single solution.</span>
<a id="__codelineno-0-4522" name="__codelineno-0-4522"></a>
<a id="__codelineno-0-4523" name="__codelineno-0-4523"></a><span class="sd">        If `dtype=None`, then there is no fixed length.</span>
<a id="__codelineno-0-4524" name="__codelineno-0-4524"></a><span class="sd">        Therefore, the shape is returned as (n,).</span>
<a id="__codelineno-0-4525" name="__codelineno-0-4525"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4526" name="__codelineno-0-4526"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">shape</span>
<a id="__codelineno-0-4527" name="__codelineno-0-4527"></a>
<a id="__codelineno-0-4528" name="__codelineno-0-4528"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-4529" name="__codelineno-0-4529"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">eval_shape</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">:</span>
<a id="__codelineno-0-4530" name="__codelineno-0-4530"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4531" name="__codelineno-0-4531"></a><span class="sd">        The shape of the batch&#39;s evaluation tensor, as a tuple (n, l),</span>
<a id="__codelineno-0-4532" name="__codelineno-0-4532"></a><span class="sd">        where `n` is the number of solutions, and `l` is an integer</span>
<a id="__codelineno-0-4533" name="__codelineno-0-4533"></a><span class="sd">        which is equal to number of objectives plus the length of the</span>
<a id="__codelineno-0-4534" name="__codelineno-0-4534"></a><span class="sd">        extra evaluation data, if any.</span>
<a id="__codelineno-0-4535" name="__codelineno-0-4535"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4536" name="__codelineno-0-4536"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="o">.</span><span class="n">shape</span>
<a id="__codelineno-0-4537" name="__codelineno-0-4537"></a>
<a id="__codelineno-0-4538" name="__codelineno-0-4538"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-4539" name="__codelineno-0-4539"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">solution_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-0-4540" name="__codelineno-0-4540"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4541" name="__codelineno-0-4541"></a><span class="sd">        Get the length of a solution, if this batch is numeric.</span>
<a id="__codelineno-0-4542" name="__codelineno-0-4542"></a><span class="sd">        For non-numeric batches (i.e. batches with dtype=object),</span>
<a id="__codelineno-0-4543" name="__codelineno-0-4543"></a><span class="sd">        `solution_length` is given as None.</span>
<a id="__codelineno-0-4544" name="__codelineno-0-4544"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4545" name="__codelineno-0-4545"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-4546" name="__codelineno-0-4546"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-4547" name="__codelineno-0-4547"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4548" name="__codelineno-0-4548"></a>            <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-4549" name="__codelineno-0-4549"></a>
<a id="__codelineno-0-4550" name="__codelineno-0-4550"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-4551" name="__codelineno-0-4551"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">objective_sense</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ObjectiveSense</span><span class="p">:</span>
<a id="__codelineno-0-4552" name="__codelineno-0-4552"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4553" name="__codelineno-0-4553"></a><span class="sd">        Get the objective sense(s) of this batch&#39;s associated Problem.</span>
<a id="__codelineno-0-4554" name="__codelineno-0-4554"></a>
<a id="__codelineno-0-4555" name="__codelineno-0-4555"></a><span class="sd">        If the problem is single-objective, then a single string is returned.</span>
<a id="__codelineno-0-4556" name="__codelineno-0-4556"></a><span class="sd">        If the problem is multi-objective, then the objective senses will be</span>
<a id="__codelineno-0-4557" name="__codelineno-0-4557"></a><span class="sd">        returned in a list.</span>
<a id="__codelineno-0-4558" name="__codelineno-0-4558"></a>
<a id="__codelineno-0-4559" name="__codelineno-0-4559"></a><span class="sd">        The returned string in the single-objective case, or each returned</span>
<a id="__codelineno-0-4560" name="__codelineno-0-4560"></a><span class="sd">        string in the multi-objective case, is &quot;min&quot; or &quot;max&quot;.</span>
<a id="__codelineno-0-4561" name="__codelineno-0-4561"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4562" name="__codelineno-0-4562"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">senses</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-4563" name="__codelineno-0-4563"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">senses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-4564" name="__codelineno-0-4564"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4565" name="__codelineno-0-4565"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">senses</span>
<a id="__codelineno-0-4566" name="__codelineno-0-4566"></a>
<a id="__codelineno-0-4567" name="__codelineno-0-4567"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-4568" name="__codelineno-0-4568"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">senses</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<a id="__codelineno-0-4569" name="__codelineno-0-4569"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4570" name="__codelineno-0-4570"></a><span class="sd">        Objective sense(s) of this batch&#39;s associated Problem.</span>
<a id="__codelineno-0-4571" name="__codelineno-0-4571"></a>
<a id="__codelineno-0-4572" name="__codelineno-0-4572"></a><span class="sd">        This is a list of strings, each string being &quot;min&quot; or &quot;max&quot;.</span>
<a id="__codelineno-0-4573" name="__codelineno-0-4573"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4574" name="__codelineno-0-4574"></a>
<a id="__codelineno-0-4575" name="__codelineno-0-4575"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">desc_to_sense</span><span class="p">(</span><span class="n">desc</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-4576" name="__codelineno-0-4576"></a>            <span class="k">return</span> <span class="s2">&quot;max&quot;</span> <span class="k">if</span> <span class="n">desc</span> <span class="k">else</span> <span class="s2">&quot;min&quot;</span>
<a id="__codelineno-0-4577" name="__codelineno-0-4577"></a>
<a id="__codelineno-0-4578" name="__codelineno-0-4578"></a>        <span class="k">return</span> <span class="p">[</span><span class="n">desc_to_sense</span><span class="p">(</span><span class="n">desc</span><span class="p">)</span> <span class="k">for</span> <span class="n">desc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_descending</span><span class="p">]</span>
<a id="__codelineno-0-4579" name="__codelineno-0-4579"></a>
<a id="__codelineno-0-4580" name="__codelineno-0-4580"></a>    <span class="nd">@staticmethod</span>
<a id="__codelineno-0-4581" name="__codelineno-0-4581"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cat</span><span class="p">(</span><span class="n">solution_batches</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SolutionBatch&quot;</span><span class="p">:</span>
<a id="__codelineno-0-4582" name="__codelineno-0-4582"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4583" name="__codelineno-0-4583"></a><span class="sd">        Concatenate multiple SolutionBatch instances into one.</span>
<a id="__codelineno-0-4584" name="__codelineno-0-4584"></a>
<a id="__codelineno-0-4585" name="__codelineno-0-4585"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4586" name="__codelineno-0-4586"></a><span class="sd">            solution_batches: An Iterable of SolutionBatch objects to</span>
<a id="__codelineno-0-4587" name="__codelineno-0-4587"></a><span class="sd">                concatenate.</span>
<a id="__codelineno-0-4588" name="__codelineno-0-4588"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4589" name="__codelineno-0-4589"></a><span class="sd">            The result of the concatenation, as a new SolutionBatch.</span>
<a id="__codelineno-0-4590" name="__codelineno-0-4590"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4591" name="__codelineno-0-4591"></a>        <span class="n">first</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-4592" name="__codelineno-0-4592"></a>        <span class="n">rest</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-4593" name="__codelineno-0-4593"></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">batch</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">solution_batches</span><span class="p">):</span>
<a id="__codelineno-0-4594" name="__codelineno-0-4594"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">batch</span><span class="p">,</span> <span class="n">SolutionBatch</span><span class="p">):</span>
<a id="__codelineno-0-4595" name="__codelineno-0-4595"></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected a SolutionBatch but got </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-4596" name="__codelineno-0-4596"></a>            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-4597" name="__codelineno-0-4597"></a>                <span class="n">first</span> <span class="o">=</span> <span class="n">batch</span>
<a id="__codelineno-0-4598" name="__codelineno-0-4598"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4599" name="__codelineno-0-4599"></a>                <span class="n">rest</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
<a id="__codelineno-0-4600" name="__codelineno-0-4600"></a>        <span class="k">return</span> <span class="n">first</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">rest</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="evotorch.SolutionBatch.device" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">device</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.SolutionBatch.device" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The device in which the solutions are stored.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.SolutionBatch.dtype" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">dtype</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.SolutionBatch.dtype" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The dtype of the decision values of the solutions.</p>
<p>This property exists as an alias for the property
<code>.values_dtype</code>.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.SolutionBatch.eval_dtype" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">eval_dtype</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.SolutionBatch.eval_dtype" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The dtype of the evaluation results and extra evaluation data
of the solutions.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.SolutionBatch.eval_shape" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">eval_shape</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.SolutionBatch.eval_shape" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The shape of the batch's evaluation tensor, as a tuple (n, l),
where <code>n</code> is the number of solutions, and <code>l</code> is an integer
which is equal to number of objectives plus the length of the
extra evaluation data, if any.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.SolutionBatch.evals" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">evals</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.SolutionBatch.evals" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Evaluation results of the solutions, in a ReadOnlyTensor</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.SolutionBatch.objective_sense" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">objective_sense</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.SolutionBatch.objective_sense" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the objective sense(s) of this batch's associated Problem.</p>
<p>If the problem is single-objective, then a single string is returned.
If the problem is multi-objective, then the objective senses will be
returned in a list.</p>
<p>The returned string in the single-objective case, or each returned
string in the multi-objective case, is "min" or "max".</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.SolutionBatch.senses" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">senses</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.SolutionBatch.senses" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Objective sense(s) of this batch's associated Problem.</p>
<p>This is a list of strings, each string being "min" or "max".</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.SolutionBatch.solution_length" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">solution_length</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.SolutionBatch.solution_length" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the length of a solution, if this batch is numeric.
For non-numeric batches (i.e. batches with dtype=object),
<code>solution_length</code> is given as None.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.SolutionBatch.values" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">values</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.SolutionBatch.values" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Decision values of the solutions, in a read-only tensor-like object</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.SolutionBatch.values_dtype" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">values_dtype</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.SolutionBatch.values_dtype" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The dtype of the decision values of the solutions.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="evotorch.SolutionBatch.values_shape" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">values_shape</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#evotorch.SolutionBatch.values_shape" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>The shape of the batch's decision values tensor, as a tuple (n, l),
where <code>n</code> is the number of solutions, and <code>l</code> is the length
of a single solution.</p>
<p>If <code>dtype=None</code>, then there is no fixed length.
Therefore, the shape is returned as (n,).</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="evotorch.SolutionBatch.access_evals" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">access_evals</span><span class="p">(</span><span class="n">obj_index</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#evotorch.SolutionBatch.access_evals" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the internal mutable tensor storing the evaluations.</p>
<p>IMPORTANT: This method exposes the evaluation tensor of the batch
as it is, in mutable mode. It is therefore considered unsafe to rely
on this method. Before using this method, please consider using the
<code>evals</code> property for reading the evaluation results, and using the
<code>set_evals(...)</code> method which allows one to update the evaluations
without exposing any internal tensor.</p>
<p>When this method is used without any argument, the returned tensor
will be of shape <code>(n, m)</code>, where <code>n</code> is the number of solutions,
and <code>m</code> is the number of objectives plus the length of extra
evaluation data.</p>
<p>When this method is used with an integer argument specifying an
objective index, the returned tensor will be 1-dimensional
having a length of <code>n</code>, where <code>n</code> is the number of solutions.
In this case, the returned 1-dimensional tensor will be a view
upon the evaluation results of the specified objective.</p>
<p>The value <code>nan</code> (not-a-number) means not evaluated yet.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>obj_index</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None for getting the entire 2-dimensional evaluation
tensor; an objective index (as integer) for getting a
1-dimensional mutable slice of the evaluation tensor,
the slice being a view upon the evaluation results
regarding the specified objective.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4126">4126</a></span>
<span class="normal"><a href="#__codelineno-0-4127">4127</a></span>
<span class="normal"><a href="#__codelineno-0-4128">4128</a></span>
<span class="normal"><a href="#__codelineno-0-4129">4129</a></span>
<span class="normal"><a href="#__codelineno-0-4130">4130</a></span>
<span class="normal"><a href="#__codelineno-0-4131">4131</a></span>
<span class="normal"><a href="#__codelineno-0-4132">4132</a></span>
<span class="normal"><a href="#__codelineno-0-4133">4133</a></span>
<span class="normal"><a href="#__codelineno-0-4134">4134</a></span>
<span class="normal"><a href="#__codelineno-0-4135">4135</a></span>
<span class="normal"><a href="#__codelineno-0-4136">4136</a></span>
<span class="normal"><a href="#__codelineno-0-4137">4137</a></span>
<span class="normal"><a href="#__codelineno-0-4138">4138</a></span>
<span class="normal"><a href="#__codelineno-0-4139">4139</a></span>
<span class="normal"><a href="#__codelineno-0-4140">4140</a></span>
<span class="normal"><a href="#__codelineno-0-4141">4141</a></span>
<span class="normal"><a href="#__codelineno-0-4142">4142</a></span>
<span class="normal"><a href="#__codelineno-0-4143">4143</a></span>
<span class="normal"><a href="#__codelineno-0-4144">4144</a></span>
<span class="normal"><a href="#__codelineno-0-4145">4145</a></span>
<span class="normal"><a href="#__codelineno-0-4146">4146</a></span>
<span class="normal"><a href="#__codelineno-0-4147">4147</a></span>
<span class="normal"><a href="#__codelineno-0-4148">4148</a></span>
<span class="normal"><a href="#__codelineno-0-4149">4149</a></span>
<span class="normal"><a href="#__codelineno-0-4150">4150</a></span>
<span class="normal"><a href="#__codelineno-0-4151">4151</a></span>
<span class="normal"><a href="#__codelineno-0-4152">4152</a></span>
<span class="normal"><a href="#__codelineno-0-4153">4153</a></span>
<span class="normal"><a href="#__codelineno-0-4154">4154</a></span>
<span class="normal"><a href="#__codelineno-0-4155">4155</a></span>
<span class="normal"><a href="#__codelineno-0-4156">4156</a></span>
<span class="normal"><a href="#__codelineno-0-4157">4157</a></span>
<span class="normal"><a href="#__codelineno-0-4158">4158</a></span>
<span class="normal"><a href="#__codelineno-0-4159">4159</a></span>
<span class="normal"><a href="#__codelineno-0-4160">4160</a></span>
<span class="normal"><a href="#__codelineno-0-4161">4161</a></span>
<span class="normal"><a href="#__codelineno-0-4162">4162</a></span>
<span class="normal"><a href="#__codelineno-0-4163">4163</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4126" name="__codelineno-0-4126"></a><span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-4127" name="__codelineno-0-4127"></a><span class="k">def</span><span class="w"> </span><span class="nf">access_evals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-0-4128" name="__codelineno-0-4128"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4129" name="__codelineno-0-4129"></a><span class="sd">    Get the internal mutable tensor storing the evaluations.</span>
<a id="__codelineno-0-4130" name="__codelineno-0-4130"></a>
<a id="__codelineno-0-4131" name="__codelineno-0-4131"></a><span class="sd">    IMPORTANT: This method exposes the evaluation tensor of the batch</span>
<a id="__codelineno-0-4132" name="__codelineno-0-4132"></a><span class="sd">    as it is, in mutable mode. It is therefore considered unsafe to rely</span>
<a id="__codelineno-0-4133" name="__codelineno-0-4133"></a><span class="sd">    on this method. Before using this method, please consider using the</span>
<a id="__codelineno-0-4134" name="__codelineno-0-4134"></a><span class="sd">    `evals` property for reading the evaluation results, and using the</span>
<a id="__codelineno-0-4135" name="__codelineno-0-4135"></a><span class="sd">    `set_evals(...)` method which allows one to update the evaluations</span>
<a id="__codelineno-0-4136" name="__codelineno-0-4136"></a><span class="sd">    without exposing any internal tensor.</span>
<a id="__codelineno-0-4137" name="__codelineno-0-4137"></a>
<a id="__codelineno-0-4138" name="__codelineno-0-4138"></a><span class="sd">    When this method is used without any argument, the returned tensor</span>
<a id="__codelineno-0-4139" name="__codelineno-0-4139"></a><span class="sd">    will be of shape `(n, m)`, where `n` is the number of solutions,</span>
<a id="__codelineno-0-4140" name="__codelineno-0-4140"></a><span class="sd">    and `m` is the number of objectives plus the length of extra</span>
<a id="__codelineno-0-4141" name="__codelineno-0-4141"></a><span class="sd">    evaluation data.</span>
<a id="__codelineno-0-4142" name="__codelineno-0-4142"></a>
<a id="__codelineno-0-4143" name="__codelineno-0-4143"></a><span class="sd">    When this method is used with an integer argument specifying an</span>
<a id="__codelineno-0-4144" name="__codelineno-0-4144"></a><span class="sd">    objective index, the returned tensor will be 1-dimensional</span>
<a id="__codelineno-0-4145" name="__codelineno-0-4145"></a><span class="sd">    having a length of `n`, where `n` is the number of solutions.</span>
<a id="__codelineno-0-4146" name="__codelineno-0-4146"></a><span class="sd">    In this case, the returned 1-dimensional tensor will be a view</span>
<a id="__codelineno-0-4147" name="__codelineno-0-4147"></a><span class="sd">    upon the evaluation results of the specified objective.</span>
<a id="__codelineno-0-4148" name="__codelineno-0-4148"></a>
<a id="__codelineno-0-4149" name="__codelineno-0-4149"></a><span class="sd">    The value `nan` (not-a-number) means not evaluated yet.</span>
<a id="__codelineno-0-4150" name="__codelineno-0-4150"></a>
<a id="__codelineno-0-4151" name="__codelineno-0-4151"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-4152" name="__codelineno-0-4152"></a><span class="sd">        obj_index: None for getting the entire 2-dimensional evaluation</span>
<a id="__codelineno-0-4153" name="__codelineno-0-4153"></a><span class="sd">            tensor; an objective index (as integer) for getting a</span>
<a id="__codelineno-0-4154" name="__codelineno-0-4154"></a><span class="sd">            1-dimensional mutable slice of the evaluation tensor,</span>
<a id="__codelineno-0-4155" name="__codelineno-0-4155"></a><span class="sd">            the slice being a view upon the evaluation results</span>
<a id="__codelineno-0-4156" name="__codelineno-0-4156"></a><span class="sd">            regarding the specified objective.</span>
<a id="__codelineno-0-4157" name="__codelineno-0-4157"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-4158" name="__codelineno-0-4158"></a><span class="sd">        The mutable tensor storing the evaluation information.</span>
<a id="__codelineno-0-4159" name="__codelineno-0-4159"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4160" name="__codelineno-0-4160"></a>    <span class="k">if</span> <span class="n">obj_index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-4161" name="__codelineno-0-4161"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span>
<a id="__codelineno-0-4162" name="__codelineno-0-4162"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4163" name="__codelineno-0-4163"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[:,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normalize_obj_index</span><span class="p">(</span><span class="n">obj_index</span><span class="p">)]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.SolutionBatch.access_values" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">access_values</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">keep_evals</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#evotorch.SolutionBatch.access_values" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the internal mutable tensor storing the decision values.</p>
<p>IMPORTANT: This method exposes the internal decision values tensor of
the batch as it is, in mutable mode. It is therefore considered unsafe
to rely on this method. Before using this method, please consider
using the <code>values</code> property for reading the decision values, and using
the <code>set_values(...)</code> method which allows one to update the decision
values without exposing any internal tensor.</p>
<p>IMPORTANT: The default assumption of this method is that the tensor
is requested for modification purposes. Therefore, by default, as soon
as this method is called, the evaluation results of the solutions will
be cleared (where clearing means that the evaluation results will be
filled with <code>NaN</code>s).
The reasoning behind this default behavior is to prevent the modified
solutions from having outdated evaluation results.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>keep_evals</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If set as False, the evaluation data of the solutions
will be cleared (i.e. will be filled with <code>NaN</code>s).
If set as True, the existing evaluation data will be kept.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4165">4165</a></span>
<span class="normal"><a href="#__codelineno-0-4166">4166</a></span>
<span class="normal"><a href="#__codelineno-0-4167">4167</a></span>
<span class="normal"><a href="#__codelineno-0-4168">4168</a></span>
<span class="normal"><a href="#__codelineno-0-4169">4169</a></span>
<span class="normal"><a href="#__codelineno-0-4170">4170</a></span>
<span class="normal"><a href="#__codelineno-0-4171">4171</a></span>
<span class="normal"><a href="#__codelineno-0-4172">4172</a></span>
<span class="normal"><a href="#__codelineno-0-4173">4173</a></span>
<span class="normal"><a href="#__codelineno-0-4174">4174</a></span>
<span class="normal"><a href="#__codelineno-0-4175">4175</a></span>
<span class="normal"><a href="#__codelineno-0-4176">4176</a></span>
<span class="normal"><a href="#__codelineno-0-4177">4177</a></span>
<span class="normal"><a href="#__codelineno-0-4178">4178</a></span>
<span class="normal"><a href="#__codelineno-0-4179">4179</a></span>
<span class="normal"><a href="#__codelineno-0-4180">4180</a></span>
<span class="normal"><a href="#__codelineno-0-4181">4181</a></span>
<span class="normal"><a href="#__codelineno-0-4182">4182</a></span>
<span class="normal"><a href="#__codelineno-0-4183">4183</a></span>
<span class="normal"><a href="#__codelineno-0-4184">4184</a></span>
<span class="normal"><a href="#__codelineno-0-4185">4185</a></span>
<span class="normal"><a href="#__codelineno-0-4186">4186</a></span>
<span class="normal"><a href="#__codelineno-0-4187">4187</a></span>
<span class="normal"><a href="#__codelineno-0-4188">4188</a></span>
<span class="normal"><a href="#__codelineno-0-4189">4189</a></span>
<span class="normal"><a href="#__codelineno-0-4190">4190</a></span>
<span class="normal"><a href="#__codelineno-0-4191">4191</a></span>
<span class="normal"><a href="#__codelineno-0-4192">4192</a></span>
<span class="normal"><a href="#__codelineno-0-4193">4193</a></span>
<span class="normal"><a href="#__codelineno-0-4194">4194</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4165" name="__codelineno-0-4165"></a><span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-4166" name="__codelineno-0-4166"></a><span class="k">def</span><span class="w"> </span><span class="nf">access_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">keep_evals</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">,</span> <span class="n">ObjectArray</span><span class="p">]:</span>
<a id="__codelineno-0-4167" name="__codelineno-0-4167"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4168" name="__codelineno-0-4168"></a><span class="sd">    Get the internal mutable tensor storing the decision values.</span>
<a id="__codelineno-0-4169" name="__codelineno-0-4169"></a>
<a id="__codelineno-0-4170" name="__codelineno-0-4170"></a><span class="sd">    IMPORTANT: This method exposes the internal decision values tensor of</span>
<a id="__codelineno-0-4171" name="__codelineno-0-4171"></a><span class="sd">    the batch as it is, in mutable mode. It is therefore considered unsafe</span>
<a id="__codelineno-0-4172" name="__codelineno-0-4172"></a><span class="sd">    to rely on this method. Before using this method, please consider</span>
<a id="__codelineno-0-4173" name="__codelineno-0-4173"></a><span class="sd">    using the `values` property for reading the decision values, and using</span>
<a id="__codelineno-0-4174" name="__codelineno-0-4174"></a><span class="sd">    the `set_values(...)` method which allows one to update the decision</span>
<a id="__codelineno-0-4175" name="__codelineno-0-4175"></a><span class="sd">    values without exposing any internal tensor.</span>
<a id="__codelineno-0-4176" name="__codelineno-0-4176"></a>
<a id="__codelineno-0-4177" name="__codelineno-0-4177"></a><span class="sd">    IMPORTANT: The default assumption of this method is that the tensor</span>
<a id="__codelineno-0-4178" name="__codelineno-0-4178"></a><span class="sd">    is requested for modification purposes. Therefore, by default, as soon</span>
<a id="__codelineno-0-4179" name="__codelineno-0-4179"></a><span class="sd">    as this method is called, the evaluation results of the solutions will</span>
<a id="__codelineno-0-4180" name="__codelineno-0-4180"></a><span class="sd">    be cleared (where clearing means that the evaluation results will be</span>
<a id="__codelineno-0-4181" name="__codelineno-0-4181"></a><span class="sd">    filled with `NaN`s).</span>
<a id="__codelineno-0-4182" name="__codelineno-0-4182"></a><span class="sd">    The reasoning behind this default behavior is to prevent the modified</span>
<a id="__codelineno-0-4183" name="__codelineno-0-4183"></a><span class="sd">    solutions from having outdated evaluation results.</span>
<a id="__codelineno-0-4184" name="__codelineno-0-4184"></a>
<a id="__codelineno-0-4185" name="__codelineno-0-4185"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-4186" name="__codelineno-0-4186"></a><span class="sd">        keep_evals: If set as False, the evaluation data of the solutions</span>
<a id="__codelineno-0-4187" name="__codelineno-0-4187"></a><span class="sd">            will be cleared (i.e. will be filled with `NaN`s).</span>
<a id="__codelineno-0-4188" name="__codelineno-0-4188"></a><span class="sd">            If set as True, the existing evaluation data will be kept.</span>
<a id="__codelineno-0-4189" name="__codelineno-0-4189"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-4190" name="__codelineno-0-4190"></a><span class="sd">        The mutable tensor storing the decision values.</span>
<a id="__codelineno-0-4191" name="__codelineno-0-4191"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4192" name="__codelineno-0-4192"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">keep_evals</span><span class="p">:</span>
<a id="__codelineno-0-4193" name="__codelineno-0-4193"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">forget_evals</span><span class="p">()</span>
<a id="__codelineno-0-4194" name="__codelineno-0-4194"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.SolutionBatch.arg_pareto_sort" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">arg_pareto_sort</span><span class="p">(</span><span class="n">crowdsort</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#evotorch.SolutionBatch.arg_pareto_sort" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Pareto-sort the solutions in the batch.</p>
<p>The result is a namedtuple consisting of two elements:
<code>fronts</code> and <code>ranks</code>.
Let us assume that we have 5 solutions, and after a
pareto-sorting they ended up in this order:</p>
<div class="highlight"><pre><span></span><code>front 0 (best front) : solution 1, solution 2
front 1              : solution 0, solution 4
front 2 (worst front): solution 3
</code></pre></div>
<p>Considering the example ordering above, the returned
ParetoInfo instance looks like this:</p>
<div class="highlight"><pre><span></span><code>ParetoInfo(
    fronts=[[1, 2], [0, 4], [3]],
    ranks=tensor([1, 0, 0, 2, 1])
)
</code></pre></div>
<p>where <code>fronts</code> stores the solution indices grouped by
pareto fronts; and <code>ranks</code> stores, as a tensor of int64,
the pareto rank for each solution (where 0 means best
rank).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>crowdsort</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If given as True, each front in itself
will be sorted from the least crowding solution
to the most crowding solution.
If given as False, there will be no crowd-sorting.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3869">3869</a></span>
<span class="normal"><a href="#__codelineno-0-3870">3870</a></span>
<span class="normal"><a href="#__codelineno-0-3871">3871</a></span>
<span class="normal"><a href="#__codelineno-0-3872">3872</a></span>
<span class="normal"><a href="#__codelineno-0-3873">3873</a></span>
<span class="normal"><a href="#__codelineno-0-3874">3874</a></span>
<span class="normal"><a href="#__codelineno-0-3875">3875</a></span>
<span class="normal"><a href="#__codelineno-0-3876">3876</a></span>
<span class="normal"><a href="#__codelineno-0-3877">3877</a></span>
<span class="normal"><a href="#__codelineno-0-3878">3878</a></span>
<span class="normal"><a href="#__codelineno-0-3879">3879</a></span>
<span class="normal"><a href="#__codelineno-0-3880">3880</a></span>
<span class="normal"><a href="#__codelineno-0-3881">3881</a></span>
<span class="normal"><a href="#__codelineno-0-3882">3882</a></span>
<span class="normal"><a href="#__codelineno-0-3883">3883</a></span>
<span class="normal"><a href="#__codelineno-0-3884">3884</a></span>
<span class="normal"><a href="#__codelineno-0-3885">3885</a></span>
<span class="normal"><a href="#__codelineno-0-3886">3886</a></span>
<span class="normal"><a href="#__codelineno-0-3887">3887</a></span>
<span class="normal"><a href="#__codelineno-0-3888">3888</a></span>
<span class="normal"><a href="#__codelineno-0-3889">3889</a></span>
<span class="normal"><a href="#__codelineno-0-3890">3890</a></span>
<span class="normal"><a href="#__codelineno-0-3891">3891</a></span>
<span class="normal"><a href="#__codelineno-0-3892">3892</a></span>
<span class="normal"><a href="#__codelineno-0-3893">3893</a></span>
<span class="normal"><a href="#__codelineno-0-3894">3894</a></span>
<span class="normal"><a href="#__codelineno-0-3895">3895</a></span>
<span class="normal"><a href="#__codelineno-0-3896">3896</a></span>
<span class="normal"><a href="#__codelineno-0-3897">3897</a></span>
<span class="normal"><a href="#__codelineno-0-3898">3898</a></span>
<span class="normal"><a href="#__codelineno-0-3899">3899</a></span>
<span class="normal"><a href="#__codelineno-0-3900">3900</a></span>
<span class="normal"><a href="#__codelineno-0-3901">3901</a></span>
<span class="normal"><a href="#__codelineno-0-3902">3902</a></span>
<span class="normal"><a href="#__codelineno-0-3903">3903</a></span>
<span class="normal"><a href="#__codelineno-0-3904">3904</a></span>
<span class="normal"><a href="#__codelineno-0-3905">3905</a></span>
<span class="normal"><a href="#__codelineno-0-3906">3906</a></span>
<span class="normal"><a href="#__codelineno-0-3907">3907</a></span>
<span class="normal"><a href="#__codelineno-0-3908">3908</a></span>
<span class="normal"><a href="#__codelineno-0-3909">3909</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-3869" name="__codelineno-0-3869"></a><span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-3870" name="__codelineno-0-3870"></a><span class="k">def</span><span class="w"> </span><span class="nf">arg_pareto_sort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">crowdsort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ParetoInfo</span><span class="p">:</span>
<a id="__codelineno-0-3871" name="__codelineno-0-3871"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-3872" name="__codelineno-0-3872"></a><span class="sd">    Pareto-sort the solutions in the batch.</span>
<a id="__codelineno-0-3873" name="__codelineno-0-3873"></a>
<a id="__codelineno-0-3874" name="__codelineno-0-3874"></a><span class="sd">    The result is a namedtuple consisting of two elements:</span>
<a id="__codelineno-0-3875" name="__codelineno-0-3875"></a><span class="sd">    `fronts` and `ranks`.</span>
<a id="__codelineno-0-3876" name="__codelineno-0-3876"></a><span class="sd">    Let us assume that we have 5 solutions, and after a</span>
<a id="__codelineno-0-3877" name="__codelineno-0-3877"></a><span class="sd">    pareto-sorting they ended up in this order:</span>
<a id="__codelineno-0-3878" name="__codelineno-0-3878"></a>
<a id="__codelineno-0-3879" name="__codelineno-0-3879"></a><span class="sd">        front 0 (best front) : solution 1, solution 2</span>
<a id="__codelineno-0-3880" name="__codelineno-0-3880"></a><span class="sd">        front 1              : solution 0, solution 4</span>
<a id="__codelineno-0-3881" name="__codelineno-0-3881"></a><span class="sd">        front 2 (worst front): solution 3</span>
<a id="__codelineno-0-3882" name="__codelineno-0-3882"></a>
<a id="__codelineno-0-3883" name="__codelineno-0-3883"></a><span class="sd">    Considering the example ordering above, the returned</span>
<a id="__codelineno-0-3884" name="__codelineno-0-3884"></a><span class="sd">    ParetoInfo instance looks like this:</span>
<a id="__codelineno-0-3885" name="__codelineno-0-3885"></a>
<a id="__codelineno-0-3886" name="__codelineno-0-3886"></a><span class="sd">        ParetoInfo(</span>
<a id="__codelineno-0-3887" name="__codelineno-0-3887"></a><span class="sd">            fronts=[[1, 2], [0, 4], [3]],</span>
<a id="__codelineno-0-3888" name="__codelineno-0-3888"></a><span class="sd">            ranks=tensor([1, 0, 0, 2, 1])</span>
<a id="__codelineno-0-3889" name="__codelineno-0-3889"></a><span class="sd">        )</span>
<a id="__codelineno-0-3890" name="__codelineno-0-3890"></a>
<a id="__codelineno-0-3891" name="__codelineno-0-3891"></a><span class="sd">    where `fronts` stores the solution indices grouped by</span>
<a id="__codelineno-0-3892" name="__codelineno-0-3892"></a><span class="sd">    pareto fronts; and `ranks` stores, as a tensor of int64,</span>
<a id="__codelineno-0-3893" name="__codelineno-0-3893"></a><span class="sd">    the pareto rank for each solution (where 0 means best</span>
<a id="__codelineno-0-3894" name="__codelineno-0-3894"></a><span class="sd">    rank).</span>
<a id="__codelineno-0-3895" name="__codelineno-0-3895"></a>
<a id="__codelineno-0-3896" name="__codelineno-0-3896"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-3897" name="__codelineno-0-3897"></a><span class="sd">        crowdsort: If given as True, each front in itself</span>
<a id="__codelineno-0-3898" name="__codelineno-0-3898"></a><span class="sd">            will be sorted from the least crowding solution</span>
<a id="__codelineno-0-3899" name="__codelineno-0-3899"></a><span class="sd">            to the most crowding solution.</span>
<a id="__codelineno-0-3900" name="__codelineno-0-3900"></a><span class="sd">            If given as False, there will be no crowd-sorting.</span>
<a id="__codelineno-0-3901" name="__codelineno-0-3901"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-3902" name="__codelineno-0-3902"></a><span class="sd">        A ParetoInfo instance</span>
<a id="__codelineno-0-3903" name="__codelineno-0-3903"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-3904" name="__codelineno-0-3904"></a>
<a id="__codelineno-0-3905" name="__codelineno-0-3905"></a>    <span class="n">utils</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">utils</span><span class="p">()</span>
<a id="__codelineno-0-3906" name="__codelineno-0-3906"></a>
<a id="__codelineno-0-3907" name="__codelineno-0-3907"></a>    <span class="n">fronts</span><span class="p">,</span> <span class="n">ranks</span> <span class="o">=</span> <span class="n">_pareto_sort</span><span class="p">(</span><span class="n">utils</span><span class="p">,</span> <span class="n">crowdsort</span><span class="p">)</span>
<a id="__codelineno-0-3908" name="__codelineno-0-3908"></a>
<a id="__codelineno-0-3909" name="__codelineno-0-3909"></a>    <span class="k">return</span> <span class="n">ParetoInfo</span><span class="p">(</span><span class="n">fronts</span><span class="o">=</span><span class="n">fronts</span><span class="p">,</span> <span class="n">ranks</span><span class="o">=</span><span class="n">ranks</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.SolutionBatch.argbest" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">argbest</span><span class="p">(</span><span class="n">obj_index</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#evotorch.SolutionBatch.argbest" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return the best solution's index</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>obj_index</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The objective index. Can be passed as None
if the problem is single-objective. Otherwise,
expected as an int.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3911">3911</a></span>
<span class="normal"><a href="#__codelineno-0-3912">3912</a></span>
<span class="normal"><a href="#__codelineno-0-3913">3913</a></span>
<span class="normal"><a href="#__codelineno-0-3914">3914</a></span>
<span class="normal"><a href="#__codelineno-0-3915">3915</a></span>
<span class="normal"><a href="#__codelineno-0-3916">3916</a></span>
<span class="normal"><a href="#__codelineno-0-3917">3917</a></span>
<span class="normal"><a href="#__codelineno-0-3918">3918</a></span>
<span class="normal"><a href="#__codelineno-0-3919">3919</a></span>
<span class="normal"><a href="#__codelineno-0-3920">3920</a></span>
<span class="normal"><a href="#__codelineno-0-3921">3921</a></span>
<span class="normal"><a href="#__codelineno-0-3922">3922</a></span>
<span class="normal"><a href="#__codelineno-0-3923">3923</a></span>
<span class="normal"><a href="#__codelineno-0-3924">3924</a></span>
<span class="normal"><a href="#__codelineno-0-3925">3925</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-3911" name="__codelineno-0-3911"></a><span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-3912" name="__codelineno-0-3912"></a><span class="k">def</span><span class="w"> </span><span class="nf">argbest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-0-3913" name="__codelineno-0-3913"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the best solution&#39;s index</span>
<a id="__codelineno-0-3914" name="__codelineno-0-3914"></a>
<a id="__codelineno-0-3915" name="__codelineno-0-3915"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-3916" name="__codelineno-0-3916"></a><span class="sd">        obj_index: The objective index. Can be passed as None</span>
<a id="__codelineno-0-3917" name="__codelineno-0-3917"></a><span class="sd">            if the problem is single-objective. Otherwise,</span>
<a id="__codelineno-0-3918" name="__codelineno-0-3918"></a><span class="sd">            expected as an int.</span>
<a id="__codelineno-0-3919" name="__codelineno-0-3919"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-3920" name="__codelineno-0-3920"></a><span class="sd">        The index of the best solution.</span>
<a id="__codelineno-0-3921" name="__codelineno-0-3921"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-3922" name="__codelineno-0-3922"></a>    <span class="n">obj_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_optionally_get_obj_index</span><span class="p">(</span><span class="n">obj_index</span><span class="p">)</span>
<a id="__codelineno-0-3923" name="__codelineno-0-3923"></a>    <span class="n">descending</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_descending</span><span class="p">[</span><span class="n">obj_index</span><span class="p">]</span>
<a id="__codelineno-0-3924" name="__codelineno-0-3924"></a>    <span class="n">argf</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">argmax</span> <span class="k">if</span> <span class="n">descending</span> <span class="k">else</span> <span class="n">torch</span><span class="o">.</span><span class="n">argmin</span>
<a id="__codelineno-0-3925" name="__codelineno-0-3925"></a>    <span class="k">return</span> <span class="n">argf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[:,</span> <span class="n">obj_index</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.SolutionBatch.argsort" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">argsort</span><span class="p">(</span><span class="n">obj_index</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#evotorch.SolutionBatch.argsort" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return the indices of solutions, sorted from best to worst.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>obj_index</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The objective index. Can be passed as None
if the problem is single-objective. Otherwise,
expected as an int.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3826">3826</a></span>
<span class="normal"><a href="#__codelineno-0-3827">3827</a></span>
<span class="normal"><a href="#__codelineno-0-3828">3828</a></span>
<span class="normal"><a href="#__codelineno-0-3829">3829</a></span>
<span class="normal"><a href="#__codelineno-0-3830">3830</a></span>
<span class="normal"><a href="#__codelineno-0-3831">3831</a></span>
<span class="normal"><a href="#__codelineno-0-3832">3832</a></span>
<span class="normal"><a href="#__codelineno-0-3833">3833</a></span>
<span class="normal"><a href="#__codelineno-0-3834">3834</a></span>
<span class="normal"><a href="#__codelineno-0-3835">3835</a></span>
<span class="normal"><a href="#__codelineno-0-3836">3836</a></span>
<span class="normal"><a href="#__codelineno-0-3837">3837</a></span>
<span class="normal"><a href="#__codelineno-0-3838">3838</a></span>
<span class="normal"><a href="#__codelineno-0-3839">3839</a></span>
<span class="normal"><a href="#__codelineno-0-3840">3840</a></span>
<span class="normal"><a href="#__codelineno-0-3841">3841</a></span>
<span class="normal"><a href="#__codelineno-0-3842">3842</a></span>
<span class="normal"><a href="#__codelineno-0-3843">3843</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-3826" name="__codelineno-0-3826"></a><span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-3827" name="__codelineno-0-3827"></a><span class="k">def</span><span class="w"> </span><span class="nf">argsort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-0-3828" name="__codelineno-0-3828"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the indices of solutions, sorted from best to worst.</span>
<a id="__codelineno-0-3829" name="__codelineno-0-3829"></a>
<a id="__codelineno-0-3830" name="__codelineno-0-3830"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-3831" name="__codelineno-0-3831"></a><span class="sd">        obj_index: The objective index. Can be passed as None</span>
<a id="__codelineno-0-3832" name="__codelineno-0-3832"></a><span class="sd">            if the problem is single-objective. Otherwise,</span>
<a id="__codelineno-0-3833" name="__codelineno-0-3833"></a><span class="sd">            expected as an int.</span>
<a id="__codelineno-0-3834" name="__codelineno-0-3834"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-3835" name="__codelineno-0-3835"></a><span class="sd">        A PyTorch tensor, containing the solution indices,</span>
<a id="__codelineno-0-3836" name="__codelineno-0-3836"></a><span class="sd">        sorted from the best solution to the worst.</span>
<a id="__codelineno-0-3837" name="__codelineno-0-3837"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-3838" name="__codelineno-0-3838"></a>    <span class="n">obj_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_optionally_get_obj_index</span><span class="p">(</span><span class="n">obj_index</span><span class="p">)</span>
<a id="__codelineno-0-3839" name="__codelineno-0-3839"></a>
<a id="__codelineno-0-3840" name="__codelineno-0-3840"></a>    <span class="n">descending</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_descending</span><span class="p">[</span><span class="n">obj_index</span><span class="p">]</span>
<a id="__codelineno-0-3841" name="__codelineno-0-3841"></a>    <span class="n">ev_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[:,</span> <span class="n">obj_index</span><span class="p">]</span>
<a id="__codelineno-0-3842" name="__codelineno-0-3842"></a>
<a id="__codelineno-0-3843" name="__codelineno-0-3843"></a>    <span class="k">return</span> <span class="n">torch</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">ev_col</span><span class="p">,</span> <span class="n">descending</span><span class="o">=</span><span class="n">descending</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.SolutionBatch.argworst" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">argworst</span><span class="p">(</span><span class="n">obj_index</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#evotorch.SolutionBatch.argworst" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return the worst solution's index</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>obj_index</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The objective index. Can be passed as None
if the problem is single-objective. Otherwise,
expected as an int.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3927">3927</a></span>
<span class="normal"><a href="#__codelineno-0-3928">3928</a></span>
<span class="normal"><a href="#__codelineno-0-3929">3929</a></span>
<span class="normal"><a href="#__codelineno-0-3930">3930</a></span>
<span class="normal"><a href="#__codelineno-0-3931">3931</a></span>
<span class="normal"><a href="#__codelineno-0-3932">3932</a></span>
<span class="normal"><a href="#__codelineno-0-3933">3933</a></span>
<span class="normal"><a href="#__codelineno-0-3934">3934</a></span>
<span class="normal"><a href="#__codelineno-0-3935">3935</a></span>
<span class="normal"><a href="#__codelineno-0-3936">3936</a></span>
<span class="normal"><a href="#__codelineno-0-3937">3937</a></span>
<span class="normal"><a href="#__codelineno-0-3938">3938</a></span>
<span class="normal"><a href="#__codelineno-0-3939">3939</a></span>
<span class="normal"><a href="#__codelineno-0-3940">3940</a></span>
<span class="normal"><a href="#__codelineno-0-3941">3941</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-3927" name="__codelineno-0-3927"></a><span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-3928" name="__codelineno-0-3928"></a><span class="k">def</span><span class="w"> </span><span class="nf">argworst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-0-3929" name="__codelineno-0-3929"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the worst solution&#39;s index</span>
<a id="__codelineno-0-3930" name="__codelineno-0-3930"></a>
<a id="__codelineno-0-3931" name="__codelineno-0-3931"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-3932" name="__codelineno-0-3932"></a><span class="sd">        obj_index: The objective index. Can be passed as None</span>
<a id="__codelineno-0-3933" name="__codelineno-0-3933"></a><span class="sd">            if the problem is single-objective. Otherwise,</span>
<a id="__codelineno-0-3934" name="__codelineno-0-3934"></a><span class="sd">            expected as an int.</span>
<a id="__codelineno-0-3935" name="__codelineno-0-3935"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-3936" name="__codelineno-0-3936"></a><span class="sd">        The index of the worst solution.</span>
<a id="__codelineno-0-3937" name="__codelineno-0-3937"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-3938" name="__codelineno-0-3938"></a>    <span class="n">obj_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_optionally_get_obj_index</span><span class="p">(</span><span class="n">obj_index</span><span class="p">)</span>
<a id="__codelineno-0-3939" name="__codelineno-0-3939"></a>    <span class="n">descending</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_descending</span><span class="p">[</span><span class="n">obj_index</span><span class="p">]</span>
<a id="__codelineno-0-3940" name="__codelineno-0-3940"></a>    <span class="n">argf</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">argmin</span> <span class="k">if</span> <span class="n">descending</span> <span class="k">else</span> <span class="n">torch</span><span class="o">.</span><span class="n">argmax</span>
<a id="__codelineno-0-3941" name="__codelineno-0-3941"></a>    <span class="k">return</span> <span class="n">argf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[:,</span> <span class="n">obj_index</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.SolutionBatch.cat" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cat</span><span class="p">(</span><span class="n">solution_batches</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#evotorch.SolutionBatch.cat" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Concatenate multiple SolutionBatch instances into one.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>solution_batches</code>
            </td>
            <td>
                  <code><span title="typing.Iterable">Iterable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An Iterable of SolutionBatch objects to
concatenate.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4580">4580</a></span>
<span class="normal"><a href="#__codelineno-0-4581">4581</a></span>
<span class="normal"><a href="#__codelineno-0-4582">4582</a></span>
<span class="normal"><a href="#__codelineno-0-4583">4583</a></span>
<span class="normal"><a href="#__codelineno-0-4584">4584</a></span>
<span class="normal"><a href="#__codelineno-0-4585">4585</a></span>
<span class="normal"><a href="#__codelineno-0-4586">4586</a></span>
<span class="normal"><a href="#__codelineno-0-4587">4587</a></span>
<span class="normal"><a href="#__codelineno-0-4588">4588</a></span>
<span class="normal"><a href="#__codelineno-0-4589">4589</a></span>
<span class="normal"><a href="#__codelineno-0-4590">4590</a></span>
<span class="normal"><a href="#__codelineno-0-4591">4591</a></span>
<span class="normal"><a href="#__codelineno-0-4592">4592</a></span>
<span class="normal"><a href="#__codelineno-0-4593">4593</a></span>
<span class="normal"><a href="#__codelineno-0-4594">4594</a></span>
<span class="normal"><a href="#__codelineno-0-4595">4595</a></span>
<span class="normal"><a href="#__codelineno-0-4596">4596</a></span>
<span class="normal"><a href="#__codelineno-0-4597">4597</a></span>
<span class="normal"><a href="#__codelineno-0-4598">4598</a></span>
<span class="normal"><a href="#__codelineno-0-4599">4599</a></span>
<span class="normal"><a href="#__codelineno-0-4600">4600</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4580" name="__codelineno-0-4580"></a><span class="nd">@staticmethod</span>
<a id="__codelineno-0-4581" name="__codelineno-0-4581"></a><span class="k">def</span><span class="w"> </span><span class="nf">cat</span><span class="p">(</span><span class="n">solution_batches</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SolutionBatch&quot;</span><span class="p">:</span>
<a id="__codelineno-0-4582" name="__codelineno-0-4582"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4583" name="__codelineno-0-4583"></a><span class="sd">    Concatenate multiple SolutionBatch instances into one.</span>
<a id="__codelineno-0-4584" name="__codelineno-0-4584"></a>
<a id="__codelineno-0-4585" name="__codelineno-0-4585"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-4586" name="__codelineno-0-4586"></a><span class="sd">        solution_batches: An Iterable of SolutionBatch objects to</span>
<a id="__codelineno-0-4587" name="__codelineno-0-4587"></a><span class="sd">            concatenate.</span>
<a id="__codelineno-0-4588" name="__codelineno-0-4588"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-4589" name="__codelineno-0-4589"></a><span class="sd">        The result of the concatenation, as a new SolutionBatch.</span>
<a id="__codelineno-0-4590" name="__codelineno-0-4590"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4591" name="__codelineno-0-4591"></a>    <span class="n">first</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-4592" name="__codelineno-0-4592"></a>    <span class="n">rest</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-4593" name="__codelineno-0-4593"></a>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">batch</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">solution_batches</span><span class="p">):</span>
<a id="__codelineno-0-4594" name="__codelineno-0-4594"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">batch</span><span class="p">,</span> <span class="n">SolutionBatch</span><span class="p">):</span>
<a id="__codelineno-0-4595" name="__codelineno-0-4595"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected a SolutionBatch but got </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-4596" name="__codelineno-0-4596"></a>        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-4597" name="__codelineno-0-4597"></a>            <span class="n">first</span> <span class="o">=</span> <span class="n">batch</span>
<a id="__codelineno-0-4598" name="__codelineno-0-4598"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4599" name="__codelineno-0-4599"></a>            <span class="n">rest</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
<a id="__codelineno-0-4600" name="__codelineno-0-4600"></a>    <span class="k">return</span> <span class="n">first</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">rest</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.SolutionBatch.compute_pareto_ranks" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">compute_pareto_ranks</span><span class="p">(</span><span class="n">crowdsort</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#evotorch.SolutionBatch.compute_pareto_ranks" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Compute the pareto-ranks of the solutions in the batch.
Args:
    crowdsort: If given as True, each front in itself
        will be sorted from the least crowding solution
        to the most crowding solution.
        If given as False, there will be no crowd-sorting.
Returns:
    ranks (torch.Tensor): The computed pareto ranks, of shape [num_samples,]
                        Ranks are encoded in the form 'lowest is best'. So solutions in the pareto front will be assigned rank 0,
                        solutions in the next non-dominated set (excluding the pareto front) will be assigned rank 1, and so on.
    crowdsort_ranks (Optional[torch.Tensor]): The computed crowd sort ranks, only returned if crowdsort=True. Otherwise, None is returned.
                        Solutions within a front are assigned a crowding score, as described in the above paper.
                        Then, the solution with the best crowding score within a front of size K is assigned rank 0, and the solution with the
                        worst crowding score within a front is assigned rank K-1.</p>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3845">3845</a></span>
<span class="normal"><a href="#__codelineno-0-3846">3846</a></span>
<span class="normal"><a href="#__codelineno-0-3847">3847</a></span>
<span class="normal"><a href="#__codelineno-0-3848">3848</a></span>
<span class="normal"><a href="#__codelineno-0-3849">3849</a></span>
<span class="normal"><a href="#__codelineno-0-3850">3850</a></span>
<span class="normal"><a href="#__codelineno-0-3851">3851</a></span>
<span class="normal"><a href="#__codelineno-0-3852">3852</a></span>
<span class="normal"><a href="#__codelineno-0-3853">3853</a></span>
<span class="normal"><a href="#__codelineno-0-3854">3854</a></span>
<span class="normal"><a href="#__codelineno-0-3855">3855</a></span>
<span class="normal"><a href="#__codelineno-0-3856">3856</a></span>
<span class="normal"><a href="#__codelineno-0-3857">3857</a></span>
<span class="normal"><a href="#__codelineno-0-3858">3858</a></span>
<span class="normal"><a href="#__codelineno-0-3859">3859</a></span>
<span class="normal"><a href="#__codelineno-0-3860">3860</a></span>
<span class="normal"><a href="#__codelineno-0-3861">3861</a></span>
<span class="normal"><a href="#__codelineno-0-3862">3862</a></span>
<span class="normal"><a href="#__codelineno-0-3863">3863</a></span>
<span class="normal"><a href="#__codelineno-0-3864">3864</a></span>
<span class="normal"><a href="#__codelineno-0-3865">3865</a></span>
<span class="normal"><a href="#__codelineno-0-3866">3866</a></span>
<span class="normal"><a href="#__codelineno-0-3867">3867</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-3845" name="__codelineno-0-3845"></a><span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-3846" name="__codelineno-0-3846"></a><span class="k">def</span><span class="w"> </span><span class="nf">compute_pareto_ranks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">crowdsort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">,</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">]:</span>
<a id="__codelineno-0-3847" name="__codelineno-0-3847"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-3848" name="__codelineno-0-3848"></a><span class="sd">    Compute the pareto-ranks of the solutions in the batch.</span>
<a id="__codelineno-0-3849" name="__codelineno-0-3849"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-3850" name="__codelineno-0-3850"></a><span class="sd">        crowdsort: If given as True, each front in itself</span>
<a id="__codelineno-0-3851" name="__codelineno-0-3851"></a><span class="sd">            will be sorted from the least crowding solution</span>
<a id="__codelineno-0-3852" name="__codelineno-0-3852"></a><span class="sd">            to the most crowding solution.</span>
<a id="__codelineno-0-3853" name="__codelineno-0-3853"></a><span class="sd">            If given as False, there will be no crowd-sorting.</span>
<a id="__codelineno-0-3854" name="__codelineno-0-3854"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-3855" name="__codelineno-0-3855"></a><span class="sd">        ranks (torch.Tensor): The computed pareto ranks, of shape [num_samples,]</span>
<a id="__codelineno-0-3856" name="__codelineno-0-3856"></a><span class="sd">                            Ranks are encoded in the form &#39;lowest is best&#39;. So solutions in the pareto front will be assigned rank 0,</span>
<a id="__codelineno-0-3857" name="__codelineno-0-3857"></a><span class="sd">                            solutions in the next non-dominated set (excluding the pareto front) will be assigned rank 1, and so on.</span>
<a id="__codelineno-0-3858" name="__codelineno-0-3858"></a><span class="sd">        crowdsort_ranks (Optional[torch.Tensor]): The computed crowd sort ranks, only returned if crowdsort=True. Otherwise, None is returned.</span>
<a id="__codelineno-0-3859" name="__codelineno-0-3859"></a><span class="sd">                            Solutions within a front are assigned a crowding score, as described in the above paper.</span>
<a id="__codelineno-0-3860" name="__codelineno-0-3860"></a><span class="sd">                            Then, the solution with the best crowding score within a front of size K is assigned rank 0, and the solution with the</span>
<a id="__codelineno-0-3861" name="__codelineno-0-3861"></a><span class="sd">                            worst crowding score within a front is assigned rank K-1.</span>
<a id="__codelineno-0-3862" name="__codelineno-0-3862"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-3863" name="__codelineno-0-3863"></a>    <span class="n">utils</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">utils</span><span class="p">()</span>
<a id="__codelineno-0-3864" name="__codelineno-0-3864"></a>
<a id="__codelineno-0-3865" name="__codelineno-0-3865"></a>    <span class="n">ranks</span><span class="p">,</span> <span class="n">crowdsort_ranks</span> <span class="o">=</span> <span class="n">_compute_pareto_ranks</span><span class="p">(</span><span class="n">utils</span><span class="p">,</span> <span class="n">crowdsort</span><span class="p">)</span>
<a id="__codelineno-0-3866" name="__codelineno-0-3866"></a>
<a id="__codelineno-0-3867" name="__codelineno-0-3867"></a>    <span class="k">return</span> <span class="n">ranks</span><span class="p">,</span> <span class="n">crowdsort_ranks</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.SolutionBatch.concat" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">concat</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

<a href="#evotorch.SolutionBatch.concat" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Concatenate this SolutionBatch with the other(s).</p>
<p>In this context, concatenation means that the solutions of
this SolutionBatch and of the others are collected in one big
SolutionBatch object.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>other</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="SolutionBatch (evotorch.core.SolutionBatch)" href="core/#evotorch.core.SolutionBatch">SolutionBatch</a>, <span title="typing.Iterable">Iterable</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A SolutionBatch, or a sequence of SolutionBatch objects.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4370">4370</a></span>
<span class="normal"><a href="#__codelineno-0-4371">4371</a></span>
<span class="normal"><a href="#__codelineno-0-4372">4372</a></span>
<span class="normal"><a href="#__codelineno-0-4373">4373</a></span>
<span class="normal"><a href="#__codelineno-0-4374">4374</a></span>
<span class="normal"><a href="#__codelineno-0-4375">4375</a></span>
<span class="normal"><a href="#__codelineno-0-4376">4376</a></span>
<span class="normal"><a href="#__codelineno-0-4377">4377</a></span>
<span class="normal"><a href="#__codelineno-0-4378">4378</a></span>
<span class="normal"><a href="#__codelineno-0-4379">4379</a></span>
<span class="normal"><a href="#__codelineno-0-4380">4380</a></span>
<span class="normal"><a href="#__codelineno-0-4381">4381</a></span>
<span class="normal"><a href="#__codelineno-0-4382">4382</a></span>
<span class="normal"><a href="#__codelineno-0-4383">4383</a></span>
<span class="normal"><a href="#__codelineno-0-4384">4384</a></span>
<span class="normal"><a href="#__codelineno-0-4385">4385</a></span>
<span class="normal"><a href="#__codelineno-0-4386">4386</a></span>
<span class="normal"><a href="#__codelineno-0-4387">4387</a></span>
<span class="normal"><a href="#__codelineno-0-4388">4388</a></span>
<span class="normal"><a href="#__codelineno-0-4389">4389</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4370" name="__codelineno-0-4370"></a><span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-4371" name="__codelineno-0-4371"></a><span class="k">def</span><span class="w"> </span><span class="nf">concat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;SolutionBatch&quot;</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;SolutionBatch&quot;</span><span class="p">:</span>
<a id="__codelineno-0-4372" name="__codelineno-0-4372"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Concatenate this SolutionBatch with the other(s).</span>
<a id="__codelineno-0-4373" name="__codelineno-0-4373"></a>
<a id="__codelineno-0-4374" name="__codelineno-0-4374"></a><span class="sd">    In this context, concatenation means that the solutions of</span>
<a id="__codelineno-0-4375" name="__codelineno-0-4375"></a><span class="sd">    this SolutionBatch and of the others are collected in one big</span>
<a id="__codelineno-0-4376" name="__codelineno-0-4376"></a><span class="sd">    SolutionBatch object.</span>
<a id="__codelineno-0-4377" name="__codelineno-0-4377"></a>
<a id="__codelineno-0-4378" name="__codelineno-0-4378"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-4379" name="__codelineno-0-4379"></a><span class="sd">        other: A SolutionBatch, or a sequence of SolutionBatch objects.</span>
<a id="__codelineno-0-4380" name="__codelineno-0-4380"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-4381" name="__codelineno-0-4381"></a><span class="sd">        A new SolutionBatch object which is the result of the</span>
<a id="__codelineno-0-4382" name="__codelineno-0-4382"></a><span class="sd">        concatenation.</span>
<a id="__codelineno-0-4383" name="__codelineno-0-4383"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4384" name="__codelineno-0-4384"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">SolutionBatch</span><span class="p">):</span>
<a id="__codelineno-0-4385" name="__codelineno-0-4385"></a>        <span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">]</span>
<a id="__codelineno-0-4386" name="__codelineno-0-4386"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4387" name="__codelineno-0-4387"></a>        <span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">]</span>
<a id="__codelineno-0-4388" name="__codelineno-0-4388"></a>        <span class="n">lst</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">other</span><span class="p">))</span>
<a id="__codelineno-0-4389" name="__codelineno-0-4389"></a>    <span class="k">return</span> <span class="n">SolutionBatch</span><span class="p">(</span><span class="n">merging_of</span><span class="o">=</span><span class="n">lst</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.SolutionBatch.forget_evals" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">forget_evals</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">solutions</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#evotorch.SolutionBatch.forget_evals" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Forget the evaluations of the solutions.
The evaluation results will be cleared, which means that they will
be filled with <code>NaN</code>s.</p>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4196">4196</a></span>
<span class="normal"><a href="#__codelineno-0-4197">4197</a></span>
<span class="normal"><a href="#__codelineno-0-4198">4198</a></span>
<span class="normal"><a href="#__codelineno-0-4199">4199</a></span>
<span class="normal"><a href="#__codelineno-0-4200">4200</a></span>
<span class="normal"><a href="#__codelineno-0-4201">4201</a></span>
<span class="normal"><a href="#__codelineno-0-4202">4202</a></span>
<span class="normal"><a href="#__codelineno-0-4203">4203</a></span>
<span class="normal"><a href="#__codelineno-0-4204">4204</a></span>
<span class="normal"><a href="#__codelineno-0-4205">4205</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4196" name="__codelineno-0-4196"></a><span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-4197" name="__codelineno-0-4197"></a><span class="k">def</span><span class="w"> </span><span class="nf">forget_evals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">solutions</span><span class="p">:</span> <span class="n">MaybeIndicesOrSlice</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-4198" name="__codelineno-0-4198"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4199" name="__codelineno-0-4199"></a><span class="sd">    Forget the evaluations of the solutions.</span>
<a id="__codelineno-0-4200" name="__codelineno-0-4200"></a><span class="sd">    The evaluation results will be cleared, which means that they will</span>
<a id="__codelineno-0-4201" name="__codelineno-0-4201"></a><span class="sd">    be filled with `NaN`s.</span>
<a id="__codelineno-0-4202" name="__codelineno-0-4202"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4203" name="__codelineno-0-4203"></a>    <span class="k">if</span> <span class="n">solutions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-4204" name="__codelineno-0-4204"></a>        <span class="n">solutions</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-4205" name="__codelineno-0-4205"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[</span><span class="n">solutions</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;nan&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.SolutionBatch.set_evals" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_evals</span><span class="p">(</span><span class="n">evals</span><span class="p">,</span> <span class="n">eval_data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">solutions</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#evotorch.SolutionBatch.set_evals" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Set the evaluations of the solutions.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>evals</code>
            </td>
            <td>
                  <code><span title="torch.Tensor">Tensor</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A numeric tensor which contains the evaluation results.
Acceptable shapes are as follows:
<code>(n,)</code> only to be used for single-objective problems, sets
the evaluation results of the target <code>n</code> solutions, and clears
(where clearing means to fill with NaN values)
extra evaluation data (if the problem has allocations for such
extra evaluation data);
<code>(n,m)</code> where <code>m</code> is the number of objectives, sets the
evaluation results of the target <code>n</code> solutions, and clears
their extra evaluation data;
<code>(n,m+q)</code> where <code>m</code> is the number of objectives and <code>q</code> is the
length of extra evaluation data, sets the evaluation result
and extra data of the target <code>n</code> solutions.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>eval_data</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="torch.Tensor">Tensor</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>To be used only when the problem has extra evaluation
data. Optionally, one can pass the extra evaluation data
separately via this argument (instead of jointly through
a single tensor via <code>evals</code>).
The expected shape of this tensor is <code>(n,q)</code> where <code>n</code>
is the number of solutions and <code>q</code> is the length of the
extra evaluation data.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>solutions</code>
            </td>
            <td>
                  <code><span title="evotorch.core.MaybeIndicesOrSlice">MaybeIndicesOrSlice</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optionally a list of integer indices or an instance
of <code>slice(...)</code>, to be used if one wishes to set the
evaluations of only some of the solutions.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3965">3965</a></span>
<span class="normal"><a href="#__codelineno-0-3966">3966</a></span>
<span class="normal"><a href="#__codelineno-0-3967">3967</a></span>
<span class="normal"><a href="#__codelineno-0-3968">3968</a></span>
<span class="normal"><a href="#__codelineno-0-3969">3969</a></span>
<span class="normal"><a href="#__codelineno-0-3970">3970</a></span>
<span class="normal"><a href="#__codelineno-0-3971">3971</a></span>
<span class="normal"><a href="#__codelineno-0-3972">3972</a></span>
<span class="normal"><a href="#__codelineno-0-3973">3973</a></span>
<span class="normal"><a href="#__codelineno-0-3974">3974</a></span>
<span class="normal"><a href="#__codelineno-0-3975">3975</a></span>
<span class="normal"><a href="#__codelineno-0-3976">3976</a></span>
<span class="normal"><a href="#__codelineno-0-3977">3977</a></span>
<span class="normal"><a href="#__codelineno-0-3978">3978</a></span>
<span class="normal"><a href="#__codelineno-0-3979">3979</a></span>
<span class="normal"><a href="#__codelineno-0-3980">3980</a></span>
<span class="normal"><a href="#__codelineno-0-3981">3981</a></span>
<span class="normal"><a href="#__codelineno-0-3982">3982</a></span>
<span class="normal"><a href="#__codelineno-0-3983">3983</a></span>
<span class="normal"><a href="#__codelineno-0-3984">3984</a></span>
<span class="normal"><a href="#__codelineno-0-3985">3985</a></span>
<span class="normal"><a href="#__codelineno-0-3986">3986</a></span>
<span class="normal"><a href="#__codelineno-0-3987">3987</a></span>
<span class="normal"><a href="#__codelineno-0-3988">3988</a></span>
<span class="normal"><a href="#__codelineno-0-3989">3989</a></span>
<span class="normal"><a href="#__codelineno-0-3990">3990</a></span>
<span class="normal"><a href="#__codelineno-0-3991">3991</a></span>
<span class="normal"><a href="#__codelineno-0-3992">3992</a></span>
<span class="normal"><a href="#__codelineno-0-3993">3993</a></span>
<span class="normal"><a href="#__codelineno-0-3994">3994</a></span>
<span class="normal"><a href="#__codelineno-0-3995">3995</a></span>
<span class="normal"><a href="#__codelineno-0-3996">3996</a></span>
<span class="normal"><a href="#__codelineno-0-3997">3997</a></span>
<span class="normal"><a href="#__codelineno-0-3998">3998</a></span>
<span class="normal"><a href="#__codelineno-0-3999">3999</a></span>
<span class="normal"><a href="#__codelineno-0-4000">4000</a></span>
<span class="normal"><a href="#__codelineno-0-4001">4001</a></span>
<span class="normal"><a href="#__codelineno-0-4002">4002</a></span>
<span class="normal"><a href="#__codelineno-0-4003">4003</a></span>
<span class="normal"><a href="#__codelineno-0-4004">4004</a></span>
<span class="normal"><a href="#__codelineno-0-4005">4005</a></span>
<span class="normal"><a href="#__codelineno-0-4006">4006</a></span>
<span class="normal"><a href="#__codelineno-0-4007">4007</a></span>
<span class="normal"><a href="#__codelineno-0-4008">4008</a></span>
<span class="normal"><a href="#__codelineno-0-4009">4009</a></span>
<span class="normal"><a href="#__codelineno-0-4010">4010</a></span>
<span class="normal"><a href="#__codelineno-0-4011">4011</a></span>
<span class="normal"><a href="#__codelineno-0-4012">4012</a></span>
<span class="normal"><a href="#__codelineno-0-4013">4013</a></span>
<span class="normal"><a href="#__codelineno-0-4014">4014</a></span>
<span class="normal"><a href="#__codelineno-0-4015">4015</a></span>
<span class="normal"><a href="#__codelineno-0-4016">4016</a></span>
<span class="normal"><a href="#__codelineno-0-4017">4017</a></span>
<span class="normal"><a href="#__codelineno-0-4018">4018</a></span>
<span class="normal"><a href="#__codelineno-0-4019">4019</a></span>
<span class="normal"><a href="#__codelineno-0-4020">4020</a></span>
<span class="normal"><a href="#__codelineno-0-4021">4021</a></span>
<span class="normal"><a href="#__codelineno-0-4022">4022</a></span>
<span class="normal"><a href="#__codelineno-0-4023">4023</a></span>
<span class="normal"><a href="#__codelineno-0-4024">4024</a></span>
<span class="normal"><a href="#__codelineno-0-4025">4025</a></span>
<span class="normal"><a href="#__codelineno-0-4026">4026</a></span>
<span class="normal"><a href="#__codelineno-0-4027">4027</a></span>
<span class="normal"><a href="#__codelineno-0-4028">4028</a></span>
<span class="normal"><a href="#__codelineno-0-4029">4029</a></span>
<span class="normal"><a href="#__codelineno-0-4030">4030</a></span>
<span class="normal"><a href="#__codelineno-0-4031">4031</a></span>
<span class="normal"><a href="#__codelineno-0-4032">4032</a></span>
<span class="normal"><a href="#__codelineno-0-4033">4033</a></span>
<span class="normal"><a href="#__codelineno-0-4034">4034</a></span>
<span class="normal"><a href="#__codelineno-0-4035">4035</a></span>
<span class="normal"><a href="#__codelineno-0-4036">4036</a></span>
<span class="normal"><a href="#__codelineno-0-4037">4037</a></span>
<span class="normal"><a href="#__codelineno-0-4038">4038</a></span>
<span class="normal"><a href="#__codelineno-0-4039">4039</a></span>
<span class="normal"><a href="#__codelineno-0-4040">4040</a></span>
<span class="normal"><a href="#__codelineno-0-4041">4041</a></span>
<span class="normal"><a href="#__codelineno-0-4042">4042</a></span>
<span class="normal"><a href="#__codelineno-0-4043">4043</a></span>
<span class="normal"><a href="#__codelineno-0-4044">4044</a></span>
<span class="normal"><a href="#__codelineno-0-4045">4045</a></span>
<span class="normal"><a href="#__codelineno-0-4046">4046</a></span>
<span class="normal"><a href="#__codelineno-0-4047">4047</a></span>
<span class="normal"><a href="#__codelineno-0-4048">4048</a></span>
<span class="normal"><a href="#__codelineno-0-4049">4049</a></span>
<span class="normal"><a href="#__codelineno-0-4050">4050</a></span>
<span class="normal"><a href="#__codelineno-0-4051">4051</a></span>
<span class="normal"><a href="#__codelineno-0-4052">4052</a></span>
<span class="normal"><a href="#__codelineno-0-4053">4053</a></span>
<span class="normal"><a href="#__codelineno-0-4054">4054</a></span>
<span class="normal"><a href="#__codelineno-0-4055">4055</a></span>
<span class="normal"><a href="#__codelineno-0-4056">4056</a></span>
<span class="normal"><a href="#__codelineno-0-4057">4057</a></span>
<span class="normal"><a href="#__codelineno-0-4058">4058</a></span>
<span class="normal"><a href="#__codelineno-0-4059">4059</a></span>
<span class="normal"><a href="#__codelineno-0-4060">4060</a></span>
<span class="normal"><a href="#__codelineno-0-4061">4061</a></span>
<span class="normal"><a href="#__codelineno-0-4062">4062</a></span>
<span class="normal"><a href="#__codelineno-0-4063">4063</a></span>
<span class="normal"><a href="#__codelineno-0-4064">4064</a></span>
<span class="normal"><a href="#__codelineno-0-4065">4065</a></span>
<span class="normal"><a href="#__codelineno-0-4066">4066</a></span>
<span class="normal"><a href="#__codelineno-0-4067">4067</a></span>
<span class="normal"><a href="#__codelineno-0-4068">4068</a></span>
<span class="normal"><a href="#__codelineno-0-4069">4069</a></span>
<span class="normal"><a href="#__codelineno-0-4070">4070</a></span>
<span class="normal"><a href="#__codelineno-0-4071">4071</a></span>
<span class="normal"><a href="#__codelineno-0-4072">4072</a></span>
<span class="normal"><a href="#__codelineno-0-4073">4073</a></span>
<span class="normal"><a href="#__codelineno-0-4074">4074</a></span>
<span class="normal"><a href="#__codelineno-0-4075">4075</a></span>
<span class="normal"><a href="#__codelineno-0-4076">4076</a></span>
<span class="normal"><a href="#__codelineno-0-4077">4077</a></span>
<span class="normal"><a href="#__codelineno-0-4078">4078</a></span>
<span class="normal"><a href="#__codelineno-0-4079">4079</a></span>
<span class="normal"><a href="#__codelineno-0-4080">4080</a></span>
<span class="normal"><a href="#__codelineno-0-4081">4081</a></span>
<span class="normal"><a href="#__codelineno-0-4082">4082</a></span>
<span class="normal"><a href="#__codelineno-0-4083">4083</a></span>
<span class="normal"><a href="#__codelineno-0-4084">4084</a></span>
<span class="normal"><a href="#__codelineno-0-4085">4085</a></span>
<span class="normal"><a href="#__codelineno-0-4086">4086</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-3965" name="__codelineno-0-3965"></a><span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-3966" name="__codelineno-0-3966"></a><span class="k">def</span><span class="w"> </span><span class="nf">set_evals</span><span class="p">(</span>
<a id="__codelineno-0-3967" name="__codelineno-0-3967"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-3968" name="__codelineno-0-3968"></a>    <span class="n">evals</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">,</span>
<a id="__codelineno-0-3969" name="__codelineno-0-3969"></a>    <span class="n">eval_data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3970" name="__codelineno-0-3970"></a>    <span class="o">*</span><span class="p">,</span>
<a id="__codelineno-0-3971" name="__codelineno-0-3971"></a>    <span class="n">solutions</span><span class="p">:</span> <span class="n">MaybeIndicesOrSlice</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3972" name="__codelineno-0-3972"></a><span class="p">):</span>
<a id="__codelineno-0-3973" name="__codelineno-0-3973"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-3974" name="__codelineno-0-3974"></a><span class="sd">    Set the evaluations of the solutions.</span>
<a id="__codelineno-0-3975" name="__codelineno-0-3975"></a>
<a id="__codelineno-0-3976" name="__codelineno-0-3976"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-3977" name="__codelineno-0-3977"></a><span class="sd">        evals: A numeric tensor which contains the evaluation results.</span>
<a id="__codelineno-0-3978" name="__codelineno-0-3978"></a><span class="sd">            Acceptable shapes are as follows:</span>
<a id="__codelineno-0-3979" name="__codelineno-0-3979"></a><span class="sd">            `(n,)` only to be used for single-objective problems, sets</span>
<a id="__codelineno-0-3980" name="__codelineno-0-3980"></a><span class="sd">            the evaluation results of the target `n` solutions, and clears</span>
<a id="__codelineno-0-3981" name="__codelineno-0-3981"></a><span class="sd">            (where clearing means to fill with NaN values)</span>
<a id="__codelineno-0-3982" name="__codelineno-0-3982"></a><span class="sd">            extra evaluation data (if the problem has allocations for such</span>
<a id="__codelineno-0-3983" name="__codelineno-0-3983"></a><span class="sd">            extra evaluation data);</span>
<a id="__codelineno-0-3984" name="__codelineno-0-3984"></a><span class="sd">            `(n,m)` where `m` is the number of objectives, sets the</span>
<a id="__codelineno-0-3985" name="__codelineno-0-3985"></a><span class="sd">            evaluation results of the target `n` solutions, and clears</span>
<a id="__codelineno-0-3986" name="__codelineno-0-3986"></a><span class="sd">            their extra evaluation data;</span>
<a id="__codelineno-0-3987" name="__codelineno-0-3987"></a><span class="sd">            `(n,m+q)` where `m` is the number of objectives and `q` is the</span>
<a id="__codelineno-0-3988" name="__codelineno-0-3988"></a><span class="sd">            length of extra evaluation data, sets the evaluation result</span>
<a id="__codelineno-0-3989" name="__codelineno-0-3989"></a><span class="sd">            and extra data of the target `n` solutions.</span>
<a id="__codelineno-0-3990" name="__codelineno-0-3990"></a><span class="sd">        eval_data: To be used only when the problem has extra evaluation</span>
<a id="__codelineno-0-3991" name="__codelineno-0-3991"></a><span class="sd">            data. Optionally, one can pass the extra evaluation data</span>
<a id="__codelineno-0-3992" name="__codelineno-0-3992"></a><span class="sd">            separately via this argument (instead of jointly through</span>
<a id="__codelineno-0-3993" name="__codelineno-0-3993"></a><span class="sd">            a single tensor via `evals`).</span>
<a id="__codelineno-0-3994" name="__codelineno-0-3994"></a><span class="sd">            The expected shape of this tensor is `(n,q)` where `n`</span>
<a id="__codelineno-0-3995" name="__codelineno-0-3995"></a><span class="sd">            is the number of solutions and `q` is the length of the</span>
<a id="__codelineno-0-3996" name="__codelineno-0-3996"></a><span class="sd">            extra evaluation data.</span>
<a id="__codelineno-0-3997" name="__codelineno-0-3997"></a><span class="sd">        solutions: Optionally a list of integer indices or an instance</span>
<a id="__codelineno-0-3998" name="__codelineno-0-3998"></a><span class="sd">            of `slice(...)`, to be used if one wishes to set the</span>
<a id="__codelineno-0-3999" name="__codelineno-0-3999"></a><span class="sd">            evaluations of only some of the solutions.</span>
<a id="__codelineno-0-4000" name="__codelineno-0-4000"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-4001" name="__codelineno-0-4001"></a><span class="sd">        ValueError: if the given tensor has an incompatible shape.</span>
<a id="__codelineno-0-4002" name="__codelineno-0-4002"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4003" name="__codelineno-0-4003"></a>    <span class="k">if</span> <span class="n">solutions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-4004" name="__codelineno-0-4004"></a>        <span class="n">solutions</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-4005" name="__codelineno-0-4005"></a>        <span class="n">num_solutions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-4006" name="__codelineno-0-4006"></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">solutions</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
<a id="__codelineno-0-4007" name="__codelineno-0-4007"></a>        <span class="n">num_solutions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[</span><span class="n">solutions</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-4008" name="__codelineno-0-4008"></a>    <span class="k">elif</span> <span class="n">is_sequence</span><span class="p">(</span><span class="n">solutions</span><span class="p">):</span>
<a id="__codelineno-0-4009" name="__codelineno-0-4009"></a>        <span class="n">num_solutions</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">solutions</span><span class="p">)</span>
<a id="__codelineno-0-4010" name="__codelineno-0-4010"></a>    <span class="n">total_eval_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-4011" name="__codelineno-0-4011"></a>
<a id="__codelineno-0-4012" name="__codelineno-0-4012"></a>    <span class="n">num_objs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_objs</span>
<a id="__codelineno-0-4013" name="__codelineno-0-4013"></a>    <span class="n">num_data</span> <span class="o">=</span> <span class="n">total_eval_width</span> <span class="o">-</span> <span class="n">num_objs</span>
<a id="__codelineno-0-4014" name="__codelineno-0-4014"></a>
<a id="__codelineno-0-4015" name="__codelineno-0-4015"></a>    <span class="k">if</span> <span class="n">evals</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-4016" name="__codelineno-0-4016"></a>        <span class="k">if</span> <span class="n">num_objs</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-4017" name="__codelineno-0-4017"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4018" name="__codelineno-0-4018"></a>                <span class="sa">f</span><span class="s2">&quot;The method `set_evals(...)` was given a 1-dimensional tensor.&quot;</span>
<a id="__codelineno-0-4019" name="__codelineno-0-4019"></a>                <span class="sa">f</span><span class="s2">&quot; However, the number of objectives of the problem at hand is </span><span class="si">{</span><span class="n">num_objs</span><span class="si">}</span><span class="s2">, not 1.&quot;</span>
<a id="__codelineno-0-4020" name="__codelineno-0-4020"></a>                <span class="sa">f</span><span class="s2">&quot; 1-dimensional evaluation tensors can only be accepted if the problem&quot;</span>
<a id="__codelineno-0-4021" name="__codelineno-0-4021"></a>                <span class="sa">f</span><span class="s2">&quot; has one objective.&quot;</span>
<a id="__codelineno-0-4022" name="__codelineno-0-4022"></a>            <span class="p">)</span>
<a id="__codelineno-0-4023" name="__codelineno-0-4023"></a>        <span class="n">evals</span> <span class="o">=</span> <span class="n">evals</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-4024" name="__codelineno-0-4024"></a>    <span class="k">elif</span> <span class="n">evals</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-4025" name="__codelineno-0-4025"></a>        <span class="k">pass</span>  <span class="c1"># nothing to do here</span>
<a id="__codelineno-0-4026" name="__codelineno-0-4026"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4027" name="__codelineno-0-4027"></a>        <span class="k">if</span> <span class="n">num_objs</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-4028" name="__codelineno-0-4028"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4029" name="__codelineno-0-4029"></a>                <span class="sa">f</span><span class="s2">&quot;The method `set_evals(...)` received a tensor with </span><span class="si">{</span><span class="n">evals</span><span class="o">.</span><span class="n">ndim</span><span class="si">}</span><span class="s2"> dimensions.&quot;</span>
<a id="__codelineno-0-4030" name="__codelineno-0-4030"></a>                <span class="sa">f</span><span class="s2">&quot; Since the problem at hand has only one objective,&quot;</span>
<a id="__codelineno-0-4031" name="__codelineno-0-4031"></a>                <span class="sa">f</span><span class="s2">&quot; 1-dimensional or 2-dimensional tensors are acceptable, but not </span><span class="si">{</span><span class="n">evals</span><span class="o">.</span><span class="n">ndim</span><span class="si">}</span><span class="s2">-dimensional ones.&quot;</span>
<a id="__codelineno-0-4032" name="__codelineno-0-4032"></a>            <span class="p">)</span>
<a id="__codelineno-0-4033" name="__codelineno-0-4033"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4034" name="__codelineno-0-4034"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4035" name="__codelineno-0-4035"></a>                <span class="sa">f</span><span class="s2">&quot;The method `set_evals(...)` received a tensor with </span><span class="si">{</span><span class="n">evals</span><span class="o">.</span><span class="n">ndim</span><span class="si">}</span><span class="s2"> dimensions.&quot;</span>
<a id="__codelineno-0-4036" name="__codelineno-0-4036"></a>                <span class="sa">f</span><span class="s2">&quot; Since the problem at hand has more than one objective (there are </span><span class="si">{</span><span class="n">num_objs</span><span class="si">}</span><span class="s2"> objectives),&quot;</span>
<a id="__codelineno-0-4037" name="__codelineno-0-4037"></a>                <span class="sa">f</span><span class="s2">&quot; only 2-dimensional tensors are acceptable, not </span><span class="si">{</span><span class="n">evals</span><span class="o">.</span><span class="n">ndim</span><span class="si">}</span><span class="s2">-dimensional ones.&quot;</span>
<a id="__codelineno-0-4038" name="__codelineno-0-4038"></a>            <span class="p">)</span>
<a id="__codelineno-0-4039" name="__codelineno-0-4039"></a>
<a id="__codelineno-0-4040" name="__codelineno-0-4040"></a>    <span class="p">[</span><span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">]</span> <span class="o">=</span> <span class="n">evals</span><span class="o">.</span><span class="n">shape</span>
<a id="__codelineno-0-4041" name="__codelineno-0-4041"></a>
<a id="__codelineno-0-4042" name="__codelineno-0-4042"></a>    <span class="k">if</span> <span class="n">nrows</span> <span class="o">!=</span> <span class="n">num_solutions</span><span class="p">:</span>
<a id="__codelineno-0-4043" name="__codelineno-0-4043"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4044" name="__codelineno-0-4044"></a>            <span class="sa">f</span><span class="s2">&quot;Trying to set the evaluations of </span><span class="si">{</span><span class="n">num_solutions</span><span class="si">}</span><span class="s2"> solutions, but the given tensor has </span><span class="si">{</span><span class="n">nrows</span><span class="si">}</span><span class="s2"> rows.&quot;</span>
<a id="__codelineno-0-4045" name="__codelineno-0-4045"></a>        <span class="p">)</span>
<a id="__codelineno-0-4046" name="__codelineno-0-4046"></a>
<a id="__codelineno-0-4047" name="__codelineno-0-4047"></a>    <span class="k">if</span> <span class="n">eval_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-4048" name="__codelineno-0-4048"></a>        <span class="k">if</span> <span class="n">eval_data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-4049" name="__codelineno-0-4049"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4050" name="__codelineno-0-4050"></a>                <span class="sa">f</span><span class="s2">&quot;The `eval_data` argument was expected as a 2-dimensional tensor.&quot;</span>
<a id="__codelineno-0-4051" name="__codelineno-0-4051"></a>                <span class="sa">f</span><span class="s2">&quot; However, the shape of the given `eval_data` is </span><span class="si">{</span><span class="n">eval_data</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-4052" name="__codelineno-0-4052"></a>            <span class="p">)</span>
<a id="__codelineno-0-4053" name="__codelineno-0-4053"></a>        <span class="k">if</span> <span class="n">eval_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">num_data</span><span class="p">:</span>
<a id="__codelineno-0-4054" name="__codelineno-0-4054"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4055" name="__codelineno-0-4055"></a>                <span class="sa">f</span><span class="s2">&quot;The `eval_data` argument was expected to have </span><span class="si">{</span><span class="n">num_data</span><span class="si">}</span><span class="s2"> columns.&quot;</span>
<a id="__codelineno-0-4056" name="__codelineno-0-4056"></a>                <span class="sa">f</span><span class="s2">&quot; However, the received `eval_data` has the shape: </span><span class="si">{</span><span class="n">eval_data</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-4057" name="__codelineno-0-4057"></a>            <span class="p">)</span>
<a id="__codelineno-0-4058" name="__codelineno-0-4058"></a>        <span class="k">if</span> <span class="n">ncols</span> <span class="o">!=</span> <span class="n">num_objs</span><span class="p">:</span>
<a id="__codelineno-0-4059" name="__codelineno-0-4059"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4060" name="__codelineno-0-4060"></a>                <span class="sa">f</span><span class="s2">&quot;The method `set_evals(...)` was used with `evals` and `eval_data` arguments.&quot;</span>
<a id="__codelineno-0-4061" name="__codelineno-0-4061"></a>                <span class="sa">f</span><span class="s2">&quot; When both of these arguments are provided, `evals` is expected either as a 1-dimensional tensor&quot;</span>
<a id="__codelineno-0-4062" name="__codelineno-0-4062"></a>                <span class="sa">f</span><span class="s2">&quot; (for single-objective cases only), or as a tensor of shape (n, m) where n is the number of&quot;</span>
<a id="__codelineno-0-4063" name="__codelineno-0-4063"></a>                <span class="sa">f</span><span class="s2">&quot; solutions, and m is the number of objectives.&quot;</span>
<a id="__codelineno-0-4064" name="__codelineno-0-4064"></a>                <span class="sa">f</span><span class="s2">&quot; However, while the problem at hand has </span><span class="si">{</span><span class="n">num_objs</span><span class="si">}</span><span class="s2"> objectives,&quot;</span>
<a id="__codelineno-0-4065" name="__codelineno-0-4065"></a>                <span class="sa">f</span><span class="s2">&quot; the `evals` tensor has </span><span class="si">{</span><span class="n">ncols</span><span class="si">}</span><span class="s2"> columns.&quot;</span>
<a id="__codelineno-0-4066" name="__codelineno-0-4066"></a>            <span class="p">)</span>
<a id="__codelineno-0-4067" name="__codelineno-0-4067"></a>        <span class="k">if</span> <span class="n">evals</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">eval_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
<a id="__codelineno-0-4068" name="__codelineno-0-4068"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4069" name="__codelineno-0-4069"></a>                <span class="sa">f</span><span class="s2">&quot;The provided `evals` and `eval_data` tensors have incompatible shapes.&quot;</span>
<a id="__codelineno-0-4070" name="__codelineno-0-4070"></a>                <span class="sa">f</span><span class="s2">&quot; Shape of `evals`: </span><span class="si">{</span><span class="n">evals</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">,&quot;</span>
<a id="__codelineno-0-4071" name="__codelineno-0-4071"></a>                <span class="sa">f</span><span class="s2">&quot; shape of `eval_data`: </span><span class="si">{</span><span class="n">eval_data</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-4072" name="__codelineno-0-4072"></a>            <span class="p">)</span>
<a id="__codelineno-0-4073" name="__codelineno-0-4073"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[</span><span class="n">solutions</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">hstack</span><span class="p">([</span><span class="n">evals</span><span class="p">,</span> <span class="n">eval_data</span><span class="p">])</span>
<a id="__codelineno-0-4074" name="__codelineno-0-4074"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4075" name="__codelineno-0-4075"></a>        <span class="k">if</span> <span class="n">ncols</span> <span class="o">==</span> <span class="n">num_objs</span><span class="p">:</span>
<a id="__codelineno-0-4076" name="__codelineno-0-4076"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[</span><span class="n">solutions</span><span class="p">,</span> <span class="p">:</span><span class="n">num_objs</span><span class="p">]</span> <span class="o">=</span> <span class="n">evals</span>
<a id="__codelineno-0-4077" name="__codelineno-0-4077"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[</span><span class="n">solutions</span><span class="p">,</span> <span class="n">num_objs</span><span class="p">:]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;nan&quot;</span><span class="p">)</span>
<a id="__codelineno-0-4078" name="__codelineno-0-4078"></a>        <span class="k">elif</span> <span class="n">ncols</span> <span class="o">==</span> <span class="n">total_eval_width</span><span class="p">:</span>
<a id="__codelineno-0-4079" name="__codelineno-0-4079"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[</span><span class="n">solutions</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">evals</span>
<a id="__codelineno-0-4080" name="__codelineno-0-4080"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4081" name="__codelineno-0-4081"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4082" name="__codelineno-0-4082"></a>                <span class="sa">f</span><span class="s2">&quot;The method `set_evals(...)` received a tensor with </span><span class="si">{</span><span class="n">ncols</span><span class="si">}</span><span class="s2"> columns, which is incompatible.&quot;</span>
<a id="__codelineno-0-4083" name="__codelineno-0-4083"></a>                <span class="sa">f</span><span class="s2">&quot; Acceptable number of columns are: </span><span class="si">{</span><span class="n">num_objs</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-4084" name="__codelineno-0-4084"></a>                <span class="sa">f</span><span class="s2">&quot; (for setting only the objective-associated evaluations and leave extra evaluation data as NaN), or&quot;</span>
<a id="__codelineno-0-4085" name="__codelineno-0-4085"></a>                <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">total_eval_width</span><span class="si">}</span><span class="s2"> (for setting both objective-associated evaluations and extra evaluation data).&quot;</span>
<a id="__codelineno-0-4086" name="__codelineno-0-4086"></a>            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.SolutionBatch.set_values" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_values</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">solutions</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#evotorch.SolutionBatch.set_values" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Set the decision values of the solutions.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>values</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New decision values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>solutions</code>
            </td>
            <td>
                  <code><span title="evotorch.core.MaybeIndicesOrSlice">MaybeIndicesOrSlice</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optionally a list of integer indices or an instance
of <code>slice(...)</code>, to be used if one wishes to set the
decision values of only some of the solutions.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3949">3949</a></span>
<span class="normal"><a href="#__codelineno-0-3950">3950</a></span>
<span class="normal"><a href="#__codelineno-0-3951">3951</a></span>
<span class="normal"><a href="#__codelineno-0-3952">3952</a></span>
<span class="normal"><a href="#__codelineno-0-3953">3953</a></span>
<span class="normal"><a href="#__codelineno-0-3954">3954</a></span>
<span class="normal"><a href="#__codelineno-0-3955">3955</a></span>
<span class="normal"><a href="#__codelineno-0-3956">3956</a></span>
<span class="normal"><a href="#__codelineno-0-3957">3957</a></span>
<span class="normal"><a href="#__codelineno-0-3958">3958</a></span>
<span class="normal"><a href="#__codelineno-0-3959">3959</a></span>
<span class="normal"><a href="#__codelineno-0-3960">3960</a></span>
<span class="normal"><a href="#__codelineno-0-3961">3961</a></span>
<span class="normal"><a href="#__codelineno-0-3962">3962</a></span>
<span class="normal"><a href="#__codelineno-0-3963">3963</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-3949" name="__codelineno-0-3949"></a><span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-3950" name="__codelineno-0-3950"></a><span class="k">def</span><span class="w"> </span><span class="nf">set_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">solutions</span><span class="p">:</span> <span class="n">MaybeIndicesOrSlice</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-3951" name="__codelineno-0-3951"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-3952" name="__codelineno-0-3952"></a><span class="sd">    Set the decision values of the solutions.</span>
<a id="__codelineno-0-3953" name="__codelineno-0-3953"></a>
<a id="__codelineno-0-3954" name="__codelineno-0-3954"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-3955" name="__codelineno-0-3955"></a><span class="sd">        values: New decision values.</span>
<a id="__codelineno-0-3956" name="__codelineno-0-3956"></a><span class="sd">        solutions: Optionally a list of integer indices or an instance</span>
<a id="__codelineno-0-3957" name="__codelineno-0-3957"></a><span class="sd">            of `slice(...)`, to be used if one wishes to set the</span>
<a id="__codelineno-0-3958" name="__codelineno-0-3958"></a><span class="sd">            decision values of only some of the solutions.</span>
<a id="__codelineno-0-3959" name="__codelineno-0-3959"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-3960" name="__codelineno-0-3960"></a>    <span class="k">if</span> <span class="n">solutions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3961" name="__codelineno-0-3961"></a>        <span class="n">solutions</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-3962" name="__codelineno-0-3962"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="n">solutions</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span>
<a id="__codelineno-0-3963" name="__codelineno-0-3963"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[</span><span class="n">solutions</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;nan&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.SolutionBatch.split" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">split</span><span class="p">(</span><span class="n">num_pieces</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">max_size</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#evotorch.SolutionBatch.split" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Split this SolutionBatch into a specified number of pieces,
or into an unspecified number of pieces where the maximum
size of each piece is specified.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>num_pieces</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Can be provided as an integer n, which means
that the this SolutionBatch will be split to n pieces.
Alternatively, can be left as None if the user intends
to set max_size as an integer instead.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_size</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Can be provided as an integer n, which means
that this SolutionBatch will be split to multiple
pieces, each piece containing n solutions at most.
Alternatively, can be left as None if the user intends
to set num_pieces as an integer instead.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4348">4348</a></span>
<span class="normal"><a href="#__codelineno-0-4349">4349</a></span>
<span class="normal"><a href="#__codelineno-0-4350">4350</a></span>
<span class="normal"><a href="#__codelineno-0-4351">4351</a></span>
<span class="normal"><a href="#__codelineno-0-4352">4352</a></span>
<span class="normal"><a href="#__codelineno-0-4353">4353</a></span>
<span class="normal"><a href="#__codelineno-0-4354">4354</a></span>
<span class="normal"><a href="#__codelineno-0-4355">4355</a></span>
<span class="normal"><a href="#__codelineno-0-4356">4356</a></span>
<span class="normal"><a href="#__codelineno-0-4357">4357</a></span>
<span class="normal"><a href="#__codelineno-0-4358">4358</a></span>
<span class="normal"><a href="#__codelineno-0-4359">4359</a></span>
<span class="normal"><a href="#__codelineno-0-4360">4360</a></span>
<span class="normal"><a href="#__codelineno-0-4361">4361</a></span>
<span class="normal"><a href="#__codelineno-0-4362">4362</a></span>
<span class="normal"><a href="#__codelineno-0-4363">4363</a></span>
<span class="normal"><a href="#__codelineno-0-4364">4364</a></span>
<span class="normal"><a href="#__codelineno-0-4365">4365</a></span>
<span class="normal"><a href="#__codelineno-0-4366">4366</a></span>
<span class="normal"><a href="#__codelineno-0-4367">4367</a></span>
<span class="normal"><a href="#__codelineno-0-4368">4368</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4348" name="__codelineno-0-4348"></a><span class="k">def</span><span class="w"> </span><span class="nf">split</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_pieces</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">max_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SolutionBatchPieces&quot;</span><span class="p">:</span>
<a id="__codelineno-0-4349" name="__codelineno-0-4349"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Split this SolutionBatch into a specified number of pieces,</span>
<a id="__codelineno-0-4350" name="__codelineno-0-4350"></a><span class="sd">    or into an unspecified number of pieces where the maximum</span>
<a id="__codelineno-0-4351" name="__codelineno-0-4351"></a><span class="sd">    size of each piece is specified.</span>
<a id="__codelineno-0-4352" name="__codelineno-0-4352"></a>
<a id="__codelineno-0-4353" name="__codelineno-0-4353"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-4354" name="__codelineno-0-4354"></a><span class="sd">        num_pieces: Can be provided as an integer n, which means</span>
<a id="__codelineno-0-4355" name="__codelineno-0-4355"></a><span class="sd">            that the this SolutionBatch will be split to n pieces.</span>
<a id="__codelineno-0-4356" name="__codelineno-0-4356"></a><span class="sd">            Alternatively, can be left as None if the user intends</span>
<a id="__codelineno-0-4357" name="__codelineno-0-4357"></a><span class="sd">            to set max_size as an integer instead.</span>
<a id="__codelineno-0-4358" name="__codelineno-0-4358"></a><span class="sd">        max_size: Can be provided as an integer n, which means</span>
<a id="__codelineno-0-4359" name="__codelineno-0-4359"></a><span class="sd">            that this SolutionBatch will be split to multiple</span>
<a id="__codelineno-0-4360" name="__codelineno-0-4360"></a><span class="sd">            pieces, each piece containing n solutions at most.</span>
<a id="__codelineno-0-4361" name="__codelineno-0-4361"></a><span class="sd">            Alternatively, can be left as None if the user intends</span>
<a id="__codelineno-0-4362" name="__codelineno-0-4362"></a><span class="sd">            to set num_pieces as an integer instead.</span>
<a id="__codelineno-0-4363" name="__codelineno-0-4363"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-4364" name="__codelineno-0-4364"></a><span class="sd">        A SolutionBatchPieces object, which behaves like a list of</span>
<a id="__codelineno-0-4365" name="__codelineno-0-4365"></a><span class="sd">        SolutionBatch objects, each object in the list being a</span>
<a id="__codelineno-0-4366" name="__codelineno-0-4366"></a><span class="sd">        slice view of this SolutionBatch object.</span>
<a id="__codelineno-0-4367" name="__codelineno-0-4367"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4368" name="__codelineno-0-4368"></a>    <span class="k">return</span> <span class="n">SolutionBatchPieces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_pieces</span><span class="o">=</span><span class="n">num_pieces</span><span class="p">,</span> <span class="n">max_size</span><span class="o">=</span><span class="n">max_size</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.SolutionBatch.take" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">take</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span></code>

<a href="#evotorch.SolutionBatch.take" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Make a new SolutionBatch containing the specified solutions.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>indices</code>
            </td>
            <td>
                  <code><span title="typing.Iterable">Iterable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A sequence of solution indices. These specified
solutions will make it to the newly made SolutionBatch.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4391">4391</a></span>
<span class="normal"><a href="#__codelineno-0-4392">4392</a></span>
<span class="normal"><a href="#__codelineno-0-4393">4393</a></span>
<span class="normal"><a href="#__codelineno-0-4394">4394</a></span>
<span class="normal"><a href="#__codelineno-0-4395">4395</a></span>
<span class="normal"><a href="#__codelineno-0-4396">4396</a></span>
<span class="normal"><a href="#__codelineno-0-4397">4397</a></span>
<span class="normal"><a href="#__codelineno-0-4398">4398</a></span>
<span class="normal"><a href="#__codelineno-0-4399">4399</a></span>
<span class="normal"><a href="#__codelineno-0-4400">4400</a></span>
<span class="normal"><a href="#__codelineno-0-4401">4401</a></span>
<span class="normal"><a href="#__codelineno-0-4402">4402</a></span>
<span class="normal"><a href="#__codelineno-0-4403">4403</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4391" name="__codelineno-0-4391"></a><span class="k">def</span><span class="w"> </span><span class="nf">take</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">indices</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SolutionBatch&quot;</span><span class="p">:</span>
<a id="__codelineno-0-4392" name="__codelineno-0-4392"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Make a new SolutionBatch containing the specified solutions.</span>
<a id="__codelineno-0-4393" name="__codelineno-0-4393"></a>
<a id="__codelineno-0-4394" name="__codelineno-0-4394"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-4395" name="__codelineno-0-4395"></a><span class="sd">        indices: A sequence of solution indices. These specified</span>
<a id="__codelineno-0-4396" name="__codelineno-0-4396"></a><span class="sd">            solutions will make it to the newly made SolutionBatch.</span>
<a id="__codelineno-0-4397" name="__codelineno-0-4397"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-4398" name="__codelineno-0-4398"></a><span class="sd">        The new SolutionBatch.</span>
<a id="__codelineno-0-4399" name="__codelineno-0-4399"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4400" name="__codelineno-0-4400"></a>    <span class="k">if</span> <span class="n">is_sequence</span><span class="p">(</span><span class="n">indices</span><span class="p">):</span>
<a id="__codelineno-0-4401" name="__codelineno-0-4401"></a>        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">slice_of</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">indices</span><span class="p">))</span>
<a id="__codelineno-0-4402" name="__codelineno-0-4402"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4403" name="__codelineno-0-4403"></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Expected a sequence of solution indices, but got a `{type(indices)}`&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.SolutionBatch.take_best" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">take_best</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">obj_index</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#evotorch.SolutionBatch.take_best" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Make a new SolutionBatch containing the best <code>n</code> solutions.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>n</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of solutions which will be taken.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>obj_index</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Objective index according to which the best ones
will be taken.
If <code>obj_index</code> is left as None and the problem is multi-
objective, then the solutions will be ranked according to
their fronts, and according how crowding they are, and then
the topmost <code>n</code> solutions will be taken.
If <code>obj_index</code> is left as None and the problem is single-
objective, then that single objective will be taken as the
ranking criterion.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4405">4405</a></span>
<span class="normal"><a href="#__codelineno-0-4406">4406</a></span>
<span class="normal"><a href="#__codelineno-0-4407">4407</a></span>
<span class="normal"><a href="#__codelineno-0-4408">4408</a></span>
<span class="normal"><a href="#__codelineno-0-4409">4409</a></span>
<span class="normal"><a href="#__codelineno-0-4410">4410</a></span>
<span class="normal"><a href="#__codelineno-0-4411">4411</a></span>
<span class="normal"><a href="#__codelineno-0-4412">4412</a></span>
<span class="normal"><a href="#__codelineno-0-4413">4413</a></span>
<span class="normal"><a href="#__codelineno-0-4414">4414</a></span>
<span class="normal"><a href="#__codelineno-0-4415">4415</a></span>
<span class="normal"><a href="#__codelineno-0-4416">4416</a></span>
<span class="normal"><a href="#__codelineno-0-4417">4417</a></span>
<span class="normal"><a href="#__codelineno-0-4418">4418</a></span>
<span class="normal"><a href="#__codelineno-0-4419">4419</a></span>
<span class="normal"><a href="#__codelineno-0-4420">4420</a></span>
<span class="normal"><a href="#__codelineno-0-4421">4421</a></span>
<span class="normal"><a href="#__codelineno-0-4422">4422</a></span>
<span class="normal"><a href="#__codelineno-0-4423">4423</a></span>
<span class="normal"><a href="#__codelineno-0-4424">4424</a></span>
<span class="normal"><a href="#__codelineno-0-4425">4425</a></span>
<span class="normal"><a href="#__codelineno-0-4426">4426</a></span>
<span class="normal"><a href="#__codelineno-0-4427">4427</a></span>
<span class="normal"><a href="#__codelineno-0-4428">4428</a></span>
<span class="normal"><a href="#__codelineno-0-4429">4429</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4405" name="__codelineno-0-4405"></a><span class="k">def</span><span class="w"> </span><span class="nf">take_best</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SolutionBatch&quot;</span><span class="p">:</span>
<a id="__codelineno-0-4406" name="__codelineno-0-4406"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Make a new SolutionBatch containing the best `n` solutions.</span>
<a id="__codelineno-0-4407" name="__codelineno-0-4407"></a>
<a id="__codelineno-0-4408" name="__codelineno-0-4408"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-4409" name="__codelineno-0-4409"></a><span class="sd">        n: Number of solutions which will be taken.</span>
<a id="__codelineno-0-4410" name="__codelineno-0-4410"></a><span class="sd">        obj_index: Objective index according to which the best ones</span>
<a id="__codelineno-0-4411" name="__codelineno-0-4411"></a><span class="sd">            will be taken.</span>
<a id="__codelineno-0-4412" name="__codelineno-0-4412"></a><span class="sd">            If `obj_index` is left as None and the problem is multi-</span>
<a id="__codelineno-0-4413" name="__codelineno-0-4413"></a><span class="sd">            objective, then the solutions will be ranked according to</span>
<a id="__codelineno-0-4414" name="__codelineno-0-4414"></a><span class="sd">            their fronts, and according how crowding they are, and then</span>
<a id="__codelineno-0-4415" name="__codelineno-0-4415"></a><span class="sd">            the topmost `n` solutions will be taken.</span>
<a id="__codelineno-0-4416" name="__codelineno-0-4416"></a><span class="sd">            If `obj_index` is left as None and the problem is single-</span>
<a id="__codelineno-0-4417" name="__codelineno-0-4417"></a><span class="sd">            objective, then that single objective will be taken as the</span>
<a id="__codelineno-0-4418" name="__codelineno-0-4418"></a><span class="sd">            ranking criterion.</span>
<a id="__codelineno-0-4419" name="__codelineno-0-4419"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-4420" name="__codelineno-0-4420"></a><span class="sd">        The new SolutionBatch.</span>
<a id="__codelineno-0-4421" name="__codelineno-0-4421"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4422" name="__codelineno-0-4422"></a>    <span class="k">if</span> <span class="n">obj_index</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_objs</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-4423" name="__codelineno-0-4423"></a>        <span class="n">ranks</span><span class="p">,</span> <span class="n">crowdsort_ranks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_pareto_ranks</span><span class="p">(</span><span class="n">crowdsort</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-4424" name="__codelineno-0-4424"></a>        <span class="c1"># Combine the ranks, such that solutions with a better crowdsort rank are weighted above solutions with the same pareto rank **only**</span>
<a id="__codelineno-0-4425" name="__codelineno-0-4425"></a>        <span class="n">combined_ranks</span> <span class="o">=</span> <span class="n">ranks</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">float</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="n">crowdsort_ranks</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">float</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<a id="__codelineno-0-4426" name="__codelineno-0-4426"></a>        <span class="n">indices</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">combined_ranks</span><span class="p">)[:</span><span class="n">n</span><span class="p">]</span>
<a id="__codelineno-0-4427" name="__codelineno-0-4427"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4428" name="__codelineno-0-4428"></a>        <span class="n">indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">obj_index</span><span class="p">)[:</span><span class="n">n</span><span class="p">]</span>
<a id="__codelineno-0-4429" name="__codelineno-0-4429"></a>    <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">slice_of</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">indices</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.SolutionBatch.to" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span></code>

<a href="#evotorch.SolutionBatch.to" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the counterpart of this SolutionBatch on the new device.</p>
<p>If the specified device is the device of this SolutionBatch,
then this SolutionBatch itself is returned.
If the specified device is a different device, then a clone
of this SolutionBatch on this different device is first
created, and then this new clone is returned.</p>
<p>Please note that the <code>to(...)</code> method is not supported when
the dtype is <code>object</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>device</code>
            </td>
            <td>
                  <code><span title="evotorch.tools.Device">Device</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The device on which the resulting SolutionBatch
will be stored.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4452">4452</a></span>
<span class="normal"><a href="#__codelineno-0-4453">4453</a></span>
<span class="normal"><a href="#__codelineno-0-4454">4454</a></span>
<span class="normal"><a href="#__codelineno-0-4455">4455</a></span>
<span class="normal"><a href="#__codelineno-0-4456">4456</a></span>
<span class="normal"><a href="#__codelineno-0-4457">4457</a></span>
<span class="normal"><a href="#__codelineno-0-4458">4458</a></span>
<span class="normal"><a href="#__codelineno-0-4459">4459</a></span>
<span class="normal"><a href="#__codelineno-0-4460">4460</a></span>
<span class="normal"><a href="#__codelineno-0-4461">4461</a></span>
<span class="normal"><a href="#__codelineno-0-4462">4462</a></span>
<span class="normal"><a href="#__codelineno-0-4463">4463</a></span>
<span class="normal"><a href="#__codelineno-0-4464">4464</a></span>
<span class="normal"><a href="#__codelineno-0-4465">4465</a></span>
<span class="normal"><a href="#__codelineno-0-4466">4466</a></span>
<span class="normal"><a href="#__codelineno-0-4467">4467</a></span>
<span class="normal"><a href="#__codelineno-0-4468">4468</a></span>
<span class="normal"><a href="#__codelineno-0-4469">4469</a></span>
<span class="normal"><a href="#__codelineno-0-4470">4470</a></span>
<span class="normal"><a href="#__codelineno-0-4471">4471</a></span>
<span class="normal"><a href="#__codelineno-0-4472">4472</a></span>
<span class="normal"><a href="#__codelineno-0-4473">4473</a></span>
<span class="normal"><a href="#__codelineno-0-4474">4474</a></span>
<span class="normal"><a href="#__codelineno-0-4475">4475</a></span>
<span class="normal"><a href="#__codelineno-0-4476">4476</a></span>
<span class="normal"><a href="#__codelineno-0-4477">4477</a></span>
<span class="normal"><a href="#__codelineno-0-4478">4478</a></span>
<span class="normal"><a href="#__codelineno-0-4479">4479</a></span>
<span class="normal"><a href="#__codelineno-0-4480">4480</a></span>
<span class="normal"><a href="#__codelineno-0-4481">4481</a></span>
<span class="normal"><a href="#__codelineno-0-4482">4482</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4452" name="__codelineno-0-4452"></a><span class="k">def</span><span class="w"> </span><span class="nf">to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device</span><span class="p">:</span> <span class="n">Device</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SolutionBatch&quot;</span><span class="p">:</span>
<a id="__codelineno-0-4453" name="__codelineno-0-4453"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4454" name="__codelineno-0-4454"></a><span class="sd">    Get the counterpart of this SolutionBatch on the new device.</span>
<a id="__codelineno-0-4455" name="__codelineno-0-4455"></a>
<a id="__codelineno-0-4456" name="__codelineno-0-4456"></a><span class="sd">    If the specified device is the device of this SolutionBatch,</span>
<a id="__codelineno-0-4457" name="__codelineno-0-4457"></a><span class="sd">    then this SolutionBatch itself is returned.</span>
<a id="__codelineno-0-4458" name="__codelineno-0-4458"></a><span class="sd">    If the specified device is a different device, then a clone</span>
<a id="__codelineno-0-4459" name="__codelineno-0-4459"></a><span class="sd">    of this SolutionBatch on this different device is first</span>
<a id="__codelineno-0-4460" name="__codelineno-0-4460"></a><span class="sd">    created, and then this new clone is returned.</span>
<a id="__codelineno-0-4461" name="__codelineno-0-4461"></a>
<a id="__codelineno-0-4462" name="__codelineno-0-4462"></a><span class="sd">    Please note that the `to(...)` method is not supported when</span>
<a id="__codelineno-0-4463" name="__codelineno-0-4463"></a><span class="sd">    the dtype is `object`.</span>
<a id="__codelineno-0-4464" name="__codelineno-0-4464"></a>
<a id="__codelineno-0-4465" name="__codelineno-0-4465"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-4466" name="__codelineno-0-4466"></a><span class="sd">        device: The device on which the resulting SolutionBatch</span>
<a id="__codelineno-0-4467" name="__codelineno-0-4467"></a><span class="sd">            will be stored.</span>
<a id="__codelineno-0-4468" name="__codelineno-0-4468"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-4469" name="__codelineno-0-4469"></a><span class="sd">        The SolutionBatch on the specified device.</span>
<a id="__codelineno-0-4470" name="__codelineno-0-4470"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4471" name="__codelineno-0-4471"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">,</span> <span class="n">ObjectArray</span><span class="p">):</span>
<a id="__codelineno-0-4472" name="__codelineno-0-4472"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The `to(...)` method is not supported when the dtype is `object`.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-4473" name="__codelineno-0-4473"></a>
<a id="__codelineno-0-4474" name="__codelineno-0-4474"></a>    <span class="n">device</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-4475" name="__codelineno-0-4475"></a>    <span class="k">if</span> <span class="n">device</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">:</span>
<a id="__codelineno-0-4476" name="__codelineno-0-4476"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-0-4477" name="__codelineno-0-4477"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4478" name="__codelineno-0-4478"></a>        <span class="n">new_batch</span> <span class="o">=</span> <span class="n">SolutionBatch</span><span class="p">(</span><span class="n">like</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">,</span> <span class="n">empty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-4479" name="__codelineno-0-4479"></a>        <span class="k">with</span> <span class="n">torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">():</span>
<a id="__codelineno-0-4480" name="__codelineno-0-4480"></a>            <span class="n">new_batch</span><span class="o">.</span><span class="n">_data</span><span class="p">[:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-4481" name="__codelineno-0-4481"></a>            <span class="n">new_batch</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-4482" name="__codelineno-0-4482"></a>        <span class="k">return</span> <span class="n">new_batch</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.SolutionBatch.utility" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">utility</span><span class="p">(</span><span class="n">obj_index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">ranking_method</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">check_nans</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">using_values_dtype</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#evotorch.SolutionBatch.utility" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return numeric scores for each solution.</p>
<p>Utility scores are different from evaluation results,
in the sense that utilities monotonically increase from
bad solutions to good solutions, regardless of the
objective sense.</p>
<p><strong>If ranking method is passed as None:</strong>
if the objective sense is 'max', the evaluation results are returned
as the utility scores; otherwise, if the objective sense is 'min',
the evaluation results multiplied by -1 are returned as the
utility scores.</p>
<p><strong>If the name of a ranking method is given</strong> (e.g. 'centered'):
then the solutions are ranked (best solutions having the
highest rank), and those ranks are returned as the utility
scores.</p>
<p><strong>If an objective index is not provided:</strong> (i.e. passed as None)
if the problem is multi-objective, the utility scores
for each objective is given, in a tensor shaped (n, m),
n being the number of solutions and m being the number
of objectives; otherwise, if the problem is single-objective,
the utility scores for each objective is given in a 1-dimensional
tensor of length n, n being the number of solutions.</p>
<p><strong>If an objective index is provided as an int:</strong>
the utility scores are returned in a 1-dimensional tensor
of length n, n being the number of solutions.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>obj_index</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Expected as None, or as an integer.
In the single-objective case, None is equivalent to 0.
In the multi-objective case, None means "for each
objective".</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>ranking_method</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the utility scores are to be generated
according to a certain ranking method, pass here the name
of that ranking method as a str (e.g. 'centered').</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>check_nans</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Check for nan (not-a-number) values in the
evaluation results, which is an indication of
unevaluated solutions.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>using_values_dtype</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, the utility values will be returned
using the dtype of the decision values.
If False, the utility values will be returned using the dtype
of the evaluation data.
The default is False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4207">4207</a></span>
<span class="normal"><a href="#__codelineno-0-4208">4208</a></span>
<span class="normal"><a href="#__codelineno-0-4209">4209</a></span>
<span class="normal"><a href="#__codelineno-0-4210">4210</a></span>
<span class="normal"><a href="#__codelineno-0-4211">4211</a></span>
<span class="normal"><a href="#__codelineno-0-4212">4212</a></span>
<span class="normal"><a href="#__codelineno-0-4213">4213</a></span>
<span class="normal"><a href="#__codelineno-0-4214">4214</a></span>
<span class="normal"><a href="#__codelineno-0-4215">4215</a></span>
<span class="normal"><a href="#__codelineno-0-4216">4216</a></span>
<span class="normal"><a href="#__codelineno-0-4217">4217</a></span>
<span class="normal"><a href="#__codelineno-0-4218">4218</a></span>
<span class="normal"><a href="#__codelineno-0-4219">4219</a></span>
<span class="normal"><a href="#__codelineno-0-4220">4220</a></span>
<span class="normal"><a href="#__codelineno-0-4221">4221</a></span>
<span class="normal"><a href="#__codelineno-0-4222">4222</a></span>
<span class="normal"><a href="#__codelineno-0-4223">4223</a></span>
<span class="normal"><a href="#__codelineno-0-4224">4224</a></span>
<span class="normal"><a href="#__codelineno-0-4225">4225</a></span>
<span class="normal"><a href="#__codelineno-0-4226">4226</a></span>
<span class="normal"><a href="#__codelineno-0-4227">4227</a></span>
<span class="normal"><a href="#__codelineno-0-4228">4228</a></span>
<span class="normal"><a href="#__codelineno-0-4229">4229</a></span>
<span class="normal"><a href="#__codelineno-0-4230">4230</a></span>
<span class="normal"><a href="#__codelineno-0-4231">4231</a></span>
<span class="normal"><a href="#__codelineno-0-4232">4232</a></span>
<span class="normal"><a href="#__codelineno-0-4233">4233</a></span>
<span class="normal"><a href="#__codelineno-0-4234">4234</a></span>
<span class="normal"><a href="#__codelineno-0-4235">4235</a></span>
<span class="normal"><a href="#__codelineno-0-4236">4236</a></span>
<span class="normal"><a href="#__codelineno-0-4237">4237</a></span>
<span class="normal"><a href="#__codelineno-0-4238">4238</a></span>
<span class="normal"><a href="#__codelineno-0-4239">4239</a></span>
<span class="normal"><a href="#__codelineno-0-4240">4240</a></span>
<span class="normal"><a href="#__codelineno-0-4241">4241</a></span>
<span class="normal"><a href="#__codelineno-0-4242">4242</a></span>
<span class="normal"><a href="#__codelineno-0-4243">4243</a></span>
<span class="normal"><a href="#__codelineno-0-4244">4244</a></span>
<span class="normal"><a href="#__codelineno-0-4245">4245</a></span>
<span class="normal"><a href="#__codelineno-0-4246">4246</a></span>
<span class="normal"><a href="#__codelineno-0-4247">4247</a></span>
<span class="normal"><a href="#__codelineno-0-4248">4248</a></span>
<span class="normal"><a href="#__codelineno-0-4249">4249</a></span>
<span class="normal"><a href="#__codelineno-0-4250">4250</a></span>
<span class="normal"><a href="#__codelineno-0-4251">4251</a></span>
<span class="normal"><a href="#__codelineno-0-4252">4252</a></span>
<span class="normal"><a href="#__codelineno-0-4253">4253</a></span>
<span class="normal"><a href="#__codelineno-0-4254">4254</a></span>
<span class="normal"><a href="#__codelineno-0-4255">4255</a></span>
<span class="normal"><a href="#__codelineno-0-4256">4256</a></span>
<span class="normal"><a href="#__codelineno-0-4257">4257</a></span>
<span class="normal"><a href="#__codelineno-0-4258">4258</a></span>
<span class="normal"><a href="#__codelineno-0-4259">4259</a></span>
<span class="normal"><a href="#__codelineno-0-4260">4260</a></span>
<span class="normal"><a href="#__codelineno-0-4261">4261</a></span>
<span class="normal"><a href="#__codelineno-0-4262">4262</a></span>
<span class="normal"><a href="#__codelineno-0-4263">4263</a></span>
<span class="normal"><a href="#__codelineno-0-4264">4264</a></span>
<span class="normal"><a href="#__codelineno-0-4265">4265</a></span>
<span class="normal"><a href="#__codelineno-0-4266">4266</a></span>
<span class="normal"><a href="#__codelineno-0-4267">4267</a></span>
<span class="normal"><a href="#__codelineno-0-4268">4268</a></span>
<span class="normal"><a href="#__codelineno-0-4269">4269</a></span>
<span class="normal"><a href="#__codelineno-0-4270">4270</a></span>
<span class="normal"><a href="#__codelineno-0-4271">4271</a></span>
<span class="normal"><a href="#__codelineno-0-4272">4272</a></span>
<span class="normal"><a href="#__codelineno-0-4273">4273</a></span>
<span class="normal"><a href="#__codelineno-0-4274">4274</a></span>
<span class="normal"><a href="#__codelineno-0-4275">4275</a></span>
<span class="normal"><a href="#__codelineno-0-4276">4276</a></span>
<span class="normal"><a href="#__codelineno-0-4277">4277</a></span>
<span class="normal"><a href="#__codelineno-0-4278">4278</a></span>
<span class="normal"><a href="#__codelineno-0-4279">4279</a></span>
<span class="normal"><a href="#__codelineno-0-4280">4280</a></span>
<span class="normal"><a href="#__codelineno-0-4281">4281</a></span>
<span class="normal"><a href="#__codelineno-0-4282">4282</a></span>
<span class="normal"><a href="#__codelineno-0-4283">4283</a></span>
<span class="normal"><a href="#__codelineno-0-4284">4284</a></span>
<span class="normal"><a href="#__codelineno-0-4285">4285</a></span>
<span class="normal"><a href="#__codelineno-0-4286">4286</a></span>
<span class="normal"><a href="#__codelineno-0-4287">4287</a></span>
<span class="normal"><a href="#__codelineno-0-4288">4288</a></span>
<span class="normal"><a href="#__codelineno-0-4289">4289</a></span>
<span class="normal"><a href="#__codelineno-0-4290">4290</a></span>
<span class="normal"><a href="#__codelineno-0-4291">4291</a></span>
<span class="normal"><a href="#__codelineno-0-4292">4292</a></span>
<span class="normal"><a href="#__codelineno-0-4293">4293</a></span>
<span class="normal"><a href="#__codelineno-0-4294">4294</a></span>
<span class="normal"><a href="#__codelineno-0-4295">4295</a></span>
<span class="normal"><a href="#__codelineno-0-4296">4296</a></span>
<span class="normal"><a href="#__codelineno-0-4297">4297</a></span>
<span class="normal"><a href="#__codelineno-0-4298">4298</a></span>
<span class="normal"><a href="#__codelineno-0-4299">4299</a></span>
<span class="normal"><a href="#__codelineno-0-4300">4300</a></span>
<span class="normal"><a href="#__codelineno-0-4301">4301</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4207" name="__codelineno-0-4207"></a><span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-4208" name="__codelineno-0-4208"></a><span class="k">def</span><span class="w"> </span><span class="nf">utility</span><span class="p">(</span>
<a id="__codelineno-0-4209" name="__codelineno-0-4209"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-4210" name="__codelineno-0-4210"></a>    <span class="n">obj_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-4211" name="__codelineno-0-4211"></a>    <span class="o">*</span><span class="p">,</span>
<a id="__codelineno-0-4212" name="__codelineno-0-4212"></a>    <span class="n">ranking_method</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-4213" name="__codelineno-0-4213"></a>    <span class="n">check_nans</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-4214" name="__codelineno-0-4214"></a>    <span class="n">using_values_dtype</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-4215" name="__codelineno-0-4215"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-0-4216" name="__codelineno-0-4216"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4217" name="__codelineno-0-4217"></a><span class="sd">    Return numeric scores for each solution.</span>
<a id="__codelineno-0-4218" name="__codelineno-0-4218"></a>
<a id="__codelineno-0-4219" name="__codelineno-0-4219"></a><span class="sd">    Utility scores are different from evaluation results,</span>
<a id="__codelineno-0-4220" name="__codelineno-0-4220"></a><span class="sd">    in the sense that utilities monotonically increase from</span>
<a id="__codelineno-0-4221" name="__codelineno-0-4221"></a><span class="sd">    bad solutions to good solutions, regardless of the</span>
<a id="__codelineno-0-4222" name="__codelineno-0-4222"></a><span class="sd">    objective sense.</span>
<a id="__codelineno-0-4223" name="__codelineno-0-4223"></a>
<a id="__codelineno-0-4224" name="__codelineno-0-4224"></a><span class="sd">    **If ranking method is passed as None:**</span>
<a id="__codelineno-0-4225" name="__codelineno-0-4225"></a><span class="sd">    if the objective sense is &#39;max&#39;, the evaluation results are returned</span>
<a id="__codelineno-0-4226" name="__codelineno-0-4226"></a><span class="sd">    as the utility scores; otherwise, if the objective sense is &#39;min&#39;,</span>
<a id="__codelineno-0-4227" name="__codelineno-0-4227"></a><span class="sd">    the evaluation results multiplied by -1 are returned as the</span>
<a id="__codelineno-0-4228" name="__codelineno-0-4228"></a><span class="sd">    utility scores.</span>
<a id="__codelineno-0-4229" name="__codelineno-0-4229"></a>
<a id="__codelineno-0-4230" name="__codelineno-0-4230"></a><span class="sd">    **If the name of a ranking method is given** (e.g. &#39;centered&#39;):</span>
<a id="__codelineno-0-4231" name="__codelineno-0-4231"></a><span class="sd">    then the solutions are ranked (best solutions having the</span>
<a id="__codelineno-0-4232" name="__codelineno-0-4232"></a><span class="sd">    highest rank), and those ranks are returned as the utility</span>
<a id="__codelineno-0-4233" name="__codelineno-0-4233"></a><span class="sd">    scores.</span>
<a id="__codelineno-0-4234" name="__codelineno-0-4234"></a>
<a id="__codelineno-0-4235" name="__codelineno-0-4235"></a><span class="sd">    **If an objective index is not provided:** (i.e. passed as None)</span>
<a id="__codelineno-0-4236" name="__codelineno-0-4236"></a><span class="sd">    if the problem is multi-objective, the utility scores</span>
<a id="__codelineno-0-4237" name="__codelineno-0-4237"></a><span class="sd">    for each objective is given, in a tensor shaped (n, m),</span>
<a id="__codelineno-0-4238" name="__codelineno-0-4238"></a><span class="sd">    n being the number of solutions and m being the number</span>
<a id="__codelineno-0-4239" name="__codelineno-0-4239"></a><span class="sd">    of objectives; otherwise, if the problem is single-objective,</span>
<a id="__codelineno-0-4240" name="__codelineno-0-4240"></a><span class="sd">    the utility scores for each objective is given in a 1-dimensional</span>
<a id="__codelineno-0-4241" name="__codelineno-0-4241"></a><span class="sd">    tensor of length n, n being the number of solutions.</span>
<a id="__codelineno-0-4242" name="__codelineno-0-4242"></a>
<a id="__codelineno-0-4243" name="__codelineno-0-4243"></a><span class="sd">    **If an objective index is provided as an int:**</span>
<a id="__codelineno-0-4244" name="__codelineno-0-4244"></a><span class="sd">    the utility scores are returned in a 1-dimensional tensor</span>
<a id="__codelineno-0-4245" name="__codelineno-0-4245"></a><span class="sd">    of length n, n being the number of solutions.</span>
<a id="__codelineno-0-4246" name="__codelineno-0-4246"></a>
<a id="__codelineno-0-4247" name="__codelineno-0-4247"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-4248" name="__codelineno-0-4248"></a><span class="sd">        obj_index: Expected as None, or as an integer.</span>
<a id="__codelineno-0-4249" name="__codelineno-0-4249"></a><span class="sd">            In the single-objective case, None is equivalent to 0.</span>
<a id="__codelineno-0-4250" name="__codelineno-0-4250"></a><span class="sd">            In the multi-objective case, None means &quot;for each</span>
<a id="__codelineno-0-4251" name="__codelineno-0-4251"></a><span class="sd">            objective&quot;.</span>
<a id="__codelineno-0-4252" name="__codelineno-0-4252"></a><span class="sd">        ranking_method: If the utility scores are to be generated</span>
<a id="__codelineno-0-4253" name="__codelineno-0-4253"></a><span class="sd">            according to a certain ranking method, pass here the name</span>
<a id="__codelineno-0-4254" name="__codelineno-0-4254"></a><span class="sd">            of that ranking method as a str (e.g. &#39;centered&#39;).</span>
<a id="__codelineno-0-4255" name="__codelineno-0-4255"></a><span class="sd">        check_nans: Check for nan (not-a-number) values in the</span>
<a id="__codelineno-0-4256" name="__codelineno-0-4256"></a><span class="sd">            evaluation results, which is an indication of</span>
<a id="__codelineno-0-4257" name="__codelineno-0-4257"></a><span class="sd">            unevaluated solutions.</span>
<a id="__codelineno-0-4258" name="__codelineno-0-4258"></a><span class="sd">        using_values_dtype: If True, the utility values will be returned</span>
<a id="__codelineno-0-4259" name="__codelineno-0-4259"></a><span class="sd">            using the dtype of the decision values.</span>
<a id="__codelineno-0-4260" name="__codelineno-0-4260"></a><span class="sd">            If False, the utility values will be returned using the dtype</span>
<a id="__codelineno-0-4261" name="__codelineno-0-4261"></a><span class="sd">            of the evaluation data.</span>
<a id="__codelineno-0-4262" name="__codelineno-0-4262"></a><span class="sd">            The default is False.</span>
<a id="__codelineno-0-4263" name="__codelineno-0-4263"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-4264" name="__codelineno-0-4264"></a><span class="sd">        Utility scores, in a PyTorch tensor.</span>
<a id="__codelineno-0-4265" name="__codelineno-0-4265"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4266" name="__codelineno-0-4266"></a>    <span class="k">if</span> <span class="n">obj_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-4267" name="__codelineno-0-4267"></a>        <span class="n">obj_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normalize_obj_index</span><span class="p">(</span><span class="n">obj_index</span><span class="p">)</span>
<a id="__codelineno-0-4268" name="__codelineno-0-4268"></a>
<a id="__codelineno-0-4269" name="__codelineno-0-4269"></a>        <span class="n">evdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evdata</span><span class="p">[:,</span> <span class="n">obj_index</span><span class="p">]</span>
<a id="__codelineno-0-4270" name="__codelineno-0-4270"></a>        <span class="k">if</span> <span class="n">check_nans</span><span class="p">:</span>
<a id="__codelineno-0-4271" name="__codelineno-0-4271"></a>            <span class="k">if</span> <span class="n">torch</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">evdata</span><span class="p">)):</span>
<a id="__codelineno-0-4272" name="__codelineno-0-4272"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4273" name="__codelineno-0-4273"></a>                    <span class="s2">&quot;Cannot compute the utility values, because there are solutions which are not evaluated yet.&quot;</span>
<a id="__codelineno-0-4274" name="__codelineno-0-4274"></a>                <span class="p">)</span>
<a id="__codelineno-0-4275" name="__codelineno-0-4275"></a>
<a id="__codelineno-0-4276" name="__codelineno-0-4276"></a>        <span class="k">if</span> <span class="n">ranking_method</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-4277" name="__codelineno-0-4277"></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">evdata</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_objective_sign</span><span class="p">(</span><span class="n">obj_index</span><span class="p">)</span>
<a id="__codelineno-0-4278" name="__codelineno-0-4278"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4279" name="__codelineno-0-4279"></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">rank</span><span class="p">(</span><span class="n">evdata</span><span class="p">,</span> <span class="n">ranking_method</span><span class="o">=</span><span class="n">ranking_method</span><span class="p">,</span> <span class="n">higher_is_better</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_descending</span><span class="p">[</span><span class="n">obj_index</span><span class="p">])</span>
<a id="__codelineno-0-4280" name="__codelineno-0-4280"></a>
<a id="__codelineno-0-4281" name="__codelineno-0-4281"></a>        <span class="k">if</span> <span class="n">using_values_dtype</span><span class="p">:</span>
<a id="__codelineno-0-4282" name="__codelineno-0-4282"></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">as_tensor</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-0-4283" name="__codelineno-0-4283"></a>
<a id="__codelineno-0-4284" name="__codelineno-0-4284"></a>        <span class="k">return</span> <span class="n">result</span>
<a id="__codelineno-0-4285" name="__codelineno-0-4285"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4286" name="__codelineno-0-4286"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_objs</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-4287" name="__codelineno-0-4287"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">utility</span><span class="p">(</span>
<a id="__codelineno-0-4288" name="__codelineno-0-4288"></a>                <span class="mi">0</span><span class="p">,</span> <span class="n">ranking_method</span><span class="o">=</span><span class="n">ranking_method</span><span class="p">,</span> <span class="n">check_nans</span><span class="o">=</span><span class="n">check_nans</span><span class="p">,</span> <span class="n">using_values_dtype</span><span class="o">=</span><span class="n">using_values_dtype</span>
<a id="__codelineno-0-4289" name="__codelineno-0-4289"></a>            <span class="p">)</span>
<a id="__codelineno-0-4290" name="__codelineno-0-4290"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4291" name="__codelineno-0-4291"></a>            <span class="k">return</span> <span class="n">torch</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span>
<a id="__codelineno-0-4292" name="__codelineno-0-4292"></a>                <span class="p">[</span>
<a id="__codelineno-0-4293" name="__codelineno-0-4293"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">utility</span><span class="p">(</span>
<a id="__codelineno-0-4294" name="__codelineno-0-4294"></a>                        <span class="n">j</span><span class="p">,</span>
<a id="__codelineno-0-4295" name="__codelineno-0-4295"></a>                        <span class="n">ranking_method</span><span class="o">=</span><span class="n">ranking_method</span><span class="p">,</span>
<a id="__codelineno-0-4296" name="__codelineno-0-4296"></a>                        <span class="n">check_nans</span><span class="o">=</span><span class="n">check_nans</span><span class="p">,</span>
<a id="__codelineno-0-4297" name="__codelineno-0-4297"></a>                        <span class="n">using_values_dtype</span><span class="o">=</span><span class="n">using_values_dtype</span><span class="p">,</span>
<a id="__codelineno-0-4298" name="__codelineno-0-4298"></a>                    <span class="p">)</span>
<a id="__codelineno-0-4299" name="__codelineno-0-4299"></a>                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_objs</span><span class="p">)</span>
<a id="__codelineno-0-4300" name="__codelineno-0-4300"></a>                <span class="p">],</span>
<a id="__codelineno-0-4301" name="__codelineno-0-4301"></a>            <span class="p">)</span><span class="o">.</span><span class="n">T</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="evotorch.SolutionBatch.utils" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">utils</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">ranking_method</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">check_nans</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">using_values_dtype</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#evotorch.SolutionBatch.utils" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return numeric scores for each solution, and for each objective.
Utility scores are different from evaluation results,
in the sense that utilities monotonically increase from
bad solutions to good solutions, regardless of the
objective sense.</p>
<p>Unlike the method called <code>utility(...)</code>, this function returns
a 2-dimensional tensor even when the problem is single-objective.</p>
<p>The result of this method is always a 2-dimensional tensor of
shape <code>(n, m)</code>, <code>n</code> being the number of solutions, <code>m</code> being the
number of objectives.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>ranking_method</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the utility scores are to be generated
according to a certain ranking method, pass here the name
of that ranking method as a str (e.g. 'centered').</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>check_nans</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Check for nan (not-a-number) values in the
evaluation results, which is an indication of
unevaluated solutions.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>using_values_dtype</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, the utility values will be returned
using the dtype of the decision values.
If False, the utility values will be returned using the dtype
of the evaluation data.
The default is False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>evotorch/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4303">4303</a></span>
<span class="normal"><a href="#__codelineno-0-4304">4304</a></span>
<span class="normal"><a href="#__codelineno-0-4305">4305</a></span>
<span class="normal"><a href="#__codelineno-0-4306">4306</a></span>
<span class="normal"><a href="#__codelineno-0-4307">4307</a></span>
<span class="normal"><a href="#__codelineno-0-4308">4308</a></span>
<span class="normal"><a href="#__codelineno-0-4309">4309</a></span>
<span class="normal"><a href="#__codelineno-0-4310">4310</a></span>
<span class="normal"><a href="#__codelineno-0-4311">4311</a></span>
<span class="normal"><a href="#__codelineno-0-4312">4312</a></span>
<span class="normal"><a href="#__codelineno-0-4313">4313</a></span>
<span class="normal"><a href="#__codelineno-0-4314">4314</a></span>
<span class="normal"><a href="#__codelineno-0-4315">4315</a></span>
<span class="normal"><a href="#__codelineno-0-4316">4316</a></span>
<span class="normal"><a href="#__codelineno-0-4317">4317</a></span>
<span class="normal"><a href="#__codelineno-0-4318">4318</a></span>
<span class="normal"><a href="#__codelineno-0-4319">4319</a></span>
<span class="normal"><a href="#__codelineno-0-4320">4320</a></span>
<span class="normal"><a href="#__codelineno-0-4321">4321</a></span>
<span class="normal"><a href="#__codelineno-0-4322">4322</a></span>
<span class="normal"><a href="#__codelineno-0-4323">4323</a></span>
<span class="normal"><a href="#__codelineno-0-4324">4324</a></span>
<span class="normal"><a href="#__codelineno-0-4325">4325</a></span>
<span class="normal"><a href="#__codelineno-0-4326">4326</a></span>
<span class="normal"><a href="#__codelineno-0-4327">4327</a></span>
<span class="normal"><a href="#__codelineno-0-4328">4328</a></span>
<span class="normal"><a href="#__codelineno-0-4329">4329</a></span>
<span class="normal"><a href="#__codelineno-0-4330">4330</a></span>
<span class="normal"><a href="#__codelineno-0-4331">4331</a></span>
<span class="normal"><a href="#__codelineno-0-4332">4332</a></span>
<span class="normal"><a href="#__codelineno-0-4333">4333</a></span>
<span class="normal"><a href="#__codelineno-0-4334">4334</a></span>
<span class="normal"><a href="#__codelineno-0-4335">4335</a></span>
<span class="normal"><a href="#__codelineno-0-4336">4336</a></span>
<span class="normal"><a href="#__codelineno-0-4337">4337</a></span>
<span class="normal"><a href="#__codelineno-0-4338">4338</a></span>
<span class="normal"><a href="#__codelineno-0-4339">4339</a></span>
<span class="normal"><a href="#__codelineno-0-4340">4340</a></span>
<span class="normal"><a href="#__codelineno-0-4341">4341</a></span>
<span class="normal"><a href="#__codelineno-0-4342">4342</a></span>
<span class="normal"><a href="#__codelineno-0-4343">4343</a></span>
<span class="normal"><a href="#__codelineno-0-4344">4344</a></span>
<span class="normal"><a href="#__codelineno-0-4345">4345</a></span>
<span class="normal"><a href="#__codelineno-0-4346">4346</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4303" name="__codelineno-0-4303"></a><span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
<a id="__codelineno-0-4304" name="__codelineno-0-4304"></a><span class="k">def</span><span class="w"> </span><span class="nf">utils</span><span class="p">(</span>
<a id="__codelineno-0-4305" name="__codelineno-0-4305"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-4306" name="__codelineno-0-4306"></a>    <span class="o">*</span><span class="p">,</span>
<a id="__codelineno-0-4307" name="__codelineno-0-4307"></a>    <span class="n">ranking_method</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-4308" name="__codelineno-0-4308"></a>    <span class="n">check_nans</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-4309" name="__codelineno-0-4309"></a>    <span class="n">using_values_dtype</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-4310" name="__codelineno-0-4310"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-0-4311" name="__codelineno-0-4311"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-4312" name="__codelineno-0-4312"></a><span class="sd">    Return numeric scores for each solution, and for each objective.</span>
<a id="__codelineno-0-4313" name="__codelineno-0-4313"></a><span class="sd">    Utility scores are different from evaluation results,</span>
<a id="__codelineno-0-4314" name="__codelineno-0-4314"></a><span class="sd">    in the sense that utilities monotonically increase from</span>
<a id="__codelineno-0-4315" name="__codelineno-0-4315"></a><span class="sd">    bad solutions to good solutions, regardless of the</span>
<a id="__codelineno-0-4316" name="__codelineno-0-4316"></a><span class="sd">    objective sense.</span>
<a id="__codelineno-0-4317" name="__codelineno-0-4317"></a>
<a id="__codelineno-0-4318" name="__codelineno-0-4318"></a><span class="sd">    Unlike the method called `utility(...)`, this function returns</span>
<a id="__codelineno-0-4319" name="__codelineno-0-4319"></a><span class="sd">    a 2-dimensional tensor even when the problem is single-objective.</span>
<a id="__codelineno-0-4320" name="__codelineno-0-4320"></a>
<a id="__codelineno-0-4321" name="__codelineno-0-4321"></a><span class="sd">    The result of this method is always a 2-dimensional tensor of</span>
<a id="__codelineno-0-4322" name="__codelineno-0-4322"></a><span class="sd">    shape `(n, m)`, `n` being the number of solutions, `m` being the</span>
<a id="__codelineno-0-4323" name="__codelineno-0-4323"></a><span class="sd">    number of objectives.</span>
<a id="__codelineno-0-4324" name="__codelineno-0-4324"></a>
<a id="__codelineno-0-4325" name="__codelineno-0-4325"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-4326" name="__codelineno-0-4326"></a><span class="sd">        ranking_method: If the utility scores are to be generated</span>
<a id="__codelineno-0-4327" name="__codelineno-0-4327"></a><span class="sd">            according to a certain ranking method, pass here the name</span>
<a id="__codelineno-0-4328" name="__codelineno-0-4328"></a><span class="sd">            of that ranking method as a str (e.g. &#39;centered&#39;).</span>
<a id="__codelineno-0-4329" name="__codelineno-0-4329"></a><span class="sd">        check_nans: Check for nan (not-a-number) values in the</span>
<a id="__codelineno-0-4330" name="__codelineno-0-4330"></a><span class="sd">            evaluation results, which is an indication of</span>
<a id="__codelineno-0-4331" name="__codelineno-0-4331"></a><span class="sd">            unevaluated solutions.</span>
<a id="__codelineno-0-4332" name="__codelineno-0-4332"></a><span class="sd">        using_values_dtype: If True, the utility values will be returned</span>
<a id="__codelineno-0-4333" name="__codelineno-0-4333"></a><span class="sd">            using the dtype of the decision values.</span>
<a id="__codelineno-0-4334" name="__codelineno-0-4334"></a><span class="sd">            If False, the utility values will be returned using the dtype</span>
<a id="__codelineno-0-4335" name="__codelineno-0-4335"></a><span class="sd">            of the evaluation data.</span>
<a id="__codelineno-0-4336" name="__codelineno-0-4336"></a><span class="sd">            The default is False.</span>
<a id="__codelineno-0-4337" name="__codelineno-0-4337"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-4338" name="__codelineno-0-4338"></a><span class="sd">        Utility scores, in a 2-dimensional PyTorch tensor.</span>
<a id="__codelineno-0-4339" name="__codelineno-0-4339"></a>
<a id="__codelineno-0-4340" name="__codelineno-0-4340"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4341" name="__codelineno-0-4341"></a>    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">utility</span><span class="p">(</span>
<a id="__codelineno-0-4342" name="__codelineno-0-4342"></a>        <span class="n">ranking_method</span><span class="o">=</span><span class="n">ranking_method</span><span class="p">,</span> <span class="n">check_nans</span><span class="o">=</span><span class="n">check_nans</span><span class="p">,</span> <span class="n">using_values_dtype</span><span class="o">=</span><span class="n">using_values_dtype</span>
<a id="__codelineno-0-4343" name="__codelineno-0-4343"></a>    <span class="p">)</span>
<a id="__codelineno-0-4344" name="__codelineno-0-4344"></a>    <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-4345" name="__codelineno-0-4345"></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-4346" name="__codelineno-0-4346"></a>    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 NNAISENSE SA
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>